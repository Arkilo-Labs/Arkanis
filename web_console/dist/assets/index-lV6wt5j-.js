(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();function Jr(s){const t=Object.create(null);for(const e of s.split(","))t[e]=1;return e=>e in t}const ft={},ks=[],Te=()=>{},Ta=()=>!1,pn=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),Xr=s=>s.startsWith("onUpdate:"),Ft=Object.assign,Yr=(s,t)=>{const e=s.indexOf(t);e>-1&&s.splice(e,1)},Du=Object.prototype.hasOwnProperty,ht=(s,t)=>Du.call(s,t),X=Array.isArray,Os=s=>Ci(s)==="[object Map]",Us=s=>Ci(s)==="[object Set]",$o=s=>Ci(s)==="[object Date]",Z=s=>typeof s=="function",Ct=s=>typeof s=="string",de=s=>typeof s=="symbol",dt=s=>s!==null&&typeof s=="object",ka=s=>(dt(s)||Z(s))&&Z(s.then)&&Z(s.catch),Oa=Object.prototype.toString,Ci=s=>Oa.call(s),Iu=s=>Ci(s).slice(8,-1),Aa=s=>Ci(s)==="[object Object]",Qr=s=>Ct(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,ei=Jr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),mn=s=>{const t=Object.create(null);return(e=>t[e]||(t[e]=s(e)))},$u=/-\w/g,ns=mn(s=>s.replace($u,t=>t.slice(1).toUpperCase())),Bu=/\B([A-Z])/g,ws=mn(s=>s.replace(Bu,"-$1").toLowerCase()),La=mn(s=>s.charAt(0).toUpperCase()+s.slice(1)),In=mn(s=>s?`on${La(s)}`:""),es=(s,t)=>!Object.is(s,t),Ki=(s,...t)=>{for(let e=0;e<s.length;e++)s[e](...t)},Ra=(s,t,e,i=!1)=>{Object.defineProperty(s,t,{configurable:!0,enumerable:!1,writable:i,value:e})},vn=s=>{const t=parseFloat(s);return isNaN(t)?s:t};let Bo;const gn=()=>Bo||(Bo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function bn(s){if(X(s)){const t={};for(let e=0;e<s.length;e++){const i=s[e],n=Ct(i)?Uu(i):bn(i);if(n)for(const r in n)t[r]=n[r]}return t}else if(Ct(s)||dt(s))return s}const Fu=/;(?![^(]*\))/g,Vu=/:([^]+)/,zu=/\/\*[^]*?\*\//g;function Uu(s){const t={};return s.replace(zu,"").split(Fu).forEach(e=>{if(e){const i=e.split(Vu);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function vs(s){let t="";if(Ct(s))t=s;else if(X(s))for(let e=0;e<s.length;e++){const i=vs(s[e]);i&&(t+=i+" ")}else if(dt(s))for(const e in s)s[e]&&(t+=e+" ");return t.trim()}const Wu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",qu=Jr(Wu);function Pa(s){return!!s||s===""}function Hu(s,t){if(s.length!==t.length)return!1;let e=!0;for(let i=0;e&&i<s.length;i++)e=Mi(s[i],t[i]);return e}function Mi(s,t){if(s===t)return!0;let e=$o(s),i=$o(t);if(e||i)return e&&i?s.getTime()===t.getTime():!1;if(e=de(s),i=de(t),e||i)return s===t;if(e=X(s),i=X(t),e||i)return e&&i?Hu(s,t):!1;if(e=dt(s),i=dt(t),e||i){if(!e||!i)return!1;const n=Object.keys(s).length,r=Object.keys(t).length;if(n!==r)return!1;for(const o in s){const l=s.hasOwnProperty(o),a=t.hasOwnProperty(o);if(l&&!a||!l&&a||!Mi(s[o],t[o]))return!1}}return String(s)===String(t)}function Zr(s,t){return s.findIndex(e=>Mi(e,t))}const Na=s=>!!(s&&s.__v_isRef===!0),L=s=>Ct(s)?s:s==null?"":X(s)||dt(s)&&(s.toString===Oa||!Z(s.toString))?Na(s)?L(s.value):JSON.stringify(s,Da,2):String(s),Da=(s,t)=>Na(t)?Da(s,t.value):Os(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[i,n],r)=>(e[$n(i,r)+" =>"]=n,e),{})}:Us(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>$n(e))}:de(t)?$n(t):dt(t)&&!X(t)&&!Aa(t)?String(t):t,$n=(s,t="")=>{var e;return de(s)?`Symbol(${(e=s.description)!=null?e:t})`:s};let Qt;class ju{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Qt,!t&&Qt&&(this.index=(Qt.scopes||(Qt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=Qt;try{return Qt=this,t()}finally{Qt=e}}}on(){++this._on===1&&(this.prevScope=Qt,Qt=this)}off(){this._on>0&&--this._on===0&&(Qt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let e,i;for(e=0,i=this.effects.length;e<i;e++)this.effects[e].stop();for(this.effects.length=0,e=0,i=this.cleanups.length;e<i;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Ku(){return Qt}let mt;const Bn=new WeakSet;class Ia{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Qt&&Qt.active&&Qt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Bn.has(this)&&(Bn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ba(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Fo(this),Fa(this);const t=mt,e=ce;mt=this,ce=!0;try{return this.fn()}finally{Va(this),mt=t,ce=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)so(t);this.deps=this.depsTail=void 0,Fo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Bn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){yr(this)&&this.run()}get dirty(){return yr(this)}}let $a=0,si,ii;function Ba(s,t=!1){if(s.flags|=8,t){s.next=ii,ii=s;return}s.next=si,si=s}function to(){$a++}function eo(){if(--$a>0)return;if(ii){let t=ii;for(ii=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let s;for(;si;){let t=si;for(si=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){s||(s=i)}t=e}}if(s)throw s}function Fa(s){for(let t=s.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Va(s){let t,e=s.depsTail,i=e;for(;i;){const n=i.prevDep;i.version===-1?(i===e&&(e=n),so(i),Gu(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}s.deps=t,s.depsTail=e}function yr(s){for(let t=s.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(za(t.dep.computed)||t.dep.version!==t.version))return!0;return!!s._dirty}function za(s){if(s.flags&4&&!(s.flags&16)||(s.flags&=-17,s.globalVersion===fi)||(s.globalVersion=fi,!s.isSSR&&s.flags&128&&(!s.deps&&!s._dirty||!yr(s))))return;s.flags|=2;const t=s.dep,e=mt,i=ce;mt=s,ce=!0;try{Fa(s);const n=s.fn(s._value);(t.version===0||es(n,s._value))&&(s.flags|=128,s._value=n,t.version++)}catch(n){throw t.version++,n}finally{mt=e,ce=i,Va(s),s.flags&=-3}}function so(s,t=!1){const{dep:e,prevSub:i,nextSub:n}=s;if(i&&(i.nextSub=n,s.prevSub=void 0),n&&(n.prevSub=i,s.nextSub=void 0),e.subs===s&&(e.subs=i,!i&&e.computed)){e.computed.flags&=-5;for(let r=e.computed.deps;r;r=r.nextDep)so(r,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function Gu(s){const{prevDep:t,nextDep:e}=s;t&&(t.nextDep=e,s.prevDep=void 0),e&&(e.prevDep=t,s.nextDep=void 0)}let ce=!0;const Ua=[];function ze(){Ua.push(ce),ce=!1}function Ue(){const s=Ua.pop();ce=s===void 0?!0:s}function Fo(s){const{cleanup:t}=s;if(s.cleanup=void 0,t){const e=mt;mt=void 0;try{t()}finally{mt=e}}}let fi=0;class Ju{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class io{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!mt||!ce||mt===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==mt)e=this.activeLink=new Ju(mt,this),mt.deps?(e.prevDep=mt.depsTail,mt.depsTail.nextDep=e,mt.depsTail=e):mt.deps=mt.depsTail=e,Wa(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const i=e.nextDep;i.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=i),e.prevDep=mt.depsTail,e.nextDep=void 0,mt.depsTail.nextDep=e,mt.depsTail=e,mt.deps===e&&(mt.deps=i)}return e}trigger(t){this.version++,fi++,this.notify(t)}notify(t){to();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{eo()}}}function Wa(s){if(s.dep.sc++,s.sub.flags&4){const t=s.dep.computed;if(t&&!s.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)Wa(i)}const e=s.dep.subs;e!==s&&(s.prevSub=e,e&&(e.nextSub=s)),s.dep.subs=s}}const _r=new WeakMap,ds=Symbol(""),wr=Symbol(""),di=Symbol("");function It(s,t,e){if(ce&&mt){let i=_r.get(s);i||_r.set(s,i=new Map);let n=i.get(e);n||(i.set(e,n=new io),n.map=i,n.key=e),n.track()}}function Ie(s,t,e,i,n,r){const o=_r.get(s);if(!o){fi++;return}const l=a=>{a&&a.trigger()};if(to(),t==="clear")o.forEach(l);else{const a=X(s),h=a&&Qr(e);if(a&&e==="length"){const u=Number(i);o.forEach((c,d)=>{(d==="length"||d===di||!de(d)&&d>=u)&&l(c)})}else switch((e!==void 0||o.has(void 0))&&l(o.get(e)),h&&l(o.get(di)),t){case"add":a?h&&l(o.get("length")):(l(o.get(ds)),Os(s)&&l(o.get(wr)));break;case"delete":a||(l(o.get(ds)),Os(s)&&l(o.get(wr)));break;case"set":Os(s)&&l(o.get(ds));break}}eo()}function Ss(s){const t=at(s);return t===s?t:(It(t,"iterate",di),le(s)?t:t.map(pe))}function yn(s){return It(s=at(s),"iterate",di),s}function Xe(s,t){return We(s)?ps(s)?Ns(pe(t)):Ns(t):pe(t)}const Xu={__proto__:null,[Symbol.iterator](){return Fn(this,Symbol.iterator,s=>Xe(this,s))},concat(...s){return Ss(this).concat(...s.map(t=>X(t)?Ss(t):t))},entries(){return Fn(this,"entries",s=>(s[1]=Xe(this,s[1]),s))},every(s,t){return Pe(this,"every",s,t,void 0,arguments)},filter(s,t){return Pe(this,"filter",s,t,e=>e.map(i=>Xe(this,i)),arguments)},find(s,t){return Pe(this,"find",s,t,e=>Xe(this,e),arguments)},findIndex(s,t){return Pe(this,"findIndex",s,t,void 0,arguments)},findLast(s,t){return Pe(this,"findLast",s,t,e=>Xe(this,e),arguments)},findLastIndex(s,t){return Pe(this,"findLastIndex",s,t,void 0,arguments)},forEach(s,t){return Pe(this,"forEach",s,t,void 0,arguments)},includes(...s){return Vn(this,"includes",s)},indexOf(...s){return Vn(this,"indexOf",s)},join(s){return Ss(this).join(s)},lastIndexOf(...s){return Vn(this,"lastIndexOf",s)},map(s,t){return Pe(this,"map",s,t,void 0,arguments)},pop(){return Gs(this,"pop")},push(...s){return Gs(this,"push",s)},reduce(s,...t){return Vo(this,"reduce",s,t)},reduceRight(s,...t){return Vo(this,"reduceRight",s,t)},shift(){return Gs(this,"shift")},some(s,t){return Pe(this,"some",s,t,void 0,arguments)},splice(...s){return Gs(this,"splice",s)},toReversed(){return Ss(this).toReversed()},toSorted(s){return Ss(this).toSorted(s)},toSpliced(...s){return Ss(this).toSpliced(...s)},unshift(...s){return Gs(this,"unshift",s)},values(){return Fn(this,"values",s=>Xe(this,s))}};function Fn(s,t,e){const i=yn(s),n=i[t]();return i!==s&&!le(s)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.done||(r.value=e(r.value)),r}),n}const Yu=Array.prototype;function Pe(s,t,e,i,n,r){const o=yn(s),l=o!==s&&!le(s),a=o[t];if(a!==Yu[t]){const c=a.apply(s,r);return l?pe(c):c}let h=e;o!==s&&(l?h=function(c,d){return e.call(this,Xe(s,c),d,s)}:e.length>2&&(h=function(c,d){return e.call(this,c,d,s)}));const u=a.call(o,h,i);return l&&n?n(u):u}function Vo(s,t,e,i){const n=yn(s);let r=e;return n!==s&&(le(s)?e.length>3&&(r=function(o,l,a){return e.call(this,o,l,a,s)}):r=function(o,l,a){return e.call(this,o,Xe(s,l),a,s)}),n[t](r,...i)}function Vn(s,t,e){const i=at(s);It(i,"iterate",di);const n=i[t](...e);return(n===-1||n===!1)&&oo(e[0])?(e[0]=at(e[0]),i[t](...e)):n}function Gs(s,t,e=[]){ze(),to();const i=at(s)[t].apply(s,e);return eo(),Ue(),i}const Qu=Jr("__proto__,__v_isRef,__isVue"),qa=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(de));function Zu(s){de(s)||(s=String(s));const t=at(this);return It(t,"has",s),t.hasOwnProperty(s)}class Ha{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,i){if(e==="__v_skip")return t.__v_skip;const n=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!n;if(e==="__v_isReadonly")return n;if(e==="__v_isShallow")return r;if(e==="__v_raw")return i===(n?r?hc:Ja:r?Ga:Ka).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const o=X(t);if(!n){let a;if(o&&(a=Xu[e]))return a;if(e==="hasOwnProperty")return Zu}const l=Reflect.get(t,e,Bt(t)?t:i);if((de(e)?qa.has(e):Qu(e))||(n||It(t,"get",e),r))return l;if(Bt(l)){const a=o&&Qr(e)?l:l.value;return n&&dt(a)?xr(a):a}return dt(l)?n?xr(l):jt(l):l}}class ja extends Ha{constructor(t=!1){super(!1,t)}set(t,e,i,n){let r=t[e];const o=X(t)&&Qr(e);if(!this._isShallow){const h=We(r);if(!le(i)&&!We(i)&&(r=at(r),i=at(i)),!o&&Bt(r)&&!Bt(i))return h||(r.value=i),!0}const l=o?Number(e)<t.length:ht(t,e),a=Reflect.set(t,e,i,Bt(t)?t:n);return t===at(n)&&(l?es(i,r)&&Ie(t,"set",e,i):Ie(t,"add",e,i)),a}deleteProperty(t,e){const i=ht(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&i&&Ie(t,"delete",e,void 0),n}has(t,e){const i=Reflect.has(t,e);return(!de(e)||!qa.has(e))&&It(t,"has",e),i}ownKeys(t){return It(t,"iterate",X(t)?"length":ds),Reflect.ownKeys(t)}}class tc extends Ha{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const ec=new ja,sc=new tc,ic=new ja(!0);const Sr=s=>s,Ri=s=>Reflect.getPrototypeOf(s);function nc(s,t,e){return function(...i){const n=this.__v_raw,r=at(n),o=Os(r),l=s==="entries"||s===Symbol.iterator&&o,a=s==="keys"&&o,h=n[s](...i),u=e?Sr:t?Ns:pe;return!t&&It(r,"iterate",a?wr:ds),{next(){const{value:c,done:d}=h.next();return d?{value:c,done:d}:{value:l?[u(c[0]),u(c[1])]:u(c),done:d}},[Symbol.iterator](){return this}}}}function Pi(s){return function(...t){return s==="delete"?!1:s==="clear"?void 0:this}}function rc(s,t){const e={get(n){const r=this.__v_raw,o=at(r),l=at(n);s||(es(n,l)&&It(o,"get",n),It(o,"get",l));const{has:a}=Ri(o),h=t?Sr:s?Ns:pe;if(a.call(o,n))return h(r.get(n));if(a.call(o,l))return h(r.get(l));r!==o&&r.get(n)},get size(){const n=this.__v_raw;return!s&&It(at(n),"iterate",ds),n.size},has(n){const r=this.__v_raw,o=at(r),l=at(n);return s||(es(n,l)&&It(o,"has",n),It(o,"has",l)),n===l?r.has(n):r.has(n)||r.has(l)},forEach(n,r){const o=this,l=o.__v_raw,a=at(l),h=t?Sr:s?Ns:pe;return!s&&It(a,"iterate",ds),l.forEach((u,c)=>n.call(r,h(u),h(c),o))}};return Ft(e,s?{add:Pi("add"),set:Pi("set"),delete:Pi("delete"),clear:Pi("clear")}:{add(n){!t&&!le(n)&&!We(n)&&(n=at(n));const r=at(this);return Ri(r).has.call(r,n)||(r.add(n),Ie(r,"add",n,n)),this},set(n,r){!t&&!le(r)&&!We(r)&&(r=at(r));const o=at(this),{has:l,get:a}=Ri(o);let h=l.call(o,n);h||(n=at(n),h=l.call(o,n));const u=a.call(o,n);return o.set(n,r),h?es(r,u)&&Ie(o,"set",n,r):Ie(o,"add",n,r),this},delete(n){const r=at(this),{has:o,get:l}=Ri(r);let a=o.call(r,n);a||(n=at(n),a=o.call(r,n)),l&&l.call(r,n);const h=r.delete(n);return a&&Ie(r,"delete",n,void 0),h},clear(){const n=at(this),r=n.size!==0,o=n.clear();return r&&Ie(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{e[n]=nc(n,s,t)}),e}function no(s,t){const e=rc(s,t);return(i,n,r)=>n==="__v_isReactive"?!s:n==="__v_isReadonly"?s:n==="__v_raw"?i:Reflect.get(ht(e,n)&&n in i?e:i,n,r)}const oc={get:no(!1,!1)},lc={get:no(!1,!0)},ac={get:no(!0,!1)};const Ka=new WeakMap,Ga=new WeakMap,Ja=new WeakMap,hc=new WeakMap;function uc(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function cc(s){return s.__v_skip||!Object.isExtensible(s)?0:uc(Iu(s))}function jt(s){return We(s)?s:ro(s,!1,ec,oc,Ka)}function Xa(s){return ro(s,!1,ic,lc,Ga)}function xr(s){return ro(s,!0,sc,ac,Ja)}function ro(s,t,e,i,n){if(!dt(s)||s.__v_raw&&!(t&&s.__v_isReactive))return s;const r=cc(s);if(r===0)return s;const o=n.get(s);if(o)return o;const l=new Proxy(s,r===2?i:e);return n.set(s,l),l}function ps(s){return We(s)?ps(s.__v_raw):!!(s&&s.__v_isReactive)}function We(s){return!!(s&&s.__v_isReadonly)}function le(s){return!!(s&&s.__v_isShallow)}function oo(s){return s?!!s.__v_raw:!1}function at(s){const t=s&&s.__v_raw;return t?at(t):s}function fc(s){return!ht(s,"__v_skip")&&Object.isExtensible(s)&&Ra(s,"__v_skip",!0),s}const pe=s=>dt(s)?jt(s):s,Ns=s=>dt(s)?xr(s):s;function Bt(s){return s?s.__v_isRef===!0:!1}function W(s){return Ya(s,!1)}function dc(s){return Ya(s,!0)}function Ya(s,t){return Bt(s)?s:new pc(s,t)}class pc{constructor(t,e){this.dep=new io,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:at(t),this._value=e?t:pe(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,i=this.__v_isShallow||le(t)||We(t);t=i?t:at(t),es(t,e)&&(this._rawValue=t,this._value=i?t:pe(t),this.dep.trigger())}}function Rt(s){return Bt(s)?s.value:s}const mc={get:(s,t,e)=>t==="__v_raw"?s:Rt(Reflect.get(s,t,e)),set:(s,t,e,i)=>{const n=s[t];return Bt(n)&&!Bt(e)?(n.value=e,!0):Reflect.set(s,t,e,i)}};function Qa(s){return ps(s)?s:new Proxy(s,mc)}class vc{constructor(t,e,i){this.fn=t,this.setter=e,this._value=void 0,this.dep=new io(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=fi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&mt!==this)return Ba(this,!0),!0}get value(){const t=this.dep.track();return za(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function gc(s,t,e=!1){let i,n;return Z(s)?i=s:(i=s.get,n=s.set),new vc(i,n,e)}const Ni={},nn=new WeakMap;let cs;function bc(s,t=!1,e=cs){if(e){let i=nn.get(e);i||nn.set(e,i=[]),i.push(s)}}function yc(s,t,e=ft){const{immediate:i,deep:n,once:r,scheduler:o,augmentJob:l,call:a}=e,h=D=>n?D:le(D)||n===!1||n===0?$e(D,1):$e(D);let u,c,d,p,g=!1,v=!1;if(Bt(s)?(c=()=>s.value,g=le(s)):ps(s)?(c=()=>h(s),g=!0):X(s)?(v=!0,g=s.some(D=>ps(D)||le(D)),c=()=>s.map(D=>{if(Bt(D))return D.value;if(ps(D))return h(D);if(Z(D))return a?a(D,2):D()})):Z(s)?t?c=a?()=>a(s,2):s:c=()=>{if(d){ze();try{d()}finally{Ue()}}const D=cs;cs=u;try{return a?a(s,3,[p]):s(p)}finally{cs=D}}:c=Te,t&&n){const D=c,J=n===!0?1/0:n;c=()=>$e(D(),J)}const S=Ku(),_=()=>{u.stop(),S&&S.active&&Yr(S.effects,u)};if(r&&t){const D=t;t=(...J)=>{D(...J),_()}}let b=v?new Array(s.length).fill(Ni):Ni;const M=D=>{if(!(!(u.flags&1)||!u.dirty&&!D))if(t){const J=u.run();if(n||g||(v?J.some((tt,Y)=>es(tt,b[Y])):es(J,b))){d&&d();const tt=cs;cs=u;try{const Y=[J,b===Ni?void 0:v&&b[0]===Ni?[]:b,p];b=J,a?a(t,3,Y):t(...Y)}finally{cs=tt}}}else u.run()};return l&&l(M),u=new Ia(c),u.scheduler=o?()=>o(M,!1):M,p=D=>bc(D,!1,u),d=u.onStop=()=>{const D=nn.get(u);if(D){if(a)a(D,4);else for(const J of D)J();nn.delete(u)}},t?i?M(!0):b=u.run():o?o(M.bind(null,!0),!0):u.run(),_.pause=u.pause.bind(u),_.resume=u.resume.bind(u),_.stop=_,_}function $e(s,t=1/0,e){if(t<=0||!dt(s)||s.__v_skip||(e=e||new Map,(e.get(s)||0)>=t))return s;if(e.set(s,t),t--,Bt(s))$e(s.value,t,e);else if(X(s))for(let i=0;i<s.length;i++)$e(s[i],t,e);else if(Us(s)||Os(s))s.forEach(i=>{$e(i,t,e)});else if(Aa(s)){for(const i in s)$e(s[i],t,e);for(const i of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,i)&&$e(s[i],t,e)}return s}function Ti(s,t,e,i){try{return i?s(...i):s()}catch(n){_n(n,t,e)}}function Oe(s,t,e,i){if(Z(s)){const n=Ti(s,t,e,i);return n&&ka(n)&&n.catch(r=>{_n(r,t,e)}),n}if(X(s)){const n=[];for(let r=0;r<s.length;r++)n.push(Oe(s[r],t,e,i));return n}}function _n(s,t,e,i=!0){const n=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||ft;if(t){let l=t.parent;const a=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${e}`;for(;l;){const u=l.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](s,a,h)===!1)return}l=l.parent}if(r){ze(),Ti(r,null,10,[s,a,h]),Ue();return}}_c(s,e,n,i,o)}function _c(s,t,e,i=!0,n=!1){if(n)throw s;console.error(s)}const qt=[];let Ee=-1;const As=[];let Ye=null,Es=0;const Za=Promise.resolve();let rn=null;function Ds(s){const t=rn||Za;return s?t.then(this?s.bind(this):s):t}function wc(s){let t=Ee+1,e=qt.length;for(;t<e;){const i=t+e>>>1,n=qt[i],r=pi(n);r<s||r===s&&n.flags&2?t=i+1:e=i}return t}function lo(s){if(!(s.flags&1)){const t=pi(s),e=qt[qt.length-1];!e||!(s.flags&2)&&t>=pi(e)?qt.push(s):qt.splice(wc(t),0,s),s.flags|=1,th()}}function th(){rn||(rn=Za.then(sh))}function Sc(s){X(s)?As.push(...s):Ye&&s.id===-1?Ye.splice(Es+1,0,s):s.flags&1||(As.push(s),s.flags|=1),th()}function zo(s,t,e=Ee+1){for(;e<qt.length;e++){const i=qt[e];if(i&&i.flags&2){if(s&&i.id!==s.uid)continue;qt.splice(e,1),e--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function eh(s){if(As.length){const t=[...new Set(As)].sort((e,i)=>pi(e)-pi(i));if(As.length=0,Ye){Ye.push(...t);return}for(Ye=t,Es=0;Es<Ye.length;Es++){const e=Ye[Es];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}Ye=null,Es=0}}const pi=s=>s.id==null?s.flags&2?-1:1/0:s.id;function sh(s){try{for(Ee=0;Ee<qt.length;Ee++){const t=qt[Ee];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ti(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ee<qt.length;Ee++){const t=qt[Ee];t&&(t.flags&=-2)}Ee=-1,qt.length=0,eh(),rn=null,(qt.length||As.length)&&sh()}}let $t=null,ih=null;function on(s){const t=$t;return $t=s,ih=s&&s.type.__scopeId||null,t}function Pt(s,t=$t,e){if(!t||s._n)return s;const i=(...n)=>{i._d&&hn(-1);const r=on(t);let o;try{o=s(...n)}finally{on(r),i._d&&hn(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function nt(s,t){if($t===null)return s;const e=En($t),i=s.dirs||(s.dirs=[]);for(let n=0;n<t.length;n++){let[r,o,l,a=ft]=t[n];r&&(Z(r)&&(r={mounted:r,updated:r}),r.deep&&$e(o),i.push({dir:r,instance:e,value:o,oldValue:void 0,arg:l,modifiers:a}))}return s}function ls(s,t,e,i){const n=s.dirs,r=t&&t.dirs;for(let o=0;o<n.length;o++){const l=n[o];r&&(l.oldValue=r[o].value);let a=l.dir[i];a&&(ze(),Oe(a,e,8,[s.el,l,s,t]),Ue())}}function Gi(s,t){if(Ht){let e=Ht.provides;const i=Ht.parent&&Ht.parent.provides;i===e&&(e=Ht.provides=Object.create(i)),e[s]=t}}function fe(s,t,e=!1){const i=Sf();if(i||Rs){let n=Rs?Rs._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&s in n)return n[s];if(arguments.length>1)return e&&Z(t)?t.call(i&&i.proxy):t}}const xc=Symbol.for("v-scx"),Ec=()=>fe(xc);function ss(s,t,e){return nh(s,t,e)}function nh(s,t,e=ft){const{immediate:i,deep:n,flush:r,once:o}=e,l=Ft({},e),a=t&&i||!t&&r!=="post";let h;if(gi){if(r==="sync"){const p=Ec();h=p.__watcherHandles||(p.__watcherHandles=[])}else if(!a){const p=()=>{};return p.stop=Te,p.resume=Te,p.pause=Te,p}}const u=Ht;l.call=(p,g,v)=>Oe(p,u,g,v);let c=!1;r==="post"?l.scheduler=p=>{ie(p,u&&u.suspense)}:r!=="sync"&&(c=!0,l.scheduler=(p,g)=>{g?p():lo(p)}),l.augmentJob=p=>{t&&(p.flags|=4),c&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const d=yc(s,t,l);return gi&&(h?h.push(d):a&&d()),d}function Cc(s,t,e){const i=this.proxy,n=Ct(s)?s.includes(".")?rh(i,s):()=>i[s]:s.bind(i,i);let r;Z(t)?r=t:(r=t.handler,e=t);const o=ki(this),l=nh(n,r.bind(i),e);return o(),l}function rh(s,t){const e=t.split(".");return()=>{let i=s;for(let n=0;n<e.length&&i;n++)i=i[e[n]];return i}}const Mc=Symbol("_vte"),Tc=s=>s.__isTeleport,kc=Symbol("_leaveCb");function ao(s,t){s.shapeFlag&6&&s.component?(s.transition=t,ao(s.component.subTree,t)):s.shapeFlag&128?(s.ssContent.transition=t.clone(s.ssContent),s.ssFallback.transition=t.clone(s.ssFallback)):s.transition=t}function oh(s,t){return Z(s)?Ft({name:s.name},t,{setup:s}):s}function lh(s){s.ids=[s.ids[0]+s.ids[2]+++"-",0,0]}const ln=new WeakMap;function ni(s,t,e,i,n=!1){if(X(s)){s.forEach((g,v)=>ni(g,t&&(X(t)?t[v]:t),e,i,n));return}if(Ls(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&ni(s,t,e,i.component.subTree);return}const r=i.shapeFlag&4?En(i.component):i.el,o=n?null:r,{i:l,r:a}=s,h=t&&t.r,u=l.refs===ft?l.refs={}:l.refs,c=l.setupState,d=at(c),p=c===ft?Ta:g=>ht(d,g);if(h!=null&&h!==a){if(Uo(t),Ct(h))u[h]=null,p(h)&&(c[h]=null);else if(Bt(h)){h.value=null;const g=t;g.k&&(u[g.k]=null)}}if(Z(a))Ti(a,l,12,[o,u]);else{const g=Ct(a),v=Bt(a);if(g||v){const S=()=>{if(s.f){const _=g?p(a)?c[a]:u[a]:a.value;if(n)X(_)&&Yr(_,r);else if(X(_))_.includes(r)||_.push(r);else if(g)u[a]=[r],p(a)&&(c[a]=u[a]);else{const b=[r];a.value=b,s.k&&(u[s.k]=b)}}else g?(u[a]=o,p(a)&&(c[a]=o)):v&&(a.value=o,s.k&&(u[s.k]=o))};if(o){const _=()=>{S(),ln.delete(s)};_.id=-1,ln.set(s,_),ie(_,e)}else Uo(s),S()}}}function Uo(s){const t=ln.get(s);t&&(t.flags|=8,ln.delete(s))}gn().requestIdleCallback;gn().cancelIdleCallback;const Ls=s=>!!s.type.__asyncLoader,ah=s=>s.type.__isKeepAlive;function Oc(s,t){hh(s,"a",t)}function Ac(s,t){hh(s,"da",t)}function hh(s,t,e=Ht){const i=s.__wdc||(s.__wdc=()=>{let n=e;for(;n;){if(n.isDeactivated)return;n=n.parent}return s()});if(wn(t,i,e),e){let n=e.parent;for(;n&&n.parent;)ah(n.parent.vnode)&&Lc(i,t,e,n),n=n.parent}}function Lc(s,t,e,i){const n=wn(t,s,i,!0);Ws(()=>{Yr(i[t],n)},e)}function wn(s,t,e=Ht,i=!1){if(e){const n=e[s]||(e[s]=[]),r=t.__weh||(t.__weh=(...o)=>{ze();const l=ki(e),a=Oe(t,e,s,o);return l(),Ue(),a});return i?n.unshift(r):n.push(r),r}}const He=s=>(t,e=Ht)=>{(!gi||s==="sp")&&wn(s,(...i)=>t(...i),e)},Rc=He("bm"),je=He("m"),Pc=He("bu"),Nc=He("u"),Dc=He("bum"),Ws=He("um"),Ic=He("sp"),$c=He("rtg"),Bc=He("rtc");function Fc(s,t=Ht){wn("ec",s,t)}const Vc=Symbol.for("v-ndc");function me(s,t,e,i){let n;const r=e,o=X(s);if(o||Ct(s)){const l=o&&ps(s);let a=!1,h=!1;l&&(a=!le(s),h=We(s),s=yn(s)),n=new Array(s.length);for(let u=0,c=s.length;u<c;u++)n[u]=t(a?h?Ns(pe(s[u])):pe(s[u]):s[u],u,void 0,r)}else if(typeof s=="number"){n=new Array(s);for(let l=0;l<s;l++)n[l]=t(l+1,l,void 0,r)}else if(dt(s))if(s[Symbol.iterator])n=Array.from(s,(l,a)=>t(l,a,void 0,r));else{const l=Object.keys(s);n=new Array(l.length);for(let a=0,h=l.length;a<h;a++){const u=l[a];n[a]=t(s[u],u,a,r)}}else n=[];return n}function zc(s,t,e={},i,n){if($t.ce||$t.parent&&Ls($t.parent)&&$t.parent.ce){const h=Object.keys(e).length>0;return T(),ae(bt,null,[ct("slot",e,i)],h?-2:64)}let r=s[t];r&&r._c&&(r._d=!1),T();const o=r&&uh(r(e)),l=e.key||o&&o.key,a=ae(bt,{key:(l&&!de(l)?l:`_${t}`)+(!o&&i?"_fb":"")},o||[],o&&s._===1?64:-2);return a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function uh(s){return s.some(t=>vi(t)?!(t.type===qe||t.type===bt&&!uh(t.children)):!0)?s:null}const Er=s=>s?Oh(s)?En(s):Er(s.parent):null,ri=Ft(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>Er(s.parent),$root:s=>Er(s.root),$host:s=>s.ce,$emit:s=>s.emit,$options:s=>fh(s),$forceUpdate:s=>s.f||(s.f=()=>{lo(s.update)}),$nextTick:s=>s.n||(s.n=Ds.bind(s.proxy)),$watch:s=>Cc.bind(s)}),zn=(s,t)=>s!==ft&&!s.__isScriptSetup&&ht(s,t),Uc={get({_:s},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:i,data:n,props:r,accessCache:o,type:l,appContext:a}=s;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return i[t];case 2:return n[t];case 4:return e[t];case 3:return r[t]}else{if(zn(i,t))return o[t]=1,i[t];if(n!==ft&&ht(n,t))return o[t]=2,n[t];if(ht(r,t))return o[t]=3,r[t];if(e!==ft&&ht(e,t))return o[t]=4,e[t];Cr&&(o[t]=0)}}const h=ri[t];let u,c;if(h)return t==="$attrs"&&It(s.attrs,"get",""),h(s);if((u=l.__cssModules)&&(u=u[t]))return u;if(e!==ft&&ht(e,t))return o[t]=4,e[t];if(c=a.config.globalProperties,ht(c,t))return c[t]},set({_:s},t,e){const{data:i,setupState:n,ctx:r}=s;return zn(n,t)?(n[t]=e,!0):i!==ft&&ht(i,t)?(i[t]=e,!0):ht(s.props,t)||t[0]==="$"&&t.slice(1)in s?!1:(r[t]=e,!0)},has({_:{data:s,setupState:t,accessCache:e,ctx:i,appContext:n,props:r,type:o}},l){let a;return!!(e[l]||s!==ft&&l[0]!=="$"&&ht(s,l)||zn(t,l)||ht(r,l)||ht(i,l)||ht(ri,l)||ht(n.config.globalProperties,l)||(a=o.__cssModules)&&a[l])},defineProperty(s,t,e){return e.get!=null?s._.accessCache[t]=0:ht(e,"value")&&this.set(s,t,e.value,null),Reflect.defineProperty(s,t,e)}};function Wo(s){return X(s)?s.reduce((t,e)=>(t[e]=null,t),{}):s}let Cr=!0;function Wc(s){const t=fh(s),e=s.proxy,i=s.ctx;Cr=!1,t.beforeCreate&&qo(t.beforeCreate,s,"bc");const{data:n,computed:r,methods:o,watch:l,provide:a,inject:h,created:u,beforeMount:c,mounted:d,beforeUpdate:p,updated:g,activated:v,deactivated:S,beforeDestroy:_,beforeUnmount:b,destroyed:M,unmounted:D,render:J,renderTracked:tt,renderTriggered:Y,errorCaptured:rt,serverPrefetch:_t,expose:St,inheritAttrs:Vt,components:Mt,directives:kt,filters:Gt}=t;if(h&&qc(h,i,null),o)for(const A in o){const q=o[A];Z(q)&&(i[A]=q.bind(e))}if(n){const A=n.call(e,e);dt(A)&&(s.data=jt(A))}if(Cr=!0,r)for(const A in r){const q=r[A],Nt=Z(q)?q.bind(e,e):Z(q.get)?q.get.bind(e,e):Te,At=!Z(q)&&Z(q.set)?q.set.bind(e):Te,Dt=ot({get:Nt,set:At});Object.defineProperty(i,A,{enumerable:!0,configurable:!0,get:()=>Dt.value,set:Ot=>Dt.value=Ot})}if(l)for(const A in l)ch(l[A],i,e,A);if(a){const A=Z(a)?a.call(e):a;Reflect.ownKeys(A).forEach(q=>{Gi(q,A[q])})}u&&qo(u,s,"c");function V(A,q){X(q)?q.forEach(Nt=>A(Nt.bind(e))):q&&A(q.bind(e))}if(V(Rc,c),V(je,d),V(Pc,p),V(Nc,g),V(Oc,v),V(Ac,S),V(Fc,rt),V(Bc,tt),V($c,Y),V(Dc,b),V(Ws,D),V(Ic,_t),X(St))if(St.length){const A=s.exposed||(s.exposed={});St.forEach(q=>{Object.defineProperty(A,q,{get:()=>e[q],set:Nt=>e[q]=Nt,enumerable:!0})})}else s.exposed||(s.exposed={});J&&s.render===Te&&(s.render=J),Vt!=null&&(s.inheritAttrs=Vt),Mt&&(s.components=Mt),kt&&(s.directives=kt),_t&&lh(s)}function qc(s,t,e=Te){X(s)&&(s=Mr(s));for(const i in s){const n=s[i];let r;dt(n)?"default"in n?r=fe(n.from||i,n.default,!0):r=fe(n.from||i):r=fe(n),Bt(r)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[i]=r}}function qo(s,t,e){Oe(X(s)?s.map(i=>i.bind(t.proxy)):s.bind(t.proxy),t,e)}function ch(s,t,e,i){let n=i.includes(".")?rh(e,i):()=>e[i];if(Ct(s)){const r=t[s];Z(r)&&ss(n,r)}else if(Z(s))ss(n,s.bind(e));else if(dt(s))if(X(s))s.forEach(r=>ch(r,t,e,i));else{const r=Z(s.handler)?s.handler.bind(e):t[s.handler];Z(r)&&ss(n,r,s)}}function fh(s){const t=s.type,{mixins:e,extends:i}=t,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=s.appContext,l=r.get(t);let a;return l?a=l:!n.length&&!e&&!i?a=t:(a={},n.length&&n.forEach(h=>an(a,h,o,!0)),an(a,t,o)),dt(t)&&r.set(t,a),a}function an(s,t,e,i=!1){const{mixins:n,extends:r}=t;r&&an(s,r,e,!0),n&&n.forEach(o=>an(s,o,e,!0));for(const o in t)if(!(i&&o==="expose")){const l=Hc[o]||e&&e[o];s[o]=l?l(s[o],t[o]):t[o]}return s}const Hc={data:Ho,props:jo,emits:jo,methods:Zs,computed:Zs,beforeCreate:Ut,created:Ut,beforeMount:Ut,mounted:Ut,beforeUpdate:Ut,updated:Ut,beforeDestroy:Ut,beforeUnmount:Ut,destroyed:Ut,unmounted:Ut,activated:Ut,deactivated:Ut,errorCaptured:Ut,serverPrefetch:Ut,components:Zs,directives:Zs,watch:Kc,provide:Ho,inject:jc};function Ho(s,t){return t?s?function(){return Ft(Z(s)?s.call(this,this):s,Z(t)?t.call(this,this):t)}:t:s}function jc(s,t){return Zs(Mr(s),Mr(t))}function Mr(s){if(X(s)){const t={};for(let e=0;e<s.length;e++)t[s[e]]=s[e];return t}return s}function Ut(s,t){return s?[...new Set([].concat(s,t))]:t}function Zs(s,t){return s?Ft(Object.create(null),s,t):t}function jo(s,t){return s?X(s)&&X(t)?[...new Set([...s,...t])]:Ft(Object.create(null),Wo(s),Wo(t??{})):t}function Kc(s,t){if(!s)return t;if(!t)return s;const e=Ft(Object.create(null),s);for(const i in t)e[i]=Ut(s[i],t[i]);return e}function dh(){return{app:null,config:{isNativeTag:Ta,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Gc=0;function Jc(s,t){return function(i,n=null){Z(i)||(i=Ft({},i)),n!=null&&!dt(n)&&(n=null);const r=dh(),o=new WeakSet,l=[];let a=!1;const h=r.app={_uid:Gc++,_component:i,_props:n,_container:null,_context:r,_instance:null,version:kf,get config(){return r.config},set config(u){},use(u,...c){return o.has(u)||(u&&Z(u.install)?(o.add(u),u.install(h,...c)):Z(u)&&(o.add(u),u(h,...c))),h},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),h},component(u,c){return c?(r.components[u]=c,h):r.components[u]},directive(u,c){return c?(r.directives[u]=c,h):r.directives[u]},mount(u,c,d){if(!a){const p=h._ceVNode||ct(i,n);return p.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),s(p,u,d),a=!0,h._container=u,u.__vue_app__=h,En(p.component)}},onUnmount(u){l.push(u)},unmount(){a&&(Oe(l,h._instance,16),s(null,h._container),delete h._container.__vue_app__)},provide(u,c){return r.provides[u]=c,h},runWithContext(u){const c=Rs;Rs=h;try{return u()}finally{Rs=c}}};return h}}let Rs=null;const Xc=(s,t)=>t==="modelValue"||t==="model-value"?s.modelModifiers:s[`${t}Modifiers`]||s[`${ns(t)}Modifiers`]||s[`${ws(t)}Modifiers`];function Yc(s,t,...e){if(s.isUnmounted)return;const i=s.vnode.props||ft;let n=e;const r=t.startsWith("update:"),o=r&&Xc(i,t.slice(7));o&&(o.trim&&(n=e.map(u=>Ct(u)?u.trim():u)),o.number&&(n=e.map(vn)));let l,a=i[l=In(t)]||i[l=In(ns(t))];!a&&r&&(a=i[l=In(ws(t))]),a&&Oe(a,s,6,n);const h=i[l+"Once"];if(h){if(!s.emitted)s.emitted={};else if(s.emitted[l])return;s.emitted[l]=!0,Oe(h,s,6,n)}}const Qc=new WeakMap;function ph(s,t,e=!1){const i=e?Qc:t.emitsCache,n=i.get(s);if(n!==void 0)return n;const r=s.emits;let o={},l=!1;if(!Z(s)){const a=h=>{const u=ph(h,t,!0);u&&(l=!0,Ft(o,u))};!e&&t.mixins.length&&t.mixins.forEach(a),s.extends&&a(s.extends),s.mixins&&s.mixins.forEach(a)}return!r&&!l?(dt(s)&&i.set(s,null),null):(X(r)?r.forEach(a=>o[a]=null):Ft(o,r),dt(s)&&i.set(s,o),o)}function Sn(s,t){return!s||!pn(t)?!1:(t=t.slice(2).replace(/Once$/,""),ht(s,t[0].toLowerCase()+t.slice(1))||ht(s,ws(t))||ht(s,t))}function Ko(s){const{type:t,vnode:e,proxy:i,withProxy:n,propsOptions:[r],slots:o,attrs:l,emit:a,render:h,renderCache:u,props:c,data:d,setupState:p,ctx:g,inheritAttrs:v}=s,S=on(s);let _,b;try{if(e.shapeFlag&4){const D=n||i,J=D;_=Ce(h.call(J,D,u,c,p,d,g)),b=l}else{const D=t;_=Ce(D.length>1?D(c,{attrs:l,slots:o,emit:a}):D(c,null)),b=t.props?l:Zc(l)}}catch(D){oi.length=0,_n(D,s,1),_=ct(qe)}let M=_;if(b&&v!==!1){const D=Object.keys(b),{shapeFlag:J}=M;D.length&&J&7&&(r&&D.some(Xr)&&(b=tf(b,r)),M=Is(M,b,!1,!0))}return e.dirs&&(M=Is(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(e.dirs):e.dirs),e.transition&&ao(M,e.transition),_=M,on(S),_}const Zc=s=>{let t;for(const e in s)(e==="class"||e==="style"||pn(e))&&((t||(t={}))[e]=s[e]);return t},tf=(s,t)=>{const e={};for(const i in s)(!Xr(i)||!(i.slice(9)in t))&&(e[i]=s[i]);return e};function ef(s,t,e){const{props:i,children:n,component:r}=s,{props:o,children:l,patchFlag:a}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&a>=0){if(a&1024)return!0;if(a&16)return i?Go(i,o,h):!!o;if(a&8){const u=t.dynamicProps;for(let c=0;c<u.length;c++){const d=u[c];if(o[d]!==i[d]&&!Sn(h,d))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:i===o?!1:i?o?Go(i,o,h):!0:!!o;return!1}function Go(s,t,e){const i=Object.keys(t);if(i.length!==Object.keys(s).length)return!0;for(let n=0;n<i.length;n++){const r=i[n];if(t[r]!==s[r]&&!Sn(e,r))return!0}return!1}function sf({vnode:s,parent:t},e){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===s&&(i.el=s.el),i===s)(s=t.vnode).el=e,t=t.parent;else break}}const mh={},vh=()=>Object.create(mh),gh=s=>Object.getPrototypeOf(s)===mh;function nf(s,t,e,i=!1){const n={},r=vh();s.propsDefaults=Object.create(null),bh(s,t,n,r);for(const o in s.propsOptions[0])o in n||(n[o]=void 0);e?s.props=i?n:Xa(n):s.type.props?s.props=n:s.props=r,s.attrs=r}function rf(s,t,e,i){const{props:n,attrs:r,vnode:{patchFlag:o}}=s,l=at(n),[a]=s.propsOptions;let h=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=s.vnode.dynamicProps;for(let c=0;c<u.length;c++){let d=u[c];if(Sn(s.emitsOptions,d))continue;const p=t[d];if(a)if(ht(r,d))p!==r[d]&&(r[d]=p,h=!0);else{const g=ns(d);n[g]=Tr(a,l,g,p,s,!1)}else p!==r[d]&&(r[d]=p,h=!0)}}}else{bh(s,t,n,r)&&(h=!0);let u;for(const c in l)(!t||!ht(t,c)&&((u=ws(c))===c||!ht(t,u)))&&(a?e&&(e[c]!==void 0||e[u]!==void 0)&&(n[c]=Tr(a,l,c,void 0,s,!0)):delete n[c]);if(r!==l)for(const c in r)(!t||!ht(t,c))&&(delete r[c],h=!0)}h&&Ie(s.attrs,"set","")}function bh(s,t,e,i){const[n,r]=s.propsOptions;let o=!1,l;if(t)for(let a in t){if(ei(a))continue;const h=t[a];let u;n&&ht(n,u=ns(a))?!r||!r.includes(u)?e[u]=h:(l||(l={}))[u]=h:Sn(s.emitsOptions,a)||(!(a in i)||h!==i[a])&&(i[a]=h,o=!0)}if(r){const a=at(e),h=l||ft;for(let u=0;u<r.length;u++){const c=r[u];e[c]=Tr(n,a,c,h[c],s,!ht(h,c))}}return o}function Tr(s,t,e,i,n,r){const o=s[e];if(o!=null){const l=ht(o,"default");if(l&&i===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&Z(a)){const{propsDefaults:h}=n;if(e in h)i=h[e];else{const u=ki(n);i=h[e]=a.call(null,t),u()}}else i=a;n.ce&&n.ce._setProp(e,i)}o[0]&&(r&&!l?i=!1:o[1]&&(i===""||i===ws(e))&&(i=!0))}return i}const of=new WeakMap;function yh(s,t,e=!1){const i=e?of:t.propsCache,n=i.get(s);if(n)return n;const r=s.props,o={},l=[];let a=!1;if(!Z(s)){const u=c=>{a=!0;const[d,p]=yh(c,t,!0);Ft(o,d),p&&l.push(...p)};!e&&t.mixins.length&&t.mixins.forEach(u),s.extends&&u(s.extends),s.mixins&&s.mixins.forEach(u)}if(!r&&!a)return dt(s)&&i.set(s,ks),ks;if(X(r))for(let u=0;u<r.length;u++){const c=ns(r[u]);Jo(c)&&(o[c]=ft)}else if(r)for(const u in r){const c=ns(u);if(Jo(c)){const d=r[u],p=o[c]=X(d)||Z(d)?{type:d}:Ft({},d),g=p.type;let v=!1,S=!0;if(X(g))for(let _=0;_<g.length;++_){const b=g[_],M=Z(b)&&b.name;if(M==="Boolean"){v=!0;break}else M==="String"&&(S=!1)}else v=Z(g)&&g.name==="Boolean";p[0]=v,p[1]=S,(v||ht(p,"default"))&&l.push(c)}}const h=[o,l];return dt(s)&&i.set(s,h),h}function Jo(s){return s[0]!=="$"&&!ei(s)}const ho=s=>s==="_"||s==="_ctx"||s==="$stable",uo=s=>X(s)?s.map(Ce):[Ce(s)],lf=(s,t,e)=>{if(t._n)return t;const i=Pt((...n)=>uo(t(...n)),e);return i._c=!1,i},_h=(s,t,e)=>{const i=s._ctx;for(const n in s){if(ho(n))continue;const r=s[n];if(Z(r))t[n]=lf(n,r,i);else if(r!=null){const o=uo(r);t[n]=()=>o}}},wh=(s,t)=>{const e=uo(t);s.slots.default=()=>e},Sh=(s,t,e)=>{for(const i in t)(e||!ho(i))&&(s[i]=t[i])},af=(s,t,e)=>{const i=s.slots=vh();if(s.vnode.shapeFlag&32){const n=t._;n?(Sh(i,t,e),e&&Ra(i,"_",n,!0)):_h(t,i)}else t&&wh(s,t)},hf=(s,t,e)=>{const{vnode:i,slots:n}=s;let r=!0,o=ft;if(i.shapeFlag&32){const l=t._;l?e&&l===1?r=!1:Sh(n,t,e):(r=!t.$stable,_h(t,n)),o=t}else t&&(wh(s,t),o={default:1});if(r)for(const l in n)!ho(l)&&o[l]==null&&delete n[l]},ie=pf;function uf(s){return cf(s)}function cf(s,t){const e=gn();e.__VUE__=!0;const{insert:i,remove:n,patchProp:r,createElement:o,createText:l,createComment:a,setText:h,setElementText:u,parentNode:c,nextSibling:d,setScopeId:p=Te,insertStaticContent:g}=s,v=(m,y,w,C=null,k=null,O=null,z=void 0,F=null,B=!!y.dynamicChildren)=>{if(m===y)return;m&&!Js(m,y)&&(C=R(m),Ot(m,k,O,!0),m=null),y.patchFlag===-2&&(B=!1,y.dynamicChildren=null);const{type:N,ref:G,shapeFlag:U}=y;switch(N){case xn:S(m,y,w,C);break;case qe:_(m,y,w,C);break;case Ji:m==null&&b(y,w,C,z);break;case bt:Mt(m,y,w,C,k,O,z,F,B);break;default:U&1?J(m,y,w,C,k,O,z,F,B):U&6?kt(m,y,w,C,k,O,z,F,B):(U&64||U&128)&&N.process(m,y,w,C,k,O,z,F,B,I)}G!=null&&k?ni(G,m&&m.ref,O,y||m,!y):G==null&&m&&m.ref!=null&&ni(m.ref,null,O,m,!0)},S=(m,y,w,C)=>{if(m==null)i(y.el=l(y.children),w,C);else{const k=y.el=m.el;y.children!==m.children&&h(k,y.children)}},_=(m,y,w,C)=>{m==null?i(y.el=a(y.children||""),w,C):y.el=m.el},b=(m,y,w,C)=>{[m.el,m.anchor]=g(m.children,y,w,C,m.el,m.anchor)},M=({el:m,anchor:y},w,C)=>{let k;for(;m&&m!==y;)k=d(m),i(m,w,C),m=k;i(y,w,C)},D=({el:m,anchor:y})=>{let w;for(;m&&m!==y;)w=d(m),n(m),m=w;n(y)},J=(m,y,w,C,k,O,z,F,B)=>{if(y.type==="svg"?z="svg":y.type==="math"&&(z="mathml"),m==null)tt(y,w,C,k,O,z,F,B);else{const N=m.el&&m.el._isVueCE?m.el:null;try{N&&N._beginPatch(),_t(m,y,k,O,z,F,B)}finally{N&&N._endPatch()}}},tt=(m,y,w,C,k,O,z,F)=>{let B,N;const{props:G,shapeFlag:U,transition:K,dirs:Q}=m;if(B=m.el=o(m.type,O,G&&G.is,G),U&8?u(B,m.children):U&16&&rt(m.children,B,null,C,k,Un(m,O),z,F),Q&&ls(m,null,C,"created"),Y(B,m,m.scopeId,z,C),G){for(const pt in G)pt!=="value"&&!ei(pt)&&r(B,pt,null,G[pt],O,C);"value"in G&&r(B,"value",null,G.value,O),(N=G.onVnodeBeforeMount)&&Se(N,C,m)}Q&&ls(m,null,C,"beforeMount");const it=ff(k,K);it&&K.beforeEnter(B),i(B,y,w),((N=G&&G.onVnodeMounted)||it||Q)&&ie(()=>{N&&Se(N,C,m),it&&K.enter(B),Q&&ls(m,null,C,"mounted")},k)},Y=(m,y,w,C,k)=>{if(w&&p(m,w),C)for(let O=0;O<C.length;O++)p(m,C[O]);if(k){let O=k.subTree;if(y===O||Mh(O.type)&&(O.ssContent===y||O.ssFallback===y)){const z=k.vnode;Y(m,z,z.scopeId,z.slotScopeIds,k.parent)}}},rt=(m,y,w,C,k,O,z,F,B=0)=>{for(let N=B;N<m.length;N++){const G=m[N]=F?Qe(m[N]):Ce(m[N]);v(null,G,y,w,C,k,O,z,F)}},_t=(m,y,w,C,k,O,z)=>{const F=y.el=m.el;let{patchFlag:B,dynamicChildren:N,dirs:G}=y;B|=m.patchFlag&16;const U=m.props||ft,K=y.props||ft;let Q;if(w&&as(w,!1),(Q=K.onVnodeBeforeUpdate)&&Se(Q,w,y,m),G&&ls(y,m,w,"beforeUpdate"),w&&as(w,!0),(U.innerHTML&&K.innerHTML==null||U.textContent&&K.textContent==null)&&u(F,""),N?St(m.dynamicChildren,N,F,w,C,Un(y,k),O):z||q(m,y,F,null,w,C,Un(y,k),O,!1),B>0){if(B&16)Vt(F,U,K,w,k);else if(B&2&&U.class!==K.class&&r(F,"class",null,K.class,k),B&4&&r(F,"style",U.style,K.style,k),B&8){const it=y.dynamicProps;for(let pt=0;pt<it.length;pt++){const ut=it[pt],Xt=U[ut],Yt=K[ut];(Yt!==Xt||ut==="value")&&r(F,ut,Xt,Yt,k,w)}}B&1&&m.children!==y.children&&u(F,y.children)}else!z&&N==null&&Vt(F,U,K,w,k);((Q=K.onVnodeUpdated)||G)&&ie(()=>{Q&&Se(Q,w,y,m),G&&ls(y,m,w,"updated")},C)},St=(m,y,w,C,k,O,z)=>{for(let F=0;F<y.length;F++){const B=m[F],N=y[F],G=B.el&&(B.type===bt||!Js(B,N)||B.shapeFlag&198)?c(B.el):w;v(B,N,G,null,C,k,O,z,!0)}},Vt=(m,y,w,C,k)=>{if(y!==w){if(y!==ft)for(const O in y)!ei(O)&&!(O in w)&&r(m,O,y[O],null,k,C);for(const O in w){if(ei(O))continue;const z=w[O],F=y[O];z!==F&&O!=="value"&&r(m,O,F,z,k,C)}"value"in w&&r(m,"value",y.value,w.value,k)}},Mt=(m,y,w,C,k,O,z,F,B)=>{const N=y.el=m?m.el:l(""),G=y.anchor=m?m.anchor:l("");let{patchFlag:U,dynamicChildren:K,slotScopeIds:Q}=y;Q&&(F=F?F.concat(Q):Q),m==null?(i(N,w,C),i(G,w,C),rt(y.children||[],w,G,k,O,z,F,B)):U>0&&U&64&&K&&m.dynamicChildren&&m.dynamicChildren.length===K.length?(St(m.dynamicChildren,K,w,k,O,z,F),(y.key!=null||k&&y===k.subTree)&&xh(m,y,!0)):q(m,y,w,G,k,O,z,F,B)},kt=(m,y,w,C,k,O,z,F,B)=>{y.slotScopeIds=F,m==null?y.shapeFlag&512?k.ctx.activate(y,w,C,z,B):Gt(y,w,C,k,O,z,B):zt(m,y,B)},Gt=(m,y,w,C,k,O,z)=>{const F=m.component=wf(m,C,k);if(ah(m)&&(F.ctx.renderer=I),xf(F,!1,z),F.asyncDep){if(k&&k.registerDep(F,V,z),!m.el){const B=F.subTree=ct(qe);_(null,B,y,w),m.placeholder=B.el}}else V(F,m,y,w,k,O,z)},zt=(m,y,w)=>{const C=y.component=m.component;if(ef(m,y,w))if(C.asyncDep&&!C.asyncResolved){A(C,y,w);return}else C.next=y,C.update();else y.el=m.el,C.vnode=y},V=(m,y,w,C,k,O,z)=>{const F=()=>{if(m.isMounted){let{next:U,bu:K,u:Q,parent:it,vnode:pt}=m;{const _e=Eh(m);if(_e){U&&(U.el=pt.el,A(m,U,z)),_e.asyncDep.then(()=>{m.isUnmounted||F()});return}}let ut=U,Xt;as(m,!1),U?(U.el=pt.el,A(m,U,z)):U=pt,K&&Ki(K),(Xt=U.props&&U.props.onVnodeBeforeUpdate)&&Se(Xt,it,U,pt),as(m,!0);const Yt=Ko(m),ye=m.subTree;m.subTree=Yt,v(ye,Yt,c(ye.el),R(ye),m,k,O),U.el=Yt.el,ut===null&&sf(m,Yt.el),Q&&ie(Q,k),(Xt=U.props&&U.props.onVnodeUpdated)&&ie(()=>Se(Xt,it,U,pt),k)}else{let U;const{el:K,props:Q}=y,{bm:it,m:pt,parent:ut,root:Xt,type:Yt}=m,ye=Ls(y);as(m,!1),it&&Ki(it),!ye&&(U=Q&&Q.onVnodeBeforeMount)&&Se(U,ut,y),as(m,!0);{Xt.ce&&Xt.ce._def.shadowRoot!==!1&&Xt.ce._injectChildStyle(Yt);const _e=m.subTree=Ko(m);v(null,_e,w,C,m,k,O),y.el=_e.el}if(pt&&ie(pt,k),!ye&&(U=Q&&Q.onVnodeMounted)){const _e=y;ie(()=>Se(U,ut,_e),k)}(y.shapeFlag&256||ut&&Ls(ut.vnode)&&ut.vnode.shapeFlag&256)&&m.a&&ie(m.a,k),m.isMounted=!0,y=w=C=null}};m.scope.on();const B=m.effect=new Ia(F);m.scope.off();const N=m.update=B.run.bind(B),G=m.job=B.runIfDirty.bind(B);G.i=m,G.id=m.uid,B.scheduler=()=>lo(G),as(m,!0),N()},A=(m,y,w)=>{y.component=m;const C=m.vnode.props;m.vnode=y,m.next=null,rf(m,y.props,C,w),hf(m,y.children,w),ze(),zo(m),Ue()},q=(m,y,w,C,k,O,z,F,B=!1)=>{const N=m&&m.children,G=m?m.shapeFlag:0,U=y.children,{patchFlag:K,shapeFlag:Q}=y;if(K>0){if(K&128){At(N,U,w,C,k,O,z,F,B);return}else if(K&256){Nt(N,U,w,C,k,O,z,F,B);return}}Q&8?(G&16&&Jt(N,k,O),U!==N&&u(w,U)):G&16?Q&16?At(N,U,w,C,k,O,z,F,B):Jt(N,k,O,!0):(G&8&&u(w,""),Q&16&&rt(U,w,C,k,O,z,F,B))},Nt=(m,y,w,C,k,O,z,F,B)=>{m=m||ks,y=y||ks;const N=m.length,G=y.length,U=Math.min(N,G);let K;for(K=0;K<U;K++){const Q=y[K]=B?Qe(y[K]):Ce(y[K]);v(m[K],Q,w,null,k,O,z,F,B)}N>G?Jt(m,k,O,!0,!1,U):rt(y,w,C,k,O,z,F,B,U)},At=(m,y,w,C,k,O,z,F,B)=>{let N=0;const G=y.length;let U=m.length-1,K=G-1;for(;N<=U&&N<=K;){const Q=m[N],it=y[N]=B?Qe(y[N]):Ce(y[N]);if(Js(Q,it))v(Q,it,w,null,k,O,z,F,B);else break;N++}for(;N<=U&&N<=K;){const Q=m[U],it=y[K]=B?Qe(y[K]):Ce(y[K]);if(Js(Q,it))v(Q,it,w,null,k,O,z,F,B);else break;U--,K--}if(N>U){if(N<=K){const Q=K+1,it=Q<G?y[Q].el:C;for(;N<=K;)v(null,y[N]=B?Qe(y[N]):Ce(y[N]),w,it,k,O,z,F,B),N++}}else if(N>K)for(;N<=U;)Ot(m[N],k,O,!0),N++;else{const Q=N,it=N,pt=new Map;for(N=it;N<=K;N++){const se=y[N]=B?Qe(y[N]):Ce(y[N]);se.key!=null&&pt.set(se.key,N)}let ut,Xt=0;const Yt=K-it+1;let ye=!1,_e=0;const Ks=new Array(Yt);for(N=0;N<Yt;N++)Ks[N]=0;for(N=Q;N<=U;N++){const se=m[N];if(Xt>=Yt){Ot(se,k,O,!0);continue}let we;if(se.key!=null)we=pt.get(se.key);else for(ut=it;ut<=K;ut++)if(Ks[ut-it]===0&&Js(se,y[ut])){we=ut;break}we===void 0?Ot(se,k,O,!0):(Ks[we-it]=N+1,we>=_e?_e=we:ye=!0,v(se,y[we],w,null,k,O,z,F,B),Xt++)}const No=ye?df(Ks):ks;for(ut=No.length-1,N=Yt-1;N>=0;N--){const se=it+N,we=y[se],Do=y[se+1],Io=se+1<G?Do.el||Ch(Do):C;Ks[N]===0?v(null,we,w,Io,k,O,z,F,B):ye&&(ut<0||N!==No[ut]?Dt(we,w,Io,2):ut--)}}},Dt=(m,y,w,C,k=null)=>{const{el:O,type:z,transition:F,children:B,shapeFlag:N}=m;if(N&6){Dt(m.component.subTree,y,w,C);return}if(N&128){m.suspense.move(y,w,C);return}if(N&64){z.move(m,y,w,I);return}if(z===bt){i(O,y,w);for(let U=0;U<B.length;U++)Dt(B[U],y,w,C);i(m.anchor,y,w);return}if(z===Ji){M(m,y,w);return}if(C!==2&&N&1&&F)if(C===0)F.beforeEnter(O),i(O,y,w),ie(()=>F.enter(O),k);else{const{leave:U,delayLeave:K,afterLeave:Q}=F,it=()=>{m.ctx.isUnmounted?n(O):i(O,y,w)},pt=()=>{O._isLeaving&&O[kc](!0),U(O,()=>{it(),Q&&Q()})};K?K(O,it,pt):pt()}else i(O,y,w)},Ot=(m,y,w,C=!1,k=!1)=>{const{type:O,props:z,ref:F,children:B,dynamicChildren:N,shapeFlag:G,patchFlag:U,dirs:K,cacheIndex:Q}=m;if(U===-2&&(k=!1),F!=null&&(ze(),ni(F,null,w,m,!0),Ue()),Q!=null&&(y.renderCache[Q]=void 0),G&256){y.ctx.deactivate(m);return}const it=G&1&&K,pt=!Ls(m);let ut;if(pt&&(ut=z&&z.onVnodeBeforeUnmount)&&Se(ut,y,m),G&6)Re(m.component,w,C);else{if(G&128){m.suspense.unmount(w,C);return}it&&ls(m,null,y,"beforeUnmount"),G&64?m.type.remove(m,y,w,I,C):N&&!N.hasOnce&&(O!==bt||U>0&&U&64)?Jt(N,y,w,!1,!0):(O===bt&&U&384||!k&&G&16)&&Jt(B,y,w),C&&be(m)}(pt&&(ut=z&&z.onVnodeUnmounted)||it)&&ie(()=>{ut&&Se(ut,y,m),it&&ls(m,null,y,"unmounted")},w)},be=m=>{const{type:y,el:w,anchor:C,transition:k}=m;if(y===bt){Le(w,C);return}if(y===Ji){D(m);return}const O=()=>{n(w),k&&!k.persisted&&k.afterLeave&&k.afterLeave()};if(m.shapeFlag&1&&k&&!k.persisted){const{leave:z,delayLeave:F}=k,B=()=>z(w,O);F?F(m.el,O,B):B()}else O()},Le=(m,y)=>{let w;for(;m!==y;)w=d(m),n(m),m=w;n(y)},Re=(m,y,w)=>{const{bum:C,scope:k,job:O,subTree:z,um:F,m:B,a:N}=m;Xo(B),Xo(N),C&&Ki(C),k.stop(),O&&(O.flags|=8,Ot(z,m,y,w)),F&&ie(F,y),ie(()=>{m.isUnmounted=!0},y)},Jt=(m,y,w,C=!1,k=!1,O=0)=>{for(let z=O;z<m.length;z++)Ot(m[z],y,w,C,k)},R=m=>{if(m.shapeFlag&6)return R(m.component.subTree);if(m.shapeFlag&128)return m.suspense.next();const y=d(m.anchor||m.el),w=y&&y[Mc];return w?d(w):y};let E=!1;const x=(m,y,w)=>{let C;m==null?y._vnode&&(Ot(y._vnode,null,null,!0),C=y._vnode.component):v(y._vnode||null,m,y,null,null,null,w),y._vnode=m,E||(E=!0,zo(C),eh(),E=!1)},I={p:v,um:Ot,m:Dt,r:be,mt:Gt,mc:rt,pc:q,pbc:St,n:R,o:s};return{render:x,hydrate:void 0,createApp:Jc(x)}}function Un({type:s,props:t},e){return e==="svg"&&s==="foreignObject"||e==="mathml"&&s==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function as({effect:s,job:t},e){e?(s.flags|=32,t.flags|=4):(s.flags&=-33,t.flags&=-5)}function ff(s,t){return(!s||s&&!s.pendingBranch)&&t&&!t.persisted}function xh(s,t,e=!1){const i=s.children,n=t.children;if(X(i)&&X(n))for(let r=0;r<i.length;r++){const o=i[r];let l=n[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[r]=Qe(n[r]),l.el=o.el),!e&&l.patchFlag!==-2&&xh(o,l)),l.type===xn&&(l.patchFlag!==-1?l.el=o.el:l.__elIndex=r+(s.type===bt?1:0)),l.type===qe&&!l.el&&(l.el=o.el)}}function df(s){const t=s.slice(),e=[0];let i,n,r,o,l;const a=s.length;for(i=0;i<a;i++){const h=s[i];if(h!==0){if(n=e[e.length-1],s[n]<h){t[i]=n,e.push(i);continue}for(r=0,o=e.length-1;r<o;)l=r+o>>1,s[e[l]]<h?r=l+1:o=l;h<s[e[r]]&&(r>0&&(t[i]=e[r-1]),e[r]=i)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=t[o];return e}function Eh(s){const t=s.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Eh(t)}function Xo(s){if(s)for(let t=0;t<s.length;t++)s[t].flags|=8}function Ch(s){if(s.placeholder)return s.placeholder;const t=s.component;return t?Ch(t.subTree):null}const Mh=s=>s.__isSuspense;function pf(s,t){t&&t.pendingBranch?X(s)?t.effects.push(...s):t.effects.push(s):Sc(s)}const bt=Symbol.for("v-fgt"),xn=Symbol.for("v-txt"),qe=Symbol.for("v-cmt"),Ji=Symbol.for("v-stc"),oi=[];let ne=null;function T(s=!1){oi.push(ne=s?null:[])}function mf(){oi.pop(),ne=oi[oi.length-1]||null}let mi=1;function hn(s,t=!1){mi+=s,s<0&&ne&&t&&(ne.hasOnce=!0)}function Th(s){return s.dynamicChildren=mi>0?ne||ks:null,mf(),mi>0&&ne&&ne.push(s),s}function P(s,t,e,i,n,r){return Th(f(s,t,e,i,n,r,!0))}function ae(s,t,e,i,n){return Th(ct(s,t,e,i,n,!0))}function vi(s){return s?s.__v_isVNode===!0:!1}function Js(s,t){return s.type===t.type&&s.key===t.key}const kh=({key:s})=>s??null,Xi=({ref:s,ref_key:t,ref_for:e})=>(typeof s=="number"&&(s=""+s),s!=null?Ct(s)||Bt(s)||Z(s)?{i:$t,r:s,k:t,f:!!e}:s:null);function f(s,t=null,e=null,i=0,n=null,r=s===bt?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:s,props:t,key:t&&kh(t),ref:t&&Xi(t),scopeId:ih,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:$t};return l?(fo(a,e),r&128&&s.normalize(a)):e&&(a.shapeFlag|=Ct(e)?8:16),mi>0&&!o&&ne&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&ne.push(a),a}const ct=vf;function vf(s,t=null,e=null,i=0,n=null,r=!1){if((!s||s===Vc)&&(s=qe),vi(s)){const l=Is(s,t,!0);return e&&fo(l,e),mi>0&&!r&&ne&&(l.shapeFlag&6?ne[ne.indexOf(s)]=l:ne.push(l)),l.patchFlag=-2,l}if(Tf(s)&&(s=s.__vccOpts),t){t=gf(t);let{class:l,style:a}=t;l&&!Ct(l)&&(t.class=vs(l)),dt(a)&&(oo(a)&&!X(a)&&(a=Ft({},a)),t.style=bn(a))}const o=Ct(s)?1:Mh(s)?128:Tc(s)?64:dt(s)?4:Z(s)?2:0;return f(s,t,e,i,n,o,r,!0)}function gf(s){return s?oo(s)||gh(s)?Ft({},s):s:null}function Is(s,t,e=!1,i=!1){const{props:n,ref:r,patchFlag:o,children:l,transition:a}=s,h=t?bf(n||{},t):n,u={__v_isVNode:!0,__v_skip:!0,type:s.type,props:h,key:h&&kh(h),ref:t&&t.ref?e&&r?X(r)?r.concat(Xi(t)):[r,Xi(t)]:Xi(t):r,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:l,target:s.target,targetStart:s.targetStart,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:t&&s.type!==bt?o===-1?16:o|16:o,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:a,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&Is(s.ssContent),ssFallback:s.ssFallback&&Is(s.ssFallback),placeholder:s.placeholder,el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return a&&i&&ao(u,a.clone(u)),u}function te(s=" ",t=0){return ct(xn,null,s,t)}function co(s,t){const e=ct(Ji,null,s);return e.staticCount=t,e}function H(s="",t=!1){return t?(T(),ae(qe,null,s)):ct(qe,null,s)}function Ce(s){return s==null||typeof s=="boolean"?ct(qe):X(s)?ct(bt,null,s.slice()):vi(s)?Qe(s):ct(xn,null,String(s))}function Qe(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:Is(s)}function fo(s,t){let e=0;const{shapeFlag:i}=s;if(t==null)t=null;else if(X(t))e=16;else if(typeof t=="object")if(i&65){const n=t.default;n&&(n._c&&(n._d=!1),fo(s,n()),n._c&&(n._d=!0));return}else{e=32;const n=t._;!n&&!gh(t)?t._ctx=$t:n===3&&$t&&($t.slots._===1?t._=1:(t._=2,s.patchFlag|=1024))}else Z(t)?(t={default:t,_ctx:$t},e=32):(t=String(t),i&64?(e=16,t=[te(t)]):e=8);s.children=t,s.shapeFlag|=e}function bf(...s){const t={};for(let e=0;e<s.length;e++){const i=s[e];for(const n in i)if(n==="class")t.class!==i.class&&(t.class=vs([t.class,i.class]));else if(n==="style")t.style=bn([t.style,i.style]);else if(pn(n)){const r=t[n],o=i[n];o&&r!==o&&!(X(r)&&r.includes(o))&&(t[n]=r?[].concat(r,o):o)}else n!==""&&(t[n]=i[n])}return t}function Se(s,t,e,i=null){Oe(s,t,7,[e,i])}const yf=dh();let _f=0;function wf(s,t,e){const i=s.type,n=(t?t.appContext:s.appContext)||yf,r={uid:_f++,vnode:s,type:i,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ju(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:yh(i,n),emitsOptions:ph(i,n),emit:null,emitted:null,propsDefaults:ft,inheritAttrs:i.inheritAttrs,ctx:ft,data:ft,props:ft,attrs:ft,slots:ft,refs:ft,setupState:ft,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Yc.bind(null,r),s.ce&&s.ce(r),r}let Ht=null;const Sf=()=>Ht||$t;let un,kr;{const s=gn(),t=(e,i)=>{let n;return(n=s[e])||(n=s[e]=[]),n.push(i),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};un=t("__VUE_INSTANCE_SETTERS__",e=>Ht=e),kr=t("__VUE_SSR_SETTERS__",e=>gi=e)}const ki=s=>{const t=Ht;return un(s),s.scope.on(),()=>{s.scope.off(),un(t)}},Yo=()=>{Ht&&Ht.scope.off(),un(null)};function Oh(s){return s.vnode.shapeFlag&4}let gi=!1;function xf(s,t=!1,e=!1){t&&kr(t);const{props:i,children:n}=s.vnode,r=Oh(s);nf(s,i,r,t),af(s,n,e||t);const o=r?Ef(s,t):void 0;return t&&kr(!1),o}function Ef(s,t){const e=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,Uc);const{setup:i}=e;if(i){ze();const n=s.setupContext=i.length>1?Mf(s):null,r=ki(s),o=Ti(i,s,0,[s.props,n]),l=ka(o);if(Ue(),r(),(l||s.sp)&&!Ls(s)&&lh(s),l){if(o.then(Yo,Yo),t)return o.then(a=>{Qo(s,a)}).catch(a=>{_n(a,s,0)});s.asyncDep=o}else Qo(s,o)}else Ah(s)}function Qo(s,t,e){Z(t)?s.type.__ssrInlineRender?s.ssrRender=t:s.render=t:dt(t)&&(s.setupState=Qa(t)),Ah(s)}function Ah(s,t,e){const i=s.type;s.render||(s.render=i.render||Te);{const n=ki(s);ze();try{Wc(s)}finally{Ue(),n()}}}const Cf={get(s,t){return It(s,"get",""),s[t]}};function Mf(s){const t=e=>{s.exposed=e||{}};return{attrs:new Proxy(s.attrs,Cf),slots:s.slots,emit:s.emit,expose:t}}function En(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(Qa(fc(s.exposed)),{get(t,e){if(e in t)return t[e];if(e in ri)return ri[e](s)},has(t,e){return e in t||e in ri}})):s.proxy}function Tf(s){return Z(s)&&"__vccOpts"in s}const ot=(s,t)=>gc(s,t,gi);function Lh(s,t,e){try{hn(-1);const i=arguments.length;return i===2?dt(t)&&!X(t)?vi(t)?ct(s,null,[t]):ct(s,t):ct(s,null,t):(i>3?e=Array.prototype.slice.call(arguments,2):i===3&&vi(e)&&(e=[e]),ct(s,t,e))}finally{hn(1)}}const kf="3.5.26";let Or;const Zo=typeof window<"u"&&window.trustedTypes;if(Zo)try{Or=Zo.createPolicy("vue",{createHTML:s=>s})}catch{}const Rh=Or?s=>Or.createHTML(s):s=>s,Of="http://www.w3.org/2000/svg",Af="http://www.w3.org/1998/Math/MathML",De=typeof document<"u"?document:null,tl=De&&De.createElement("template"),Lf={insert:(s,t,e)=>{t.insertBefore(s,e||null)},remove:s=>{const t=s.parentNode;t&&t.removeChild(s)},createElement:(s,t,e,i)=>{const n=t==="svg"?De.createElementNS(Of,s):t==="mathml"?De.createElementNS(Af,s):e?De.createElement(s,{is:e}):De.createElement(s);return s==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:s=>De.createTextNode(s),createComment:s=>De.createComment(s),setText:(s,t)=>{s.nodeValue=t},setElementText:(s,t)=>{s.textContent=t},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>De.querySelector(s),setScopeId(s,t){s.setAttribute(t,"")},insertStaticContent(s,t,e,i,n,r){const o=e?e.previousSibling:t.lastChild;if(n&&(n===r||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),e),!(n===r||!(n=n.nextSibling)););else{tl.innerHTML=Rh(i==="svg"?`<svg>${s}</svg>`:i==="mathml"?`<math>${s}</math>`:s);const l=tl.content;if(i==="svg"||i==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}t.insertBefore(l,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},Rf=Symbol("_vtc");function Pf(s,t,e){const i=s[Rf];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?s.removeAttribute("class"):e?s.setAttribute("class",t):s.className=t}const el=Symbol("_vod"),Nf=Symbol("_vsh"),Df=Symbol(""),If=/(?:^|;)\s*display\s*:/;function $f(s,t,e){const i=s.style,n=Ct(e);let r=!1;if(e&&!n){if(t)if(Ct(t))for(const o of t.split(";")){const l=o.slice(0,o.indexOf(":")).trim();e[l]==null&&Yi(i,l,"")}else for(const o in t)e[o]==null&&Yi(i,o,"");for(const o in e)o==="display"&&(r=!0),Yi(i,o,e[o])}else if(n){if(t!==e){const o=i[Df];o&&(e+=";"+o),i.cssText=e,r=If.test(e)}}else t&&s.removeAttribute("style");el in s&&(s[el]=r?i.display:"",s[Nf]&&(i.display="none"))}const sl=/\s*!important$/;function Yi(s,t,e){if(X(e))e.forEach(i=>Yi(s,t,i));else if(e==null&&(e=""),t.startsWith("--"))s.setProperty(t,e);else{const i=Bf(s,t);sl.test(e)?s.setProperty(ws(i),e.replace(sl,""),"important"):s[i]=e}}const il=["Webkit","Moz","ms"],Wn={};function Bf(s,t){const e=Wn[t];if(e)return e;let i=ns(t);if(i!=="filter"&&i in s)return Wn[t]=i;i=La(i);for(let n=0;n<il.length;n++){const r=il[n]+i;if(r in s)return Wn[t]=r}return t}const nl="http://www.w3.org/1999/xlink";function rl(s,t,e,i,n,r=qu(t)){i&&t.startsWith("xlink:")?e==null?s.removeAttributeNS(nl,t.slice(6,t.length)):s.setAttributeNS(nl,t,e):e==null||r&&!Pa(e)?s.removeAttribute(t):s.setAttribute(t,r?"":de(e)?String(e):e)}function ol(s,t,e,i,n){if(t==="innerHTML"||t==="textContent"){e!=null&&(s[t]=t==="innerHTML"?Rh(e):e);return}const r=s.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?s.getAttribute("value")||"":s.value,a=e==null?s.type==="checkbox"?"on":"":String(e);(l!==a||!("_value"in s))&&(s.value=a),e==null&&s.removeAttribute(t),s._value=e;return}let o=!1;if(e===""||e==null){const l=typeof s[t];l==="boolean"?e=Pa(e):e==null&&l==="string"?(e="",o=!0):l==="number"&&(e=0,o=!0)}try{s[t]=e}catch{}o&&s.removeAttribute(n||t)}function ts(s,t,e,i){s.addEventListener(t,e,i)}function Ff(s,t,e,i){s.removeEventListener(t,e,i)}const ll=Symbol("_vei");function Vf(s,t,e,i,n=null){const r=s[ll]||(s[ll]={}),o=r[t];if(i&&o)o.value=i;else{const[l,a]=zf(t);if(i){const h=r[t]=qf(i,n);ts(s,l,h,a)}else o&&(Ff(s,l,o,a),r[t]=void 0)}}const al=/(?:Once|Passive|Capture)$/;function zf(s){let t;if(al.test(s)){t={};let i;for(;i=s.match(al);)s=s.slice(0,s.length-i[0].length),t[i[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):ws(s.slice(2)),t]}let qn=0;const Uf=Promise.resolve(),Wf=()=>qn||(Uf.then(()=>qn=0),qn=Date.now());function qf(s,t){const e=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=e.attached)return;Oe(Hf(i,e.value),t,5,[i])};return e.value=s,e.attached=Wf(),e}function Hf(s,t){if(X(t)){const e=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{e.call(s),s._stopped=!0},t.map(i=>n=>!n._stopped&&i&&i(n))}else return t}const hl=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,jf=(s,t,e,i,n,r)=>{const o=n==="svg";t==="class"?Pf(s,i,o):t==="style"?$f(s,e,i):pn(t)?Xr(t)||Vf(s,t,e,i,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Kf(s,t,i,o))?(ol(s,t,i),!s.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&rl(s,t,i,o,r,t!=="value")):s._isVueCE&&(/[A-Z]/.test(t)||!Ct(i))?ol(s,ns(t),i,r,t):(t==="true-value"?s._trueValue=i:t==="false-value"&&(s._falseValue=i),rl(s,t,i,o))};function Kf(s,t,e,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in s&&hl(t)&&Z(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&s.tagName==="IFRAME"||t==="form"||t==="list"&&s.tagName==="INPUT"||t==="type"&&s.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=s.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return hl(t)&&Ct(e)?!1:t in s}const $s=s=>{const t=s.props["onUpdate:modelValue"]||!1;return X(t)?e=>Ki(t,e):t};function Gf(s){s.target.composing=!0}function ul(s){const t=s.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ve=Symbol("_assign");function cl(s,t,e){return t&&(s=s.trim()),e&&(s=vn(s)),s}const vt={created(s,{modifiers:{lazy:t,trim:e,number:i}},n){s[Ve]=$s(n);const r=i||n.props&&n.props.type==="number";ts(s,t?"change":"input",o=>{o.target.composing||s[Ve](cl(s.value,e,r))}),(e||r)&&ts(s,"change",()=>{s.value=cl(s.value,e,r)}),t||(ts(s,"compositionstart",Gf),ts(s,"compositionend",ul),ts(s,"change",ul))},mounted(s,{value:t}){s.value=t??""},beforeUpdate(s,{value:t,oldValue:e,modifiers:{lazy:i,trim:n,number:r}},o){if(s[Ve]=$s(o),s.composing)return;const l=(r||s.type==="number")&&!/^0\d/.test(s.value)?vn(s.value):s.value,a=t??"";l!==a&&(document.activeElement===s&&s.type!=="range"&&(i&&t===e||n&&s.value.trim()===a)||(s.value=a))}},Jf={deep:!0,created(s,t,e){s[Ve]=$s(e),ts(s,"change",()=>{const i=s._modelValue,n=yi(s),r=s.checked,o=s[Ve];if(X(i)){const l=Zr(i,n),a=l!==-1;if(r&&!a)o(i.concat(n));else if(!r&&a){const h=[...i];h.splice(l,1),o(h)}}else if(Us(i)){const l=new Set(i);r?l.add(n):l.delete(n),o(l)}else o(Ph(s,r))})},mounted:fl,beforeUpdate(s,t,e){s[Ve]=$s(e),fl(s,t,e)}};function fl(s,{value:t,oldValue:e},i){s._modelValue=t;let n;if(X(t))n=Zr(t,i.props.value)>-1;else if(Us(t))n=t.has(i.props.value);else{if(t===e)return;n=Mi(t,Ph(s,!0))}s.checked!==n&&(s.checked=n)}const bi={deep:!0,created(s,{value:t,modifiers:{number:e}},i){const n=Us(t);ts(s,"change",()=>{const r=Array.prototype.filter.call(s.options,o=>o.selected).map(o=>e?vn(yi(o)):yi(o));s[Ve](s.multiple?n?new Set(r):r:r[0]),s._assigning=!0,Ds(()=>{s._assigning=!1})}),s[Ve]=$s(i)},mounted(s,{value:t}){dl(s,t)},beforeUpdate(s,t,e){s[Ve]=$s(e)},updated(s,{value:t}){s._assigning||dl(s,t)}};function dl(s,t){const e=s.multiple,i=X(t);if(!(e&&!i&&!Us(t))){for(let n=0,r=s.options.length;n<r;n++){const o=s.options[n],l=yi(o);if(e)if(i){const a=typeof l;a==="string"||a==="number"?o.selected=t.some(h=>String(h)===String(l)):o.selected=Zr(t,l)>-1}else o.selected=t.has(l);else if(Mi(yi(o),t)){s.selectedIndex!==n&&(s.selectedIndex=n);return}}!e&&s.selectedIndex!==-1&&(s.selectedIndex=-1)}}function yi(s){return"_value"in s?s._value:s.value}function Ph(s,t){const e=t?"_trueValue":"_falseValue";return e in s?s[e]:t}const Xf=["ctrl","shift","alt","meta"],Yf={stop:s=>s.stopPropagation(),prevent:s=>s.preventDefault(),self:s=>s.target!==s.currentTarget,ctrl:s=>!s.ctrlKey,shift:s=>!s.shiftKey,alt:s=>!s.altKey,meta:s=>!s.metaKey,left:s=>"button"in s&&s.button!==0,middle:s=>"button"in s&&s.button!==1,right:s=>"button"in s&&s.button!==2,exact:(s,t)=>Xf.some(e=>s[`${e}Key`]&&!t.includes(e))},gs=(s,t)=>{const e=s._withMods||(s._withMods={}),i=t.join(".");return e[i]||(e[i]=((n,...r)=>{for(let o=0;o<t.length;o++){const l=Yf[t[o]];if(l&&l(n,t))return}return s(n,...r)}))},Qf=Ft({patchProp:jf},Lf);let pl;function Zf(){return pl||(pl=uf(Qf))}const td=((...s)=>{const t=Zf().createApp(...s),{mount:e}=t;return t.mount=i=>{const n=sd(i);if(!n)return;const r=t._component;!Z(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=e(n,!1,ed(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t});function ed(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function sd(s){return Ct(s)?document.querySelector(s):s}const Cs=typeof document<"u";function Nh(s){return typeof s=="object"||"displayName"in s||"props"in s||"__vccOpts"in s}function id(s){return s.__esModule||s[Symbol.toStringTag]==="Module"||s.default&&Nh(s.default)}const lt=Object.assign;function Hn(s,t){const e={};for(const i in t){const n=t[i];e[i]=ve(n)?n.map(s):s(n)}return e}const li=()=>{},ve=Array.isArray;function ml(s,t){const e={};for(const i in s)e[i]=i in t?t[i]:s[i];return e}const Dh=/#/g,nd=/&/g,rd=/\//g,od=/=/g,ld=/\?/g,Ih=/\+/g,ad=/%5B/g,hd=/%5D/g,$h=/%5E/g,ud=/%60/g,Bh=/%7B/g,cd=/%7C/g,Fh=/%7D/g,fd=/%20/g;function po(s){return s==null?"":encodeURI(""+s).replace(cd,"|").replace(ad,"[").replace(hd,"]")}function dd(s){return po(s).replace(Bh,"{").replace(Fh,"}").replace($h,"^")}function Ar(s){return po(s).replace(Ih,"%2B").replace(fd,"+").replace(Dh,"%23").replace(nd,"%26").replace(ud,"`").replace(Bh,"{").replace(Fh,"}").replace($h,"^")}function pd(s){return Ar(s).replace(od,"%3D")}function md(s){return po(s).replace(Dh,"%23").replace(ld,"%3F")}function vd(s){return md(s).replace(rd,"%2F")}function _i(s){if(s==null)return null;try{return decodeURIComponent(""+s)}catch{}return""+s}const gd=/\/$/,bd=s=>s.replace(gd,"");function jn(s,t,e="/"){let i,n={},r="",o="";const l=t.indexOf("#");let a=t.indexOf("?");return a=l>=0&&a>l?-1:a,a>=0&&(i=t.slice(0,a),r=t.slice(a,l>0?l:t.length),n=s(r.slice(1))),l>=0&&(i=i||t.slice(0,l),o=t.slice(l,t.length)),i=Sd(i??t,e),{fullPath:i+r+o,path:i,query:n,hash:_i(o)}}function yd(s,t){const e=t.query?s(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function vl(s,t){return!t||!s.toLowerCase().startsWith(t.toLowerCase())?s:s.slice(t.length)||"/"}function _d(s,t,e){const i=t.matched.length-1,n=e.matched.length-1;return i>-1&&i===n&&Bs(t.matched[i],e.matched[n])&&Vh(t.params,e.params)&&s(t.query)===s(e.query)&&t.hash===e.hash}function Bs(s,t){return(s.aliasOf||s)===(t.aliasOf||t)}function Vh(s,t){if(Object.keys(s).length!==Object.keys(t).length)return!1;for(var e in s)if(!wd(s[e],t[e]))return!1;return!0}function wd(s,t){return ve(s)?gl(s,t):ve(t)?gl(t,s):s?.valueOf()===t?.valueOf()}function gl(s,t){return ve(t)?s.length===t.length&&s.every((e,i)=>e===t[i]):s.length===1&&s[0]===t}function Sd(s,t){if(s.startsWith("/"))return s;if(!s)return t;const e=t.split("/"),i=s.split("/"),n=i[i.length-1];(n===".."||n===".")&&i.push("");let r=e.length-1,o,l;for(o=0;o<i.length;o++)if(l=i[o],l!==".")if(l==="..")r>1&&r--;else break;return e.slice(0,r).join("/")+"/"+i.slice(o).join("/")}const Ge={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Lr=(function(s){return s.pop="pop",s.push="push",s})({}),Kn=(function(s){return s.back="back",s.forward="forward",s.unknown="",s})({});function xd(s){if(!s)if(Cs){const t=document.querySelector("base");s=t&&t.getAttribute("href")||"/",s=s.replace(/^\w+:\/\/[^\/]+/,"")}else s="/";return s[0]!=="/"&&s[0]!=="#"&&(s="/"+s),bd(s)}const Ed=/^[^#]+#/;function Cd(s,t){return s.replace(Ed,"#")+t}function Md(s,t){const e=document.documentElement.getBoundingClientRect(),i=s.getBoundingClientRect();return{behavior:t.behavior,left:i.left-e.left-(t.left||0),top:i.top-e.top-(t.top||0)}}const Cn=()=>({left:window.scrollX,top:window.scrollY});function Td(s){let t;if("el"in s){const e=s.el,i=typeof e=="string"&&e.startsWith("#"),n=typeof e=="string"?i?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!n)return;t=Md(n,s)}else t=s;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function bl(s,t){return(history.state?history.state.position-t:-1)+s}const Rr=new Map;function kd(s,t){Rr.set(s,t)}function Od(s){const t=Rr.get(s);return Rr.delete(s),t}function Ad(s){return typeof s=="string"||s&&typeof s=="object"}function zh(s){return typeof s=="string"||typeof s=="symbol"}let wt=(function(s){return s[s.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",s[s.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",s[s.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",s[s.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",s[s.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",s})({});const Uh=Symbol("");wt.MATCHER_NOT_FOUND+"",wt.NAVIGATION_GUARD_REDIRECT+"",wt.NAVIGATION_ABORTED+"",wt.NAVIGATION_CANCELLED+"",wt.NAVIGATION_DUPLICATED+"";function Fs(s,t){return lt(new Error,{type:s,[Uh]:!0},t)}function Ne(s,t){return s instanceof Error&&Uh in s&&(t==null||!!(s.type&t))}const Ld=["params","query","hash"];function Rd(s){if(typeof s=="string")return s;if(s.path!=null)return s.path;const t={};for(const e of Ld)e in s&&(t[e]=s[e]);return JSON.stringify(t,null,2)}function Pd(s){const t={};if(s===""||s==="?")return t;const e=(s[0]==="?"?s.slice(1):s).split("&");for(let i=0;i<e.length;++i){const n=e[i].replace(Ih," "),r=n.indexOf("="),o=_i(r<0?n:n.slice(0,r)),l=r<0?null:_i(n.slice(r+1));if(o in t){let a=t[o];ve(a)||(a=t[o]=[a]),a.push(l)}else t[o]=l}return t}function yl(s){let t="";for(let e in s){const i=s[e];if(e=pd(e),i==null){i!==void 0&&(t+=(t.length?"&":"")+e);continue}(ve(i)?i.map(n=>n&&Ar(n)):[i&&Ar(i)]).forEach(n=>{n!==void 0&&(t+=(t.length?"&":"")+e,n!=null&&(t+="="+n))})}return t}function Nd(s){const t={};for(const e in s){const i=s[e];i!==void 0&&(t[e]=ve(i)?i.map(n=>n==null?null:""+n):i==null?i:""+i)}return t}const Dd=Symbol(""),_l=Symbol(""),Mn=Symbol(""),mo=Symbol(""),Pr=Symbol("");function Xs(){let s=[];function t(i){return s.push(i),()=>{const n=s.indexOf(i);n>-1&&s.splice(n,1)}}function e(){s=[]}return{add:t,list:()=>s.slice(),reset:e}}function Ze(s,t,e,i,n,r=o=>o()){const o=i&&(i.enterCallbacks[n]=i.enterCallbacks[n]||[]);return()=>new Promise((l,a)=>{const h=d=>{d===!1?a(Fs(wt.NAVIGATION_ABORTED,{from:e,to:t})):d instanceof Error?a(d):Ad(d)?a(Fs(wt.NAVIGATION_GUARD_REDIRECT,{from:t,to:d})):(o&&i.enterCallbacks[n]===o&&typeof d=="function"&&o.push(d),l())},u=r(()=>s.call(i&&i.instances[n],t,e,h));let c=Promise.resolve(u);s.length<3&&(c=c.then(h)),c.catch(d=>a(d))})}function Gn(s,t,e,i,n=r=>r()){const r=[];for(const o of s)for(const l in o.components){let a=o.components[l];if(!(t!=="beforeRouteEnter"&&!o.instances[l]))if(Nh(a)){const h=(a.__vccOpts||a)[t];h&&r.push(Ze(h,e,i,o,l,n))}else{let h=a();r.push(()=>h.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const c=id(u)?u.default:u;o.mods[l]=u,o.components[l]=c;const d=(c.__vccOpts||c)[t];return d&&Ze(d,e,i,o,l,n)()}))}}return r}function Id(s,t){const e=[],i=[],n=[],r=Math.max(t.matched.length,s.matched.length);for(let o=0;o<r;o++){const l=t.matched[o];l&&(s.matched.find(h=>Bs(h,l))?i.push(l):e.push(l));const a=s.matched[o];a&&(t.matched.find(h=>Bs(h,a))||n.push(a))}return[e,i,n]}let $d=()=>location.protocol+"//"+location.host;function Wh(s,t){const{pathname:e,search:i,hash:n}=t,r=s.indexOf("#");if(r>-1){let o=n.includes(s.slice(r))?s.slice(r).length:1,l=n.slice(o);return l[0]!=="/"&&(l="/"+l),vl(l,"")}return vl(e,s)+i+n}function Bd(s,t,e,i){let n=[],r=[],o=null;const l=({state:d})=>{const p=Wh(s,location),g=e.value,v=t.value;let S=0;if(d){if(e.value=p,t.value=d,o&&o===g){o=null;return}S=v?d.position-v.position:0}else i(p);n.forEach(_=>{_(e.value,g,{delta:S,type:Lr.pop,direction:S?S>0?Kn.forward:Kn.back:Kn.unknown})})};function a(){o=e.value}function h(d){n.push(d);const p=()=>{const g=n.indexOf(d);g>-1&&n.splice(g,1)};return r.push(p),p}function u(){if(document.visibilityState==="hidden"){const{history:d}=window;if(!d.state)return;d.replaceState(lt({},d.state,{scroll:Cn()}),"")}}function c(){for(const d of r)d();r=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:a,listen:h,destroy:c}}function wl(s,t,e,i=!1,n=!1){return{back:s,current:t,forward:e,replaced:i,position:window.history.length,scroll:n?Cn():null}}function Fd(s){const{history:t,location:e}=window,i={value:Wh(s,e)},n={value:t.state};n.value||r(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(a,h,u){const c=s.indexOf("#"),d=c>-1?(e.host&&document.querySelector("base")?s:s.slice(c))+a:$d()+s+a;try{t[u?"replaceState":"pushState"](h,"",d),n.value=h}catch(p){console.error(p),e[u?"replace":"assign"](d)}}function o(a,h){r(a,lt({},t.state,wl(n.value.back,a,n.value.forward,!0),h,{position:n.value.position}),!0),i.value=a}function l(a,h){const u=lt({},n.value,t.state,{forward:a,scroll:Cn()});r(u.current,u,!0),r(a,lt({},wl(i.value,a,null),{position:u.position+1},h),!1),i.value=a}return{location:i,state:n,push:l,replace:o}}function Vd(s){s=xd(s);const t=Fd(s),e=Bd(s,t.state,t.location,t.replace);function i(r,o=!0){o||e.pauseListeners(),history.go(r)}const n=lt({location:"",base:s,go:i,createHref:Cd.bind(null,s)},t,e);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}let fs=(function(s){return s[s.Static=0]="Static",s[s.Param=1]="Param",s[s.Group=2]="Group",s})({});var Tt=(function(s){return s[s.Static=0]="Static",s[s.Param=1]="Param",s[s.ParamRegExp=2]="ParamRegExp",s[s.ParamRegExpEnd=3]="ParamRegExpEnd",s[s.EscapeNext=4]="EscapeNext",s})(Tt||{});const zd={type:fs.Static,value:""},Ud=/[a-zA-Z0-9_]/;function Wd(s){if(!s)return[[]];if(s==="/")return[[zd]];if(!s.startsWith("/"))throw new Error(`Invalid path "${s}"`);function t(p){throw new Error(`ERR (${e})/"${h}": ${p}`)}let e=Tt.Static,i=e;const n=[];let r;function o(){r&&n.push(r),r=[]}let l=0,a,h="",u="";function c(){h&&(e===Tt.Static?r.push({type:fs.Static,value:h}):e===Tt.Param||e===Tt.ParamRegExp||e===Tt.ParamRegExpEnd?(r.length>1&&(a==="*"||a==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),r.push({type:fs.Param,value:h,regexp:u,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):t("Invalid state to consume buffer"),h="")}function d(){h+=a}for(;l<s.length;){if(a=s[l++],a==="\\"&&e!==Tt.ParamRegExp){i=e,e=Tt.EscapeNext;continue}switch(e){case Tt.Static:a==="/"?(h&&c(),o()):a===":"?(c(),e=Tt.Param):d();break;case Tt.EscapeNext:d(),e=i;break;case Tt.Param:a==="("?e=Tt.ParamRegExp:Ud.test(a)?d():(c(),e=Tt.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case Tt.ParamRegExp:a===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+a:e=Tt.ParamRegExpEnd:u+=a;break;case Tt.ParamRegExpEnd:c(),e=Tt.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--,u="";break;default:t("Unknown state");break}}return e===Tt.ParamRegExp&&t(`Unfinished custom RegExp for param "${h}"`),c(),o(),n}const Sl="[^/]+?",qd={sensitive:!1,strict:!1,start:!0,end:!0};var Wt=(function(s){return s[s._multiplier=10]="_multiplier",s[s.Root=90]="Root",s[s.Segment=40]="Segment",s[s.SubSegment=30]="SubSegment",s[s.Static=40]="Static",s[s.Dynamic=20]="Dynamic",s[s.BonusCustomRegExp=10]="BonusCustomRegExp",s[s.BonusWildcard=-50]="BonusWildcard",s[s.BonusRepeatable=-20]="BonusRepeatable",s[s.BonusOptional=-8]="BonusOptional",s[s.BonusStrict=.7000000000000001]="BonusStrict",s[s.BonusCaseSensitive=.25]="BonusCaseSensitive",s})(Wt||{});const Hd=/[.+*?^${}()[\]/\\]/g;function jd(s,t){const e=lt({},qd,t),i=[];let n=e.start?"^":"";const r=[];for(const h of s){const u=h.length?[]:[Wt.Root];e.strict&&!h.length&&(n+="/");for(let c=0;c<h.length;c++){const d=h[c];let p=Wt.Segment+(e.sensitive?Wt.BonusCaseSensitive:0);if(d.type===fs.Static)c||(n+="/"),n+=d.value.replace(Hd,"\\$&"),p+=Wt.Static;else if(d.type===fs.Param){const{value:g,repeatable:v,optional:S,regexp:_}=d;r.push({name:g,repeatable:v,optional:S});const b=_||Sl;if(b!==Sl){p+=Wt.BonusCustomRegExp;try{`${b}`}catch(D){throw new Error(`Invalid custom RegExp for param "${g}" (${b}): `+D.message)}}let M=v?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;c||(M=S&&h.length<2?`(?:/${M})`:"/"+M),S&&(M+="?"),n+=M,p+=Wt.Dynamic,S&&(p+=Wt.BonusOptional),v&&(p+=Wt.BonusRepeatable),b===".*"&&(p+=Wt.BonusWildcard)}u.push(p)}i.push(u)}if(e.strict&&e.end){const h=i.length-1;i[h][i[h].length-1]+=Wt.BonusStrict}e.strict||(n+="/?"),e.end?n+="$":e.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,e.sensitive?"":"i");function l(h){const u=h.match(o),c={};if(!u)return null;for(let d=1;d<u.length;d++){const p=u[d]||"",g=r[d-1];c[g.name]=p&&g.repeatable?p.split("/"):p}return c}function a(h){let u="",c=!1;for(const d of s){(!c||!u.endsWith("/"))&&(u+="/"),c=!1;for(const p of d)if(p.type===fs.Static)u+=p.value;else if(p.type===fs.Param){const{value:g,repeatable:v,optional:S}=p,_=g in h?h[g]:"";if(ve(_)&&!v)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const b=ve(_)?_.join("/"):_;if(!b)if(S)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):c=!0);else throw new Error(`Missing required param "${g}"`);u+=b}}return u||"/"}return{re:o,score:i,keys:r,parse:l,stringify:a}}function Kd(s,t){let e=0;for(;e<s.length&&e<t.length;){const i=t[e]-s[e];if(i)return i;e++}return s.length<t.length?s.length===1&&s[0]===Wt.Static+Wt.Segment?-1:1:s.length>t.length?t.length===1&&t[0]===Wt.Static+Wt.Segment?1:-1:0}function qh(s,t){let e=0;const i=s.score,n=t.score;for(;e<i.length&&e<n.length;){const r=Kd(i[e],n[e]);if(r)return r;e++}if(Math.abs(n.length-i.length)===1){if(xl(i))return 1;if(xl(n))return-1}return n.length-i.length}function xl(s){const t=s[s.length-1];return s.length>0&&t[t.length-1]<0}const Gd={strict:!1,end:!0,sensitive:!1};function Jd(s,t,e){const i=jd(Wd(s.path),e),n=lt(i,{record:s,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function Xd(s,t){const e=[],i=new Map;t=ml(Gd,t);function n(c){return i.get(c)}function r(c,d,p){const g=!p,v=Cl(c);v.aliasOf=p&&p.record;const S=ml(t,c),_=[v];if("alias"in c){const D=typeof c.alias=="string"?[c.alias]:c.alias;for(const J of D)_.push(Cl(lt({},v,{components:p?p.record.components:v.components,path:J,aliasOf:p?p.record:v})))}let b,M;for(const D of _){const{path:J}=D;if(d&&J[0]!=="/"){const tt=d.record.path,Y=tt[tt.length-1]==="/"?"":"/";D.path=d.record.path+(J&&Y+J)}if(b=Jd(D,d,S),p?p.alias.push(b):(M=M||b,M!==b&&M.alias.push(b),g&&c.name&&!Ml(b)&&o(c.name)),Hh(b)&&a(b),v.children){const tt=v.children;for(let Y=0;Y<tt.length;Y++)r(tt[Y],b,p&&p.children[Y])}p=p||b}return M?()=>{o(M)}:li}function o(c){if(zh(c)){const d=i.get(c);d&&(i.delete(c),e.splice(e.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=e.indexOf(c);d>-1&&(e.splice(d,1),c.record.name&&i.delete(c.record.name),c.children.forEach(o),c.alias.forEach(o))}}function l(){return e}function a(c){const d=Zd(c,e);e.splice(d,0,c),c.record.name&&!Ml(c)&&i.set(c.record.name,c)}function h(c,d){let p,g={},v,S;if("name"in c&&c.name){if(p=i.get(c.name),!p)throw Fs(wt.MATCHER_NOT_FOUND,{location:c});S=p.record.name,g=lt(El(d.params,p.keys.filter(M=>!M.optional).concat(p.parent?p.parent.keys.filter(M=>M.optional):[]).map(M=>M.name)),c.params&&El(c.params,p.keys.map(M=>M.name))),v=p.stringify(g)}else if(c.path!=null)v=c.path,p=e.find(M=>M.re.test(v)),p&&(g=p.parse(v),S=p.record.name);else{if(p=d.name?i.get(d.name):e.find(M=>M.re.test(d.path)),!p)throw Fs(wt.MATCHER_NOT_FOUND,{location:c,currentLocation:d});S=p.record.name,g=lt({},d.params,c.params),v=p.stringify(g)}const _=[];let b=p;for(;b;)_.unshift(b.record),b=b.parent;return{name:S,path:v,params:g,matched:_,meta:Qd(_)}}s.forEach(c=>r(c));function u(){e.length=0,i.clear()}return{addRoute:r,resolve:h,removeRoute:o,clearRoutes:u,getRoutes:l,getRecordMatcher:n}}function El(s,t){const e={};for(const i of t)i in s&&(e[i]=s[i]);return e}function Cl(s){const t={path:s.path,redirect:s.redirect,name:s.name,meta:s.meta||{},aliasOf:s.aliasOf,beforeEnter:s.beforeEnter,props:Yd(s),children:s.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in s?s.components||null:s.component&&{default:s.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Yd(s){const t={},e=s.props||!1;if("component"in s)t.default=e;else for(const i in s.components)t[i]=typeof e=="object"?e[i]:e;return t}function Ml(s){for(;s;){if(s.record.aliasOf)return!0;s=s.parent}return!1}function Qd(s){return s.reduce((t,e)=>lt(t,e.meta),{})}function Zd(s,t){let e=0,i=t.length;for(;e!==i;){const r=e+i>>1;qh(s,t[r])<0?i=r:e=r+1}const n=tp(s);return n&&(i=t.lastIndexOf(n,i-1)),i}function tp(s){let t=s;for(;t=t.parent;)if(Hh(t)&&qh(s,t)===0)return t}function Hh({record:s}){return!!(s.name||s.components&&Object.keys(s.components).length||s.redirect)}function Tl(s){const t=fe(Mn),e=fe(mo),i=ot(()=>{const a=Rt(s.to);return t.resolve(a)}),n=ot(()=>{const{matched:a}=i.value,{length:h}=a,u=a[h-1],c=e.matched;if(!u||!c.length)return-1;const d=c.findIndex(Bs.bind(null,u));if(d>-1)return d;const p=kl(a[h-2]);return h>1&&kl(u)===p&&c[c.length-1].path!==p?c.findIndex(Bs.bind(null,a[h-2])):d}),r=ot(()=>n.value>-1&&np(e.params,i.value.params)),o=ot(()=>n.value>-1&&n.value===e.matched.length-1&&Vh(e.params,i.value.params));function l(a={}){if(ip(a)){const h=t[Rt(s.replace)?"replace":"push"](Rt(s.to)).catch(li);return s.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:i,href:ot(()=>i.value.href),isActive:r,isExactActive:o,navigate:l}}function ep(s){return s.length===1?s[0]:s}const sp=oh({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Tl,setup(s,{slots:t}){const e=jt(Tl(s)),{options:i}=fe(Mn),n=ot(()=>({[Ol(s.activeClass,i.linkActiveClass,"router-link-active")]:e.isActive,[Ol(s.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const r=t.default&&ep(t.default(e));return s.custom?r:Lh("a",{"aria-current":e.isExactActive?s.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:n.value},r)}}}),ue=sp;function ip(s){if(!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)&&!s.defaultPrevented&&!(s.button!==void 0&&s.button!==0)){if(s.currentTarget&&s.currentTarget.getAttribute){const t=s.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return s.preventDefault&&s.preventDefault(),!0}}function np(s,t){for(const e in t){const i=t[e],n=s[e];if(typeof i=="string"){if(i!==n)return!1}else if(!ve(n)||n.length!==i.length||i.some((r,o)=>r.valueOf()!==n[o].valueOf()))return!1}return!0}function kl(s){return s?s.aliasOf?s.aliasOf.path:s.path:""}const Ol=(s,t,e)=>s??t??e,rp=oh({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(s,{attrs:t,slots:e}){const i=fe(Pr),n=ot(()=>s.route||i.value),r=fe(_l,0),o=ot(()=>{let h=Rt(r);const{matched:u}=n.value;let c;for(;(c=u[h])&&!c.components;)h++;return h}),l=ot(()=>n.value.matched[o.value]);Gi(_l,ot(()=>o.value+1)),Gi(Dd,l),Gi(Pr,n);const a=W();return ss(()=>[a.value,l.value,s.name],([h,u,c],[d,p,g])=>{u&&(u.instances[c]=h,p&&p!==u&&h&&h===d&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),h&&u&&(!p||!Bs(u,p)||!d)&&(u.enterCallbacks[c]||[]).forEach(v=>v(h))},{flush:"post"}),()=>{const h=n.value,u=s.name,c=l.value,d=c&&c.components[u];if(!d)return Al(e.default,{Component:d,route:h});const p=c.props[u],g=p?p===!0?h.params:typeof p=="function"?p(h):p:null,S=Lh(d,lt({},g,t,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(c.instances[u]=null)},ref:a}));return Al(e.default,{Component:S,route:h})||S}}});function Al(s,t){if(!s)return null;const e=s(t);return e.length===1?e[0]:e}const jh=rp;function op(s){const t=Xd(s.routes,s),e=s.parseQuery||Pd,i=s.stringifyQuery||yl,n=s.history,r=Xs(),o=Xs(),l=Xs(),a=dc(Ge);let h=Ge;Cs&&s.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Hn.bind(null,R=>""+R),c=Hn.bind(null,vd),d=Hn.bind(null,_i);function p(R,E){let x,I;return zh(R)?(x=t.getRecordMatcher(R),I=E):I=R,t.addRoute(I,x)}function g(R){const E=t.getRecordMatcher(R);E&&t.removeRoute(E)}function v(){return t.getRoutes().map(R=>R.record)}function S(R){return!!t.getRecordMatcher(R)}function _(R,E){if(E=lt({},E||a.value),typeof R=="string"){const w=jn(e,R,E.path),C=t.resolve({path:w.path},E),k=n.createHref(w.fullPath);return lt(w,C,{params:d(C.params),hash:_i(w.hash),redirectedFrom:void 0,href:k})}let x;if(R.path!=null)x=lt({},R,{path:jn(e,R.path,E.path).path});else{const w=lt({},R.params);for(const C in w)w[C]==null&&delete w[C];x=lt({},R,{params:c(w)}),E.params=c(E.params)}const I=t.resolve(x,E),j=R.hash||"";I.params=u(d(I.params));const m=yd(i,lt({},R,{hash:dd(j),path:I.path})),y=n.createHref(m);return lt({fullPath:m,hash:j,query:i===yl?Nd(R.query):R.query||{}},I,{redirectedFrom:void 0,href:y})}function b(R){return typeof R=="string"?jn(e,R,a.value.path):lt({},R)}function M(R,E){if(h!==R)return Fs(wt.NAVIGATION_CANCELLED,{from:E,to:R})}function D(R){return Y(R)}function J(R){return D(lt(b(R),{replace:!0}))}function tt(R,E){const x=R.matched[R.matched.length-1];if(x&&x.redirect){const{redirect:I}=x;let j=typeof I=="function"?I(R,E):I;return typeof j=="string"&&(j=j.includes("?")||j.includes("#")?j=b(j):{path:j},j.params={}),lt({query:R.query,hash:R.hash,params:j.path!=null?{}:R.params},j)}}function Y(R,E){const x=h=_(R),I=a.value,j=R.state,m=R.force,y=R.replace===!0,w=tt(x,I);if(w)return Y(lt(b(w),{state:typeof w=="object"?lt({},j,w.state):j,force:m,replace:y}),E||x);const C=x;C.redirectedFrom=E;let k;return!m&&_d(i,I,x)&&(k=Fs(wt.NAVIGATION_DUPLICATED,{to:C,from:I}),Dt(I,I,!0,!1)),(k?Promise.resolve(k):St(C,I)).catch(O=>Ne(O)?Ne(O,wt.NAVIGATION_GUARD_REDIRECT)?O:At(O):q(O,C,I)).then(O=>{if(O){if(Ne(O,wt.NAVIGATION_GUARD_REDIRECT))return Y(lt({replace:y},b(O.to),{state:typeof O.to=="object"?lt({},j,O.to.state):j,force:m}),E||C)}else O=Mt(C,I,!0,y,j);return Vt(C,I,O),O})}function rt(R,E){const x=M(R,E);return x?Promise.reject(x):Promise.resolve()}function _t(R){const E=Le.values().next().value;return E&&typeof E.runWithContext=="function"?E.runWithContext(R):R()}function St(R,E){let x;const[I,j,m]=Id(R,E);x=Gn(I.reverse(),"beforeRouteLeave",R,E);for(const w of I)w.leaveGuards.forEach(C=>{x.push(Ze(C,R,E))});const y=rt.bind(null,R,E);return x.push(y),Jt(x).then(()=>{x=[];for(const w of r.list())x.push(Ze(w,R,E));return x.push(y),Jt(x)}).then(()=>{x=Gn(j,"beforeRouteUpdate",R,E);for(const w of j)w.updateGuards.forEach(C=>{x.push(Ze(C,R,E))});return x.push(y),Jt(x)}).then(()=>{x=[];for(const w of m)if(w.beforeEnter)if(ve(w.beforeEnter))for(const C of w.beforeEnter)x.push(Ze(C,R,E));else x.push(Ze(w.beforeEnter,R,E));return x.push(y),Jt(x)}).then(()=>(R.matched.forEach(w=>w.enterCallbacks={}),x=Gn(m,"beforeRouteEnter",R,E,_t),x.push(y),Jt(x))).then(()=>{x=[];for(const w of o.list())x.push(Ze(w,R,E));return x.push(y),Jt(x)}).catch(w=>Ne(w,wt.NAVIGATION_CANCELLED)?w:Promise.reject(w))}function Vt(R,E,x){l.list().forEach(I=>_t(()=>I(R,E,x)))}function Mt(R,E,x,I,j){const m=M(R,E);if(m)return m;const y=E===Ge,w=Cs?history.state:{};x&&(I||y?n.replace(R.fullPath,lt({scroll:y&&w&&w.scroll},j)):n.push(R.fullPath,j)),a.value=R,Dt(R,E,x,y),At()}let kt;function Gt(){kt||(kt=n.listen((R,E,x)=>{if(!Re.listening)return;const I=_(R),j=tt(I,Re.currentRoute.value);if(j){Y(lt(j,{replace:!0,force:!0}),I).catch(li);return}h=I;const m=a.value;Cs&&kd(bl(m.fullPath,x.delta),Cn()),St(I,m).catch(y=>Ne(y,wt.NAVIGATION_ABORTED|wt.NAVIGATION_CANCELLED)?y:Ne(y,wt.NAVIGATION_GUARD_REDIRECT)?(Y(lt(b(y.to),{force:!0}),I).then(w=>{Ne(w,wt.NAVIGATION_ABORTED|wt.NAVIGATION_DUPLICATED)&&!x.delta&&x.type===Lr.pop&&n.go(-1,!1)}).catch(li),Promise.reject()):(x.delta&&n.go(-x.delta,!1),q(y,I,m))).then(y=>{y=y||Mt(I,m,!1),y&&(x.delta&&!Ne(y,wt.NAVIGATION_CANCELLED)?n.go(-x.delta,!1):x.type===Lr.pop&&Ne(y,wt.NAVIGATION_ABORTED|wt.NAVIGATION_DUPLICATED)&&n.go(-1,!1)),Vt(I,m,y)}).catch(li)}))}let zt=Xs(),V=Xs(),A;function q(R,E,x){At(R);const I=V.list();return I.length?I.forEach(j=>j(R,E,x)):console.error(R),Promise.reject(R)}function Nt(){return A&&a.value!==Ge?Promise.resolve():new Promise((R,E)=>{zt.add([R,E])})}function At(R){return A||(A=!R,Gt(),zt.list().forEach(([E,x])=>R?x(R):E()),zt.reset()),R}function Dt(R,E,x,I){const{scrollBehavior:j}=s;if(!Cs||!j)return Promise.resolve();const m=!x&&Od(bl(R.fullPath,0))||(I||!x)&&history.state&&history.state.scroll||null;return Ds().then(()=>j(R,E,m)).then(y=>y&&Td(y)).catch(y=>q(y,R,E))}const Ot=R=>n.go(R);let be;const Le=new Set,Re={currentRoute:a,listening:!0,addRoute:p,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:S,getRoutes:v,resolve:_,options:s,push:D,replace:J,go:Ot,back:()=>Ot(-1),forward:()=>Ot(1),beforeEach:r.add,beforeResolve:o.add,afterEach:l.add,onError:V.add,isReady:Nt,install(R){R.component("RouterLink",ue),R.component("RouterView",jh),R.config.globalProperties.$router=Re,Object.defineProperty(R.config.globalProperties,"$route",{enumerable:!0,get:()=>Rt(a)}),Cs&&!be&&a.value===Ge&&(be=!0,D(n.location).catch(I=>{}));const E={};for(const I in Ge)Object.defineProperty(E,I,{get:()=>a.value[I],enumerable:!0});R.provide(Mn,Re),R.provide(mo,Xa(E)),R.provide(Pr,a);const x=R.unmount;Le.add(R),R.unmount=function(){Le.delete(R),Le.size<1&&(h=Ge,kt&&kt(),kt=null,a.value=Ge,be=!1,A=!1),x()}}};function Jt(R){return R.reduce((E,x)=>E.then(()=>_t(x)),Promise.resolve())}return Re}function qs(){return fe(Mn)}function Kh(s){return fe(mo)}const lp={__name:"App",setup(s){return(t,e)=>(T(),ae(Rt(jh)))}},ap={"Content-Type":"application/json"};class hp{#t=null;setToken(t){this.#t=t?String(t):null}async request(t,{method:e="GET",body:i=void 0,headers:n={}}={}){const r={...ap,...n};this.#t&&(r.Authorization=`Bearer ${this.#t}`);const o=await fetch(t,{method:e,headers:r,body:i===void 0?void 0:JSON.stringify(i)}),l=await o.json().catch(()=>null);if(o.ok)return l;const a=l&&typeof l=="object"&&l.error?String(l.error):`: ${o.status}`,h=new Error(a);throw h.status=o.status,h.payload=l,h}}const st=new hp,Nr="arkilo_session_token",gt=jt({token:sessionStorage.getItem(Nr)||null,user:null,isAdmin:!1,initialized:!1});st.setToken(gt.token);function Oi(s){gt.token=s,st.setToken(s),s?sessionStorage.setItem(Nr,s):sessionStorage.removeItem(Nr)}async function up(){if(!gt.initialized){if(!gt.token){gt.initialized=!0;return}try{const s=await st.request("/api/auth/me");gt.user=s.user||null;try{await st.request("/api/admin/activation-codes?limit=1&offset=0"),gt.isAdmin=!0}catch{gt.isAdmin=!1}}catch{Oi(null)}finally{gt.initialized=!0}}}async function cp(){if(!gt.token)return gt.user=null,gt.isAdmin=!1,null;const s=await st.request("/api/auth/me");return gt.user=s.user||null,gt.user}async function fp({email:s,password:t}){const e=await st.request("/api/auth/login",{method:"POST",body:{email:s,password:t}});Oi(e.token),gt.user=e.user;try{await st.request("/api/admin/activation-codes?limit=1&offset=0"),gt.isAdmin=!0}catch{gt.isAdmin=!1}return e.user}async function dp({email:s,password:t,displayName:e}){const i=await st.request("/api/auth/register",{method:"POST",body:{email:s,password:t,displayName:e||void 0}});Oi(i.token),gt.user=i.user;try{await st.request("/api/admin/activation-codes?limit=1&offset=0"),gt.isAdmin=!0}catch{gt.isAdmin=!1}return i.user}async function pp(){try{await st.request("/api/auth/logout",{method:"POST"})}finally{gt.user=null,gt.isAdmin=!1,Oi(null)}}function os(){return{token:ot(()=>gt.token),user:ot(()=>gt.user),isAdmin:ot(()=>gt.isAdmin),initialized:ot(()=>gt.initialized),init:up,refreshUser:cp,login:fp,register:dp,logout:pp,setToken:Oi}}const Tn="/logo.png",mp={class:"auth-page"},vp={class:"auth-container"},gp={class:"auth-card"},bp={class:"form-group"},yp={class:"form-group"},_p={key:0,class:"form-error"},wp=["disabled"],Sp={class:"auth-footer"},xp={__name:"LoginPage",setup(s){const t=os(),e=qs(),i=W(""),n=W(""),r=W(""),o=W(!1);async function l(){r.value="",o.value=!0;try{await t.login({email:i.value.trim(),password:n.value}),await e.push("/app")}catch(a){r.value=a?.message||""}finally{o.value=!1}}return(a,h)=>(T(),P("div",mp,[f("div",vp,[f("div",gp,[h[6]||(h[6]=co('<div class="auth-header"><div class="auth-logo"><img src="'+Tn+'" alt="Arkilo"><span>Arkilo</span></div><h1 class="auth-title"></h1><p class="auth-subtitle"> SaaS </p></div>',1)),f("form",{onSubmit:gs(l,["prevent"])},[f("div",bp,[h[2]||(h[2]=f("label",{class:"form-label",for:"email"},"",-1)),nt(f("input",{id:"email","onUpdate:modelValue":h[0]||(h[0]=u=>i.value=u),class:"form-input",type:"email",autocomplete:"email",required:""},null,512),[[vt,i.value]])]),f("div",yp,[h[3]||(h[3]=f("label",{class:"form-label",for:"password"},"",-1)),nt(f("input",{id:"password","onUpdate:modelValue":h[1]||(h[1]=u=>n.value=u),class:"form-input",type:"password",autocomplete:"current-password",required:""},null,512),[[vt,n.value]]),r.value?(T(),P("p",_p,L(r.value),1)):H("",!0)]),f("button",{class:"btn btn-primary btn-full",type:"submit",disabled:o.value},L(o.value?"...":""),9,wp)],32),f("div",Sp,[f("p",null,[h[5]||(h[5]=te("  ",-1)),ct(Rt(ue),{class:"link",to:"/register"},{default:Pt(()=>[...h[4]||(h[4]=[te("",-1)])]),_:1})])])])])]))}},Ep={class:"auth-page"},Cp={class:"auth-container"},Mp={class:"auth-card"},Tp={class:"form-group"},kp={class:"form-group"},Op={class:"form-group"},Ap={key:0,class:"form-error"},Lp=["disabled"],Rp={class:"auth-footer"},Pp={__name:"RegisterPage",setup(s){const t=os(),e=qs(),i=W(""),n=W(""),r=W(""),o=W(""),l=W(!1);async function a(){o.value="",l.value=!0;try{await t.register({email:n.value.trim(),password:r.value,displayName:i.value.trim()}),await e.push("/app")}catch(h){o.value=h?.message||""}finally{l.value=!1}}return(h,u)=>(T(),P("div",Ep,[f("div",Cp,[f("div",Mp,[u[8]||(u[8]=co('<div class="auth-header"><div class="auth-logo"><img src="'+Tn+'" alt="Arkilo"><span>Arkilo</span></div><h1 class="auth-title"></h1><p class="auth-subtitle"></p></div>',1)),f("form",{onSubmit:gs(a,["prevent"])},[f("div",Tp,[u[3]||(u[3]=f("label",{class:"form-label",for:"displayName"},"",-1)),nt(f("input",{id:"displayName","onUpdate:modelValue":u[0]||(u[0]=c=>i.value=c),class:"form-input",type:"text",maxlength:"80"},null,512),[[vt,i.value]])]),f("div",kp,[u[4]||(u[4]=f("label",{class:"form-label",for:"email"},"",-1)),nt(f("input",{id:"email","onUpdate:modelValue":u[1]||(u[1]=c=>n.value=c),class:"form-input",type:"email",autocomplete:"email",required:""},null,512),[[vt,n.value]])]),f("div",Op,[u[5]||(u[5]=f("label",{class:"form-label",for:"password"},"",-1)),nt(f("input",{id:"password","onUpdate:modelValue":u[2]||(u[2]=c=>r.value=c),class:"form-input",type:"password",autocomplete:"new-password",required:""},null,512),[[vt,r.value]]),o.value?(T(),P("p",Ap,L(o.value),1)):H("",!0)]),f("button",{class:"btn btn-primary btn-full",type:"submit",disabled:l.value},L(l.value?"...":""),9,Lp)],32),f("div",Rp,[f("p",null,[u[7]||(u[7]=te("  ",-1)),ct(Rt(ue),{class:"link",to:"/login"},{default:Pt(()=>[...u[6]||(u[6]=[te("",-1)])]),_:1})])])])])]))}},Np={class:"auth-page"},Dp={class:"auth-container"},Ip={class:"auth-card"},$p={class:"card-content"},Bp={key:0,class:"text-muted"},Fp={key:1,class:"text-muted"},Vp={key:2,class:"form-success"},zp={key:3,class:"form-error"},Up={class:"input-with-button"},Wp=["disabled"],qp={class:"auth-footer"},Hp={__name:"VerifyEmailPage",setup(s){const t=Kh(),e=qs(),i=os(),n=ot(()=>String(t.query.token||"").trim()),r=W("idle"),o=W("");async function l(){if(o.value="",!n.value){r.value="error",o.value=" token";return}r.value="verifying";try{await st.request("/api/auth/email-verifications/verify",{method:"POST",body:{token:n.value}}),r.value="success",await i.refreshUser().catch(()=>null),i.user.value&&await e.push("/app")}catch(a){r.value="error",o.value=a?.message||""}}return je(l),(a,h)=>(T(),P("div",Np,[f("div",Dp,[f("div",Ip,[h[1]||(h[1]=co('<div class="auth-header"><div class="auth-logo"><img src="'+Tn+'" alt="Arkilo"><span>Arkilo</span></div><h1 class="auth-title"></h1><p class="auth-subtitle"> AI </p></div>',1)),f("div",$p,[r.value==="idle"?(T(),P("p",Bp,"...")):H("",!0),r.value==="verifying"?(T(),P("p",Fp,"...")):H("",!0),r.value==="success"?(T(),P("p",Vp,"")):H("",!0),r.value==="error"?(T(),P("p",zp,L(o.value),1)):H("",!0),f("div",Up,[f("button",{class:"btn btn-primary btn-full",type:"button",disabled:r.value==="verifying",onClick:l},L(r.value==="verifying"?"...":""),9,Wp)]),f("div",qp,[ct(Rt(ue),{class:"link",to:"/login"},{default:Pt(()=>[...h[0]||(h[0]=[te("",-1)])]),_:1})])])])])]))}},jp={class:"app-layout"},Kp={class:"sidebar"},Gp={class:"nav-menu"},Jp={class:"main-content"},Xp={class:"topbar"},Yp={class:"topbar-title"},Qp={key:0},Zp={class:"topbar-user"},tm={class:"user-name"},em={class:"content-wrapper"},sm={key:0,class:"card card-warn"},im={class:"card-content banner-row"},nm={key:0,class:"banner-msg"},rm=["disabled"],om={key:0,class:"card-content"},lm=["href"],Hs={__name:"AppShell",props:{title:{type:String,required:!0},subtitle:{type:String,default:""}},setup(s){const t=os(),e=qs();ot(()=>t.user.value?.email||"");const i=ot(()=>t.user.value?.display_name||t.user.value?.email||""),n=ot(()=>t.isAdmin.value),r=ot(()=>!!t.user.value&&!t.user.value?.email_verified_at),o=W(!1),l=W(""),a=W("");async function h(){await t.logout(),await e.push("/login")}async function u(){l.value="",a.value="",o.value=!0;try{const c=await st.request("/api/auth/email-verifications/send",{method:"POST"});l.value=c?.alreadyVerified?"":"",a.value=c?.debugLink||"",await t.refreshUser().catch(()=>null)}catch(c){l.value=c?.message||""}finally{o.value=!1}}return(c,d)=>(T(),P("div",jp,[f("aside",Kp,[d[6]||(d[6]=f("div",{class:"sidebar-header"},[f("div",{class:"logo"},[f("img",{src:Tn,alt:"Arkilo"}),f("span",null,"Arkilo Console")])],-1)),f("nav",Gp,[ct(Rt(ue),{class:"nav-item",to:"/app"},{default:Pt(()=>[...d[0]||(d[0]=[te("",-1)])]),_:1}),ct(Rt(ue),{class:"nav-item",to:"/app/ai"},{default:Pt(()=>[...d[1]||(d[1]=[te("AI ",-1)])]),_:1}),ct(Rt(ue),{class:"nav-item",to:"/app/providers"},{default:Pt(()=>[...d[2]||(d[2]=[te("AI ",-1)])]),_:1}),ct(Rt(ue),{class:"nav-item",to:"/app/subscription"},{default:Pt(()=>[...d[3]||(d[3]=[te("",-1)])]),_:1}),n.value?(T(),ae(Rt(ue),{key:0,class:"nav-item",to:"/app/admin/codes"},{default:Pt(()=>[...d[4]||(d[4]=[te("",-1)])]),_:1})):H("",!0),n.value?(T(),ae(Rt(ue),{key:1,class:"nav-item",to:"/app/admin/providers"},{default:Pt(()=>[...d[5]||(d[5]=[te("",-1)])]),_:1})):H("",!0)]),f("div",{class:"sidebar-footer"},[f("button",{class:"btn btn-secondary btn-full",type:"button",onClick:h},"")])]),f("main",Jp,[f("header",Xp,[f("div",Yp,[f("h1",null,L(s.title),1),s.subtitle?(T(),P("p",Qp,L(s.subtitle),1)):H("",!0)]),f("div",Zp,[f("span",tm,L(i.value),1)])]),f("div",em,[r.value?(T(),P("div",sm,[f("div",im,[f("div",null,[d[7]||(d[7]=f("div",{class:"banner-title"},"",-1)),d[8]||(d[8]=f("div",{class:"text-muted"},"",-1)),l.value?(T(),P("div",nm,L(l.value),1)):H("",!0)]),f("button",{class:"btn btn-primary",type:"button",disabled:o.value,onClick:u},L(o.value?"...":""),9,rm)]),a.value?(T(),P("div",om,[d[9]||(d[9]=f("div",{class:"text-muted"}," SMTP",-1)),f("a",{class:"link",href:a.value},L(a.value),9,lm)])):H("",!0)])):H("",!0),zc(c.$slots,"default")])])]))}},am=3e4,Zt=jt({value:null,fetchedAt:0,pending:null});function hm(){return Zt.value&&Date.now()-Zt.fetchedAt<am}async function um(){const s=await st.request("/api/console/overview");return Zt.value=s,Zt.fetchedAt=Date.now(),s}function cm(){async function s({force:e=!1}={}){return!e&&hm()?Zt.value:(Zt.pending||(Zt.pending=um().finally(()=>{Zt.pending=null})),Zt.pending)}function t(){Zt.value=null,Zt.fetchedAt=0,Zt.pending=null}return{state:Zt,get:s,invalidate:t}}const fm={class:"card balance-card"},dm={class:"balance-header"},pm={class:"card-content"},mm={class:"balance-row"},vm={class:"balance-value"},gm={class:"progress-bar"},bm={class:"grid grid-2"},ym={class:"card"},_m={key:0,class:"card-content"},wm={class:"stat-row"},Sm={class:"stat-value"},xm={class:"stat-row"},Em={class:"stat-value"},Cm={key:1,class:"text-muted"},Mm={class:"card"},Tm={key:0,class:"card-content"},km={class:"stat-row"},Om={class:"stat-value"},Am={class:"stat-row"},Lm={class:"stat-value"},Rm={key:1,class:"text-muted"},Pm={class:"card"},Nm={class:"input-with-button"},Dm=["disabled"],Im={key:0,class:"form-error"},$m={key:1,class:"form-success"},Bm={__name:"DashboardPage",setup(s){const t=jt({user:null,organization:null,subscription:null}),e=W(null),i=W(""),n=W(""),r=W(""),o=W(!1),l=W(!1),a=cm(),h=ot(()=>{if(!e.value)return 0;const{allowanceCredits:_,remainingCredits:b}=e.value;return!_||_<=0?0:Math.min(100,Math.max(0,b/_*100))});function u(_){if(!_)return"-";try{return new Date(_).toISOString().slice(0,10)}catch{return String(_)}}function c(_){return{owner:"",admin:"",member:""}[_]||_}function d(_){return{monthly:"",quarterly:"",yearly:"",free:""}[_]||_}function p(_){return _==null?"0.00":Number(_).toFixed(2)}async function g({force:_=!1}={}){l.value=!0;try{const b=await a.get({force:_});t.user=b.user,t.organization=b.organization,t.subscription=b.subscription}finally{l.value=!1}}async function v(){try{const _=await st.request("/api/saas/ai/state");e.value=_.credit||null}catch{e.value=null}}async function S(){n.value="",r.value="",o.value=!0;try{const _=await st.request("/api/billing/redeem-activation-code",{method:"POST",body:{code:i.value}});a.invalidate(),await g({force:!0}),await v(),t.organization=_.organization,t.subscription=_.subscription,r.value="",i.value=""}catch(_){n.value=_?.message||""}finally{o.value=!1}}return je(()=>{g({force:!1}),v()}),(_,b)=>(T(),ae(Hs,{title:"",subtitle:""},{default:Pt(()=>[f("div",fm,[f("div",dm,[b[2]||(b[2]=f("h2",{class:"card-title"},"",-1)),ct(Rt(ue),{class:"btn btn-primary btn-sm",to:"/app/subscription"},{default:Pt(()=>[...b[1]||(b[1]=[te("",-1)])]),_:1})]),f("div",pm,[f("div",mm,[b[3]||(b[3]=f("div",{class:"balance-info"},[f("span",{class:"balance-label"},""),f("span",{class:"balance-hint"},"")],-1)),f("span",vm,L(p(e.value?.remainingCredits)),1)]),f("div",gm,[f("div",{class:"progress-fill",style:bn({width:h.value+"%"})},null,4)])])]),f("div",bm,[f("div",ym,[b[6]||(b[6]=f("h2",{class:"card-title"},"",-1)),t.organization?(T(),P("div",_m,[f("div",wm,[b[4]||(b[4]=f("span",{class:"stat-label"},"",-1)),f("span",Sm,L(t.organization.name),1)]),f("div",xm,[b[5]||(b[5]=f("span",{class:"stat-label"},"",-1)),f("span",Em,L(c(t.organization.role)),1)])])):(T(),P("p",Cm,"..."))]),f("div",Mm,[b[9]||(b[9]=f("h2",{class:"card-title"},"",-1)),t.subscription?(T(),P("div",Tm,[f("div",km,[b[7]||(b[7]=f("span",{class:"stat-label"},"",-1)),f("span",Om,L(d(t.subscription.plan_code)),1)]),f("div",Am,[b[8]||(b[8]=f("span",{class:"stat-label"},"",-1)),f("span",Lm,L(u(t.subscription.current_period_end)),1)])])):(T(),P("p",Rm,""))])]),f("div",Pm,[b[10]||(b[10]=f("h2",{class:"card-title"},"",-1)),f("form",{class:"card-content",onSubmit:gs(S,["prevent"])},[f("div",Nm,[nt(f("input",{"onUpdate:modelValue":b[0]||(b[0]=M=>i.value=M),class:"form-input",placeholder:"",required:""},null,512),[[vt,i.value]]),f("button",{class:"btn btn-primary",type:"submit",disabled:o.value},L(o.value?"...":""),9,Dm)]),n.value?(T(),P("p",Im,L(n.value),1)):H("",!0),r.value?(T(),P("p",$m,L(r.value),1)):H("",!0)],32)])]),_:1}))}},Fm={key:0,class:"card"},Vm={style:{display:"flex","align-items":"center","justify-content":"space-between",gap:"1rem"}},zm=["disabled"],Um={class:"card-content"},Wm={class:"stat-row"},qm={class:"stat-value"},Hm={class:"stat-row"},jm={class:"stat-value"},Km={class:"stat-row"},Gm={class:"stat-value"},Jm={class:"card"},Xm={class:"card-content"},Ym={key:0,class:"form-error"},Qm={key:1,class:"form-success"},Zm={key:2,class:"pricing-grid"},tv={key:0,class:"pricing-badge"},ev={class:"pricing-header"},sv={class:"pricing-name"},iv={class:"pricing-price"},nv={class:"pricing-amount pricing-discount"},rv={class:"text-muted",style:{"margin-left":"0.5rem"}},ov={class:"pricing-original"},lv={class:"pricing-amount"},av={class:"pricing-period"},hv={class:"text-muted",style:{"margin-top":"0.25rem"}},uv={key:0,class:"upgrade-hint"},cv={key:1,class:"upgrade-hint"},fv={key:2,class:"upgrade-hint"},dv={key:3,class:"upgrade-hint"},pv={class:"pricing-desc"},mv={class:"pricing-features"},vv=["disabled","onClick"],gv={key:3,class:"text-muted"},bv={class:"card"},yv={class:"input-with-button"},_v=["disabled"],wv={key:0,class:"form-error"},Sv={key:1,class:"form-success"},xv={__name:"SubscriptionPage",setup(s){const t=W(null),e=W(""),i=W(""),n=W(""),r=W(!1),o=W(null),l=W(""),a=W(""),h=W(!1),u=W({}),c=W(!1),d=W(0),p=Kh(),g=ot(()=>String(t.value?.plan_code||"").trim()),v=ot(()=>t.value?.provider==="stripe"),S=ot(()=>{if(!t.value||t.value.status!=="active"||!t.value.current_period_end)return!1;const E=new Date(t.value.current_period_end).getTime();return Number.isFinite(E)&&E>Date.now()}),_=ot(()=>Vt());function b(E){if(!E)return"-";try{return new Date(E).toISOString().slice(0,10)}catch{return String(E)}}function M(E){return{monthly:"",quarterly:"",yearly:"",free:""}[E]||E}function D(E){return{active:"",canceled:"",expired:"",trialing:""}[E]||E}function J(E){const x=E?.price||null,I=Number(x?.unitAmount),j=String(x?.interval||"").trim(),m=Number(x?.intervalCount);if(Number.isFinite(I)&&I>=0&&j){const C=I/100;if(j==="month"){const k=Number.isFinite(m)&&m>0?m:1,O=C/k;return{amount:`$${tt(O)}`,period:"/"}}if(j==="year"){const k=C/12;return{amount:`$${tt(k)}`,period:"/"}}return j==="week"?{amount:`$${tt(C)}`,period:"/"}:{amount:`$${tt(C)}`,period:`/${j}`}}const w=Number({monthly:10,quarterly:8,yearly:7,free:0}[E.code])||0;return w<=0?{amount:"",period:""}:{amount:`$${w}`,period:"/"}}function tt(E){const x=Number(E);return Number.isFinite(x)?Math.abs(x-Math.round(x))<1e-9?String(Math.round(x)):x.toFixed(2).replace(/\.?0+$/,""):"0"}function Y(E){const x=Number(E);return Number.isFinite(x)?`$${tt(x)}`:null}function rt(E){const x=String(E?.interval||"").trim(),I=Number(E?.intervalCount),j=Number.isFinite(I)&&I>0?I:1;return x==="month"?j:x==="year"?12*j:null}function _t(E){const x=Number(E?.unitAmount);return!Number.isFinite(x)||x<0?null:x/100}function St(E){const x=String(E||"").trim();return(o.value?.plans||[]).find(j=>j.code===x)||null}function Vt(){if(!v.value)return{};if(!S.value)return{};if(!o.value?.plans?.length)return{};const E=new Date(t.value?.current_period_start||"").getTime(),x=new Date(t.value?.current_period_end||"").getTime();if(!Number.isFinite(E)||!Number.isFinite(x)||x<=E)return{};const I=Date.now(),j=(x-E)/1e3,m=Math.max(0,(x-I)/1e3);if(!Number.isFinite(j)||j<=0)return{};const y=Math.min(1,Math.max(0,m/j)),w=St(g.value),C=_t(w?.price);if(!Number.isFinite(C)||C<=0)return{};const k={};for(const O of o.value.plans){if(!V(O.code))continue;const z=_t(O?.price),F=rt(O?.price);if(!Number.isFinite(z)||z<=0||!Number.isFinite(F)||F<=0)continue;const B=C*y,N=Math.max(0,z-B),G=N/F;k[O.code]={months:F,perMonthDisplay:Y(G),payableTotalDisplay:Y(N),originalTotalDisplay:Y(z),remainingValueDisplay:Y(B),remainingPercent:tt(y*100)}}return k}function Mt(E){const x=E?.price||null,I=Number(x?.unitAmount),j=String(x?.currency||"").toUpperCase(),m=String(x?.interval||"").trim(),y=Number(x?.intervalCount);if(Number.isFinite(I)&&I>=0&&m){const w=(I/100).toFixed(2),C=j==="USD"||!j?"US$":`${j} `;if(m==="month"){const k=Number.isFinite(y)&&y>0?y:1;return`${C}${w} / ${k} `}if(m==="year"){const k=Number.isFinite(y)&&y>0?y:1;return k===1?`${C}${w} / `:`${C}${w} / ${k} `}if(m==="week"){const k=Number.isFinite(y)&&y>0?y:1;return k===1?`${C}${w} / `:`${C}${w} / ${k} `}return`${C}${w} / ${m}`}return E.code==="monthly"?"10 USD / 1 ":E.code==="quarterly"?"24 USD / 3 ":E.code==="yearly"?"84 USD / 12 ":""}function kt(E){return{monthly:"10 USD/ 300 ",quarterly:"24 USD/ 8 USD/ 400 ",yearly:"84 USD/ 7 USD/ 500 ",free:" 10 "}[E]||" AI "}function Gt(E){return{monthly:[" 300  300  AI ","Sonnet 4.5 / GPT-5.2 / Gemini 3 Pro / Qwen3-VL-Plus / GLM-4.7"," Provider ",""],quarterly:[" 400 ","GPT-5.2 Extra Thinking / o3 / Opus 4.5","","24 USD/"],yearly:[" 500 ","GPT-5.2 Extra Thinking / o3 / Opus 4.5","","84 USD/"],free:[" 10 ","",""]}[E]||[" AI ",""]}const zt={free:0,monthly:1,quarterly:2,yearly:3};function V(E){if(!t.value||!S.value)return!1;const x=zt[g.value]||0;return(zt[String(E||"").trim()]||0)>x}function A(E){return t.value?t.value.plan_code===E&&t.value.status==="active":!1}function q(E,x){return E.available?x?"...":A(E.code)?"":V(E.code)?"":"":""}async function Nt(){const E=await st.request("/api/billing/subscription");t.value=E.subscription||null}async function At(){c.value=!0,l.value="";try{await st.request("/api/stripe/subscriptions/sync",{method:"POST"}),await Nt(),await Le(),await be()}catch(E){l.value=E?.message||""}finally{c.value=!1}}function Dt(){return!(c.value||t.value?.provider!=="stripe"||Date.now()-d.value<15e3)}async function Ot(E){if(Dt()){d.value=Date.now();try{await At()}catch{}}}async function be(){if(u.value={},!!v.value&&S.value&&o.value?.plans?.length){for(const E of o.value.plans)if(V(E.code)){u.value[E.code]={loading:!0,error:!1,amountDueDisplay:null};try{const x=await st.request("/api/stripe/subscriptions/upgrade/preview",{method:"POST",body:{targetPlanCode:E.code}});u.value[E.code]={...x,loading:!1,error:!1}}catch{u.value[E.code]={loading:!1,error:!0,amountDueDisplay:null}}}}}async function Le(){l.value="";try{o.value=await st.request("/api/stripe/config")}catch(E){o.value=null,l.value=E?.message||"Stripe "}}async function Re(E){l.value="",a.value="",h.value=!0;try{const x=await st.request("/api/stripe/checkout/create",{method:"POST",body:{planCode:E}});if(!x?.url)throw new Error("");window.location.assign(x.url)}catch(x){l.value=x?.message||""}finally{h.value=!1}}async function Jt(){const E=String(p.query.stripe||"").trim(),x=String(p.query.session_id||"").trim();if(E==="cancel"){a.value="";return}if(E==="portal_return"){a.value="...",await At().catch(()=>null),a.value="";return}if(E==="success"&&x){a.value="...";try{await st.request("/api/stripe/checkout/complete",{method:"POST",body:{sessionId:x}})}catch{}await At().catch(()=>null),a.value=""}}async function R(){i.value="",n.value="",r.value=!0;try{const E=await st.request("/api/billing/redeem-activation-code",{method:"POST",body:{code:e.value}});t.value=E.subscription||null,n.value="",e.value=""}catch(E){i.value=E?.message||""}finally{r.value=!1}}return ss([t,o],()=>{be()}),je(async()=>{await Nt(),await Le(),await be(),await Jt(),await Ot();const E=()=>{Ot()},x=()=>{document.visibilityState==="visible"&&Ot()};window.addEventListener("focus",E),document.addEventListener("visibilitychange",x),Ws(()=>{window.removeEventListener("focus",E),document.removeEventListener("visibilitychange",x)})}),(E,x)=>(T(),ae(Hs,{title:"",subtitle:""},{default:Pt(()=>[t.value?(T(),P("div",Fm,[f("div",Vm,[x[1]||(x[1]=f("h2",{class:"card-title",style:{margin:"0"}},"",-1)),t.value?.provider==="stripe"?(T(),P("button",{key:0,class:"btn btn-secondary btn-sm",type:"button",disabled:c.value,onClick:At},L(c.value?"...":""),9,zm)):H("",!0)]),f("div",Um,[f("div",Wm,[x[2]||(x[2]=f("span",{class:"stat-label"},"",-1)),f("span",qm,L(M(t.value.plan_code)),1)]),f("div",Hm,[x[3]||(x[3]=f("span",{class:"stat-label"},"",-1)),f("span",jm,L(D(t.value.status)),1)]),f("div",Km,[x[4]||(x[4]=f("span",{class:"stat-label"},"",-1)),f("span",Gm,L(b(t.value.current_period_end)),1)])])])):H("",!0),f("div",Jm,[x[6]||(x[6]=f("h2",{class:"card-title"},"",-1)),f("div",Xm,[l.value?(T(),P("div",Ym,L(l.value),1)):H("",!0),a.value?(T(),P("p",Qm,L(a.value),1)):H("",!0),o.value?(T(),P("div",Zm,[(T(!0),P(bt,null,me(o.value.plans,(I,j)=>(T(),P("div",{key:I.code,class:vs(["pricing-card",{featured:j===1}])},[j===1?(T(),P("span",tv,"")):H("",!0),f("div",ev,[f("div",sv,L(I.displayName),1),f("div",iv,[_.value[I.code]?(T(),P(bt,{key:0},[f("span",nv,L(_.value[I.code].perMonthDisplay),1),x[5]||(x[5]=f("span",{class:"pricing-period"},"/",-1)),f("span",rv,L(_.value[I.code].payableTotalDisplay)+" / "+L(_.value[I.code].months)+"  ",1),f("span",ov,L(_.value[I.code].originalTotalDisplay),1)],64)):(T(),P(bt,{key:1},[f("span",lv,L(J(I).amount),1),f("span",av,L(J(I).period),1)],64))]),f("div",hv,L(Mt(I)),1),_.value[I.code]?(T(),P("div",uv," "+L(_.value[I.code].remainingValueDisplay)+" "+L(_.value[I.code].remainingPercent)+"% ",1)):V(I.code)&&S.value&&v.value&&u.value[I.code]?.loading?(T(),P("div",cv," ... ")):V(I.code)&&S.value&&v.value&&u.value[I.code]?.error?(T(),P("div",fv,"  Stripe  ")):V(I.code)&&S.value&&!v.value?(T(),P("div",dv,"  Stripe Stripe  ")):H("",!0)]),f("p",pv,L(kt(I.code)),1),f("ul",mv,[(T(!0),P(bt,null,me(Gt(I.code),m=>(T(),P("li",{key:m},L(m),1))),128))]),f("button",{class:vs(["btn",j===1?"btn-primary":"btn-secondary"]),type:"button",disabled:h.value||!I.available||A(I.code),onClick:m=>Re(I.code)},L(q(I,h.value)),11,vv)],2))),128))])):(T(),P("p",gv,"..."))])]),f("div",bv,[x[8]||(x[8]=f("h2",{class:"card-title"},"",-1)),f("form",{class:"card-content",onSubmit:gs(R,["prevent"])},[x[7]||(x[7]=f("p",{class:"text-muted",style:{"margin-bottom":"1rem"}},"",-1)),f("div",yv,[nt(f("input",{"onUpdate:modelValue":x[0]||(x[0]=I=>e.value=I),class:"form-input",placeholder:"",required:""},null,512),[[vt,e.value]]),f("button",{class:"btn btn-primary",type:"submit",disabled:r.value},L(r.value?"...":""),9,_v)]),i.value?(T(),P("p",wv,L(i.value),1)):H("",!0),n.value?(T(),P("p",Sv,L(n.value),1)):H("",!0)],32)])]),_:1}))}},Ev={class:"card"},Cv={class:"grid grid-3"},Mv={class:"form-group"},Tv={class:"form-group"},kv={class:"form-group"},Ov={class:"grid grid-3"},Av={class:"form-group"},Lv={class:"form-group"},Rv={class:"form-group"},Pv=["disabled"],Nv={key:0,class:"form-error"},Dv={key:1,class:"form-success"},Iv={key:2,class:"mt-16"},$v={class:"data-table"},Bv={class:"card"},Fv={class:"card-content"},Vv=["disabled"],zv={key:0,class:"form-error"},Uv={class:"mt-16"},Wv={class:"data-table"},qv=["disabled","onClick"],Hv={__name:"AdminActivationCodesPage",setup(s){const t=qs(),e=jt({planCode:"monthly",durationDays:30,count:1,maxRedemptions:1,expiresAt:"",note:""}),i=W([]),n=W([]),r=W(!1),o=W(""),l=W(!1),a=W(""),h=W("");function u(g){if(!g)return"-";try{return new Date(g).toISOString().slice(0,10)}catch{return String(g)}}async function c(){a.value="",l.value=!0;try{const g=await st.request("/api/admin/activation-codes?limit=50&offset=0");i.value=g.items||[]}catch(g){if(g?.status===403)return t.push("/app");a.value=g?.message||""}finally{l.value=!1}}async function d(){o.value="",n.value=[],r.value=!0;try{const g={planCode:e.planCode.trim(),durationDays:Number(e.durationDays),count:Number(e.count||1),maxRedemptions:Number(e.maxRedemptions||1),note:e.note.trim()||void 0};e.expiresAt.trim()&&(g.expiresAt=e.expiresAt.trim());const v=await st.request("/api/admin/activation-codes",{method:"POST",body:g});n.value=v.codes||[],await c()}catch(g){if(g?.status===403)return t.push("/app");o.value=g?.message||""}finally{r.value=!1}}async function p(g){h.value=g;try{await st.request(`/api/admin/activation-codes/${encodeURIComponent(g)}/revoke`,{method:"POST"}),await c()}catch(v){a.value=v?.message||""}finally{h.value=""}}return je(c),(g,v)=>(T(),ae(Hs,{title:"",subtitle:""},{default:Pt(()=>[f("div",Ev,[v[13]||(v[13]=f("h2",{class:"card-title"},"",-1)),f("form",{class:"card-content",onSubmit:gs(d,["prevent"])},[f("div",Cv,[f("div",Mv,[v[6]||(v[6]=f("label",{class:"form-label"},"",-1)),nt(f("input",{"onUpdate:modelValue":v[0]||(v[0]=S=>e.planCode=S),class:"form-input",placeholder:"monthly / yearly",required:""},null,512),[[vt,e.planCode]])]),f("div",Tv,[v[7]||(v[7]=f("label",{class:"form-label"},"",-1)),nt(f("input",{"onUpdate:modelValue":v[1]||(v[1]=S=>e.durationDays=S),class:"form-input",type:"number",min:"1",required:""},null,512),[[vt,e.durationDays,void 0,{number:!0}]])]),f("div",kv,[v[8]||(v[8]=f("label",{class:"form-label"},"",-1)),nt(f("input",{"onUpdate:modelValue":v[2]||(v[2]=S=>e.count=S),class:"form-input",type:"number",min:"1",max:"100"},null,512),[[vt,e.count,void 0,{number:!0}]])])]),f("div",Ov,[f("div",Av,[v[9]||(v[9]=f("label",{class:"form-label"},"",-1)),nt(f("input",{"onUpdate:modelValue":v[3]||(v[3]=S=>e.maxRedemptions=S),class:"form-input",type:"number",min:"1",max:"1000"},null,512),[[vt,e.maxRedemptions,void 0,{number:!0}]])]),f("div",Lv,[v[10]||(v[10]=f("label",{class:"form-label"},"",-1)),nt(f("input",{"onUpdate:modelValue":v[4]||(v[4]=S=>e.expiresAt=S),class:"form-input",placeholder:"2026-01-01T00:00:00.000Z"},null,512),[[vt,e.expiresAt]])]),f("div",Rv,[v[11]||(v[11]=f("label",{class:"form-label"},"",-1)),nt(f("input",{"onUpdate:modelValue":v[5]||(v[5]=S=>e.note=S),class:"form-input",maxlength:"2000"},null,512),[[vt,e.note]])])]),f("button",{class:"btn btn-primary",type:"submit",disabled:r.value},L(r.value?"...":""),9,Pv),o.value?(T(),P("p",Nv,L(o.value),1)):H("",!0),n.value.length?(T(),P("p",Dv," "+L(n.value.length)+" ",1)):H("",!0),n.value.length?(T(),P("div",Iv,[f("table",$v,[v[12]||(v[12]=f("thead",null,[f("tr",null,[f("th",null,""),f("th",null,""),f("th",null,""),f("th",null,""),f("th",null,"")])],-1)),f("tbody",null,[(T(!0),P(bt,null,me(n.value,S=>(T(),P("tr",{key:S.id},[f("td",null,[f("code",null,L(S.plaintext),1)]),f("td",null,L(S.plan_code),1),f("td",null,L(S.duration_days),1),f("td",null,L(S.max_redemptions),1),f("td",null,L(u(S.expires_at)),1)]))),128))])])])):H("",!0)],32)]),f("div",Bv,[v[15]||(v[15]=f("h2",{class:"card-title"},"",-1)),f("div",Fv,[f("button",{class:"btn btn-secondary",type:"button",onClick:c,disabled:l.value},L(l.value?"...":""),9,Vv),a.value?(T(),P("p",zv,L(a.value),1)):H("",!0),f("div",Uv,[f("table",Wv,[v[14]||(v[14]=f("thead",null,[f("tr",null,[f("th",null,"ID"),f("th",null,""),f("th",null,""),f("th",null,""),f("th",null,""),f("th",null,""),f("th",null,""),f("th",null,""),f("th",null,"")])],-1)),f("tbody",null,[(T(!0),P(bt,null,me(i.value,S=>(T(),P("tr",{key:S.id},[f("td",null,[f("code",null,L(S.id),1)]),f("td",null,L(S.plan_code),1),f("td",null,L(S.duration_days),1),f("td",null,L(S.redeemed_count),1),f("td",null,L(S.max_redemptions),1),f("td",null,L(u(S.expires_at)),1),f("td",null,L(S.revoked_at?"":"-"),1),f("td",null,L(u(S.created_at)),1),f("td",null,[f("button",{class:"btn btn-danger btn-sm",type:"button",disabled:!!S.revoked_at||h.value===S.id,onClick:_=>p(S.id)},L(h.value===S.id?"...":""),9,qv)])]))),128))])])])])])]),_:1}))}};function yt(s){var t=s.width,e=s.height;if(t<0)throw new Error("Negative width is not allowed for Size");if(e<0)throw new Error("Negative height is not allowed for Size");return{width:t,height:e}}function ms(s,t){return s.width===t.width&&s.height===t.height}var jv=(function(){function s(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return s.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(s.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),s.prototype.subscribe=function(t){var e=this,i={next:t};return this._observers.push(i),{unsubscribe:function(){e._observers=e._observers.filter(function(n){return n!==i})}}},s.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},s.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},s.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},s.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(e){return e.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},s})();function Kv(s){return new jv(s)}var Gv=(function(){function s(t,e,i){var n;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=yt({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=e??(function(r){return r}),this._allowResizeObserver=(n=i?.allowResizeObserver)!==null&&n!==void 0?n:!0,this._chooseAndInitObserver()}return s.prototype.dispose=function(){var t,e;if(this._canvasElement===null)throw new Error("Object is disposed");(t=this._canvasElementResizeObserver)===null||t===void 0||t.disconnect(),this._canvasElementResizeObserver=null,(e=this._devicePixelRatioObservable)===null||e===void 0||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(s.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"bitmapSize",{get:function(){return yt({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),s.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=yt(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},s.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},s.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(e){return e!==t})},Object.defineProperty(s.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),s.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},s.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(e){return e!==t})},s.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},s.prototype._resizeBitmap=function(t){var e=this.bitmapSize;ms(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},s.prototype._emitBitmapSizeChanged=function(t,e){var i=this;this._bitmapSizeChangedListeners.forEach(function(n){return n.call(i,t,e)})},s.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,i=yt(this._transformBitmapSize(t,this._canvasElementClientSize)),n=ms(this.bitmapSize,i)?null:i;e===null&&n===null||e!==null&&n!==null&&ms(e,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(e,n))},s.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(n){return n.call(i,t,e)})},s.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}Xv().then(function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})},s.prototype._initDevicePixelRatioObservable=function(){var t=this;if(this._canvasElement!==null){var e=Ll(this._canvasElement);if(e===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=Kv(e),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},s.prototype._invalidateBitmapSize=function(){var t,e;if(this._canvasElement!==null){var i=Ll(this._canvasElement);if(i!==null){var n=(e=(t=this._devicePixelRatioObservable)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:i.devicePixelRatio,r=this._canvasElement.getClientRects(),o=r[0]!==void 0?Yv(r[0],n):yt({width:this._canvasElementClientSize.width*n,height:this._canvasElementClientSize.height*n});this._suggestNewBitmapSize(o)}}},s.prototype._initResizeObserver=function(){var t=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(e){var i=e.find(function(o){return o.target===t._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var n=i.devicePixelContentBoxSize[0],r=yt({width:n.inlineSize,height:n.blockSize});t._suggestNewBitmapSize(r)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},s})();function Jv(s,t){return new Gv(s,t.transform,t.options)}function Ll(s){return s.ownerDocument.defaultView}function Xv(){return new Promise(function(s){var t=new ResizeObserver(function(e){s(e.every(function(i){return"devicePixelContentBoxSize"in i})),t.disconnect()});t.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function Yv(s,t){return yt({width:Math.round(s.left*t+s.width*t)-Math.round(s.left*t),height:Math.round(s.top*t+s.height*t)-Math.round(s.top*t)})}var Qv=(function(){function s(t,e,i){if(e.width===0||e.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=t}return s.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},s.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(s.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),s})();function bs(s,t){var e=s.canvasElementClientSize;if(e.width===0||e.height===0)return null;var i=s.bitmapSize;if(i.width===0||i.height===0)return null;var n=s.canvasElement.getContext("2d",t);return n===null?null:new Qv(n,e,i)}const Zv={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},tg={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},eg={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},sg={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},ig={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},ng={color:"#26a69a",base:0},Gh={color:"#2196f3"},Jh={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var Rl,Pl;function ys(s,t){const e={0:[],1:[s.lineWidth,s.lineWidth],2:[2*s.lineWidth,2*s.lineWidth],3:[6*s.lineWidth,6*s.lineWidth],4:[s.lineWidth,4*s.lineWidth]}[t];s.setLineDash(e)}function Xh(s,t,e,i){s.beginPath();const n=s.lineWidth%2?.5:0;s.moveTo(e,t+n),s.lineTo(i,t+n),s.stroke()}function rs(s,t){if(!s)throw new Error("Assertion failed"+(t?": "+t:""))}function Kt(s){if(s===void 0)throw new Error("Value is undefined");return s}function $(s){if(s===null)throw new Error("Value is null");return s}function Ms(s){return $(Kt(s))}(function(s){s[s.Simple=0]="Simple",s[s.WithSteps=1]="WithSteps",s[s.Curved=2]="Curved"})(Rl||(Rl={})),(function(s){s[s.Solid=0]="Solid",s[s.Dotted=1]="Dotted",s[s.Dashed=2]="Dashed",s[s.LargeDashed=3]="LargeDashed",s[s.SparseDotted=4]="SparseDotted"})(Pl||(Pl={}));const Nl={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function re(s){return s<0?0:s>255?255:Math.round(s)||0}function Yh(s){return s<=0||s>0?s<0?0:s>1?1:Math.round(1e4*s)/1e4:0}const rg=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,og=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,lg=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,ag=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function cn(s){(s=s.toLowerCase())in Nl&&(s=Nl[s]);{const t=ag.exec(s)||lg.exec(s);if(t)return[re(parseInt(t[1],10)),re(parseInt(t[2],10)),re(parseInt(t[3],10)),Yh(t.length<5?1:parseFloat(t[4]))]}{const t=og.exec(s);if(t)return[re(parseInt(t[1],16)),re(parseInt(t[2],16)),re(parseInt(t[3],16)),1]}{const t=rg.exec(s);if(t)return[re(17*parseInt(t[1],16)),re(17*parseInt(t[2],16)),re(17*parseInt(t[3],16)),1]}throw new Error(`Cannot parse color: ${s}`)}function kn(s){const t=cn(s);return{t:`rgb(${t[0]}, ${t[1]}, ${t[2]})`,i:(e=t,.199*e[0]+.687*e[1]+.114*e[2]>160?"black":"white")};var e}class xt{constructor(){this.h=[]}l(t,e,i){const n={o:t,_:e,u:i===!0};this.h.push(n)}v(t){const e=this.h.findIndex((i=>t===i.o));e>-1&&this.h.splice(e,1)}p(t){this.h=this.h.filter((e=>e._!==t))}m(t,e,i){const n=[...this.h];this.h=this.h.filter((r=>!r.u)),n.forEach((r=>r.o(t,e,i)))}M(){return this.h.length>0}S(){this.h=[]}}function ge(s,...t){for(const e of t)for(const i in e)e[i]!==void 0&&(typeof e[i]!="object"||s[i]===void 0||Array.isArray(e[i])?s[i]=e[i]:ge(s[i],e[i]));return s}function Me(s){return typeof s=="number"&&isFinite(s)}function wi(s){return typeof s=="number"&&s%1==0}function Ai(s){return typeof s=="string"}function Di(s){return typeof s=="boolean"}function Be(s){const t=s;if(!t||typeof t!="object")return t;let e,i,n;for(i in e=Array.isArray(t)?[]:{},t)t.hasOwnProperty(i)&&(n=t[i],e[i]=n&&typeof n=="object"?Be(n):n);return e}function hg(s){return s!==null}function Si(s){return s===null?void 0:s}const vo="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Vs(s,t,e){return t===void 0&&(t=vo),`${e=e!==void 0?`${e} `:""}${s}px ${t}`}class ug{constructor(t){this.k={C:1,T:5,P:NaN,R:"",D:"",O:"",A:"",V:0,B:0,I:0,L:0,N:0},this.F=t}W(){const t=this.k,e=this.j(),i=this.H();return t.P===e&&t.D===i||(t.P=e,t.D=i,t.R=Vs(e,i),t.L=2.5/12*e,t.V=t.L,t.B=e/12*t.T,t.I=e/12*t.T,t.N=0),t.O=this.$(),t.A=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class go{constructor(){this.Y=[]}X(t){this.Y=t}K(t,e,i){this.Y.forEach((n=>{n.K(t,e,i)}))}}class bo{K(t,e,i){t.useMediaCoordinateSpace((n=>this.Z(n,e,i)))}G(t,e,i){t.useMediaCoordinateSpace((n=>this.J(n,e,i)))}J(t,e,i){}}class cg extends bo{constructor(){super(...arguments),this.tt=null}it(t){this.tt=t}Z({context:t}){if(this.tt===null||this.tt.nt===null)return;const e=this.tt.nt,i=this.tt,n=r=>{t.beginPath();for(let o=e.to-1;o>=e.from;--o){const l=i.st[o];t.moveTo(l.et,l.rt),t.arc(l.et,l.rt,r,0,2*Math.PI)}t.fill()};i.ht>0&&(t.fillStyle=i.lt,n(i.ot+i.ht)),t.fillStyle=i._t,n(i.ot)}}function fg(){return{st:[{et:0,rt:0,ut:0,ct:0}],_t:"",lt:"",ot:0,ht:0,nt:null}}const dg={from:0,to:1};class pg{constructor(t,e){this.dt=new go,this.ft=[],this.vt=[],this.bt=!0,this.F=t,this.wt=e,this.dt.X(this.ft)}gt(t){const e=this.F.Mt();e.length!==this.ft.length&&(this.vt=e.map(fg),this.ft=this.vt.map((i=>{const n=new cg;return n.it(i),n})),this.dt.X(this.ft)),this.bt=!0}xt(){return this.bt&&(this.St(),this.bt=!1),this.dt}St(){const t=this.wt.W().mode===2,e=this.F.Mt(),i=this.wt.kt(),n=this.F.yt();e.forEach(((r,o)=>{var l;const a=this.vt[o],h=r.Ct(i);if(t||h===null||!r.Tt())return void(a.nt=null);const u=$(r.Pt());a._t=h.Rt,a.ot=h.ot,a.ht=h.Dt,a.st[0].ct=h.ct,a.st[0].rt=r.At().Ot(h.ct,u.Vt),a.lt=(l=h.Bt)!==null&&l!==void 0?l:this.F.It(a.st[0].rt/r.At().zt()),a.st[0].ut=i,a.st[0].et=n.Et(i),a.nt=dg}))}}class Ke{K(t,e,i){t.useBitmapCoordinateSpace((n=>this.Z(n,e,i)))}}class mg extends Ke{constructor(t){super(),this.Lt=t}Z({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.Lt===null)return;const r=this.Lt.Nt.Tt,o=this.Lt.Ft.Tt;if(!r&&!o)return;const l=Math.round(this.Lt.et*i),a=Math.round(this.Lt.rt*n);t.lineCap="butt",r&&l>=0&&(t.lineWidth=Math.floor(this.Lt.Nt.ht*i),t.strokeStyle=this.Lt.Nt.O,t.fillStyle=this.Lt.Nt.O,ys(t,this.Lt.Nt.Wt),(function(h,u,c,d){h.beginPath();const p=h.lineWidth%2?.5:0;h.moveTo(u+p,c),h.lineTo(u+p,d),h.stroke()})(t,l,0,e.height)),o&&a>=0&&(t.lineWidth=Math.floor(this.Lt.Ft.ht*n),t.strokeStyle=this.Lt.Ft.O,t.fillStyle=this.Lt.Ft.O,ys(t,this.Lt.Ft.Wt),Xh(t,a,0,e.width))}}class vg{constructor(t){this.bt=!0,this.jt={Nt:{ht:1,Wt:0,O:"",Tt:!1},Ft:{ht:1,Wt:0,O:"",Tt:!1},et:0,rt:0},this.Ht=new mg(this.jt),this.$t=t}gt(){this.bt=!0}xt(){return this.bt&&(this.St(),this.bt=!1),this.Ht}St(){const t=this.$t.Tt(),e=$(this.$t.Ut()),i=e.qt().W().crosshair,n=this.jt;if(i.mode===2)return n.Ft.Tt=!1,void(n.Nt.Tt=!1);n.Ft.Tt=t&&this.$t.Yt(e),n.Nt.Tt=t&&this.$t.Xt(),n.Ft.ht=i.horzLine.width,n.Ft.Wt=i.horzLine.style,n.Ft.O=i.horzLine.color,n.Nt.ht=i.vertLine.width,n.Nt.Wt=i.vertLine.style,n.Nt.O=i.vertLine.color,n.et=this.$t.Kt(),n.rt=this.$t.Zt()}}function gg(s,t,e,i,n,r){s.fillRect(t+r,e,i-2*r,r),s.fillRect(t+r,e+n-r,i-2*r,r),s.fillRect(t,e,r,n),s.fillRect(t+i-r,e,r,n)}function On(s,t,e,i,n,r){s.save(),s.globalCompositeOperation="copy",s.fillStyle=r,s.fillRect(t,e,i,n),s.restore()}function Dl(s,t){return s.map((e=>e===0?e:e+t))}function Jn(s,t,e,i,n,r){s.beginPath(),s.lineTo(t+i-r[1],e),r[1]!==0&&s.arcTo(t+i,e,t+i,e+r[1],r[1]),s.lineTo(t+i,e+n-r[2]),r[2]!==0&&s.arcTo(t+i,e+n,t+i-r[2],e+n,r[2]),s.lineTo(t+r[3],e+n),r[3]!==0&&s.arcTo(t,e+n,t,e+n-r[3],r[3]),s.lineTo(t,e+r[0]),r[0]!==0&&s.arcTo(t,e,t+r[0],e,r[0])}function Il(s,t,e,i,n,r,o=0,l=[0,0,0,0],a=""){if(s.save(),!o||!a||a===r)return Jn(s,t,e,i,n,l),s.fillStyle=r,s.fill(),void s.restore();const h=o/2;r!=="transparent"&&(Jn(s,t+o,e+o,i-2*o,n-2*o,Dl(l,-o)),s.fillStyle=r,s.fill()),a!=="transparent"&&(Jn(s,t+h,e+h,i-o,n-o,Dl(l,-h)),s.lineWidth=o,s.strokeStyle=a,s.closePath(),s.stroke()),s.restore()}function Qh(s,t,e,i,n,r,o){s.save(),s.globalCompositeOperation="copy";const l=s.createLinearGradient(0,0,0,n);l.addColorStop(0,r),l.addColorStop(1,o),s.fillStyle=l,s.fillRect(t,e,i,n),s.restore()}class $l{constructor(t,e){this.it(t,e)}it(t,e){this.Lt=t,this.Gt=e}zt(t,e){return this.Lt.Tt?t.P+t.L+t.V:0}K(t,e,i,n){if(!this.Lt.Tt||this.Lt.Jt.length===0)return;const r=this.Lt.O,o=this.Gt.t,l=t.useBitmapCoordinateSpace((a=>{const h=a.context;h.font=e.R;const u=this.Qt(a,e,i,n),c=u.ti,d=(p,g)=>{u.ii?Il(h,c.ni,c.si,c.ei,c.ri,p,c.hi,[c.ot,0,0,c.ot],g):Il(h,c.li,c.si,c.ei,c.ri,p,c.hi,[0,c.ot,c.ot,0],g)};return d(o,"transparent"),this.Lt.ai&&(h.fillStyle=r,h.fillRect(c.li,c.oi,c._i-c.li,c.ui)),d("transparent",o),this.Lt.ci&&(h.fillStyle=e.A,h.fillRect(u.ii?c.di-c.hi:0,c.si,c.hi,c.fi-c.si)),u}));t.useMediaCoordinateSpace((({context:a})=>{const h=l.vi;a.font=e.R,a.textAlign=l.ii?"right":"left",a.textBaseline="middle",a.fillStyle=r,a.fillText(this.Lt.Jt,h.pi,(h.si+h.fi)/2+h.mi)}))}Qt(t,e,i,n){var r;const{context:o,bitmapSize:l,mediaSize:a,horizontalPixelRatio:h,verticalPixelRatio:u}=t,c=this.Lt.ai||!this.Lt.bi?e.T:0,d=this.Lt.wi?e.C:0,p=e.L+this.Gt.gi,g=e.V+this.Gt.Mi,v=e.B,S=e.I,_=this.Lt.Jt,b=e.P,M=i.xi(o,_),D=Math.ceil(i.Si(o,_)),J=b+p+g,tt=e.C+v+S+D+c,Y=Math.max(1,Math.floor(u));let rt=Math.round(J*u);rt%2!=Y%2&&(rt+=1);const _t=d>0?Math.max(1,Math.floor(d*h)):0,St=Math.round(tt*h),Vt=Math.round(c*h),Mt=(r=this.Gt.ki)!==null&&r!==void 0?r:this.Gt.yi,kt=Math.round(Mt*u)-Math.floor(.5*u),Gt=Math.floor(kt+Y/2-rt/2),zt=Gt+rt,V=n==="right",A=V?a.width-d:d,q=V?l.width-_t:_t;let Nt,At,Dt;return V?(Nt=q-St,At=q-Vt,Dt=A-c-v-d):(Nt=q+St,At=q+Vt,Dt=A+c+v),{ii:V,ti:{si:Gt,oi:kt,fi:zt,ei:St,ri:rt,ot:2*h,hi:_t,ni:Nt,li:q,_i:At,ui:Y,di:l.width},vi:{si:Gt/u,fi:zt/u,pi:Dt,mi:M}}}}class An{constructor(t){this.Ci={yi:0,t:"#000",Mi:0,gi:0},this.Ti={Jt:"",Tt:!1,ai:!0,bi:!1,Bt:"",O:"#FFF",ci:!1,wi:!1},this.Pi={Jt:"",Tt:!1,ai:!1,bi:!0,Bt:"",O:"#FFF",ci:!0,wi:!0},this.bt=!0,this.Ri=new(t||$l)(this.Ti,this.Ci),this.Di=new(t||$l)(this.Pi,this.Ci)}Jt(){return this.Oi(),this.Ti.Jt}yi(){return this.Oi(),this.Ci.yi}gt(){this.bt=!0}zt(t,e=!1){return Math.max(this.Ri.zt(t,e),this.Di.zt(t,e))}Ai(){return this.Ci.ki||0}Vi(t){this.Ci.ki=t}Bi(){return this.Oi(),this.Ti.Tt||this.Pi.Tt}Ii(){return this.Oi(),this.Ti.Tt}xt(t){return this.Oi(),this.Ti.ai=this.Ti.ai&&t.W().ticksVisible,this.Pi.ai=this.Pi.ai&&t.W().ticksVisible,this.Ri.it(this.Ti,this.Ci),this.Di.it(this.Pi,this.Ci),this.Ri}zi(){return this.Oi(),this.Ri.it(this.Ti,this.Ci),this.Di.it(this.Pi,this.Ci),this.Di}Oi(){this.bt&&(this.Ti.ai=!0,this.Pi.ai=!1,this.Ei(this.Ti,this.Pi,this.Ci))}}class bg extends An{constructor(t,e,i){super(),this.$t=t,this.Li=e,this.Ni=i}Ei(t,e,i){if(t.Tt=!1,this.$t.W().mode===2)return;const n=this.$t.W().horzLine;if(!n.labelVisible)return;const r=this.Li.Pt();if(!this.$t.Tt()||this.Li.Fi()||r===null)return;const o=kn(n.labelBackgroundColor);i.t=o.t,t.O=o.i;const l=2/12*this.Li.P();i.gi=l,i.Mi=l;const a=this.Ni(this.Li);i.yi=a.yi,t.Jt=this.Li.Wi(a.ct,r),t.Tt=!0}}const yg=/[1-9]/g;class Zh{constructor(){this.Lt=null}it(t){this.Lt=t}K(t,e){if(this.Lt===null||this.Lt.Tt===!1||this.Lt.Jt.length===0)return;const i=t.useMediaCoordinateSpace((({context:d})=>(d.font=e.R,Math.round(e.ji.Si(d,$(this.Lt).Jt,yg)))));if(i<=0)return;const n=e.Hi,r=i+2*n,o=r/2,l=this.Lt.$i;let a=this.Lt.yi,h=Math.floor(a-o)+.5;h<0?(a+=Math.abs(0-h),h=Math.floor(a-o)+.5):h+r>l&&(a-=Math.abs(l-(h+r)),h=Math.floor(a-o)+.5);const u=h+r,c=Math.ceil(0+e.C+e.T+e.L+e.P+e.V);t.useBitmapCoordinateSpace((({context:d,horizontalPixelRatio:p,verticalPixelRatio:g})=>{const v=$(this.Lt);d.fillStyle=v.t;const S=Math.round(h*p),_=Math.round(0*g),b=Math.round(u*p),M=Math.round(c*g),D=Math.round(2*p);if(d.beginPath(),d.moveTo(S,_),d.lineTo(S,M-D),d.arcTo(S,M,S+D,M,D),d.lineTo(b-D,M),d.arcTo(b,M,b,M-D,D),d.lineTo(b,_),d.fill(),v.ai){const J=Math.round(v.yi*p),tt=_,Y=Math.round((tt+e.T)*g);d.fillStyle=v.O;const rt=Math.max(1,Math.floor(p)),_t=Math.floor(.5*p);d.fillRect(J-_t,tt,rt,Y-tt)}})),t.useMediaCoordinateSpace((({context:d})=>{const p=$(this.Lt),g=0+e.C+e.T+e.L+e.P/2;d.font=e.R,d.textAlign="left",d.textBaseline="middle",d.fillStyle=p.O;const v=e.ji.xi(d,"Apr0");d.translate(h+n,g+v),d.fillText(p.Jt,0,0)}))}}class _g{constructor(t,e,i){this.bt=!0,this.Ht=new Zh,this.jt={Tt:!1,t:"#4c525e",O:"white",Jt:"",$i:0,yi:NaN,ai:!0},this.wt=t,this.Ui=e,this.Ni=i}gt(){this.bt=!0}xt(){return this.bt&&(this.St(),this.bt=!1),this.Ht.it(this.jt),this.Ht}St(){const t=this.jt;if(t.Tt=!1,this.wt.W().mode===2)return;const e=this.wt.W().vertLine;if(!e.labelVisible)return;const i=this.Ui.yt();if(i.Fi())return;t.$i=i.$i();const n=this.Ni();if(n===null)return;t.yi=n.yi;const r=i.qi(this.wt.kt());t.Jt=i.Yi($(r)),t.Tt=!0;const o=kn(e.labelBackgroundColor);t.t=o.t,t.O=o.i,t.ai=i.W().ticksVisible}}class yo{constructor(){this.Xi=null,this.Ki=0}Zi(){return this.Ki}Gi(t){this.Ki=t}At(){return this.Xi}Ji(t){this.Xi=t}Qi(t){return[]}tn(){return[]}Tt(){return!0}}var Dr;(function(s){s[s.Normal=0]="Normal",s[s.Magnet=1]="Magnet",s[s.Hidden=2]="Hidden"})(Dr||(Dr={}));class wg extends yo{constructor(t,e){super(),this.nn=null,this.sn=NaN,this.en=0,this.rn=!0,this.hn=new Map,this.ln=!1,this.an=NaN,this.on=NaN,this._n=NaN,this.un=NaN,this.Ui=t,this.cn=e,this.dn=new pg(t,this),this.fn=((n,r)=>o=>{const l=r(),a=n();if(o===$(this.nn).vn())return{ct:a,yi:l};{const h=$(o.Pt());return{ct:o.pn(l,h),yi:l}}})((()=>this.sn),(()=>this.on));const i=((n,r)=>()=>{const o=this.Ui.yt().mn(n()),l=r();return o&&Number.isFinite(l)?{ut:o,yi:l}:null})((()=>this.en),(()=>this.Kt()));this.bn=new _g(this,t,i),this.wn=new vg(this)}W(){return this.cn}gn(t,e){this._n=t,this.un=e}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(t,e,i){this.ln||(this.ln=!0),this.rn=!0,this.yn(t,e,i)}kt(){return this.en}Kt(){return this.an}Zt(){return this.on}Tt(){return this.rn}Cn(){this.rn=!1,this.Tn(),this.sn=NaN,this.an=NaN,this.on=NaN,this.nn=null,this.Mn()}Pn(t){return this.nn!==null?[this.wn,this.dn]:[]}Yt(t){return t===this.nn&&this.cn.horzLine.visible}Xt(){return this.cn.vertLine.visible}Rn(t,e){this.rn&&this.nn===t||this.hn.clear();const i=[];return this.nn===t&&i.push(this.Dn(this.hn,e,this.fn)),i}tn(){return this.rn?[this.bn]:[]}Ut(){return this.nn}On(){this.wn.gt(),this.hn.forEach((t=>t.gt())),this.bn.gt(),this.dn.gt()}An(t){return t&&!t.vn().Fi()?t.vn():null}yn(t,e,i){this.Vn(t,e,i)&&this.On()}Vn(t,e,i){const n=this.an,r=this.on,o=this.sn,l=this.en,a=this.nn,h=this.An(i);this.en=t,this.an=isNaN(t)?NaN:this.Ui.yt().Et(t),this.nn=i;const u=h!==null?h.Pt():null;return h!==null&&u!==null?(this.sn=e,this.on=h.Ot(e,u)):(this.sn=NaN,this.on=NaN),n!==this.an||r!==this.on||l!==this.en||o!==this.sn||a!==this.nn}Tn(){const t=this.Ui.Mt().map((i=>i.In().Bn())).filter(hg),e=t.length===0?null:Math.max(...t);this.en=e!==null?e:NaN}Dn(t,e,i){let n=t.get(e);return n===void 0&&(n=new bg(this,e,i),t.set(e,n)),n}}function Ln(s){return s==="left"||s==="right"}class Lt{constructor(t){this.zn=new Map,this.En=[],this.Ln=t}Nn(t,e){const i=(function(n,r){return n===void 0?r:{Fn:Math.max(n.Fn,r.Fn),Wn:n.Wn||r.Wn}})(this.zn.get(t),e);this.zn.set(t,i)}jn(){return this.Ln}Hn(t){const e=this.zn.get(t);return e===void 0?{Fn:this.Ln}:{Fn:Math.max(this.Ln,e.Fn),Wn:e.Wn}}$n(){this.Un(),this.En=[{qn:0}]}Yn(t){this.Un(),this.En=[{qn:1,Vt:t}]}Xn(t){this.Kn(),this.En.push({qn:5,Vt:t})}Un(){this.Kn(),this.En.push({qn:6})}Zn(){this.Un(),this.En=[{qn:4}]}Gn(t){this.Un(),this.En.push({qn:2,Vt:t})}Jn(t){this.Un(),this.En.push({qn:3,Vt:t})}Qn(){return this.En}ts(t){for(const e of t.En)this.ns(e);this.Ln=Math.max(this.Ln,t.Ln),t.zn.forEach(((e,i)=>{this.Nn(i,e)}))}static ss(){return new Lt(2)}static es(){return new Lt(3)}ns(t){switch(t.qn){case 0:this.$n();break;case 1:this.Yn(t.Vt);break;case 2:this.Gn(t.Vt);break;case 3:this.Jn(t.Vt);break;case 4:this.Zn();break;case 5:this.Xn(t.Vt);break;case 6:this.Kn()}}Kn(){const t=this.En.findIndex((e=>e.qn===5));t!==-1&&this.En.splice(t,1)}}const Bl=".";function Fe(s,t){if(!Me(s))return"n/a";if(!wi(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return t===0?s.toString():("0000000000000000"+s.toString()).slice(-t)}class Rn{constructor(t,e){if(e||(e=1),Me(t)&&wi(t)||(t=100),t<0)throw new TypeError("invalid base");this.Li=t,this.rs=e,this.hs()}format(t){const e=t<0?"":"";return t=Math.abs(t),e+this.ls(t)}hs(){if(this.os=0,this.Li>0&&this.rs>0){let t=this.Li;for(;t>1;)t/=10,this.os++}}ls(t){const e=this.Li/this.rs;let i=Math.floor(t),n="";const r=this.os!==void 0?this.os:NaN;if(e>1){let o=+(Math.round(t*e)-i*e).toFixed(this.os);o>=e&&(o-=e,i+=1),n=Bl+Fe(+o.toFixed(this.os)*this.rs,r)}else i=Math.round(i*e)/e,r>0&&(n=Bl+Fe(0,r));return i.toFixed(0)+n}}class tu extends Rn{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class Sg{constructor(t){this._s=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.us(t):t<999995?e+this.us(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.us(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.us(t/1e9)+"B")}us(t){let e;const i=Math.pow(10,this._s);return e=(t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this._s).replace(/\.?0+$/,""):String(t),e.replace(/(\.[1-9]*)0+$/,((n,r)=>r))}}function eu(s,t,e,i,n,r,o){if(t.length===0||i.from>=t.length||i.to<=0)return;const{context:l,horizontalPixelRatio:a,verticalPixelRatio:h}=s,u=t[i.from];let c=r(s,u),d=u;if(i.to-i.from<2){const p=n/2;l.beginPath();const g={et:u.et-p,rt:u.rt},v={et:u.et+p,rt:u.rt};l.moveTo(g.et*a,g.rt*h),l.lineTo(v.et*a,v.rt*h),o(s,c,g,v)}else{const p=(v,S)=>{o(s,c,d,S),l.beginPath(),c=v,d=S};let g=d;l.beginPath(),l.moveTo(u.et*a,u.rt*h);for(let v=i.from+1;v<i.to;++v){g=t[v];const S=r(s,g);switch(e){case 0:l.lineTo(g.et*a,g.rt*h);break;case 1:l.lineTo(g.et*a,t[v-1].rt*h),S!==c&&(p(S,g),l.lineTo(g.et*a,t[v-1].rt*h)),l.lineTo(g.et*a,g.rt*h);break;case 2:{const[_,b]=xg(t,v-1,v);l.bezierCurveTo(_.et*a,_.rt*h,b.et*a,b.rt*h,g.et*a,g.rt*h);break}}e!==1&&S!==c&&(p(S,g),l.moveTo(g.et*a,g.rt*h))}(d!==g||d===g&&e===1)&&o(s,c,d,g)}}const Fl=6;function Xn(s,t){return{et:s.et-t.et,rt:s.rt-t.rt}}function Vl(s,t){return{et:s.et/t,rt:s.rt/t}}function xg(s,t,e){const i=Math.max(0,t-1),n=Math.min(s.length-1,e+1);var r,o;return[(r=s[t],o=Vl(Xn(s[e],s[i]),Fl),{et:r.et+o.et,rt:r.rt+o.rt}),Xn(s[e],Vl(Xn(s[n],s[t]),Fl))]}function Eg(s,t,e,i,n){const{context:r,horizontalPixelRatio:o,verticalPixelRatio:l}=t;r.lineTo(n.et*o,s*l),r.lineTo(i.et*o,s*l),r.closePath(),r.fillStyle=e,r.fill()}class su extends Ke{constructor(){super(...arguments),this.tt=null}it(t){this.tt=t}Z(t){var e;if(this.tt===null)return;const{st:i,nt:n,cs:r,ht:o,Wt:l,ds:a}=this.tt,h=(e=this.tt.fs)!==null&&e!==void 0?e:this.tt.vs?0:t.mediaSize.height;if(n===null)return;const u=t.context;u.lineCap="butt",u.lineJoin="round",u.lineWidth=o,ys(u,l),u.lineWidth=1,eu(t,i,a,n,r,this.ps.bind(this),Eg.bind(null,h))}}function Ir(s,t,e){return Math.min(Math.max(s,t),e)}function Ii(s,t,e){return t-s<=e}function iu(s){const t=Math.ceil(s);return t%2==0?t-1:t}class _o{bs(t,e){const i=this.ws,{gs:n,Ms:r,xs:o,Ss:l,ks:a,fs:h}=e;if(this.ys===void 0||i===void 0||i.gs!==n||i.Ms!==r||i.xs!==o||i.Ss!==l||i.fs!==h||i.ks!==a){const u=t.context.createLinearGradient(0,0,0,a);if(u.addColorStop(0,n),h!=null){const c=Ir(h*t.verticalPixelRatio/a,0,1);u.addColorStop(c,r),u.addColorStop(c,o)}u.addColorStop(1,l),this.ys=u,this.ws=e}return this.ys}}class Cg extends su{constructor(){super(...arguments),this.Cs=new _o}ps(t,e){return this.Cs.bs(t,{gs:e.Ts,Ms:"",xs:"",Ss:e.Ps,ks:t.bitmapSize.height})}}function Mg(s,t){const e=s.context;e.strokeStyle=t,e.stroke()}class nu extends Ke{constructor(){super(...arguments),this.tt=null}it(t){this.tt=t}Z(t){if(this.tt===null)return;const{st:e,nt:i,cs:n,ds:r,ht:o,Wt:l,Rs:a}=this.tt;if(i===null)return;const h=t.context;h.lineCap="butt",h.lineWidth=o*t.verticalPixelRatio,ys(h,l),h.lineJoin="round";const u=this.Ds.bind(this);r!==void 0&&eu(t,e,r,i,n,u,Mg),a&&(function(c,d,p,g,v){const{horizontalPixelRatio:S,verticalPixelRatio:_,context:b}=c;let M=null;const D=Math.max(1,Math.floor(S))%2/2,J=p*_+D;for(let tt=g.to-1;tt>=g.from;--tt){const Y=d[tt];if(Y){const rt=v(c,Y);rt!==M&&(b.beginPath(),M!==null&&b.fill(),b.fillStyle=rt,M=rt);const _t=Math.round(Y.et*S)+D,St=Y.rt*_;b.moveTo(_t,St),b.arc(_t,St,J,0,2*Math.PI)}}b.fill()})(t,e,a,i,u)}}class ru extends nu{Ds(t,e){return e._t}}function ou(s,t,e,i,n=0,r=t.length){let o=r-n;for(;0<o;){const l=o>>1,a=n+l;i(t[a],e)===s?(n=a+1,o-=l+1):o=l}return n}const Li=ou.bind(null,!0),lu=ou.bind(null,!1);function Tg(s,t){return s.ut<t}function kg(s,t){return t<s.ut}function au(s,t,e){const i=t.Os(),n=t.di(),r=Li(s,i,Tg),o=lu(s,n,kg);if(!e)return{from:r,to:o};let l=r,a=o;return r>0&&r<s.length&&s[r].ut>=i&&(l=r-1),o>0&&o<s.length&&s[o-1].ut<=n&&(a=o+1),{from:l,to:a}}class wo{constructor(t,e,i){this.As=!0,this.Vs=!0,this.Bs=!0,this.Is=[],this.zs=null,this.Es=t,this.Ls=e,this.Ns=i}gt(t){this.As=!0,t==="data"&&(this.Vs=!0),t==="options"&&(this.Bs=!0)}xt(){return this.Es.Tt()?(this.Fs(),this.zs===null?null:this.Ws):null}js(){this.Is=this.Is.map((t=>Object.assign(Object.assign({},t),this.Es.$s().Hs(t.ut))))}Us(){this.zs=null}Fs(){this.Vs&&(this.qs(),this.Vs=!1),this.Bs&&(this.js(),this.Bs=!1),this.As&&(this.Ys(),this.As=!1)}Ys(){const t=this.Es.At(),e=this.Ls.yt();if(this.Us(),e.Fi()||t.Fi())return;const i=e.Xs();if(i===null||this.Es.In().Ks()===0)return;const n=this.Es.Pt();n!==null&&(this.zs=au(this.Is,i,this.Ns),this.Zs(t,e,n.Vt),this.Gs())}}class Pn extends wo{constructor(t,e){super(t,e,!0)}Zs(t,e,i){e.Js(this.Is,Si(this.zs)),t.Qs(this.Is,i,Si(this.zs))}te(t,e){return{ut:t,ct:e,et:NaN,rt:NaN}}qs(){const t=this.Es.$s();this.Is=this.Es.In().ie().map((e=>{const i=e.Vt[3];return this.ne(e.se,i,t)}))}}class Og extends Pn{constructor(t,e){super(t,e),this.Ws=new go,this.ee=new Cg,this.re=new ru,this.Ws.X([this.ee,this.re])}ne(t,e,i){return Object.assign(Object.assign({},this.te(t,e)),i.Hs(t))}Gs(){const t=this.Es.W();this.ee.it({ds:t.lineType,st:this.Is,Wt:t.lineStyle,ht:t.lineWidth,fs:null,vs:t.invertFilledArea,nt:this.zs,cs:this.Ls.yt().he()}),this.re.it({ds:t.lineVisible?t.lineType:void 0,st:this.Is,Wt:t.lineStyle,ht:t.lineWidth,nt:this.zs,cs:this.Ls.yt().he(),Rs:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0})}}class Ag extends Ke{constructor(){super(...arguments),this.Lt=null,this.le=0,this.ae=0}it(t){this.Lt=t}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(this.Lt===null||this.Lt.In.length===0||this.Lt.nt===null)return;this.le=this.oe(e),this.le>=2&&Math.max(1,Math.floor(e))%2!=this.le%2&&this.le--,this.ae=this.Lt._e?Math.min(this.le,Math.floor(e)):this.le;let n=null;const r=this.ae<=this.le&&this.Lt.he>=Math.floor(1.5*e);for(let o=this.Lt.nt.from;o<this.Lt.nt.to;++o){const l=this.Lt.In[o];n!==l.ue&&(t.fillStyle=l.ue,n=l.ue);const a=Math.floor(.5*this.ae),h=Math.round(l.et*e),u=h-a,c=this.ae,d=u+c-1,p=Math.min(l.ce,l.de),g=Math.max(l.ce,l.de),v=Math.round(p*i)-a,S=Math.round(g*i)+a,_=Math.max(S-v,this.ae);t.fillRect(u,v,c,_);const b=Math.ceil(1.5*this.le);if(r){if(this.Lt.fe){const tt=h-b;let Y=Math.max(v,Math.round(l.ve*i)-a),rt=Y+c-1;rt>v+_-1&&(rt=v+_-1,Y=rt-c+1),t.fillRect(tt,Y,u-tt,rt-Y+1)}const M=h+b;let D=Math.max(v,Math.round(l.pe*i)-a),J=D+c-1;J>v+_-1&&(J=v+_-1,D=J-c+1),t.fillRect(d+1,D,M-d,J-D+1)}}}oe(t){const e=Math.floor(t);return Math.max(e,Math.floor((function(i,n){return Math.floor(.3*i*n)})($(this.Lt).he,t)))}}class hu extends wo{constructor(t,e){super(t,e,!1)}Zs(t,e,i){e.Js(this.Is,Si(this.zs)),t.me(this.Is,i,Si(this.zs))}be(t,e,i){return{ut:t,we:e.Vt[0],ge:e.Vt[1],Me:e.Vt[2],xe:e.Vt[3],et:NaN,ve:NaN,ce:NaN,de:NaN,pe:NaN}}qs(){const t=this.Es.$s();this.Is=this.Es.In().ie().map((e=>this.ne(e.se,e,t)))}}class Lg extends hu{constructor(){super(...arguments),this.Ws=new Ag}ne(t,e,i){return Object.assign(Object.assign({},this.be(t,e,i)),i.Hs(t))}Gs(){const t=this.Es.W();this.Ws.it({In:this.Is,he:this.Ls.yt().he(),fe:t.openVisible,_e:t.thinBars,nt:this.zs})}}class Rg extends su{constructor(){super(...arguments),this.Cs=new _o}ps(t,e){const i=this.tt;return this.Cs.bs(t,{gs:e.Se,Ms:e.ke,xs:e.ye,Ss:e.Ce,ks:t.bitmapSize.height,fs:i.fs})}}class Pg extends nu{constructor(){super(...arguments),this.Te=new _o}Ds(t,e){const i=this.tt;return this.Te.bs(t,{gs:e.Pe,Ms:e.Pe,xs:e.Re,Ss:e.Re,ks:t.bitmapSize.height,fs:i.fs})}}class Ng extends Pn{constructor(t,e){super(t,e),this.Ws=new go,this.De=new Rg,this.Oe=new Pg,this.Ws.X([this.De,this.Oe])}ne(t,e,i){return Object.assign(Object.assign({},this.te(t,e)),i.Hs(t))}Gs(){const t=this.Es.Pt();if(t===null)return;const e=this.Es.W(),i=this.Es.At().Ot(e.baseValue.price,t.Vt),n=this.Ls.yt().he();this.De.it({st:this.Is,ht:e.lineWidth,Wt:e.lineStyle,ds:e.lineType,fs:i,vs:!1,nt:this.zs,cs:n}),this.Oe.it({st:this.Is,ht:e.lineWidth,Wt:e.lineStyle,ds:e.lineVisible?e.lineType:void 0,Rs:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,fs:i,nt:this.zs,cs:n})}}class Dg extends Ke{constructor(){super(...arguments),this.Lt=null,this.le=0}it(t){this.Lt=t}Z(t){if(this.Lt===null||this.Lt.In.length===0||this.Lt.nt===null)return;const{horizontalPixelRatio:e}=t;this.le=(function(r,o){if(r>=2.5&&r<=4)return Math.floor(3*o);const l=1-.2*Math.atan(Math.max(4,r)-4)/(.5*Math.PI),a=Math.floor(r*l*o),h=Math.floor(r*o),u=Math.min(a,h);return Math.max(Math.floor(o),u)})(this.Lt.he,e),this.le>=2&&Math.floor(e)%2!=this.le%2&&this.le--;const i=this.Lt.In;this.Lt.Ae&&this.Ve(t,i,this.Lt.nt),this.Lt.ci&&this.Be(t,i,this.Lt.nt);const n=this.Ie(e);(!this.Lt.ci||this.le>2*n)&&this.ze(t,i,this.Lt.nt)}Ve(t,e,i){if(this.Lt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:o}=t;let l="",a=Math.min(Math.floor(r),Math.floor(this.Lt.he*r));a=Math.max(Math.floor(r),Math.min(a,this.le));const h=Math.floor(.5*a);let u=null;for(let c=i.from;c<i.to;c++){const d=e[c];d.Ee!==l&&(n.fillStyle=d.Ee,l=d.Ee);const p=Math.round(Math.min(d.ve,d.pe)*o),g=Math.round(Math.max(d.ve,d.pe)*o),v=Math.round(d.ce*o),S=Math.round(d.de*o);let _=Math.round(r*d.et)-h;const b=_+a-1;u!==null&&(_=Math.max(u+1,_),_=Math.min(_,b));const M=b-_+1;n.fillRect(_,v,M,p-v),n.fillRect(_,g+1,M,S-g),u=b}}Ie(t){let e=Math.floor(1*t);this.le<=2*e&&(e=Math.floor(.5*(this.le-1)));const i=Math.max(Math.floor(t),e);return this.le<=2*i?Math.max(Math.floor(t),Math.floor(1*t)):i}Be(t,e,i){if(this.Lt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:o}=t;let l="";const a=this.Ie(r);let h=null;for(let u=i.from;u<i.to;u++){const c=e[u];c.Le!==l&&(n.fillStyle=c.Le,l=c.Le);let d=Math.round(c.et*r)-Math.floor(.5*this.le);const p=d+this.le-1,g=Math.round(Math.min(c.ve,c.pe)*o),v=Math.round(Math.max(c.ve,c.pe)*o);if(h!==null&&(d=Math.max(h+1,d),d=Math.min(d,p)),this.Lt.he*r>2*a)gg(n,d,g,p-d+1,v-g+1,a);else{const S=p-d+1;n.fillRect(d,g,S,v-g+1)}h=p}}ze(t,e,i){if(this.Lt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:o}=t;let l="";const a=this.Ie(r);for(let h=i.from;h<i.to;h++){const u=e[h];let c=Math.round(Math.min(u.ve,u.pe)*o),d=Math.round(Math.max(u.ve,u.pe)*o),p=Math.round(u.et*r)-Math.floor(.5*this.le),g=p+this.le-1;if(u.ue!==l){const v=u.ue;n.fillStyle=v,l=v}this.Lt.ci&&(p+=a,c+=a,g-=a,d-=a),c>d||n.fillRect(p,c,g-p+1,d-c+1)}}}class Ig extends hu{constructor(){super(...arguments),this.Ws=new Dg}ne(t,e,i){return Object.assign(Object.assign({},this.be(t,e,i)),i.Hs(t))}Gs(){const t=this.Es.W();this.Ws.it({In:this.Is,he:this.Ls.yt().he(),Ae:t.wickVisible,ci:t.borderVisible,nt:this.zs})}}class $g{constructor(t,e){this.Ne=t,this.Li=e}K(t,e,i){this.Ne.draw(t,this.Li,e,i)}}class Yn extends wo{constructor(t,e,i){super(t,e,!1),this.wn=i,this.Ws=new $g(this.wn.renderer(),(n=>{const r=t.Pt();return r===null?null:t.At().Ot(n,r.Vt)}))}Fe(t){return this.wn.priceValueBuilder(t)}We(t){return this.wn.isWhitespace(t)}qs(){const t=this.Es.$s();this.Is=this.Es.In().ie().map((e=>Object.assign(Object.assign({ut:e.se,et:NaN},t.Hs(e.se)),{je:e.He})))}Zs(t,e){e.Js(this.Is,Si(this.zs))}Gs(){this.wn.update({bars:this.Is.map(Bg),barSpacing:this.Ls.yt().he(),visibleRange:this.zs},this.Es.W())}}function Bg(s){return{x:s.et,time:s.ut,originalData:s.je,barColor:s.ue}}class Fg extends Ke{constructor(){super(...arguments),this.Lt=null,this.$e=[]}it(t){this.Lt=t,this.$e=[]}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(this.Lt===null||this.Lt.st.length===0||this.Lt.nt===null)return;this.$e.length||this.Ue(e);const n=Math.max(1,Math.floor(i)),r=Math.round(this.Lt.qe*i)-Math.floor(n/2),o=r+n;for(let l=this.Lt.nt.from;l<this.Lt.nt.to;l++){const a=this.Lt.st[l],h=this.$e[l-this.Lt.nt.from],u=Math.round(a.rt*i);let c,d;t.fillStyle=a.ue,u<=r?(c=u,d=o):(c=r,d=u-Math.floor(n/2)+n),t.fillRect(h.Os,c,h.di-h.Os+1,d-c)}}Ue(t){if(this.Lt===null||this.Lt.st.length===0||this.Lt.nt===null)return void(this.$e=[]);const e=Math.ceil(this.Lt.he*t)<=1?0:Math.max(1,Math.floor(t)),i=Math.round(this.Lt.he*t)-e;this.$e=new Array(this.Lt.nt.to-this.Lt.nt.from);for(let r=this.Lt.nt.from;r<this.Lt.nt.to;r++){const o=this.Lt.st[r],l=Math.round(o.et*t);let a,h;if(i%2){const u=(i-1)/2;a=l-u,h=l+u}else{const u=i/2;a=l-u,h=l+u-1}this.$e[r-this.Lt.nt.from]={Os:a,di:h,Ye:l,Xe:o.et*t,ut:o.ut}}for(let r=this.Lt.nt.from+1;r<this.Lt.nt.to;r++){const o=this.$e[r-this.Lt.nt.from],l=this.$e[r-this.Lt.nt.from-1];o.ut===l.ut+1&&o.Os-l.di!==e+1&&(l.Ye>l.Xe?l.di=o.Os-e-1:o.Os=l.di+e+1)}let n=Math.ceil(this.Lt.he*t);for(let r=this.Lt.nt.from;r<this.Lt.nt.to;r++){const o=this.$e[r-this.Lt.nt.from];o.di<o.Os&&(o.di=o.Os);const l=o.di-o.Os+1;n=Math.min(l,n)}if(e>0&&n<4)for(let r=this.Lt.nt.from;r<this.Lt.nt.to;r++){const o=this.$e[r-this.Lt.nt.from];o.di-o.Os+1>n&&(o.Ye>o.Xe?o.di-=1:o.Os+=1)}}}class Vg extends Pn{constructor(){super(...arguments),this.Ws=new Fg}ne(t,e,i){return Object.assign(Object.assign({},this.te(t,e)),i.Hs(t))}Gs(){const t={st:this.Is,he:this.Ls.yt().he(),nt:this.zs,qe:this.Es.At().Ot(this.Es.W().base,$(this.Es.Pt()).Vt)};this.Ws.it(t)}}class zg extends Pn{constructor(){super(...arguments),this.Ws=new ru}ne(t,e,i){return Object.assign(Object.assign({},this.te(t,e)),i.Hs(t))}Gs(){const t=this.Es.W(),e={st:this.Is,Wt:t.lineStyle,ds:t.lineVisible?t.lineType:void 0,ht:t.lineWidth,Rs:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,nt:this.zs,cs:this.Ls.yt().he()};this.Ws.it(e)}}const Ug=/[2-9]/g;class xi{constructor(t=50){this.Ke=0,this.Ze=1,this.Ge=1,this.Je={},this.Qe=new Map,this.tr=t}ir(){this.Ke=0,this.Qe.clear(),this.Ze=1,this.Ge=1,this.Je={}}Si(t,e,i){return this.nr(t,e,i).width}xi(t,e,i){const n=this.nr(t,e,i);return((n.actualBoundingBoxAscent||0)-(n.actualBoundingBoxDescent||0))/2}nr(t,e,i){const n=i||Ug,r=String(e).replace(n,"0");if(this.Qe.has(r))return Kt(this.Qe.get(r)).sr;if(this.Ke===this.tr){const l=this.Je[this.Ge];delete this.Je[this.Ge],this.Qe.delete(l),this.Ge++,this.Ke--}t.save(),t.textBaseline="middle";const o=t.measureText(r);return t.restore(),o.width===0&&e.length||(this.Qe.set(r,{sr:o,er:this.Ze}),this.Je[this.Ze]=r,this.Ke++,this.Ze++),o}}class Wg{constructor(t){this.rr=null,this.k=null,this.hr="right",this.lr=t}ar(t,e,i){this.rr=t,this.k=e,this.hr=i}K(t){this.k!==null&&this.rr!==null&&this.rr.K(t,this.k,this.lr,this.hr)}}class uu{constructor(t,e,i){this._r=t,this.lr=new xi(50),this.ur=e,this.F=i,this.j=-1,this.Ht=new Wg(this.lr)}xt(){const t=this.F.cr(this.ur);if(t===null)return null;const e=t.dr(this.ur)?t.vr():this.ur.At();if(e===null)return null;const i=t.pr(e);if(i==="overlay")return null;const n=this.F.mr();return n.P!==this.j&&(this.j=n.P,this.lr.ir()),this.Ht.ar(this._r.zi(),n,i),this.Ht}}class qg extends Ke{constructor(){super(...arguments),this.Lt=null}it(t){this.Lt=t}br(t,e){var i;if(!(!((i=this.Lt)===null||i===void 0)&&i.Tt))return null;const{rt:n,ht:r,wr:o}=this.Lt;return e>=n-r-7&&e<=n+r+7?{gr:this.Lt,wr:o}:null}Z({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.Lt===null||this.Lt.Tt===!1)return;const r=Math.round(this.Lt.rt*n);r<0||r>e.height||(t.lineCap="butt",t.strokeStyle=this.Lt.O,t.lineWidth=Math.floor(this.Lt.ht*i),ys(t,this.Lt.Wt),Xh(t,r,0,e.width))}}class So{constructor(t){this.Mr={rt:0,O:"rgba(0, 0, 0, 0)",ht:1,Wt:0,Tt:!1},this.Sr=new qg,this.bt=!0,this.Es=t,this.Ls=t.qt(),this.Sr.it(this.Mr)}gt(){this.bt=!0}xt(){return this.Es.Tt()?(this.bt&&(this.kr(),this.bt=!1),this.Sr):null}}class Hg extends So{constructor(t){super(t)}kr(){this.Mr.Tt=!1;const t=this.Es.At(),e=t.yr().yr;if(e!==2&&e!==3)return;const i=this.Es.W();if(!i.baseLineVisible||!this.Es.Tt())return;const n=this.Es.Pt();n!==null&&(this.Mr.Tt=!0,this.Mr.rt=t.Ot(n.Vt,n.Vt),this.Mr.O=i.baseLineColor,this.Mr.ht=i.baseLineWidth,this.Mr.Wt=i.baseLineStyle)}}class jg extends Ke{constructor(){super(...arguments),this.Lt=null}it(t){this.Lt=t}He(){return this.Lt}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){const n=this.Lt;if(n===null)return;const r=Math.max(1,Math.floor(e)),o=r%2/2,l=Math.round(n.Xe.x*e)+o,a=n.Xe.y*i;t.fillStyle=n.Cr,t.beginPath();const h=Math.max(2,1.5*n.Tr)*e;t.arc(l,a,h,0,2*Math.PI,!1),t.fill(),t.fillStyle=n.Pr,t.beginPath(),t.arc(l,a,n.ot*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=r,t.strokeStyle=n.Rr,t.beginPath(),t.arc(l,a,n.ot*e+r/2,0,2*Math.PI,!1),t.stroke()}}const Kg=[{Dr:0,Or:.25,Ar:4,Vr:10,Br:.25,Ir:0,zr:.4,Er:.8},{Dr:.25,Or:.525,Ar:10,Vr:14,Br:0,Ir:0,zr:.8,Er:0},{Dr:.525,Or:1,Ar:14,Vr:14,Br:0,Ir:0,zr:0,Er:0}];function zl(s,t,e,i){return(function(n,r){if(n==="transparent")return n;const o=cn(n),l=o[3];return`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${r*l})`})(s,e+(i-e)*t)}function Ul(s,t){const e=s%2600/2600;let i;for(const a of Kg)if(e>=a.Dr&&e<=a.Or){i=a;break}rs(i!==void 0,"Last price animation internal logic error");const n=(e-i.Dr)/(i.Or-i.Dr);return{Pr:zl(t,n,i.Br,i.Ir),Rr:zl(t,n,i.zr,i.Er),ot:(r=n,o=i.Ar,l=i.Vr,o+(l-o)*r)};var r,o,l}class Gg{constructor(t){this.Ht=new jg,this.bt=!0,this.Lr=!0,this.Nr=performance.now(),this.Fr=this.Nr-1,this.Wr=t}jr(){this.Fr=this.Nr-1,this.gt()}Hr(){if(this.gt(),this.Wr.W().lastPriceAnimation===2){const t=performance.now(),e=this.Fr-t;if(e>0)return void(e<650&&(this.Fr+=2600));this.Nr=t,this.Fr=t+2600}}gt(){this.bt=!0}$r(){this.Lr=!0}Tt(){return this.Wr.W().lastPriceAnimation!==0}Ur(){switch(this.Wr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Fr}}xt(){return this.bt?(this.St(),this.bt=!1,this.Lr=!1):this.Lr&&(this.qr(),this.Lr=!1),this.Ht}St(){this.Ht.it(null);const t=this.Wr.qt().yt(),e=t.Xs(),i=this.Wr.Pt();if(e===null||i===null)return;const n=this.Wr.Yr(!0);if(n.Xr||!e.Kr(n.se))return;const r={x:t.Et(n.se),y:this.Wr.At().Ot(n.ct,i.Vt)},o=n.O,l=this.Wr.W().lineWidth,a=Ul(this.Zr(),o);this.Ht.it({Cr:o,Tr:l,Pr:a.Pr,Rr:a.Rr,ot:a.ot,Xe:r})}qr(){const t=this.Ht.He();if(t!==null){const e=Ul(this.Zr(),t.Cr);t.Pr=e.Pr,t.Rr=e.Rr,t.ot=e.ot}}Zr(){return this.Ur()?performance.now()-this.Nr:2599}}function ai(s,t){return iu(Math.min(Math.max(s,12),30)*t)}function Ei(s,t){switch(s){case"arrowDown":case"arrowUp":return ai(t,1);case"circle":return ai(t,.8);case"square":return ai(t,.7)}}function cu(s){return(function(t){const e=Math.ceil(t);return e%2!=0?e-1:e})(ai(s,1))}function Wl(s){return Math.max(ai(s,.1),3)}function fu(s,t,e,i,n){const r=Ei("square",e),o=(r-1)/2,l=s-o,a=t-o;return i>=l&&i<=l+r&&n>=a&&n<=a+r}function ql(s,t,e,i,n){const r=(Ei("arrowUp",n)-1)/2,o=(iu(n/2)-1)/2;t.beginPath(),s?(t.moveTo(e-r,i),t.lineTo(e,i-r),t.lineTo(e+r,i),t.lineTo(e+o,i),t.lineTo(e+o,i+r),t.lineTo(e-o,i+r),t.lineTo(e-o,i)):(t.moveTo(e-r,i),t.lineTo(e,i+r),t.lineTo(e+r,i),t.lineTo(e+o,i),t.lineTo(e+o,i-r),t.lineTo(e-o,i-r),t.lineTo(e-o,i)),t.fill()}function Jg(s,t,e,i,n,r){return fu(t,e,i,n,r)}class Xg extends bo{constructor(){super(...arguments),this.Lt=null,this.lr=new xi,this.j=-1,this.H="",this.Gr=""}it(t){this.Lt=t}ar(t,e){this.j===t&&this.H===e||(this.j=t,this.H=e,this.Gr=Vs(t,e),this.lr.ir())}br(t,e){if(this.Lt===null||this.Lt.nt===null)return null;for(let i=this.Lt.nt.from;i<this.Lt.nt.to;i++){const n=this.Lt.st[i];if(Qg(n,t,e))return{gr:n.Jr,wr:n.wr}}return null}Z({context:t},e,i){if(this.Lt!==null&&this.Lt.nt!==null){t.textBaseline="middle",t.font=this.Gr;for(let n=this.Lt.nt.from;n<this.Lt.nt.to;n++){const r=this.Lt.st[n];r.Jt!==void 0&&(r.Jt.$i=this.lr.Si(t,r.Jt.Qr),r.Jt.zt=this.j,r.Jt.et=r.et-r.Jt.$i/2),Yg(r,t)}}}}function Yg(s,t){t.fillStyle=s.O,s.Jt!==void 0&&(function(e,i,n,r){e.fillText(i,n,r)})(t,s.Jt.Qr,s.Jt.et,s.Jt.rt),(function(e,i){if(e.Ks!==0){switch(e.th){case"arrowDown":return void ql(!1,i,e.et,e.rt,e.Ks);case"arrowUp":return void ql(!0,i,e.et,e.rt,e.Ks);case"circle":return void(function(n,r,o,l){const a=(Ei("circle",l)-1)/2;n.beginPath(),n.arc(r,o,a,0,2*Math.PI,!1),n.fill()})(i,e.et,e.rt,e.Ks);case"square":return void(function(n,r,o,l){const a=Ei("square",l),h=(a-1)/2,u=r-h,c=o-h;n.fillRect(u,c,a,a)})(i,e.et,e.rt,e.Ks)}e.th}})(s,t)}function Qg(s,t,e){return!(s.Jt===void 0||!(function(i,n,r,o,l,a){const h=o/2;return l>=i&&l<=i+r&&a>=n-h&&a<=n+h})(s.Jt.et,s.Jt.rt,s.Jt.$i,s.Jt.zt,t,e))||(function(i,n,r){if(i.Ks===0)return!1;switch(i.th){case"arrowDown":case"arrowUp":return Jg(0,i.et,i.rt,i.Ks,n,r);case"circle":return(function(o,l,a,h,u){const c=2+Ei("circle",a)/2,d=o-h,p=l-u;return Math.sqrt(d*d+p*p)<=c})(i.et,i.rt,i.Ks,n,r);case"square":return fu(i.et,i.rt,i.Ks,n,r)}})(s,t,e)}function Zg(s,t,e,i,n,r,o,l,a){const h=Me(e)?e:e.xe,u=Me(e)?e:e.ge,c=Me(e)?e:e.Me,d=Me(t.size)?Math.max(t.size,0):1,p=cu(l.he())*d,g=p/2;switch(s.Ks=p,t.position){case"inBar":return s.rt=o.Ot(h,a),void(s.Jt!==void 0&&(s.Jt.rt=s.rt+g+r+.6*n));case"aboveBar":return s.rt=o.Ot(u,a)-g-i.ih,s.Jt!==void 0&&(s.Jt.rt=s.rt-g-.6*n,i.ih+=1.2*n),void(i.ih+=p+r);case"belowBar":return s.rt=o.Ot(c,a)+g+i.nh,s.Jt!==void 0&&(s.Jt.rt=s.rt+g+r+.6*n,i.nh+=1.2*n),void(i.nh+=p+r)}t.position}class tb{constructor(t,e){this.bt=!0,this.sh=!0,this.eh=!0,this.rh=null,this.Ht=new Xg,this.Wr=t,this.Ui=e,this.Lt={st:[],nt:null}}gt(t){this.bt=!0,this.eh=!0,t==="data"&&(this.sh=!0)}xt(t){if(!this.Wr.Tt())return null;this.bt&&this.hh();const e=this.Ui.W().layout;return this.Ht.ar(e.fontSize,e.fontFamily),this.Ht.it(this.Lt),this.Ht}lh(){if(this.eh){if(this.Wr.ah().length>0){const t=this.Ui.yt().he(),e=Wl(t),i=1.5*cu(t)+2*e;this.rh={above:i,below:i}}else this.rh=null;this.eh=!1}return this.rh}hh(){const t=this.Wr.At(),e=this.Ui.yt(),i=this.Wr.ah();this.sh&&(this.Lt.st=i.map((u=>({ut:u.time,et:0,rt:0,Ks:0,th:u.shape,O:u.color,Jr:u.Jr,wr:u.id,Jt:void 0}))),this.sh=!1);const n=this.Ui.W().layout;this.Lt.nt=null;const r=e.Xs();if(r===null)return;const o=this.Wr.Pt();if(o===null||this.Lt.st.length===0)return;let l=NaN;const a=Wl(e.he()),h={ih:a,nh:a};this.Lt.nt=au(this.Lt.st,r,!0);for(let u=this.Lt.nt.from;u<this.Lt.nt.to;u++){const c=i[u];c.time!==l&&(h.ih=a,h.nh=a,l=c.time);const d=this.Lt.st[u];d.et=e.Et(c.time),c.text!==void 0&&c.text.length>0&&(d.Jt={Qr:c.text,et:0,rt:0,$i:0,zt:0});const p=this.Wr.oh(c.time);p!==null&&Zg(d,c,p,h,n.fontSize,a,t,e,o.Vt)}this.bt=!1}}class eb extends So{constructor(t){super(t)}kr(){const t=this.Mr;t.Tt=!1;const e=this.Es.W();if(!e.priceLineVisible||!this.Es.Tt())return;const i=this.Es.Yr(e.priceLineSource===0);i.Xr||(t.Tt=!0,t.rt=i.yi,t.O=this.Es._h(i.O),t.ht=e.priceLineWidth,t.Wt=e.priceLineStyle)}}class sb extends An{constructor(t){super(),this.$t=t}Ei(t,e,i){t.Tt=!1,e.Tt=!1;const n=this.$t;if(!n.Tt())return;const r=n.W(),o=r.lastValueVisible,l=n.uh()!=="",a=r.seriesLastValueMode===0,h=n.Yr(!1);if(h.Xr)return;o&&(t.Jt=this.dh(h,o,a),t.Tt=t.Jt.length!==0),(l||a)&&(e.Jt=this.fh(h,o,l,a),e.Tt=e.Jt.length>0);const u=n._h(h.O),c=kn(u);i.t=c.t,i.yi=h.yi,e.Bt=n.qt().It(h.yi/n.At().zt()),t.Bt=u,t.O=c.i,e.O=c.i}fh(t,e,i,n){let r="";const o=this.$t.uh();return i&&o.length!==0&&(r+=`${o} `),e&&n&&(r+=this.$t.At().ph()?t.mh:t.bh),r.trim()}dh(t,e,i){return e?i?this.$t.At().ph()?t.bh:t.mh:t.Jt:""}}function Hl(s,t,e,i){const n=Number.isFinite(t),r=Number.isFinite(e);return n&&r?s(t,e):n||r?n?t:e:i}class ee{constructor(t,e){this.wh=t,this.gh=e}Mh(t){return t!==null&&this.wh===t.wh&&this.gh===t.gh}xh(){return new ee(this.wh,this.gh)}Sh(){return this.wh}kh(){return this.gh}yh(){return this.gh-this.wh}Fi(){return this.gh===this.wh||Number.isNaN(this.gh)||Number.isNaN(this.wh)}ts(t){return t===null?this:new ee(Hl(Math.min,this.Sh(),t.Sh(),-1/0),Hl(Math.max,this.kh(),t.kh(),1/0))}Ch(t){if(!Me(t)||this.gh-this.wh===0)return;const e=.5*(this.gh+this.wh);let i=this.gh-e,n=this.wh-e;i*=t,n*=t,this.gh=e+i,this.wh=e+n}Th(t){Me(t)&&(this.gh+=t,this.wh+=t)}Ph(){return{minValue:this.wh,maxValue:this.gh}}static Rh(t){return t===null?null:new ee(t.minValue,t.maxValue)}}class fn{constructor(t,e){this.Dh=t,this.Oh=e||null}Ah(){return this.Dh}Vh(){return this.Oh}Ph(){return this.Dh===null?null:{priceRange:this.Dh.Ph(),margins:this.Oh||void 0}}static Rh(t){return t===null?null:new fn(ee.Rh(t.priceRange),t.margins)}}class ib extends So{constructor(t,e){super(t),this.Bh=e}kr(){const t=this.Mr;t.Tt=!1;const e=this.Bh.W();if(!this.Es.Tt()||!e.lineVisible)return;const i=this.Bh.Ih();i!==null&&(t.Tt=!0,t.rt=i,t.O=e.color,t.ht=e.lineWidth,t.Wt=e.lineStyle,t.wr=this.Bh.W().id)}}class nb extends An{constructor(t,e){super(),this.Wr=t,this.Bh=e}Ei(t,e,i){t.Tt=!1,e.Tt=!1;const n=this.Bh.W(),r=n.axisLabelVisible,o=n.title!=="",l=this.Wr;if(!r||!l.Tt())return;const a=this.Bh.Ih();if(a===null)return;o&&(e.Jt=n.title,e.Tt=!0),e.Bt=l.qt().It(a/l.At().zt()),t.Jt=this.zh(n.price),t.Tt=!0;const h=kn(n.axisLabelColor||n.color);i.t=h.t;const u=n.axisLabelTextColor||h.i;t.O=u,e.O=u,i.yi=a}zh(t){const e=this.Wr.Pt();return e===null?"":this.Wr.At().Wi(t,e.Vt)}}class rb{constructor(t,e){this.Wr=t,this.cn=e,this.Eh=new ib(t,this),this._r=new nb(t,this),this.Lh=new uu(this._r,t,t.qt())}Nh(t){ge(this.cn,t),this.gt(),this.Wr.qt().Fh()}W(){return this.cn}Wh(){return this.Eh}jh(){return this.Lh}Hh(){return this._r}gt(){this.Eh.gt(),this._r.gt()}Ih(){const t=this.Wr,e=t.At();if(t.qt().yt().Fi()||e.Fi())return null;const i=t.Pt();return i===null?null:e.Ot(this.cn.price,i.Vt)}}class ob extends yo{constructor(t){super(),this.Ui=t}qt(){return this.Ui}}const lb={Bar:(s,t,e,i)=>{var n;const r=t.upColor,o=t.downColor,l=$(s(e,i)),a=Ms(l.Vt[0])<=Ms(l.Vt[3]);return{ue:(n=l.O)!==null&&n!==void 0?n:a?r:o}},Candlestick:(s,t,e,i)=>{var n,r,o;const l=t.upColor,a=t.downColor,h=t.borderUpColor,u=t.borderDownColor,c=t.wickUpColor,d=t.wickDownColor,p=$(s(e,i)),g=Ms(p.Vt[0])<=Ms(p.Vt[3]);return{ue:(n=p.O)!==null&&n!==void 0?n:g?l:a,Le:(r=p.Bt)!==null&&r!==void 0?r:g?h:u,Ee:(o=p.$h)!==null&&o!==void 0?o:g?c:d}},Custom:(s,t,e,i)=>{var n;return{ue:(n=$(s(e,i)).O)!==null&&n!==void 0?n:t.color}},Area:(s,t,e,i)=>{var n,r,o,l;const a=$(s(e,i));return{ue:(n=a._t)!==null&&n!==void 0?n:t.lineColor,_t:(r=a._t)!==null&&r!==void 0?r:t.lineColor,Ts:(o=a.Ts)!==null&&o!==void 0?o:t.topColor,Ps:(l=a.Ps)!==null&&l!==void 0?l:t.bottomColor}},Baseline:(s,t,e,i)=>{var n,r,o,l,a,h;const u=$(s(e,i));return{ue:u.Vt[3]>=t.baseValue.price?t.topLineColor:t.bottomLineColor,Pe:(n=u.Pe)!==null&&n!==void 0?n:t.topLineColor,Re:(r=u.Re)!==null&&r!==void 0?r:t.bottomLineColor,Se:(o=u.Se)!==null&&o!==void 0?o:t.topFillColor1,ke:(l=u.ke)!==null&&l!==void 0?l:t.topFillColor2,ye:(a=u.ye)!==null&&a!==void 0?a:t.bottomFillColor1,Ce:(h=u.Ce)!==null&&h!==void 0?h:t.bottomFillColor2}},Line:(s,t,e,i)=>{var n,r;const o=$(s(e,i));return{ue:(n=o.O)!==null&&n!==void 0?n:t.color,_t:(r=o.O)!==null&&r!==void 0?r:t.color}},Histogram:(s,t,e,i)=>{var n;return{ue:(n=$(s(e,i)).O)!==null&&n!==void 0?n:t.color}}};class ab{constructor(t){this.Uh=(e,i)=>i!==void 0?i.Vt:this.Wr.In().qh(e),this.Wr=t,this.Yh=lb[t.Xh()]}Hs(t,e){return this.Yh(this.Uh,this.Wr.W(),t,e)}}var jl;(function(s){s[s.NearestLeft=-1]="NearestLeft",s[s.None=0]="None",s[s.NearestRight=1]="NearestRight"})(jl||(jl={}));const Je=30;class hb{constructor(){this.Kh=[],this.Zh=new Map,this.Gh=new Map}Jh(){return this.Ks()>0?this.Kh[this.Kh.length-1]:null}Qh(){return this.Ks()>0?this.tl(0):null}Bn(){return this.Ks()>0?this.tl(this.Kh.length-1):null}Ks(){return this.Kh.length}Fi(){return this.Ks()===0}Kr(t){return this.il(t,0)!==null}qh(t){return this.nl(t)}nl(t,e=0){const i=this.il(t,e);return i===null?null:Object.assign(Object.assign({},this.sl(i)),{se:this.tl(i)})}ie(){return this.Kh}el(t,e,i){if(this.Fi())return null;let n=null;for(const r of i)n=$i(n,this.rl(t,e,r));return n}it(t){this.Gh.clear(),this.Zh.clear(),this.Kh=t}tl(t){return this.Kh[t].se}sl(t){return this.Kh[t]}il(t,e){const i=this.hl(t);if(i===null&&e!==0)switch(e){case-1:return this.ll(t);case 1:return this.al(t);default:throw new TypeError("Unknown search mode")}return i}ll(t){let e=this.ol(t);return e>0&&(e-=1),e!==this.Kh.length&&this.tl(e)<t?e:null}al(t){const e=this._l(t);return e!==this.Kh.length&&t<this.tl(e)?e:null}hl(t){const e=this.ol(t);return e===this.Kh.length||t<this.Kh[e].se?null:e}ol(t){return Li(this.Kh,t,((e,i)=>e.se<i))}_l(t){return lu(this.Kh,t,((e,i)=>e.se>i))}ul(t,e,i){let n=null;for(let r=t;r<e;r++){const o=this.Kh[r].Vt[i];Number.isNaN(o)||(n===null?n={cl:o,dl:o}:(o<n.cl&&(n.cl=o),o>n.dl&&(n.dl=o)))}return n}rl(t,e,i){if(this.Fi())return null;let n=null;const r=$(this.Qh()),o=$(this.Bn()),l=Math.max(t,r),a=Math.min(e,o),h=Math.ceil(l/Je)*Je,u=Math.max(h,Math.floor(a/Je)*Je);{const d=this.ol(l),p=this._l(Math.min(a,h,e));n=$i(n,this.ul(d,p,i))}let c=this.Zh.get(i);c===void 0&&(c=new Map,this.Zh.set(i,c));for(let d=Math.max(h+1,l);d<u;d+=Je){const p=Math.floor(d/Je);let g=c.get(p);if(g===void 0){const v=this.ol(p*Je),S=this._l((p+1)*Je-1);g=this.ul(v,S,i),c.set(p,g)}n=$i(n,g)}{const d=this.ol(u),p=this._l(a);n=$i(n,this.ul(d,p,i))}return n}}function $i(s,t){return s===null?t:t===null?s:{cl:Math.min(s.cl,t.cl),dl:Math.max(s.dl,t.dl)}}class ub{constructor(t){this.fl=t}K(t,e,i){this.fl.draw(t)}G(t,e,i){var n,r;(r=(n=this.fl).drawBackground)===null||r===void 0||r.call(n,t)}}class Qn{constructor(t){this.Qe=null,this.wn=t}xt(){var t;const e=this.wn.renderer();if(e===null)return null;if(((t=this.Qe)===null||t===void 0?void 0:t.vl)===e)return this.Qe.pl;const i=new ub(e);return this.Qe={vl:e,pl:i},i}ml(){var t,e,i;return(i=(e=(t=this.wn).zOrder)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:"normal"}}function du(s){var t,e,i,n,r;return{Jt:s.text(),yi:s.coordinate(),ki:(t=s.fixedCoordinate)===null||t===void 0?void 0:t.call(s),O:s.textColor(),t:s.backColor(),Tt:(i=(e=s.visible)===null||e===void 0?void 0:e.call(s))===null||i===void 0||i,ai:(r=(n=s.tickVisible)===null||n===void 0?void 0:n.call(s))===null||r===void 0||r}}class cb{constructor(t,e){this.Ht=new Zh,this.bl=t,this.wl=e}xt(){return this.Ht.it(Object.assign({$i:this.wl.$i()},du(this.bl))),this.Ht}}class fb extends An{constructor(t,e){super(),this.bl=t,this.Li=e}Ei(t,e,i){const n=du(this.bl);i.t=n.t,t.O=n.O;const r=2/12*this.Li.P();i.gi=r,i.Mi=r,i.yi=n.yi,i.ki=n.ki,t.Jt=n.Jt,t.Tt=n.Tt,t.ai=n.ai}}class db{constructor(t,e){this.gl=null,this.Ml=null,this.xl=null,this.Sl=null,this.kl=null,this.yl=t,this.Wr=e}Cl(){return this.yl}On(){var t,e;(e=(t=this.yl).updateAllViews)===null||e===void 0||e.call(t)}Pn(){var t,e,i,n;const r=(i=(e=(t=this.yl).paneViews)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:[];if(((n=this.gl)===null||n===void 0?void 0:n.vl)===r)return this.gl.pl;const o=r.map((l=>new Qn(l)));return this.gl={vl:r,pl:o},o}tn(){var t,e,i,n;const r=(i=(e=(t=this.yl).timeAxisViews)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:[];if(((n=this.Ml)===null||n===void 0?void 0:n.vl)===r)return this.Ml.pl;const o=this.Wr.qt().yt(),l=r.map((a=>new cb(a,o)));return this.Ml={vl:r,pl:l},l}Rn(){var t,e,i,n;const r=(i=(e=(t=this.yl).priceAxisViews)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:[];if(((n=this.xl)===null||n===void 0?void 0:n.vl)===r)return this.xl.pl;const o=this.Wr.At(),l=r.map((a=>new fb(a,o)));return this.xl={vl:r,pl:l},l}Tl(){var t,e,i,n;const r=(i=(e=(t=this.yl).priceAxisPaneViews)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:[];if(((n=this.Sl)===null||n===void 0?void 0:n.vl)===r)return this.Sl.pl;const o=r.map((l=>new Qn(l)));return this.Sl={vl:r,pl:o},o}Pl(){var t,e,i,n;const r=(i=(e=(t=this.yl).timeAxisPaneViews)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:[];if(((n=this.kl)===null||n===void 0?void 0:n.vl)===r)return this.kl.pl;const o=r.map((l=>new Qn(l)));return this.kl={vl:r,pl:o},o}Rl(t,e){var i,n,r;return(r=(n=(i=this.yl).autoscaleInfo)===null||n===void 0?void 0:n.call(i,t,e))!==null&&r!==void 0?r:null}br(t,e){var i,n,r;return(r=(n=(i=this.yl).hitTest)===null||n===void 0?void 0:n.call(i,t,e))!==null&&r!==void 0?r:null}}function Zn(s,t,e,i){s.forEach((n=>{t(n).forEach((r=>{r.ml()===e&&i.push(r)}))}))}function tr(s){return s.Pn()}function pb(s){return s.Tl()}function mb(s){return s.Pl()}class xo extends ob{constructor(t,e,i,n,r){super(t),this.Lt=new hb,this.Eh=new eb(this),this.Dl=[],this.Ol=new Hg(this),this.Al=null,this.Vl=null,this.Bl=[],this.Il=[],this.zl=null,this.El=[],this.cn=e,this.Ll=i;const o=new sb(this);this.hn=[o],this.Lh=new uu(o,this,t),i!=="Area"&&i!=="Line"&&i!=="Baseline"||(this.Al=new Gg(this)),this.Nl(),this.Fl(r)}S(){this.zl!==null&&clearTimeout(this.zl)}_h(t){return this.cn.priceLineColor||t}Yr(t){const e={Xr:!0},i=this.At();if(this.qt().yt().Fi()||i.Fi()||this.Lt.Fi())return e;const n=this.qt().yt().Xs(),r=this.Pt();if(n===null||r===null)return e;let o,l;if(t){const c=this.Lt.Jh();if(c===null)return e;o=c,l=c.se}else{const c=this.Lt.nl(n.di(),-1);if(c===null||(o=this.Lt.qh(c.se),o===null))return e;l=c.se}const a=o.Vt[3],h=this.$s().Hs(l,{Vt:o}),u=i.Ot(a,r.Vt);return{Xr:!1,ct:a,Jt:i.Wi(a,r.Vt),mh:i.Wl(a),bh:i.jl(a,r.Vt),O:h.ue,yi:u,se:l}}$s(){return this.Vl!==null||(this.Vl=new ab(this)),this.Vl}W(){return this.cn}Nh(t){const e=t.priceScaleId;e!==void 0&&e!==this.cn.priceScaleId&&this.qt().Hl(this,e),ge(this.cn,t),t.priceFormat!==void 0&&(this.Nl(),this.qt().$l()),this.qt().Ul(this),this.qt().ql(),this.wn.gt("options")}it(t,e){this.Lt.it(t),this.Yl(),this.wn.gt("data"),this.dn.gt("data"),this.Al!==null&&(e&&e.Xl?this.Al.Hr():t.length===0&&this.Al.jr());const i=this.qt().cr(this);this.qt().Kl(i),this.qt().Ul(this),this.qt().ql(),this.qt().Fh()}Zl(t){this.Bl=t,this.Yl();const e=this.qt().cr(this);this.dn.gt("data"),this.qt().Kl(e),this.qt().Ul(this),this.qt().ql(),this.qt().Fh()}Gl(){return this.Bl}ah(){return this.Il}Jl(t){const e=new rb(this,t);return this.Dl.push(e),this.qt().Ul(this),e}Ql(t){const e=this.Dl.indexOf(t);e!==-1&&this.Dl.splice(e,1),this.qt().Ul(this)}Xh(){return this.Ll}Pt(){const t=this.ta();return t===null?null:{Vt:t.Vt[3],ia:t.ut}}ta(){const t=this.qt().yt().Xs();if(t===null)return null;const e=t.Os();return this.Lt.nl(e,1)}In(){return this.Lt}oh(t){const e=this.Lt.qh(t);return e===null?null:this.Ll==="Bar"||this.Ll==="Candlestick"||this.Ll==="Custom"?{we:e.Vt[0],ge:e.Vt[1],Me:e.Vt[2],xe:e.Vt[3]}:e.Vt[3]}na(t){const e=[];Zn(this.El,tr,"top",e);const i=this.Al;return i!==null&&i.Tt()&&(this.zl===null&&i.Ur()&&(this.zl=setTimeout((()=>{this.zl=null,this.qt().sa()}),0)),i.$r(),e.push(i)),e}Pn(){const t=[];this.ea()||t.push(this.Ol),t.push(this.wn,this.Eh,this.dn);const e=this.Dl.map((i=>i.Wh()));return t.push(...e),Zn(this.El,tr,"normal",t),t}ra(){return this.ha(tr,"bottom")}la(t){return this.ha(pb,t)}aa(t){return this.ha(mb,t)}oa(t,e){return this.El.map((i=>i.br(t,e))).filter((i=>i!==null))}Qi(t){return[this.Lh,...this.Dl.map((e=>e.jh()))]}Rn(t,e){if(e!==this.Xi&&!this.ea())return[];const i=[...this.hn];for(const n of this.Dl)i.push(n.Hh());return this.El.forEach((n=>{i.push(...n.Rn())})),i}tn(){const t=[];return this.El.forEach((e=>{t.push(...e.tn())})),t}Rl(t,e){if(this.cn.autoscaleInfoProvider!==void 0){const i=this.cn.autoscaleInfoProvider((()=>{const n=this._a(t,e);return n===null?null:n.Ph()}));return fn.Rh(i)}return this._a(t,e)}ua(){return this.cn.priceFormat.minMove}ca(){return this.da}On(){var t;this.wn.gt(),this.dn.gt();for(const e of this.hn)e.gt();for(const e of this.Dl)e.gt();this.Eh.gt(),this.Ol.gt(),(t=this.Al)===null||t===void 0||t.gt(),this.El.forEach((e=>e.On()))}At(){return $(super.At())}Ct(t){if(!((this.Ll==="Line"||this.Ll==="Area"||this.Ll==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const e=this.Lt.qh(t);return e===null?null:{ct:e.Vt[3],ot:this.fa(),Bt:this.va(),Dt:this.pa(),Rt:this.ma(t)}}uh(){return this.cn.title}Tt(){return this.cn.visible}ba(t){this.El.push(new db(t,this))}wa(t){this.El=this.El.filter((e=>e.Cl()!==t))}ga(){if(this.wn instanceof Yn)return t=>this.wn.Fe(t)}Ma(){if(this.wn instanceof Yn)return t=>this.wn.We(t)}ea(){return!Ln(this.At().xa())}_a(t,e){if(!wi(t)||!wi(e)||this.Lt.Fi())return null;const i=this.Ll==="Line"||this.Ll==="Area"||this.Ll==="Baseline"||this.Ll==="Histogram"?[3]:[2,1],n=this.Lt.el(t,e,i);let r=n!==null?new ee(n.cl,n.dl):null;if(this.Xh()==="Histogram"){const l=this.cn.base,a=new ee(l,l);r=r!==null?r.ts(a):a}let o=this.dn.lh();return this.El.forEach((l=>{const a=l.Rl(t,e);if(a?.priceRange){const p=new ee(a.priceRange.minValue,a.priceRange.maxValue);r=r!==null?r.ts(p):p}var h,u,c,d;a?.margins&&(h=o,u=a.margins,o={above:Math.max((c=h?.above)!==null&&c!==void 0?c:0,u.above),below:Math.max((d=h?.below)!==null&&d!==void 0?d:0,u.below)})})),new fn(r,o)}fa(){switch(this.Ll){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}va(){switch(this.Ll){case"Line":case"Area":case"Baseline":{const t=this.cn.crosshairMarkerBorderColor;if(t.length!==0)return t}}return null}pa(){switch(this.Ll){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}ma(t){switch(this.Ll){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBackgroundColor;if(e.length!==0)return e}}return this.$s().Hs(t).ue}Nl(){switch(this.cn.priceFormat.type){case"custom":this.da={format:this.cn.priceFormat.formatter};break;case"volume":this.da=new Sg(this.cn.priceFormat.precision);break;case"percent":this.da=new tu(this.cn.priceFormat.precision);break;default:{const t=Math.pow(10,this.cn.priceFormat.precision);this.da=new Rn(t,this.cn.priceFormat.minMove*t)}}this.Xi!==null&&this.Xi.Sa()}Yl(){const t=this.qt().yt();if(!t.ka()||this.Lt.Fi())return void(this.Il=[]);const e=$(this.Lt.Qh());this.Il=this.Bl.map(((i,n)=>{const r=$(t.ya(i.time,!0)),o=r<e?1:-1;return{time:$(this.Lt.nl(r,o)).se,position:i.position,shape:i.shape,color:i.color,id:i.id,Jr:n,text:i.text,size:i.size,originalTime:i.originalTime}}))}Fl(t){switch(this.dn=new tb(this,this.qt()),this.Ll){case"Bar":this.wn=new Lg(this,this.qt());break;case"Candlestick":this.wn=new Ig(this,this.qt());break;case"Line":this.wn=new zg(this,this.qt());break;case"Custom":this.wn=new Yn(this,this.qt(),Kt(t));break;case"Area":this.wn=new Og(this,this.qt());break;case"Baseline":this.wn=new Ng(this,this.qt());break;case"Histogram":this.wn=new Vg(this,this.qt());break;default:throw Error("Unknown chart style assigned: "+this.Ll)}}ha(t,e){const i=[];return Zn(this.El,t,e,i),i}}class vb{constructor(t){this.cn=t}Ca(t,e,i){let n=t;if(this.cn.mode===0)return n;const r=i.vn(),o=r.Pt();if(o===null)return n;const l=r.Ot(t,o),a=i.Ta().filter((u=>u instanceof xo)).reduce(((u,c)=>{if(i.dr(c)||!c.Tt())return u;const d=c.At(),p=c.In();if(d.Fi()||!p.Kr(e))return u;const g=p.qh(e);if(g===null)return u;const v=Ms(c.Pt());return u.concat([d.Ot(g.Vt[3],v.Vt)])}),[]);if(a.length===0)return n;a.sort(((u,c)=>Math.abs(u-l)-Math.abs(c-l)));const h=a[0];return n=r.pn(h,o),n}}class gb extends Ke{constructor(){super(...arguments),this.Lt=null}it(t){this.Lt=t}Z({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.Lt===null)return;const r=Math.max(1,Math.floor(i));t.lineWidth=r,(function(o,l){o.save(),o.lineWidth%2&&o.translate(.5,.5),l(),o.restore()})(t,(()=>{const o=$(this.Lt);if(o.Pa){t.strokeStyle=o.Ra,ys(t,o.Da),t.beginPath();for(const l of o.Oa){const a=Math.round(l.Aa*i);t.moveTo(a,-r),t.lineTo(a,e.height+r)}t.stroke()}if(o.Va){t.strokeStyle=o.Ba,ys(t,o.Ia),t.beginPath();for(const l of o.za){const a=Math.round(l.Aa*n);t.moveTo(-r,a),t.lineTo(e.width+r,a)}t.stroke()}}))}}class bb{constructor(t){this.Ht=new gb,this.bt=!0,this.nn=t}gt(){this.bt=!0}xt(){if(this.bt){const t=this.nn.qt().W().grid,e={Va:t.horzLines.visible,Pa:t.vertLines.visible,Ba:t.horzLines.color,Ra:t.vertLines.color,Ia:t.horzLines.style,Da:t.vertLines.style,za:this.nn.vn().Ea(),Oa:(this.nn.qt().yt().Ea()||[]).map((i=>({Aa:i.coord})))};this.Ht.it(e),this.bt=!1}return this.Ht}}class yb{constructor(t){this.wn=new bb(t)}Wh(){return this.wn}}const er={La:4,Na:1e-4};function Ts(s,t){const e=100*(s-t)/t;return t<0?-e:e}function _b(s,t){const e=Ts(s.Sh(),t),i=Ts(s.kh(),t);return new ee(e,i)}function hi(s,t){const e=100*(s-t)/t+100;return t<0?-e:e}function wb(s,t){const e=hi(s.Sh(),t),i=hi(s.kh(),t);return new ee(e,i)}function dn(s,t){const e=Math.abs(s);if(e<1e-15)return 0;const i=Math.log10(e+t.Na)+t.La;return s<0?-i:i}function ui(s,t){const e=Math.abs(s);if(e<1e-15)return 0;const i=Math.pow(10,e-t.La)-t.Na;return s<0?-i:i}function Ys(s,t){if(s===null)return null;const e=dn(s.Sh(),t),i=dn(s.kh(),t);return new ee(e,i)}function Bi(s,t){if(s===null)return null;const e=ui(s.Sh(),t),i=ui(s.kh(),t);return new ee(e,i)}function sr(s){if(s===null)return er;const t=Math.abs(s.kh()-s.Sh());if(t>=1||t<1e-15)return er;const e=Math.ceil(Math.abs(Math.log10(t))),i=er.La+e;return{La:i,Na:1/Math.pow(10,i)}}class ir{constructor(t,e){if(this.Fa=t,this.Wa=e,(function(i){if(i<0)return!1;for(let n=i;n>1;n/=10)if(n%10!=0)return!1;return!0})(this.Fa))this.ja=[2,2.5,2];else{this.ja=[];for(let i=this.Fa;i!==1;){if(i%2==0)this.ja.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.ja.push(2,2.5),i/=5}if(this.ja.length>100)throw new Error("something wrong with base")}}}Ha(t,e,i){const n=this.Fa===0?0:1/this.Fa;let r=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),o=0,l=this.Wa[0];for(;;){const c=Ii(r,n,1e-14)&&r>n+1e-14,d=Ii(r,i*l,1e-14),p=Ii(r,1,1e-14);if(!(c&&d&&p))break;r/=l,l=this.Wa[++o%this.Wa.length]}if(r<=n+1e-14&&(r=n),r=Math.max(1,r),this.ja.length>0&&(a=r,h=1,u=1e-14,Math.abs(a-h)<u))for(o=0,l=this.ja[0];Ii(r,i*l,1e-14)&&r>n+1e-14;)r/=l,l=this.ja[++o%this.ja.length];var a,h,u;return r}}class Kl{constructor(t,e,i,n){this.$a=[],this.Li=t,this.Fa=e,this.Ua=i,this.qa=n}Ha(t,e){if(t<e)throw new Error("high < low");const i=this.Li.zt(),n=(t-e)*this.Ya()/i,r=new ir(this.Fa,[2,2.5,2]),o=new ir(this.Fa,[2,2,2.5]),l=new ir(this.Fa,[2.5,2,2]),a=[];return a.push(r.Ha(t,e,n),o.Ha(t,e,n),l.Ha(t,e,n)),(function(h){if(h.length<1)throw Error("array is empty");let u=h[0];for(let c=1;c<h.length;++c)h[c]<u&&(u=h[c]);return u})(a)}Xa(){const t=this.Li,e=t.Pt();if(e===null)return void(this.$a=[]);const i=t.zt(),n=this.Ua(i-1,e),r=this.Ua(0,e),o=this.Li.W().entireTextOnly?this.Ka()/2:0,l=o,a=i-1-o,h=Math.max(n,r),u=Math.min(n,r);if(h===u)return void(this.$a=[]);let c=this.Ha(h,u),d=h%c;d+=d<0?c:0;const p=h>=u?1:-1;let g=null,v=0;for(let S=h-d;S>u;S-=c){const _=this.qa(S,e,!0);g!==null&&Math.abs(_-g)<this.Ya()||_<l||_>a||(v<this.$a.length?(this.$a[v].Aa=_,this.$a[v].Za=t.Ga(S)):this.$a.push({Aa:_,Za:t.Ga(S)}),v++,g=_,t.Ja()&&(c=this.Ha(S*p,u)))}this.$a.length=v}Ea(){return this.$a}Ka(){return this.Li.P()}Ya(){return Math.ceil(2.5*this.Ka())}}function pu(s){return s.slice().sort(((t,e)=>$(t.Zi())-$(e.Zi())))}var $r;(function(s){s[s.Normal=0]="Normal",s[s.Logarithmic=1]="Logarithmic",s[s.Percentage=2]="Percentage",s[s.IndexedTo100=3]="IndexedTo100"})($r||($r={}));const Gl=new tu,Jl=new Rn(100,1);class Sb{constructor(t,e,i,n){this.Qa=0,this.io=null,this.Dh=null,this.no=null,this.so={eo:!1,ro:null},this.ho=0,this.lo=0,this.ao=new xt,this.oo=new xt,this._o=[],this.uo=null,this.co=null,this.do=null,this.fo=null,this.da=Jl,this.vo=sr(null),this.po=t,this.cn=e,this.mo=i,this.bo=n,this.wo=new Kl(this,100,this.Mo.bind(this),this.xo.bind(this))}xa(){return this.po}W(){return this.cn}Nh(t){if(ge(this.cn,t),this.Sa(),t.mode!==void 0&&this.So({yr:t.mode}),t.scaleMargins!==void 0){const e=Kt(t.scaleMargins.top),i=Kt(t.scaleMargins.bottom);if(e<0||e>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(i<0||i>1||e+i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(e+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${e+i}`);this.ko(),this.co=null}}yo(){return this.cn.autoScale}Ja(){return this.cn.mode===1}ph(){return this.cn.mode===2}Co(){return this.cn.mode===3}yr(){return{Wn:this.cn.autoScale,To:this.cn.invertScale,yr:this.cn.mode}}So(t){const e=this.yr();let i=null;t.Wn!==void 0&&(this.cn.autoScale=t.Wn),t.yr!==void 0&&(this.cn.mode=t.yr,t.yr!==2&&t.yr!==3||(this.cn.autoScale=!0),this.so.eo=!1),e.yr===1&&t.yr!==e.yr&&((function(r,o){if(r===null)return!1;const l=ui(r.Sh(),o),a=ui(r.kh(),o);return isFinite(l)&&isFinite(a)})(this.Dh,this.vo)?(i=Bi(this.Dh,this.vo),i!==null&&this.Po(i)):this.cn.autoScale=!0),t.yr===1&&t.yr!==e.yr&&(i=Ys(this.Dh,this.vo),i!==null&&this.Po(i));const n=e.yr!==this.cn.mode;n&&(e.yr===2||this.ph())&&this.Sa(),n&&(e.yr===3||this.Co())&&this.Sa(),t.To!==void 0&&e.To!==t.To&&(this.cn.invertScale=t.To,this.Ro()),this.oo.m(e,this.yr())}Do(){return this.oo}P(){return this.mo.fontSize}zt(){return this.Qa}Oo(t){this.Qa!==t&&(this.Qa=t,this.ko(),this.co=null)}Ao(){if(this.io)return this.io;const t=this.zt()-this.Vo()-this.Bo();return this.io=t,t}Ah(){return this.Io(),this.Dh}Po(t,e){const i=this.Dh;(e||i===null&&t!==null||i!==null&&!i.Mh(t))&&(this.co=null,this.Dh=t)}Fi(){return this.Io(),this.Qa===0||!this.Dh||this.Dh.Fi()}zo(t){return this.To()?t:this.zt()-1-t}Ot(t,e){return this.ph()?t=Ts(t,e):this.Co()&&(t=hi(t,e)),this.xo(t,e)}Qs(t,e,i){this.Io();const n=this.Bo(),r=$(this.Ah()),o=r.Sh(),l=r.kh(),a=this.Ao()-1,h=this.To(),u=a/(l-o),c=i===void 0?0:i.from,d=i===void 0?t.length:i.to,p=this.Eo();for(let g=c;g<d;g++){const v=t[g],S=v.ct;if(isNaN(S))continue;let _=S;p!==null&&(_=p(v.ct,e));const b=n+u*(_-o),M=h?b:this.Qa-1-b;v.rt=M}}me(t,e,i){this.Io();const n=this.Bo(),r=$(this.Ah()),o=r.Sh(),l=r.kh(),a=this.Ao()-1,h=this.To(),u=a/(l-o),c=i===void 0?0:i.from,d=i===void 0?t.length:i.to,p=this.Eo();for(let g=c;g<d;g++){const v=t[g];let S=v.we,_=v.ge,b=v.Me,M=v.xe;p!==null&&(S=p(v.we,e),_=p(v.ge,e),b=p(v.Me,e),M=p(v.xe,e));let D=n+u*(S-o),J=h?D:this.Qa-1-D;v.ve=J,D=n+u*(_-o),J=h?D:this.Qa-1-D,v.ce=J,D=n+u*(b-o),J=h?D:this.Qa-1-D,v.de=J,D=n+u*(M-o),J=h?D:this.Qa-1-D,v.pe=J}}pn(t,e){const i=this.Mo(t,e);return this.Lo(i,e)}Lo(t,e){let i=t;return this.ph()?i=(function(n,r){return r<0&&(n=-n),n/100*r+r})(i,e):this.Co()&&(i=(function(n,r){return n-=100,r<0&&(n=-n),n/100*r+r})(i,e)),i}Ta(){return this._o}No(){if(this.uo)return this.uo;let t=[];for(let e=0;e<this._o.length;e++){const i=this._o[e];i.Zi()===null&&i.Gi(e+1),t.push(i)}return t=pu(t),this.uo=t,this.uo}Fo(t){this._o.indexOf(t)===-1&&(this._o.push(t),this.Sa(),this.Wo())}jo(t){const e=this._o.indexOf(t);if(e===-1)throw new Error("source is not attached to scale");this._o.splice(e,1),this._o.length===0&&(this.So({Wn:!0}),this.Po(null)),this.Sa(),this.Wo()}Pt(){let t=null;for(const e of this._o){const i=e.Pt();i!==null&&(t===null||i.ia<t.ia)&&(t=i)}return t===null?null:t.Vt}To(){return this.cn.invertScale}Ea(){const t=this.Pt()===null;if(this.co!==null&&(t||this.co.Ho===t))return this.co.Ea;this.wo.Xa();const e=this.wo.Ea();return this.co={Ea:e,Ho:t},this.ao.m(),e}$o(){return this.ao}Uo(t){this.ph()||this.Co()||this.do===null&&this.no===null&&(this.Fi()||(this.do=this.Qa-t,this.no=$(this.Ah()).xh()))}qo(t){if(this.ph()||this.Co()||this.do===null)return;this.So({Wn:!1}),(t=this.Qa-t)<0&&(t=0);let e=(this.do+.2*(this.Qa-1))/(t+.2*(this.Qa-1));const i=$(this.no).xh();e=Math.max(e,.1),i.Ch(e),this.Po(i)}Yo(){this.ph()||this.Co()||(this.do=null,this.no=null)}Xo(t){this.yo()||this.fo===null&&this.no===null&&(this.Fi()||(this.fo=t,this.no=$(this.Ah()).xh()))}Ko(t){if(this.yo()||this.fo===null)return;const e=$(this.Ah()).yh()/(this.Ao()-1);let i=t-this.fo;this.To()&&(i*=-1);const n=i*e,r=$(this.no).xh();r.Th(n),this.Po(r,!0),this.co=null}Zo(){this.yo()||this.fo!==null&&(this.fo=null,this.no=null)}ca(){return this.da||this.Sa(),this.da}Wi(t,e){switch(this.cn.mode){case 2:return this.Go(Ts(t,e));case 3:return this.ca().format(hi(t,e));default:return this.zh(t)}}Ga(t){switch(this.cn.mode){case 2:return this.Go(t);case 3:return this.ca().format(t);default:return this.zh(t)}}Wl(t){return this.zh(t,$(this.Jo()).ca())}jl(t,e){return t=Ts(t,e),this.Go(t,Gl)}Qo(){return this._o}t_(t){this.so={ro:t,eo:!1}}On(){this._o.forEach((t=>t.On()))}Sa(){this.co=null;const t=this.Jo();let e=100;t!==null&&(e=Math.round(1/t.ua())),this.da=Jl,this.ph()?(this.da=Gl,e=100):this.Co()?(this.da=new Rn(100,1),e=100):t!==null&&(this.da=t.ca()),this.wo=new Kl(this,e,this.Mo.bind(this),this.xo.bind(this)),this.wo.Xa()}Wo(){this.uo=null}Jo(){return this._o[0]||null}Vo(){return this.To()?this.cn.scaleMargins.bottom*this.zt()+this.lo:this.cn.scaleMargins.top*this.zt()+this.ho}Bo(){return this.To()?this.cn.scaleMargins.top*this.zt()+this.ho:this.cn.scaleMargins.bottom*this.zt()+this.lo}Io(){this.so.eo||(this.so.eo=!0,this.i_())}ko(){this.io=null}xo(t,e){if(this.Io(),this.Fi())return 0;t=this.Ja()&&t?dn(t,this.vo):t;const i=$(this.Ah()),n=this.Bo()+(this.Ao()-1)*(t-i.Sh())/i.yh();return this.zo(n)}Mo(t,e){if(this.Io(),this.Fi())return 0;const i=this.zo(t),n=$(this.Ah()),r=n.Sh()+n.yh()*((i-this.Bo())/(this.Ao()-1));return this.Ja()?ui(r,this.vo):r}Ro(){this.co=null,this.wo.Xa()}i_(){const t=this.so.ro;if(t===null)return;let e=null;const i=this.Qo();let n=0,r=0;for(const a of i){if(!a.Tt())continue;const h=a.Pt();if(h===null)continue;const u=a.Rl(t.Os(),t.di());let c=u&&u.Ah();if(c!==null){switch(this.cn.mode){case 1:c=Ys(c,this.vo);break;case 2:c=_b(c,h.Vt);break;case 3:c=wb(c,h.Vt)}if(e=e===null?c:e.ts($(c)),u!==null){const d=u.Vh();d!==null&&(n=Math.max(n,d.above),r=Math.max(n,d.below))}}}if(n===this.ho&&r===this.lo||(this.ho=n,this.lo=r,this.co=null,this.ko()),e!==null){if(e.Sh()===e.kh()){const a=this.Jo(),h=5*(a===null||this.ph()||this.Co()?1:a.ua());this.Ja()&&(e=Bi(e,this.vo)),e=new ee(e.Sh()-h,e.kh()+h),this.Ja()&&(e=Ys(e,this.vo))}if(this.Ja()){const a=Bi(e,this.vo),h=sr(a);if(o=h,l=this.vo,o.La!==l.La||o.Na!==l.Na){const u=this.no!==null?Bi(this.no,this.vo):null;this.vo=h,e=Ys(a,h),u!==null&&(this.no=Ys(u,h))}}this.Po(e)}else this.Dh===null&&(this.Po(new ee(-.5,.5)),this.vo=sr(null));var o,l;this.so.eo=!0}Eo(){return this.ph()?Ts:this.Co()?hi:this.Ja()?t=>dn(t,this.vo):null}n_(t,e,i){return e===void 0?(i===void 0&&(i=this.ca()),i.format(t)):e(t)}zh(t,e){return this.n_(t,this.bo.priceFormatter,e)}Go(t,e){return this.n_(t,this.bo.percentageFormatter,e)}}class xb{constructor(t,e){this._o=[],this.s_=new Map,this.Qa=0,this.e_=0,this.r_=1e3,this.uo=null,this.h_=new xt,this.wl=t,this.Ui=e,this.l_=new yb(this);const i=e.W();this.a_=this.o_("left",i.leftPriceScale),this.__=this.o_("right",i.rightPriceScale),this.a_.Do().l(this.u_.bind(this,this.a_),this),this.__.Do().l(this.u_.bind(this,this.__),this),this.c_(i)}c_(t){if(t.leftPriceScale&&this.a_.Nh(t.leftPriceScale),t.rightPriceScale&&this.__.Nh(t.rightPriceScale),t.localization&&(this.a_.Sa(),this.__.Sa()),t.overlayPriceScales){const e=Array.from(this.s_.values());for(const i of e){const n=$(i[0].At());n.Nh(t.overlayPriceScales),t.localization&&n.Sa()}}}d_(t){switch(t){case"left":return this.a_;case"right":return this.__}return this.s_.has(t)?Kt(this.s_.get(t))[0].At():null}S(){this.qt().f_().p(this),this.a_.Do().p(this),this.__.Do().p(this),this._o.forEach((t=>{t.S&&t.S()})),this.h_.m()}v_(){return this.r_}p_(t){this.r_=t}qt(){return this.Ui}$i(){return this.e_}zt(){return this.Qa}m_(t){this.e_=t,this.b_()}Oo(t){this.Qa=t,this.a_.Oo(t),this.__.Oo(t),this._o.forEach((e=>{if(this.dr(e)){const i=e.At();i!==null&&i.Oo(t)}})),this.b_()}Ta(){return this._o}dr(t){const e=t.At();return e===null||this.a_!==e&&this.__!==e}Fo(t,e,i){const n=i!==void 0?i:this.g_().w_+1;this.M_(t,e,n)}jo(t){const e=this._o.indexOf(t);rs(e!==-1,"removeDataSource: invalid data source"),this._o.splice(e,1);const i=$(t.At()).xa();if(this.s_.has(i)){const r=Kt(this.s_.get(i)),o=r.indexOf(t);o!==-1&&(r.splice(o,1),r.length===0&&this.s_.delete(i))}const n=t.At();n&&n.Ta().indexOf(t)>=0&&n.jo(t),n!==null&&(n.Wo(),this.x_(n)),this.uo=null}pr(t){return t===this.a_?"left":t===this.__?"right":"overlay"}S_(){return this.a_}k_(){return this.__}y_(t,e){t.Uo(e)}C_(t,e){t.qo(e),this.b_()}T_(t){t.Yo()}P_(t,e){t.Xo(e)}R_(t,e){t.Ko(e),this.b_()}D_(t){t.Zo()}b_(){this._o.forEach((t=>{t.On()}))}vn(){let t=null;return this.Ui.W().rightPriceScale.visible&&this.__.Ta().length!==0?t=this.__:this.Ui.W().leftPriceScale.visible&&this.a_.Ta().length!==0?t=this.a_:this._o.length!==0&&(t=this._o[0].At()),t===null&&(t=this.__),t}vr(){let t=null;return this.Ui.W().rightPriceScale.visible?t=this.__:this.Ui.W().leftPriceScale.visible&&(t=this.a_),t}x_(t){t!==null&&t.yo()&&this.O_(t)}A_(t){const e=this.wl.Xs();t.So({Wn:!0}),e!==null&&t.t_(e),this.b_()}V_(){this.O_(this.a_),this.O_(this.__)}B_(){this.x_(this.a_),this.x_(this.__),this._o.forEach((t=>{this.dr(t)&&this.x_(t.At())})),this.b_(),this.Ui.Fh()}No(){return this.uo===null&&(this.uo=pu(this._o)),this.uo}I_(){return this.h_}z_(){return this.l_}O_(t){const e=t.Qo();if(e&&e.length>0&&!this.wl.Fi()){const i=this.wl.Xs();i!==null&&t.t_(i)}t.On()}g_(){const t=this.No();if(t.length===0)return{E_:0,w_:0};let e=0,i=0;for(let n=0;n<t.length;n++){const r=t[n].Zi();r!==null&&(r<e&&(e=r),r>i&&(i=r))}return{E_:e,w_:i}}M_(t,e,i){let n=this.d_(e);if(n===null&&(n=this.o_(e,this.Ui.W().overlayPriceScales)),this._o.push(t),!Ln(e)){const r=this.s_.get(e)||[];r.push(t),this.s_.set(e,r)}n.Fo(t),t.Ji(n),t.Gi(i),this.x_(n),this.uo=null}u_(t,e,i){e.yr!==i.yr&&this.O_(t)}o_(t,e){const i=Object.assign({visible:!0,autoScale:!0},Be(e)),n=new Sb(t,i,this.Ui.W().layout,this.Ui.W().localization);return n.Oo(this.zt()),n}}class Eb{constructor(t,e,i=50){this.Ke=0,this.Ze=1,this.Ge=1,this.Qe=new Map,this.Je=new Map,this.L_=t,this.N_=e,this.tr=i}F_(t){const e=t.time,i=this.N_.cacheKey(e),n=this.Qe.get(i);if(n!==void 0)return n.W_;if(this.Ke===this.tr){const o=this.Je.get(this.Ge);this.Je.delete(this.Ge),this.Qe.delete(Kt(o)),this.Ge++,this.Ke--}const r=this.L_(t);return this.Qe.set(i,{W_:r,er:this.Ze}),this.Je.set(this.Ze,i),this.Ke++,this.Ze++,r}}class ci{constructor(t,e){rs(t<=e,"right should be >= left"),this.j_=t,this.H_=e}Os(){return this.j_}di(){return this.H_}U_(){return this.H_-this.j_+1}Kr(t){return this.j_<=t&&t<=this.H_}Mh(t){return this.j_===t.Os()&&this.H_===t.di()}}function Xl(s,t){return s===null||t===null?s===t:s.Mh(t)}class Cb{constructor(){this.q_=new Map,this.Qe=null,this.Y_=!1}X_(t){this.Y_=t,this.Qe=null}K_(t,e){this.Z_(e),this.Qe=null;for(let i=e;i<t.length;++i){const n=t[i];let r=this.q_.get(n.timeWeight);r===void 0&&(r=[],this.q_.set(n.timeWeight,r)),r.push({index:i,time:n.time,weight:n.timeWeight,originalTime:n.originalTime})}}G_(t,e){const i=Math.ceil(e/t);return this.Qe!==null&&this.Qe.J_===i||(this.Qe={Ea:this.Q_(i),J_:i}),this.Qe.Ea}Z_(t){if(t===0)return void this.q_.clear();const e=[];this.q_.forEach(((i,n)=>{t<=i[0].index?e.push(n):i.splice(Li(i,t,(r=>r.index<t)),1/0)}));for(const i of e)this.q_.delete(i)}Q_(t){let e=[];for(const i of Array.from(this.q_.keys()).sort(((n,r)=>r-n))){if(!this.q_.get(i))continue;const n=e;e=[];const r=n.length;let o=0;const l=Kt(this.q_.get(i)),a=l.length;let h=1/0,u=-1/0;for(let c=0;c<a;c++){const d=l[c],p=d.index;for(;o<r;){const g=n[o],v=g.index;if(!(v<p)){h=v;break}o++,e.push(g),u=v,h=1/0}if(h-p>=t&&p-u>=t)e.push(d),u=p;else if(this.Y_)return n}for(;o<r;o++)e.push(n[o])}return e}}class Ps{constructor(t){this.tu=t}iu(){return this.tu===null?null:new ci(Math.floor(this.tu.Os()),Math.ceil(this.tu.di()))}nu(){return this.tu}static su(){return new Ps(null)}}function Mb(s,t){return s.weight>t.weight?s:t}class Tb{constructor(t,e,i,n){this.e_=0,this.eu=null,this.ru=[],this.fo=null,this.do=null,this.hu=new Cb,this.lu=new Map,this.au=Ps.su(),this.ou=!0,this._u=new xt,this.uu=new xt,this.cu=new xt,this.du=null,this.fu=null,this.vu=[],this.cn=e,this.bo=i,this.pu=e.rightOffset,this.mu=e.barSpacing,this.Ui=t,this.N_=n,this.bu(),this.hu.X_(e.uniformDistribution)}W(){return this.cn}wu(t){ge(this.bo,t),this.gu(),this.bu()}Nh(t,e){var i;ge(this.cn,t),this.cn.fixLeftEdge&&this.Mu(),this.cn.fixRightEdge&&this.xu(),t.barSpacing!==void 0&&this.Ui.Gn(t.barSpacing),t.rightOffset!==void 0&&this.Ui.Jn(t.rightOffset),t.minBarSpacing!==void 0&&this.Ui.Gn((i=t.barSpacing)!==null&&i!==void 0?i:this.mu),this.gu(),this.bu(),this.cu.m()}mn(t){var e,i;return(i=(e=this.ru[t])===null||e===void 0?void 0:e.time)!==null&&i!==void 0?i:null}qi(t){var e;return(e=this.ru[t])!==null&&e!==void 0?e:null}ya(t,e){if(this.ru.length<1)return null;if(this.N_.key(t)>this.N_.key(this.ru[this.ru.length-1].time))return e?this.ru.length-1:null;const i=Li(this.ru,this.N_.key(t),((n,r)=>this.N_.key(n.time)<r));return this.N_.key(t)<this.N_.key(this.ru[i].time)?e?i:null:i}Fi(){return this.e_===0||this.ru.length===0||this.eu===null}ka(){return this.ru.length>0}Xs(){return this.Su(),this.au.iu()}ku(){return this.Su(),this.au.nu()}yu(){const t=this.Xs();if(t===null)return null;const e={from:t.Os(),to:t.di()};return this.Cu(e)}Cu(t){const e=Math.round(t.from),i=Math.round(t.to),n=$(this.Tu()),r=$(this.Bn());return{from:$(this.qi(Math.max(n,e))),to:$(this.qi(Math.min(r,i)))}}Pu(t){return{from:$(this.ya(t.from,!0)),to:$(this.ya(t.to,!0))}}$i(){return this.e_}m_(t){if(!isFinite(t)||t<=0||this.e_===t)return;const e=this.ku(),i=this.e_;if(this.e_=t,this.ou=!0,this.cn.lockVisibleTimeRangeOnResize&&i!==0){const n=this.mu*t/i;this.mu=n}if(this.cn.fixLeftEdge&&e!==null&&e.Os()<=0){const n=i-t;this.pu-=Math.round(n/this.mu)+1,this.ou=!0}this.Ru(),this.Du()}Et(t){if(this.Fi()||!wi(t))return 0;const e=this.Ou()+this.pu-t;return this.e_-(e+.5)*this.mu-1}Js(t,e){const i=this.Ou(),n=e===void 0?0:e.from,r=e===void 0?t.length:e.to;for(let o=n;o<r;o++){const l=t[o].ut,a=i+this.pu-l,h=this.e_-(a+.5)*this.mu-1;t[o].et=h}}Au(t){return Math.ceil(this.Vu(t))}Jn(t){this.ou=!0,this.pu=t,this.Du(),this.Ui.Bu(),this.Ui.Fh()}he(){return this.mu}Gn(t){this.Iu(t),this.Du(),this.Ui.Bu(),this.Ui.Fh()}zu(){return this.pu}Ea(){if(this.Fi())return null;if(this.fu!==null)return this.fu;const t=this.mu,e=5*(this.Ui.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),i=Math.round(e/t),n=$(this.Xs()),r=Math.max(n.Os(),n.Os()-i),o=Math.max(n.di(),n.di()-i),l=this.hu.G_(t,e),a=this.Tu()+i,h=this.Bn()-i,u=this.Eu(),c=this.cn.fixLeftEdge||u,d=this.cn.fixRightEdge||u;let p=0;for(const g of l){if(!(r<=g.index&&g.index<=o))continue;let v;p<this.vu.length?(v=this.vu[p],v.coord=this.Et(g.index),v.label=this.Lu(g),v.weight=g.weight):(v={needAlignCoordinate:!1,coord:this.Et(g.index),label:this.Lu(g),weight:g.weight},this.vu.push(v)),this.mu>e/2&&!u?v.needAlignCoordinate=!1:v.needAlignCoordinate=c&&g.index<=a||d&&g.index>=h,p++}return this.vu.length=p,this.fu=this.vu,this.vu}Nu(){this.ou=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Fu(t){this.ou=!0,this.eu=t,this.Du(),this.Mu()}Wu(t,e){const i=this.Vu(t),n=this.he(),r=n+e*(n/10);this.Gn(r),this.cn.rightBarStaysOnScroll||this.Jn(this.zu()+(i-this.Vu(t)))}Uo(t){this.fo&&this.Zo(),this.do===null&&this.du===null&&(this.Fi()||(this.do=t,this.ju()))}qo(t){if(this.du===null)return;const e=Ir(this.e_-t,0,this.e_),i=Ir(this.e_-$(this.do),0,this.e_);e!==0&&i!==0&&this.Gn(this.du.he*e/i)}Yo(){this.do!==null&&(this.do=null,this.Hu())}Xo(t){this.fo===null&&this.du===null&&(this.Fi()||(this.fo=t,this.ju()))}Ko(t){if(this.fo===null)return;const e=(this.fo-t)/this.he();this.pu=$(this.du).zu+e,this.ou=!0,this.Du()}Zo(){this.fo!==null&&(this.fo=null,this.Hu())}$u(){this.Uu(this.cn.rightOffset)}Uu(t,e=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.pu,n=performance.now();this.Ui.Xn({qu:r=>(r-n)/e>=1,Yu:r=>{const o=(r-n)/e;return o>=1?t:i+(t-i)*o}})}gt(t,e){this.ou=!0,this.ru=t,this.hu.K_(t,e),this.Du()}Xu(){return this._u}Ku(){return this.uu}Zu(){return this.cu}Ou(){return this.eu||0}Gu(t){const e=t.U_();this.Iu(this.e_/e),this.pu=t.di()-this.Ou(),this.Du(),this.ou=!0,this.Ui.Bu(),this.Ui.Fh()}Ju(){const t=this.Tu(),e=this.Bn();t!==null&&e!==null&&this.Gu(new ci(t,e+this.cn.rightOffset))}Qu(t){const e=new ci(t.from,t.to);this.Gu(e)}Yi(t){return this.bo.timeFormatter!==void 0?this.bo.timeFormatter(t.originalTime):this.N_.formatHorzItem(t.time)}Bn(){return this.ru.length===0?null:this.ru.length-1}Eu(){const{handleScroll:t,handleScale:e}=this.Ui.W();return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}Tu(){return this.ru.length===0?null:0}tc(t){return(this.e_-1-t)/this.mu}Vu(t){const e=this.tc(t),i=this.Ou()+this.pu-e;return Math.round(1e6*i)/1e6}Iu(t){const e=this.mu;this.mu=t,this.Ru(),e!==this.mu&&(this.ou=!0,this.ic())}Su(){if(!this.ou)return;if(this.ou=!1,this.Fi())return void this.nc(Ps.su());const t=this.Ou(),e=this.e_/this.mu,i=this.pu+t,n=new ci(i-e+1,i);this.nc(new Ps(n))}Ru(){const t=this.sc();if(this.mu<t&&(this.mu=t,this.ou=!0),this.e_!==0){const e=.5*this.e_;this.mu>e&&(this.mu=e,this.ou=!0)}}sc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.ru.length!==0?this.e_/this.ru.length:this.cn.minBarSpacing}Du(){const t=this.ec();this.pu>t&&(this.pu=t,this.ou=!0);const e=this.rc();e!==null&&this.pu<e&&(this.pu=e,this.ou=!0)}rc(){const t=this.Tu(),e=this.eu;return t===null||e===null?null:t-e-1+(this.cn.fixLeftEdge?this.e_/this.mu:Math.min(2,this.ru.length))}ec(){return this.cn.fixRightEdge?0:this.e_/this.mu-Math.min(2,this.ru.length)}ju(){this.du={he:this.he(),zu:this.zu()}}Hu(){this.du=null}Lu(t){let e=this.lu.get(t.weight);return e===void 0&&(e=new Eb((i=>this.hc(i)),this.N_),this.lu.set(t.weight,e)),e.F_(t)}hc(t){return this.N_.formatTickmark(t,this.bo)}nc(t){const e=this.au;this.au=t,Xl(e.iu(),this.au.iu())||this._u.m(),Xl(e.nu(),this.au.nu())||this.uu.m(),this.ic()}ic(){this.fu=null}gu(){this.ic(),this.lu.clear()}bu(){this.N_.updateFormatter(this.bo)}Mu(){if(!this.cn.fixLeftEdge)return;const t=this.Tu();if(t===null)return;const e=this.Xs();if(e===null)return;const i=e.Os()-t;if(i<0){const n=this.pu-i-1;this.Jn(n)}this.Ru()}xu(){this.Du(),this.Ru()}}class kb extends bo{constructor(t){super(),this.lc=new Map,this.Lt=t}Z(t){}J(t){if(!this.Lt.Tt)return;const{context:e,mediaSize:i}=t;let n=0;for(const o of this.Lt.ac){if(o.Jt.length===0)continue;e.font=o.R;const l=this.oc(e,o.Jt);l>i.width?o.Wu=i.width/l:o.Wu=1,n+=o._c*o.Wu}let r=0;switch(this.Lt.uc){case"top":r=0;break;case"center":r=Math.max((i.height-n)/2,0);break;case"bottom":r=Math.max(i.height-n,0)}e.fillStyle=this.Lt.O;for(const o of this.Lt.ac){e.save();let l=0;switch(this.Lt.cc){case"left":e.textAlign="left",l=o._c/2;break;case"center":e.textAlign="center",l=i.width/2;break;case"right":e.textAlign="right",l=i.width-1-o._c/2}e.translate(l,r),e.textBaseline="top",e.font=o.R,e.scale(o.Wu,o.Wu),e.fillText(o.Jt,0,o.dc),e.restore(),r+=o._c*o.Wu}}oc(t,e){const i=this.fc(t.font);let n=i.get(e);return n===void 0&&(n=t.measureText(e).width,i.set(e,n)),n}fc(t){let e=this.lc.get(t);return e===void 0&&(e=new Map,this.lc.set(t,e)),e}}class Ob{constructor(t){this.bt=!0,this.jt={Tt:!1,O:"",ac:[],uc:"center",cc:"center"},this.Ht=new kb(this.jt),this.$t=t}gt(){this.bt=!0}xt(){return this.bt&&(this.St(),this.bt=!1),this.Ht}St(){const t=this.$t.W(),e=this.jt;e.Tt=t.visible,e.Tt&&(e.O=t.color,e.cc=t.horzAlign,e.uc=t.vertAlign,e.ac=[{Jt:t.text,R:Vs(t.fontSize,t.fontFamily,t.fontStyle),_c:1.2*t.fontSize,dc:0,Wu:0}])}}class Ab extends yo{constructor(t,e){super(),this.cn=e,this.wn=new Ob(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}On(){this.wn.gt()}}var Yl,Ql,Zl,ta,ea;(function(s){s[s.OnTouchEnd=0]="OnTouchEnd",s[s.OnNextTap=1]="OnNextTap"})(Yl||(Yl={}));class Lb{constructor(t,e,i){this.vc=[],this.mc=[],this.e_=0,this.bc=null,this.wc=new xt,this.gc=new xt,this.Mc=null,this.xc=t,this.cn=e,this.N_=i,this.Sc=new ug(this),this.wl=new Tb(this,e.timeScale,this.cn.localization,i),this.wt=new wg(this,e.crosshair),this.kc=new vb(e.crosshair),this.yc=new Ab(this,e.watermark),this.Cc(),this.vc[0].p_(2e3),this.Tc=this.Pc(0),this.Rc=this.Pc(1)}$l(){this.Dc(Lt.es())}Fh(){this.Dc(Lt.ss())}sa(){this.Dc(new Lt(1))}Ul(t){const e=this.Oc(t);this.Dc(e)}Ac(){return this.bc}Vc(t){const e=this.bc;this.bc=t,e!==null&&this.Ul(e.Bc),t!==null&&this.Ul(t.Bc)}W(){return this.cn}Nh(t){ge(this.cn,t),this.vc.forEach((e=>e.c_(t))),t.timeScale!==void 0&&this.wl.Nh(t.timeScale),t.localization!==void 0&&this.wl.wu(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.wc.m(),this.Tc=this.Pc(0),this.Rc=this.Pc(1),this.$l()}Ic(t,e){if(t==="left")return void this.Nh({leftPriceScale:e});if(t==="right")return void this.Nh({rightPriceScale:e});const i=this.zc(t);i!==null&&(i.At.Nh(e),this.wc.m())}zc(t){for(const e of this.vc){const i=e.d_(t);if(i!==null)return{Ut:e,At:i}}return null}yt(){return this.wl}Ec(){return this.vc}Lc(){return this.yc}Nc(){return this.wt}Fc(){return this.gc}Wc(t,e){t.Oo(e),this.Bu()}m_(t){this.e_=t,this.wl.m_(this.e_),this.vc.forEach((e=>e.m_(t))),this.Bu()}Cc(t){const e=new xb(this.wl,this);t!==void 0?this.vc.splice(t,0,e):this.vc.push(e);const i=t===void 0?this.vc.length-1:t,n=Lt.es();return n.Nn(i,{Fn:0,Wn:!0}),this.Dc(n),e}y_(t,e,i){t.y_(e,i)}C_(t,e,i){t.C_(e,i),this.ql(),this.Dc(this.jc(t,2))}T_(t,e){t.T_(e),this.Dc(this.jc(t,2))}P_(t,e,i){e.yo()||t.P_(e,i)}R_(t,e,i){e.yo()||(t.R_(e,i),this.ql(),this.Dc(this.jc(t,2)))}D_(t,e){e.yo()||(t.D_(e),this.Dc(this.jc(t,2)))}A_(t,e){t.A_(e),this.Dc(this.jc(t,2))}Hc(t){this.wl.Uo(t)}$c(t,e){const i=this.yt();if(i.Fi()||e===0)return;const n=i.$i();t=Math.max(1,Math.min(t,n)),i.Wu(t,e),this.Bu()}Uc(t){this.qc(0),this.Yc(t),this.Xc()}Kc(t){this.wl.qo(t),this.Bu()}Zc(){this.wl.Yo(),this.Fh()}qc(t){this.wl.Xo(t)}Yc(t){this.wl.Ko(t),this.Bu()}Xc(){this.wl.Zo(),this.Fh()}Mt(){return this.mc}Gc(t,e,i,n,r){this.wt.gn(t,e);let o=NaN,l=this.wl.Au(t);const a=this.wl.Xs();a!==null&&(l=Math.min(Math.max(a.Os(),l),a.di()));const h=n.vn(),u=h.Pt();u!==null&&(o=h.pn(e,u)),o=this.kc.Ca(o,l,n),this.wt.kn(l,o,n),this.sa(),r||this.gc.m(this.wt.kt(),{x:t,y:e},i)}Jc(t,e,i){const n=i.vn(),r=n.Pt(),o=n.Ot(t,$(r)),l=this.wl.ya(e,!0),a=this.wl.Et($(l));this.Gc(a,o,null,i,!0)}Qc(t){this.Nc().Cn(),this.sa(),t||this.gc.m(null,null,null)}ql(){const t=this.wt.Ut();if(t!==null){const e=this.wt.xn(),i=this.wt.Sn();this.Gc(e,i,null,t)}this.wt.On()}td(t,e,i){const n=this.wl.mn(0),r=this.wl.Bn();e!==void 0&&i!==void 0&&this.wl.gt(e,i);const o=this.wl.mn(0),l=this.wl.Ou(),a=this.wl.Xs();if(a!==null&&n!==null&&o!==null){const h=a.Kr(l),u=this.N_.key(n)>this.N_.key(o),c=t!==null&&t>l&&!u,d=this.wl.Bn(),p=h&&d!==r&&this.wl.W().shiftVisibleRangeOnNewBar;if(c&&!p){const g=t-l;this.wl.Jn(this.wl.zu()-g)}}this.wl.Fu(t)}Kl(t){t!==null&&t.B_()}cr(t){const e=this.vc.find((i=>i.No().includes(t)));return e===void 0?null:e}Bu(){this.yc.On(),this.vc.forEach((t=>t.B_())),this.ql()}S(){this.vc.forEach((t=>t.S())),this.vc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}nd(){return this.Sc}mr(){return this.Sc.W()}f_(){return this.wc}sd(t,e,i){const n=this.vc[0],r=this.ed(e,t,n,i);return this.mc.push(r),this.mc.length===1?this.$l():this.Fh(),r}rd(t){const e=this.cr(t),i=this.mc.indexOf(t);rs(i!==-1,"Series not found"),this.mc.splice(i,1),$(e).jo(t),t.S&&t.S()}Hl(t,e){const i=$(this.cr(t));i.jo(t);const n=this.zc(e);if(n===null){const r=t.Zi();i.Fo(t,e,r)}else{const r=n.Ut===i?t.Zi():void 0;n.Ut.Fo(t,e,r)}}Ju(){const t=Lt.ss();t.$n(),this.Dc(t)}hd(t){const e=Lt.ss();e.Yn(t),this.Dc(e)}Zn(){const t=Lt.ss();t.Zn(),this.Dc(t)}Gn(t){const e=Lt.ss();e.Gn(t),this.Dc(e)}Jn(t){const e=Lt.ss();e.Jn(t),this.Dc(e)}Xn(t){const e=Lt.ss();e.Xn(t),this.Dc(e)}Un(){const t=Lt.ss();t.Un(),this.Dc(t)}ld(){return this.cn.rightPriceScale.visible?"right":"left"}ad(){return this.Rc}q(){return this.Tc}It(t){const e=this.Rc,i=this.Tc;if(e===i)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),this.Mc===null||this.Mc.Ts!==i||this.Mc.Ps!==e)this.Mc={Ts:i,Ps:e,od:new Map};else{const r=this.Mc.od.get(t);if(r!==void 0)return r}const n=(function(r,o,l){const[a,h,u,c]=cn(r),[d,p,g,v]=cn(o),S=[re(a+l*(d-a)),re(h+l*(p-h)),re(u+l*(g-u)),Yh(c+l*(v-c))];return`rgba(${S[0]}, ${S[1]}, ${S[2]}, ${S[3]})`})(i,e,t/100);return this.Mc.od.set(t,n),n}jc(t,e){const i=new Lt(e);if(t!==null){const n=this.vc.indexOf(t);i.Nn(n,{Fn:e})}return i}Oc(t,e){return e===void 0&&(e=2),this.jc(this.cr(t),e)}Dc(t){this.xc&&this.xc(t),this.vc.forEach((e=>e.z_().Wh().gt()))}ed(t,e,i,n){const r=new xo(this,t,e,i,n),o=t.priceScaleId!==void 0?t.priceScaleId:this.ld();return i.Fo(r,o),Ln(o)||r.Nh(t),r}Pc(t){const e=this.cn.layout;return e.background.type==="gradient"?t===0?e.background.topColor:e.background.bottomColor:e.background.color}}function Br(s){return!Me(s)&&!Ai(s)}function mu(s){return Me(s)}(function(s){s[s.Disabled=0]="Disabled",s[s.Continuous=1]="Continuous",s[s.OnDataUpdate=2]="OnDataUpdate"})(Ql||(Ql={})),(function(s){s[s.LastBar=0]="LastBar",s[s.LastVisible=1]="LastVisible"})(Zl||(Zl={})),(function(s){s.Solid="solid",s.VerticalGradient="gradient"})(ta||(ta={})),(function(s){s[s.Year=0]="Year",s[s.Month=1]="Month",s[s.DayOfMonth=2]="DayOfMonth",s[s.Time=3]="Time",s[s.TimeWithSeconds=4]="TimeWithSeconds"})(ea||(ea={}));const sa=s=>s.getUTCFullYear();function Rb(s,t,e){return t.replace(/yyyy/g,(i=>Fe(sa(i),4))(s)).replace(/yy/g,(i=>Fe(sa(i)%100,2))(s)).replace(/MMMM/g,((i,n)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(n,{month:"long"}))(s,e)).replace(/MMM/g,((i,n)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(n,{month:"short"}))(s,e)).replace(/MM/g,(i=>Fe((n=>n.getUTCMonth()+1)(i),2))(s)).replace(/dd/g,(i=>Fe((n=>n.getUTCDate())(i),2))(s))}class vu{constructor(t="yyyy-MM-dd",e="default"){this._d=t,this.ud=e}F_(t){return Rb(t,this._d,this.ud)}}class Pb{constructor(t){this.dd=t||"%h:%m:%s"}F_(t){return this.dd.replace("%h",Fe(t.getUTCHours(),2)).replace("%m",Fe(t.getUTCMinutes(),2)).replace("%s",Fe(t.getUTCSeconds(),2))}}const Nb={fd:"yyyy-MM-dd",vd:"%h:%m:%s",pd:" ",md:"default"};class Db{constructor(t={}){const e=Object.assign(Object.assign({},Nb),t);this.bd=new vu(e.fd,e.md),this.wd=new Pb(e.vd),this.gd=e.pd}F_(t){return`${this.bd.F_(t)}${this.gd}${this.wd.F_(t)}`}}function Fi(s){return 60*s*60*1e3}function nr(s){return 60*s*1e3}const Vi=[{Md:(ia=1,1e3*ia),xd:10},{Md:nr(1),xd:20},{Md:nr(5),xd:21},{Md:nr(30),xd:22},{Md:Fi(1),xd:30},{Md:Fi(3),xd:31},{Md:Fi(6),xd:32},{Md:Fi(12),xd:33}];var ia;function na(s,t){if(s.getUTCFullYear()!==t.getUTCFullYear())return 70;if(s.getUTCMonth()!==t.getUTCMonth())return 60;if(s.getUTCDate()!==t.getUTCDate())return 50;for(let e=Vi.length-1;e>=0;--e)if(Math.floor(t.getTime()/Vi[e].Md)!==Math.floor(s.getTime()/Vi[e].Md))return Vi[e].xd;return 0}function rr(s){let t=s;if(Ai(s)&&(t=Eo(s)),!Br(t))throw new Error("time must be of type BusinessDay");const e=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{Sd:Math.round(e.getTime()/1e3),kd:t}}function ra(s){if(!mu(s))throw new Error("time must be of type isUTCTimestamp");return{Sd:s}}function Eo(s){const t=new Date(s);if(isNaN(t.getTime()))throw new Error(`Invalid date string=${s}, expected format=yyyy-mm-dd`);return{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()}}function oa(s){Ai(s.time)&&(s.time=Eo(s.time))}class la{options(){return this.cn}setOptions(t){this.cn=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?(function(e){e.forEach(oa)})(t):oa(t)}createConverterToInternalObj(t){return $((function(e){return e.length===0?null:Br(e[0].time)||Ai(e[0].time)?rr:ra})(t))}key(t){return typeof t=="object"&&"Sd"in t?t.Sd:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){const e=t;return e.kd===void 0?new Date(1e3*e.Sd).getTime():new Date(Date.UTC(e.kd.year,e.kd.month-1,e.kd.day)).getTime()}convertHorzItemToInternal(t){return mu(e=t)?ra(e):Br(e)?rr(e):rr(Eo(e));var e}updateFormatter(t){if(!this.cn)return;const e=t.dateFormat;this.cn.timeScale.timeVisible?this.yd=new Db({fd:e,vd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",pd:"   ",md:t.locale}):this.yd=new vu(e,t.locale)}formatHorzItem(t){const e=t;return this.yd.F_(new Date(1e3*e.Sd))}formatTickmark(t,e){const i=(function(r,o,l){switch(r){case 0:case 10:return o?l?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}})(t.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),n=this.cn.timeScale;if(n.tickMarkFormatter!==void 0){const r=n.tickMarkFormatter(t.originalTime,i,e.locale);if(r!==null)return r}return(function(r,o,l){const a={};switch(o){case 0:a.year="numeric";break;case 1:a.month="short";break;case 2:a.day="numeric";break;case 3:a.hour12=!1,a.hour="2-digit",a.minute="2-digit";break;case 4:a.hour12=!1,a.hour="2-digit",a.minute="2-digit",a.second="2-digit"}const h=r.kd===void 0?new Date(1e3*r.Sd):new Date(Date.UTC(r.kd.year,r.kd.month-1,r.kd.day));return new Date(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()).toLocaleString(l,a)})(t.time,i,e.locale)}maxTickMarkWeight(t){let e=t.reduce(Mb,t[0]).weight;return e>30&&e<50&&(e=30),e}fillWeightsForPoints(t,e){(function(i,n=0){if(i.length===0)return;let r=n===0?null:i[n-1].time.Sd,o=r!==null?new Date(1e3*r):null,l=0;for(let a=n;a<i.length;++a){const h=i[a],u=new Date(1e3*h.time.Sd);o!==null&&(h.timeWeight=na(u,o)),l+=h.time.Sd-(r||h.time.Sd),r=h.time.Sd,o=u}if(n===0&&i.length>1){const a=Math.ceil(l/(i.length-1)),h=new Date(1e3*(i[0].time.Sd-a));i[0].timeWeight=na(new Date(1e3*i[0].time.Sd),h)}})(t,e)}static Cd(t){return ge({localization:{dateFormat:"dd MMM 'yy"}},t??{})}}const zs=typeof window<"u";function aa(){return!!zs&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function or(){return!!zs&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Fr(s){return s+s%2}function lr(s,t){return s.Td-t.Td}function ar(s,t,e){const i=(s.Td-t.Td)/(s.ut-t.ut);return Math.sign(i)*Math.min(Math.abs(i),e)}class Ib{constructor(t,e,i,n){this.Pd=null,this.Rd=null,this.Dd=null,this.Od=null,this.Ad=null,this.Vd=0,this.Bd=0,this.Id=t,this.zd=e,this.Ed=i,this.rs=n}Ld(t,e){if(this.Pd!==null){if(this.Pd.ut===e)return void(this.Pd.Td=t);if(Math.abs(this.Pd.Td-t)<this.rs)return}this.Od=this.Dd,this.Dd=this.Rd,this.Rd=this.Pd,this.Pd={ut:e,Td:t}}Dr(t,e){if(this.Pd===null||this.Rd===null||e-this.Pd.ut>50)return;let i=0;const n=ar(this.Pd,this.Rd,this.zd),r=lr(this.Pd,this.Rd),o=[n],l=[r];if(i+=r,this.Dd!==null){const h=ar(this.Rd,this.Dd,this.zd);if(Math.sign(h)===Math.sign(n)){const u=lr(this.Rd,this.Dd);if(o.push(h),l.push(u),i+=u,this.Od!==null){const c=ar(this.Dd,this.Od,this.zd);if(Math.sign(c)===Math.sign(n)){const d=lr(this.Dd,this.Od);o.push(c),l.push(d),i+=d}}}}let a=0;for(let h=0;h<o.length;++h)a+=l[h]/i*o[h];Math.abs(a)<this.Id||(this.Ad={Td:t,ut:e},this.Bd=a,this.Vd=(function(h,u){const c=Math.log(u);return Math.log(1*c/-h)/c})(Math.abs(a),this.Ed))}Yu(t){const e=$(this.Ad),i=t-e.ut;return e.Td+this.Bd*(Math.pow(this.Ed,i)-1)/Math.log(this.Ed)}qu(t){return this.Ad===null||this.Nd(t)===this.Vd}Nd(t){const e=t-$(this.Ad).ut;return Math.min(e,this.Vd)}}function _s(s,t){const e=$(s.ownerDocument).createElement("canvas");s.appendChild(e);const i=Jv(e,{options:{allowResizeObserver:!1},transform:(n,r)=>({width:Math.max(n.width,r.width),height:Math.max(n.height,r.height)})});return i.resizeCanvasElement(t),i}function Vr(s,t,e,i){s.G&&s.G(t,e,i)}function Qi(s,t,e,i){s.K(t,e,i)}function zr(s,t,e,i){const n=s(e,i);for(const r of n){const o=r.xt();o!==null&&t(o)}}function $b(s){zs&&window.chrome!==void 0&&s.addEventListener("mousedown",(t=>{if(t.button===1)return t.preventDefault(),!1}))}class Co{constructor(t,e,i){this.Fd=0,this.Wd=null,this.jd={et:Number.NEGATIVE_INFINITY,rt:Number.POSITIVE_INFINITY},this.Hd=0,this.$d=null,this.Ud={et:Number.NEGATIVE_INFINITY,rt:Number.POSITIVE_INFINITY},this.qd=null,this.Yd=!1,this.Xd=null,this.Kd=null,this.Zd=!1,this.Gd=!1,this.Jd=!1,this.Qd=null,this.tf=null,this.if=null,this.nf=null,this.sf=null,this.ef=null,this.rf=null,this.hf=0,this.lf=!1,this.af=!1,this._f=!1,this.uf=0,this.cf=null,this.df=!or(),this.ff=n=>{this.vf(n)},this.pf=n=>{if(this.mf(n)){const r=this.bf(n);if(++this.Hd,this.$d&&this.Hd>1){const{wf:o}=this.gf(xe(n),this.Ud);o<30&&!this.Jd&&this.Mf(r,this.Sf.xf),this.kf()}}else{const r=this.bf(n);if(++this.Fd,this.Wd&&this.Fd>1){const{wf:o}=this.gf(xe(n),this.jd);o<5&&!this.Gd&&this.yf(r,this.Sf.Cf),this.Tf()}}},this.Pf=t,this.Sf=e,this.cn=i,this.Rf()}S(){this.Qd!==null&&(this.Qd(),this.Qd=null),this.tf!==null&&(this.tf(),this.tf=null),this.nf!==null&&(this.nf(),this.nf=null),this.sf!==null&&(this.sf(),this.sf=null),this.ef!==null&&(this.ef(),this.ef=null),this.if!==null&&(this.if(),this.if=null),this.Df(),this.Tf()}Of(t){this.nf&&this.nf();const e=this.Af.bind(this);if(this.nf=()=>{this.Pf.removeEventListener("mousemove",e)},this.Pf.addEventListener("mousemove",e),this.mf(t))return;const i=this.bf(t);this.yf(i,this.Sf.Vf),this.df=!0}Tf(){this.Wd!==null&&clearTimeout(this.Wd),this.Fd=0,this.Wd=null,this.jd={et:Number.NEGATIVE_INFINITY,rt:Number.POSITIVE_INFINITY}}kf(){this.$d!==null&&clearTimeout(this.$d),this.Hd=0,this.$d=null,this.Ud={et:Number.NEGATIVE_INFINITY,rt:Number.POSITIVE_INFINITY}}Af(t){if(this._f||this.Kd!==null||this.mf(t))return;const e=this.bf(t);this.yf(e,this.Sf.Bf),this.df=!0}If(t){const e=hr(t.changedTouches,$(this.cf));if(e===null||(this.uf=zi(t),this.rf!==null)||this.af)return;this.lf=!0;const i=this.gf(xe(e),$(this.Kd)),{zf:n,Ef:r,wf:o}=i;if(this.Zd||!(o<5)){if(!this.Zd){const l=.5*n,a=r>=l&&!this.cn.Lf(),h=l>r&&!this.cn.Nf();a||h||(this.af=!0),this.Zd=!0,this.Jd=!0,this.Df(),this.kf()}if(!this.af){const l=this.bf(t,e);this.Mf(l,this.Sf.Ff),xs(t)}}}Wf(t){if(t.button!==0)return;const e=this.gf(xe(t),$(this.Xd)),{wf:i}=e;if(i>=5&&(this.Gd=!0,this.Tf()),this.Gd){const n=this.bf(t);this.yf(n,this.Sf.jf)}}gf(t,e){const i=Math.abs(e.et-t.et),n=Math.abs(e.rt-t.rt);return{zf:i,Ef:n,wf:i+n}}Hf(t){let e=hr(t.changedTouches,$(this.cf));if(e===null&&t.touches.length===0&&(e=t.changedTouches[0]),e===null)return;this.cf=null,this.uf=zi(t),this.Df(),this.Kd=null,this.ef&&(this.ef(),this.ef=null);const i=this.bf(t,e);if(this.Mf(i,this.Sf.$f),++this.Hd,this.$d&&this.Hd>1){const{wf:n}=this.gf(xe(e),this.Ud);n<30&&!this.Jd&&this.Mf(i,this.Sf.xf),this.kf()}else this.Jd||(this.Mf(i,this.Sf.Uf),this.Sf.Uf&&xs(t));this.Hd===0&&xs(t),t.touches.length===0&&this.Yd&&(this.Yd=!1,xs(t))}vf(t){if(t.button!==0)return;const e=this.bf(t);if(this.Xd=null,this._f=!1,this.sf&&(this.sf(),this.sf=null),aa()&&this.Pf.ownerDocument.documentElement.removeEventListener("mouseleave",this.ff),!this.mf(t))if(this.yf(e,this.Sf.qf),++this.Fd,this.Wd&&this.Fd>1){const{wf:i}=this.gf(xe(t),this.jd);i<5&&!this.Gd&&this.yf(e,this.Sf.Cf),this.Tf()}else this.Gd||this.yf(e,this.Sf.Yf)}Df(){this.qd!==null&&(clearTimeout(this.qd),this.qd=null)}Xf(t){if(this.cf!==null)return;const e=t.changedTouches[0];this.cf=e.identifier,this.uf=zi(t);const i=this.Pf.ownerDocument.documentElement;this.Jd=!1,this.Zd=!1,this.af=!1,this.Kd=xe(e),this.ef&&(this.ef(),this.ef=null);{const r=this.If.bind(this),o=this.Hf.bind(this);this.ef=()=>{i.removeEventListener("touchmove",r),i.removeEventListener("touchend",o)},i.addEventListener("touchmove",r,{passive:!1}),i.addEventListener("touchend",o,{passive:!1}),this.Df(),this.qd=setTimeout(this.Kf.bind(this,t),240)}const n=this.bf(t,e);this.Mf(n,this.Sf.Zf),this.$d||(this.Hd=0,this.$d=setTimeout(this.kf.bind(this),500),this.Ud=xe(e))}Gf(t){if(t.button!==0)return;const e=this.Pf.ownerDocument.documentElement;aa()&&e.addEventListener("mouseleave",this.ff),this.Gd=!1,this.Xd=xe(t),this.sf&&(this.sf(),this.sf=null);{const n=this.Wf.bind(this),r=this.vf.bind(this);this.sf=()=>{e.removeEventListener("mousemove",n),e.removeEventListener("mouseup",r)},e.addEventListener("mousemove",n),e.addEventListener("mouseup",r)}if(this._f=!0,this.mf(t))return;const i=this.bf(t);this.yf(i,this.Sf.Jf),this.Wd||(this.Fd=0,this.Wd=setTimeout(this.Tf.bind(this),500),this.jd=xe(t))}Rf(){this.Pf.addEventListener("mouseenter",this.Of.bind(this)),this.Pf.addEventListener("touchcancel",this.Df.bind(this));{const t=this.Pf.ownerDocument,e=i=>{this.Sf.Qf&&(i.composed&&this.Pf.contains(i.composedPath()[0])||i.target&&this.Pf.contains(i.target)||this.Sf.Qf())};this.tf=()=>{t.removeEventListener("touchstart",e)},this.Qd=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}or()&&(this.if=()=>{this.Pf.removeEventListener("dblclick",this.pf)},this.Pf.addEventListener("dblclick",this.pf)),this.Pf.addEventListener("mouseleave",this.tv.bind(this)),this.Pf.addEventListener("touchstart",this.Xf.bind(this),{passive:!0}),$b(this.Pf),this.Pf.addEventListener("mousedown",this.Gf.bind(this)),this.iv(),this.Pf.addEventListener("touchmove",(()=>{}),{passive:!1})}iv(){this.Sf.nv===void 0&&this.Sf.sv===void 0&&this.Sf.ev===void 0||(this.Pf.addEventListener("touchstart",(t=>this.rv(t.touches)),{passive:!0}),this.Pf.addEventListener("touchmove",(t=>{if(t.touches.length===2&&this.rf!==null&&this.Sf.sv!==void 0){const e=ha(t.touches[0],t.touches[1])/this.hf;this.Sf.sv(this.rf,e),xs(t)}}),{passive:!1}),this.Pf.addEventListener("touchend",(t=>{this.rv(t.touches)})))}rv(t){t.length===1&&(this.lf=!1),t.length!==2||this.lf||this.Yd?this.hv():this.lv(t)}lv(t){const e=this.Pf.getBoundingClientRect()||{left:0,top:0};this.rf={et:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,rt:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.hf=ha(t[0],t[1]),this.Sf.nv!==void 0&&this.Sf.nv(),this.Df()}hv(){this.rf!==null&&(this.rf=null,this.Sf.ev!==void 0&&this.Sf.ev())}tv(t){if(this.nf&&this.nf(),this.mf(t)||!this.df)return;const e=this.bf(t);this.yf(e,this.Sf.av),this.df=!or()}Kf(t){const e=hr(t.touches,$(this.cf));if(e===null)return;const i=this.bf(t,e);this.Mf(i,this.Sf.ov),this.Jd=!0,this.Yd=!0}mf(t){return t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents!==void 0?t.sourceCapabilities.firesTouchEvents:zi(t)<this.uf+500}Mf(t,e){e&&e.call(this.Sf,t)}yf(t,e){e&&e.call(this.Sf,t)}bf(t,e){const i=e||t,n=this.Pf.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-n.left,localY:i.clientY-n.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,_v:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click",uv:t.type,cv:i.target,dv:t.view,fv:()=>{t.type!=="touchstart"&&xs(t)}}}}function ha(s,t){const e=s.clientX-t.clientX,i=s.clientY-t.clientY;return Math.sqrt(e*e+i*i)}function xs(s){s.cancelable&&s.preventDefault()}function xe(s){return{et:s.pageX,rt:s.pageY}}function zi(s){return s.timeStamp||performance.now()}function hr(s,t){for(let e=0;e<s.length;++e)if(s[e].identifier===t)return s[e];return null}function Ui(s){return{Bc:s.Bc,vv:{wr:s.pv.externalId},mv:s.pv.cursorStyle}}function Bb(s,t,e){for(const i of s){const n=i.xt();if(n!==null&&n.br){const r=n.br(t,e);if(r!==null)return{dv:i,vv:r}}}return null}function ur(s,t){return e=>{var i,n,r,o;return((n=(i=e.At())===null||i===void 0?void 0:i.xa())!==null&&n!==void 0?n:"")!==t?[]:(o=(r=e.la)===null||r===void 0?void 0:r.call(e,s))!==null&&o!==void 0?o:[]}}class ua{constructor(t,e,i,n){this.Li=null,this.bv=null,this.wv=!1,this.gv=new xi(200),this.Gr=null,this.Mv=0,this.xv=!1,this.Sv=()=>{this.xv||this.nn.kv().qt().Fh()},this.yv=()=>{this.xv||this.nn.kv().qt().Fh()},this.nn=t,this.cn=e,this.mo=e.layout,this.Sc=i,this.Cv=n==="left",this.Tv=ur("normal",n),this.Pv=ur("top",n),this.Rv=ur("bottom",n),this.Dv=document.createElement("div"),this.Dv.style.height="100%",this.Dv.style.overflow="hidden",this.Dv.style.width="25px",this.Dv.style.left="0",this.Dv.style.position="relative",this.Ov=_s(this.Dv,yt({width:16,height:16})),this.Ov.subscribeSuggestedBitmapSizeChanged(this.Sv);const r=this.Ov.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Av=_s(this.Dv,yt({width:16,height:16})),this.Av.subscribeSuggestedBitmapSizeChanged(this.yv);const o=this.Av.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const l={Jf:this.Vv.bind(this),Zf:this.Vv.bind(this),jf:this.Bv.bind(this),Ff:this.Bv.bind(this),Qf:this.Iv.bind(this),qf:this.zv.bind(this),$f:this.zv.bind(this),Cf:this.Ev.bind(this),xf:this.Ev.bind(this),Vf:this.Lv.bind(this),av:this.Nv.bind(this)};this.Fv=new Co(this.Av.canvasElement,l,{Lf:()=>!1,Nf:()=>!0})}S(){this.Fv.S(),this.Av.unsubscribeSuggestedBitmapSizeChanged(this.yv),this.Av.dispose(),this.Ov.unsubscribeSuggestedBitmapSizeChanged(this.Sv),this.Ov.dispose(),this.Li!==null&&this.Li.$o().p(this),this.Li=null}Wv(){return this.Dv}P(){return this.mo.fontSize}jv(){const t=this.Sc.W();return this.Gr!==t.R&&(this.gv.ir(),this.Gr=t.R),t}Hv(){if(this.Li===null)return 0;let t=0;const e=this.jv(),i=$(this.Ov.canvasElement.getContext("2d"));i.save();const n=this.Li.Ea();i.font=this.$v(),n.length>0&&(t=Math.max(this.gv.Si(i,n[0].Za),this.gv.Si(i,n[n.length-1].Za)));const r=this.Uv();for(let a=r.length;a--;){const h=this.gv.Si(i,r[a].Jt());h>t&&(t=h)}const o=this.Li.Pt();if(o!==null&&this.bv!==null){const a=this.Li.pn(1,o),h=this.Li.pn(this.bv.height-2,o);t=Math.max(t,this.gv.Si(i,this.Li.Wi(Math.floor(Math.min(a,h))+.11111111111111,o)),this.gv.Si(i,this.Li.Wi(Math.ceil(Math.max(a,h))-.11111111111111,o)))}i.restore();const l=t||34;return Fr(Math.ceil(e.C+e.T+e.B+e.I+5+l))}qv(t){this.bv!==null&&ms(this.bv,t)||(this.bv=t,this.xv=!0,this.Ov.resizeCanvasElement(t),this.Av.resizeCanvasElement(t),this.xv=!1,this.Dv.style.width=`${t.width}px`,this.Dv.style.height=`${t.height}px`)}Yv(){return $(this.bv).width}Ji(t){this.Li!==t&&(this.Li!==null&&this.Li.$o().p(this),this.Li=t,t.$o().l(this.ao.bind(this),this))}At(){return this.Li}ir(){const t=this.nn.Xv();this.nn.kv().qt().A_(t,$(this.At()))}Kv(t){if(this.bv===null)return;if(t!==1){this.Zv(),this.Ov.applySuggestedBitmapSize();const i=bs(this.Ov);i!==null&&(i.useBitmapCoordinateSpace((n=>{this.Gv(n),this.Be(n)})),this.nn.Jv(i,this.Rv),this.Qv(i),this.nn.Jv(i,this.Tv),this.tp(i))}this.Av.applySuggestedBitmapSize();const e=bs(this.Av);e!==null&&(e.useBitmapCoordinateSpace((({context:i,bitmapSize:n})=>{i.clearRect(0,0,n.width,n.height)})),this.ip(e),this.nn.Jv(e,this.Pv))}np(){return this.Ov.bitmapSize}sp(t,e,i){const n=this.np();n.width>0&&n.height>0&&t.drawImage(this.Ov.canvasElement,e,i)}gt(){var t;(t=this.Li)===null||t===void 0||t.Ea()}Vv(t){if(this.Li===null||this.Li.Fi()||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.nn.kv().qt(),i=this.nn.Xv();this.wv=!0,e.y_(i,this.Li,t.localY)}Bv(t){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.nn.kv().qt(),i=this.nn.Xv(),n=this.Li;e.C_(i,n,t.localY)}Iv(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const t=this.nn.kv().qt(),e=this.nn.Xv(),i=this.Li;this.wv&&(this.wv=!1,t.T_(e,i))}zv(t){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.nn.kv().qt(),i=this.nn.Xv();this.wv=!1,e.T_(i,this.Li)}Ev(t){this.cn.handleScale.axisDoubleClickReset.price&&this.ir()}Lv(t){this.Li!==null&&(!this.nn.kv().qt().W().handleScale.axisPressedMouseMove.price||this.Li.ph()||this.Li.Co()||this.ep(1))}Nv(t){this.ep(0)}Uv(){const t=[],e=this.Li===null?void 0:this.Li;return(i=>{for(let n=0;n<i.length;++n){const r=i[n].Rn(this.nn.Xv(),e);for(let o=0;o<r.length;o++)t.push(r[o])}})(this.nn.Xv().No()),t}Gv({context:t,bitmapSize:e}){const{width:i,height:n}=e,r=this.nn.Xv().qt(),o=r.q(),l=r.ad();o===l?On(t,0,0,i,n,o):Qh(t,0,0,i,n,o,l)}Be({context:t,bitmapSize:e,horizontalPixelRatio:i}){if(this.bv===null||this.Li===null||!this.Li.W().borderVisible)return;t.fillStyle=this.Li.W().borderColor;const n=Math.max(1,Math.floor(this.jv().C*i));let r;r=this.Cv?e.width-n:0,t.fillRect(r,0,n,e.height)}Qv(t){if(this.bv===null||this.Li===null)return;const e=this.Li.Ea(),i=this.Li.W(),n=this.jv(),r=this.Cv?this.bv.width-n.T:0;i.borderVisible&&i.ticksVisible&&t.useBitmapCoordinateSpace((({context:o,horizontalPixelRatio:l,verticalPixelRatio:a})=>{o.fillStyle=i.borderColor;const h=Math.max(1,Math.floor(a)),u=Math.floor(.5*a),c=Math.round(n.T*l);o.beginPath();for(const d of e)o.rect(Math.floor(r*l),Math.round(d.Aa*a)-u,c,h);o.fill()})),t.useMediaCoordinateSpace((({context:o})=>{var l;o.font=this.$v(),o.fillStyle=(l=i.textColor)!==null&&l!==void 0?l:this.mo.textColor,o.textAlign=this.Cv?"right":"left",o.textBaseline="middle";const a=this.Cv?Math.round(r-n.B):Math.round(r+n.T+n.B),h=e.map((u=>this.gv.xi(o,u.Za)));for(let u=e.length;u--;){const c=e[u];o.fillText(c.Za,a,c.Aa+h[u])}}))}Zv(){if(this.bv===null||this.Li===null)return;let t=this.bv.height/2;const e=[],i=this.Li.No().slice(),n=this.nn.Xv(),r=this.jv();this.Li===n.vr()&&this.nn.Xv().No().forEach((a=>{n.dr(a)&&i.push(a)}));const o=this.Li.Ta()[0],l=this.Li;i.forEach((a=>{const h=a.Rn(n,l);h.forEach((u=>{u.Vi(null),u.Bi()&&e.push(u)})),o===a&&h.length>0&&(t=h[0].yi())})),e.forEach((a=>a.Vi(a.yi()))),this.Li.W().alignLabels&&this.rp(e,r,t)}rp(t,e,i){if(this.bv===null)return;const n=t.filter((o=>o.yi()<=i)),r=t.filter((o=>o.yi()>i));n.sort(((o,l)=>l.yi()-o.yi())),n.length&&r.length&&r.push(n[0]),r.sort(((o,l)=>o.yi()-l.yi()));for(const o of t){const l=Math.floor(o.zt(e)/2),a=o.yi();a>-l&&a<l&&o.Vi(l),a>this.bv.height-l&&a<this.bv.height+l&&o.Vi(this.bv.height-l)}for(let o=1;o<n.length;o++){const l=n[o],a=n[o-1],h=a.zt(e,!1),u=l.yi(),c=a.Ai();u>c-h&&l.Vi(c-h)}for(let o=1;o<r.length;o++){const l=r[o],a=r[o-1],h=a.zt(e,!0),u=l.yi(),c=a.Ai();u<c+h&&l.Vi(c+h)}}tp(t){if(this.bv===null)return;const e=this.Uv(),i=this.jv(),n=this.Cv?"right":"left";e.forEach((r=>{r.Ii()&&r.xt($(this.Li)).K(t,i,this.gv,n)}))}ip(t){if(this.bv===null||this.Li===null)return;const e=this.nn.kv().qt(),i=[],n=this.nn.Xv(),r=e.Nc().Rn(n,this.Li);r.length&&i.push(r);const o=this.jv(),l=this.Cv?"right":"left";i.forEach((a=>{a.forEach((h=>{h.xt($(this.Li)).K(t,o,this.gv,l)}))}))}ep(t){this.Dv.style.cursor=t===1?"ns-resize":"default"}ao(){const t=this.Hv();this.Mv<t&&this.nn.kv().qt().$l(),this.Mv=t}$v(){return Vs(this.mo.fontSize,this.mo.fontFamily)}}function Fb(s,t){var e,i;return(i=(e=s.ra)===null||e===void 0?void 0:e.call(s,t))!==null&&i!==void 0?i:[]}function Wi(s,t){var e,i;return(i=(e=s.Pn)===null||e===void 0?void 0:e.call(s,t))!==null&&i!==void 0?i:[]}function Vb(s,t){var e,i;return(i=(e=s.Qi)===null||e===void 0?void 0:e.call(s,t))!==null&&i!==void 0?i:[]}function zb(s,t){var e,i;return(i=(e=s.na)===null||e===void 0?void 0:e.call(s,t))!==null&&i!==void 0?i:[]}class Mo{constructor(t,e){this.bv=yt({width:0,height:0}),this.hp=null,this.lp=null,this.ap=null,this.op=!1,this._p=new xt,this.up=new xt,this.cp=0,this.dp=!1,this.fp=null,this.vp=!1,this.pp=null,this.mp=null,this.xv=!1,this.Sv=()=>{this.xv||this.bp===null||this.Ui().Fh()},this.yv=()=>{this.xv||this.bp===null||this.Ui().Fh()},this.wp=t,this.bp=e,this.bp.I_().l(this.gp.bind(this),this,!0),this.Mp=document.createElement("td"),this.Mp.style.padding="0",this.Mp.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.xp=document.createElement("td"),this.xp.style.padding="0",this.Sp=document.createElement("td"),this.Sp.style.padding="0",this.Mp.appendChild(i),this.Ov=_s(i,yt({width:16,height:16})),this.Ov.subscribeSuggestedBitmapSizeChanged(this.Sv);const n=this.Ov.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Av=_s(i,yt({width:16,height:16})),this.Av.subscribeSuggestedBitmapSizeChanged(this.yv);const r=this.Av.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.kp=document.createElement("tr"),this.kp.appendChild(this.xp),this.kp.appendChild(this.Mp),this.kp.appendChild(this.Sp),this.yp(),this.Fv=new Co(this.Av.canvasElement,this,{Lf:()=>this.fp===null&&!this.wp.W().handleScroll.vertTouchDrag,Nf:()=>this.fp===null&&!this.wp.W().handleScroll.horzTouchDrag})}S(){this.hp!==null&&this.hp.S(),this.lp!==null&&this.lp.S(),this.Av.unsubscribeSuggestedBitmapSizeChanged(this.yv),this.Av.dispose(),this.Ov.unsubscribeSuggestedBitmapSizeChanged(this.Sv),this.Ov.dispose(),this.bp!==null&&this.bp.I_().p(this),this.Fv.S()}Xv(){return $(this.bp)}Cp(t){this.bp!==null&&this.bp.I_().p(this),this.bp=t,this.bp!==null&&this.bp.I_().l(Mo.prototype.gp.bind(this),this,!0),this.yp()}kv(){return this.wp}Wv(){return this.kp}yp(){if(this.bp!==null&&(this.Tp(),this.Ui().Mt().length!==0)){if(this.hp!==null){const t=this.bp.S_();this.hp.Ji($(t))}if(this.lp!==null){const t=this.bp.k_();this.lp.Ji($(t))}}}Pp(){this.hp!==null&&this.hp.gt(),this.lp!==null&&this.lp.gt()}v_(){return this.bp!==null?this.bp.v_():0}p_(t){this.bp&&this.bp.p_(t)}Vf(t){if(!this.bp)return;this.Rp();const e=t.localX,i=t.localY;this.Dp(e,i,t)}Jf(t){this.Rp(),this.Op(),this.Dp(t.localX,t.localY,t)}Bf(t){var e;if(!this.bp)return;this.Rp();const i=t.localX,n=t.localY;this.Dp(i,n,t);const r=this.br(i,n);this.wp.Ap((e=r?.mv)!==null&&e!==void 0?e:null),this.Ui().Vc(r&&{Bc:r.Bc,vv:r.vv})}Yf(t){this.bp!==null&&(this.Rp(),this.Vp(t))}Cf(t){this.bp!==null&&this.Bp(this.up,t)}xf(t){this.Cf(t)}jf(t){this.Rp(),this.Ip(t),this.Dp(t.localX,t.localY,t)}qf(t){this.bp!==null&&(this.Rp(),this.dp=!1,this.zp(t))}Uf(t){this.bp!==null&&this.Vp(t)}ov(t){if(this.dp=!0,this.fp===null){const e={x:t.localX,y:t.localY};this.Ep(e,e,t)}}av(t){this.bp!==null&&(this.Rp(),this.bp.qt().Vc(null),this.Lp())}Np(){return this._p}Fp(){return this.up}nv(){this.cp=1,this.Ui().Un()}sv(t,e){if(!this.wp.W().handleScale.pinch)return;const i=5*(e-this.cp);this.cp=e,this.Ui().$c(t.et,i)}Zf(t){this.dp=!1,this.vp=this.fp!==null,this.Op();const e=this.Ui().Nc();this.fp!==null&&e.Tt()&&(this.pp={x:e.Kt(),y:e.Zt()},this.fp={x:t.localX,y:t.localY})}Ff(t){if(this.bp===null)return;const e=t.localX,i=t.localY;if(this.fp===null)this.Ip(t);else{this.vp=!1;const n=$(this.pp),r=n.x+(e-this.fp.x),o=n.y+(i-this.fp.y);this.Dp(r,o,t)}}$f(t){this.kv().W().trackingMode.exitMode===0&&(this.vp=!0),this.Wp(),this.zp(t)}br(t,e){const i=this.bp;return i===null?null:(function(n,r,o){const l=n.No(),a=(function(h,u,c){var d,p;let g,v;for(const b of h){const M=(p=(d=b.oa)===null||d===void 0?void 0:d.call(b,u,c))!==null&&p!==void 0?p:[];for(const D of M)S=D.zOrder,(!(_=g?.zOrder)||S==="top"&&_!=="top"||S==="normal"&&_==="bottom")&&(g=D,v=b)}var S,_;return g&&v?{pv:g,Bc:v}:null})(l,r,o);if(a?.pv.zOrder==="top")return Ui(a);for(const h of l){if(a&&a.Bc===h&&a.pv.zOrder!=="bottom"&&!a.pv.isBackground)return Ui(a);const u=Bb(h.Pn(n),r,o);if(u!==null)return{Bc:h,dv:u.dv,vv:u.vv};if(a&&a.Bc===h&&a.pv.zOrder!=="bottom"&&a.pv.isBackground)return Ui(a)}return a?.pv?Ui(a):null})(i,t,e)}jp(t,e){$(e==="left"?this.hp:this.lp).qv(yt({width:t,height:this.bv.height}))}Hp(){return this.bv}qv(t){ms(this.bv,t)||(this.bv=t,this.xv=!0,this.Ov.resizeCanvasElement(t),this.Av.resizeCanvasElement(t),this.xv=!1,this.Mp.style.width=t.width+"px",this.Mp.style.height=t.height+"px")}$p(){const t=$(this.bp);t.x_(t.S_()),t.x_(t.k_());for(const e of t.Ta())if(t.dr(e)){const i=e.At();i!==null&&t.x_(i),e.On()}}np(){return this.Ov.bitmapSize}sp(t,e,i){const n=this.np();n.width>0&&n.height>0&&t.drawImage(this.Ov.canvasElement,e,i)}Kv(t){if(t===0||this.bp===null)return;if(t>1&&this.$p(),this.hp!==null&&this.hp.Kv(t),this.lp!==null&&this.lp.Kv(t),t!==1){this.Ov.applySuggestedBitmapSize();const i=bs(this.Ov);i!==null&&(i.useBitmapCoordinateSpace((n=>{this.Gv(n)})),this.bp&&(this.Up(i,Fb),this.qp(i),this.Yp(i),this.Up(i,Wi),this.Up(i,Vb)))}this.Av.applySuggestedBitmapSize();const e=bs(this.Av);e!==null&&(e.useBitmapCoordinateSpace((({context:i,bitmapSize:n})=>{i.clearRect(0,0,n.width,n.height)})),this.Xp(e),this.Up(e,zb))}Kp(){return this.hp}Zp(){return this.lp}Jv(t,e){this.Up(t,e)}gp(){this.bp!==null&&this.bp.I_().p(this),this.bp=null}Vp(t){this.Bp(this._p,t)}Bp(t,e){const i=e.localX,n=e.localY;t.M()&&t.m(this.Ui().yt().Au(i),{x:i,y:n},e)}Gv({context:t,bitmapSize:e}){const{width:i,height:n}=e,r=this.Ui(),o=r.q(),l=r.ad();o===l?On(t,0,0,i,n,l):Qh(t,0,0,i,n,o,l)}qp(t){const e=$(this.bp).z_().Wh().xt();e!==null&&e.K(t,!1)}Yp(t){const e=this.Ui().Lc();this.Gp(t,Wi,Vr,e),this.Gp(t,Wi,Qi,e)}Xp(t){this.Gp(t,Wi,Qi,this.Ui().Nc())}Up(t,e){const i=$(this.bp).No();for(const n of i)this.Gp(t,e,Vr,n);for(const n of i)this.Gp(t,e,Qi,n)}Gp(t,e,i,n){const r=$(this.bp),o=r.qt().Ac(),l=o!==null&&o.Bc===n,a=o!==null&&l&&o.vv!==void 0?o.vv.gr:void 0;zr(e,(h=>i(h,t,l,a)),n,r)}Tp(){if(this.bp===null)return;const t=this.wp,e=this.bp.S_().W().visible,i=this.bp.k_().W().visible;e||this.hp===null||(this.xp.removeChild(this.hp.Wv()),this.hp.S(),this.hp=null),i||this.lp===null||(this.Sp.removeChild(this.lp.Wv()),this.lp.S(),this.lp=null);const n=t.qt().nd();e&&this.hp===null&&(this.hp=new ua(this,t.W(),n,"left"),this.xp.appendChild(this.hp.Wv())),i&&this.lp===null&&(this.lp=new ua(this,t.W(),n,"right"),this.Sp.appendChild(this.lp.Wv()))}Jp(t){return t._v&&this.dp||this.fp!==null}Qp(t){return Math.max(0,Math.min(t,this.bv.width-1))}tm(t){return Math.max(0,Math.min(t,this.bv.height-1))}Dp(t,e,i){this.Ui().Gc(this.Qp(t),this.tm(e),i,$(this.bp))}Lp(){this.Ui().Qc()}Wp(){this.vp&&(this.fp=null,this.Lp())}Ep(t,e,i){this.fp=t,this.vp=!1,this.Dp(e.x,e.y,i);const n=this.Ui().Nc();this.pp={x:n.Kt(),y:n.Zt()}}Ui(){return this.wp.qt()}zp(t){if(!this.op)return;const e=this.Ui(),i=this.Xv();if(e.D_(i,i.vn()),this.ap=null,this.op=!1,e.Xc(),this.mp!==null){const n=performance.now(),r=e.yt();this.mp.Dr(r.zu(),n),this.mp.qu(n)||e.Xn(this.mp)}}Rp(){this.fp=null}Op(){if(this.bp){if(this.Ui().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)$(document.activeElement).blur();else{const t=document.getSelection();t!==null&&t.removeAllRanges()}!this.bp.vn().Fi()&&this.Ui().yt().Fi()}}Ip(t){if(this.bp===null)return;const e=this.Ui(),i=e.yt();if(i.Fi())return;const n=this.wp.W(),r=n.handleScroll,o=n.kineticScroll;if((!r.pressedMouseMove||t._v)&&(!r.horzTouchDrag&&!r.vertTouchDrag||!t._v))return;const l=this.bp.vn(),a=performance.now();if(this.ap!==null||this.Jp(t)||(this.ap={x:t.clientX,y:t.clientY,Sd:a,im:t.localX,nm:t.localY}),this.ap!==null&&!this.op&&(this.ap.x!==t.clientX||this.ap.y!==t.clientY)){if(t._v&&o.touch||!t._v&&o.mouse){const h=i.he();this.mp=new Ib(.2/h,7/h,.997,15/h),this.mp.Ld(i.zu(),this.ap.Sd)}else this.mp=null;l.Fi()||e.P_(this.bp,l,t.localY),e.qc(t.localX),this.op=!0}this.op&&(l.Fi()||e.R_(this.bp,l,t.localY),e.Yc(t.localX),this.mp!==null&&this.mp.Ld(i.zu(),a))}}class ca{constructor(t,e,i,n,r){this.bt=!0,this.bv=yt({width:0,height:0}),this.Sv=()=>this.Kv(3),this.Cv=t==="left",this.Sc=i.nd,this.cn=e,this.sm=n,this.rm=r,this.Dv=document.createElement("div"),this.Dv.style.width="25px",this.Dv.style.height="100%",this.Dv.style.overflow="hidden",this.Ov=_s(this.Dv,yt({width:16,height:16})),this.Ov.subscribeSuggestedBitmapSizeChanged(this.Sv)}S(){this.Ov.unsubscribeSuggestedBitmapSizeChanged(this.Sv),this.Ov.dispose()}Wv(){return this.Dv}Hp(){return this.bv}qv(t){ms(this.bv,t)||(this.bv=t,this.Ov.resizeCanvasElement(t),this.Dv.style.width=`${t.width}px`,this.Dv.style.height=`${t.height}px`,this.bt=!0)}Kv(t){if(t<3&&!this.bt||this.bv.width===0||this.bv.height===0)return;this.bt=!1,this.Ov.applySuggestedBitmapSize();const e=bs(this.Ov);e!==null&&e.useBitmapCoordinateSpace((i=>{this.Gv(i),this.Be(i)}))}np(){return this.Ov.bitmapSize}sp(t,e,i){const n=this.np();n.width>0&&n.height>0&&t.drawImage(this.Ov.canvasElement,e,i)}Be({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(!this.sm())return;t.fillStyle=this.cn.timeScale.borderColor;const r=Math.floor(this.Sc.W().C*i),o=Math.floor(this.Sc.W().C*n),l=this.Cv?e.width-r:0;t.fillRect(l,0,r,o)}Gv({context:t,bitmapSize:e}){On(t,0,0,e.width,e.height,this.rm())}}function To(s){return t=>{var e,i;return(i=(e=t.aa)===null||e===void 0?void 0:e.call(t,s))!==null&&i!==void 0?i:[]}}const Ub=To("normal"),Wb=To("top"),qb=To("bottom");class Hb{constructor(t,e){this.hm=null,this.lm=null,this.k=null,this.am=!1,this.bv=yt({width:0,height:0}),this.om=new xt,this.gv=new xi(5),this.xv=!1,this.Sv=()=>{this.xv||this.wp.qt().Fh()},this.yv=()=>{this.xv||this.wp.qt().Fh()},this.wp=t,this.N_=e,this.cn=t.W().layout,this._m=document.createElement("tr"),this.um=document.createElement("td"),this.um.style.padding="0",this.dm=document.createElement("td"),this.dm.style.padding="0",this.Dv=document.createElement("td"),this.Dv.style.height="25px",this.Dv.style.padding="0",this.fm=document.createElement("div"),this.fm.style.width="100%",this.fm.style.height="100%",this.fm.style.position="relative",this.fm.style.overflow="hidden",this.Dv.appendChild(this.fm),this.Ov=_s(this.fm,yt({width:16,height:16})),this.Ov.subscribeSuggestedBitmapSizeChanged(this.Sv);const i=this.Ov.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Av=_s(this.fm,yt({width:16,height:16})),this.Av.subscribeSuggestedBitmapSizeChanged(this.yv);const n=this.Av.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this._m.appendChild(this.um),this._m.appendChild(this.Dv),this._m.appendChild(this.dm),this.vm(),this.wp.qt().f_().l(this.vm.bind(this),this),this.Fv=new Co(this.Av.canvasElement,this,{Lf:()=>!0,Nf:()=>!1})}S(){this.Fv.S(),this.hm!==null&&this.hm.S(),this.lm!==null&&this.lm.S(),this.Av.unsubscribeSuggestedBitmapSizeChanged(this.yv),this.Av.dispose(),this.Ov.unsubscribeSuggestedBitmapSizeChanged(this.Sv),this.Ov.dispose()}Wv(){return this._m}pm(){return this.hm}bm(){return this.lm}Jf(t){if(this.am)return;this.am=!0;const e=this.wp.qt();!e.yt().Fi()&&this.wp.W().handleScale.axisPressedMouseMove.time&&e.Hc(t.localX)}Zf(t){this.Jf(t)}Qf(){const t=this.wp.qt();!t.yt().Fi()&&this.am&&(this.am=!1,this.wp.W().handleScale.axisPressedMouseMove.time&&t.Zc())}jf(t){const e=this.wp.qt();!e.yt().Fi()&&this.wp.W().handleScale.axisPressedMouseMove.time&&e.Kc(t.localX)}Ff(t){this.jf(t)}qf(){this.am=!1;const t=this.wp.qt();t.yt().Fi()&&!this.wp.W().handleScale.axisPressedMouseMove.time||t.Zc()}$f(){this.qf()}Cf(){this.wp.W().handleScale.axisDoubleClickReset.time&&this.wp.qt().Zn()}xf(){this.Cf()}Vf(){this.wp.qt().W().handleScale.axisPressedMouseMove.time&&this.ep(1)}av(){this.ep(0)}Hp(){return this.bv}wm(){return this.om}gm(t,e,i){ms(this.bv,t)||(this.bv=t,this.xv=!0,this.Ov.resizeCanvasElement(t),this.Av.resizeCanvasElement(t),this.xv=!1,this.Dv.style.width=`${t.width}px`,this.Dv.style.height=`${t.height}px`,this.om.m(t)),this.hm!==null&&this.hm.qv(yt({width:e,height:t.height})),this.lm!==null&&this.lm.qv(yt({width:i,height:t.height}))}Mm(){const t=this.xm();return Math.ceil(t.C+t.T+t.P+t.L+t.V+t.Sm)}gt(){this.wp.qt().yt().Ea()}np(){return this.Ov.bitmapSize}sp(t,e,i){const n=this.np();n.width>0&&n.height>0&&t.drawImage(this.Ov.canvasElement,e,i)}Kv(t){if(t===0)return;if(t!==1){this.Ov.applySuggestedBitmapSize();const i=bs(this.Ov);i!==null&&(i.useBitmapCoordinateSpace((n=>{this.Gv(n),this.Be(n),this.km(i,qb)})),this.Qv(i),this.km(i,Ub)),this.hm!==null&&this.hm.Kv(t),this.lm!==null&&this.lm.Kv(t)}this.Av.applySuggestedBitmapSize();const e=bs(this.Av);e!==null&&(e.useBitmapCoordinateSpace((({context:i,bitmapSize:n})=>{i.clearRect(0,0,n.width,n.height)})),this.ym([...this.wp.qt().Mt(),this.wp.qt().Nc()],e),this.km(e,Wb))}km(t,e){const i=this.wp.qt().Mt();for(const n of i)zr(e,(r=>Vr(r,t,!1,void 0)),n,void 0);for(const n of i)zr(e,(r=>Qi(r,t,!1,void 0)),n,void 0)}Gv({context:t,bitmapSize:e}){On(t,0,0,e.width,e.height,this.wp.qt().ad())}Be({context:t,bitmapSize:e,verticalPixelRatio:i}){if(this.wp.W().timeScale.borderVisible){t.fillStyle=this.Cm();const n=Math.max(1,Math.floor(this.xm().C*i));t.fillRect(0,0,e.width,n)}}Qv(t){const e=this.wp.qt().yt(),i=e.Ea();if(!i||i.length===0)return;const n=this.N_.maxTickMarkWeight(i),r=this.xm(),o=e.W();o.borderVisible&&o.ticksVisible&&t.useBitmapCoordinateSpace((({context:l,horizontalPixelRatio:a,verticalPixelRatio:h})=>{l.strokeStyle=this.Cm(),l.fillStyle=this.Cm();const u=Math.max(1,Math.floor(a)),c=Math.floor(.5*a);l.beginPath();const d=Math.round(r.T*h);for(let p=i.length;p--;){const g=Math.round(i[p].coord*a);l.rect(g-c,0,u,d)}l.fill()})),t.useMediaCoordinateSpace((({context:l})=>{const a=r.C+r.T+r.L+r.P/2;l.textAlign="center",l.textBaseline="middle",l.fillStyle=this.$(),l.font=this.$v();for(const h of i)if(h.weight<n){const u=h.needAlignCoordinate?this.Tm(l,h.coord,h.label):h.coord;l.fillText(h.label,u,a)}l.font=this.Pm();for(const h of i)if(h.weight>=n){const u=h.needAlignCoordinate?this.Tm(l,h.coord,h.label):h.coord;l.fillText(h.label,u,a)}}))}Tm(t,e,i){const n=this.gv.Si(t,i),r=n/2,o=Math.floor(e-r)+.5;return o<0?e+=Math.abs(0-o):o+n>this.bv.width&&(e-=Math.abs(this.bv.width-(o+n))),e}ym(t,e){const i=this.xm();for(const n of t)for(const r of n.tn())r.xt().K(e,i)}Cm(){return this.wp.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}$v(){return Vs(this.j(),this.cn.fontFamily)}Pm(){return Vs(this.j(),this.cn.fontFamily,"bold")}xm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,V:NaN,Hi:NaN,T:5,P:NaN,R:"",ji:new xi,Sm:0});const t=this.k,e=this.$v();if(t.R!==e){const i=this.j();t.P=i,t.R=e,t.L=3*i/12,t.V=3*i/12,t.Hi=9*i/12,t.N=0,t.Sm=4*i/12,t.ji.ir()}return this.k}ep(t){this.Dv.style.cursor=t===1?"ew-resize":"default"}vm(){const t=this.wp.qt(),e=t.W();e.leftPriceScale.visible||this.hm===null||(this.um.removeChild(this.hm.Wv()),this.hm.S(),this.hm=null),e.rightPriceScale.visible||this.lm===null||(this.dm.removeChild(this.lm.Wv()),this.lm.S(),this.lm=null);const i={nd:this.wp.qt().nd()},n=()=>e.leftPriceScale.borderVisible&&t.yt().W().borderVisible,r=()=>t.ad();e.leftPriceScale.visible&&this.hm===null&&(this.hm=new ca("left",e,i,n,r),this.um.appendChild(this.hm.Wv())),e.rightPriceScale.visible&&this.lm===null&&(this.lm=new ca("right",e,i,n,r),this.dm.appendChild(this.lm.Wv()))}}const jb=!!zs&&!!navigator.userAgentData&&navigator.userAgentData.brands.some((s=>s.brand.includes("Chromium")))&&!!zs&&(!((cr=navigator?.userAgentData)===null||cr===void 0)&&cr.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var cr;class Kb{constructor(t,e,i){var n;this.Rm=[],this.Dm=0,this.Qa=0,this.e_=0,this.Om=0,this.Am=0,this.Vm=null,this.Bm=!1,this._p=new xt,this.up=new xt,this.gc=new xt,this.Im=null,this.zm=null,this.Em=t,this.cn=e,this.N_=i,this._m=document.createElement("div"),this._m.classList.add("tv-lightweight-charts"),this._m.style.overflow="hidden",this._m.style.direction="ltr",this._m.style.width="100%",this._m.style.height="100%",(n=this._m).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.Lm=document.createElement("table"),this.Lm.setAttribute("cellspacing","0"),this._m.appendChild(this.Lm),this.Nm=this.Fm.bind(this),fr(this.cn)&&this.Wm(!0),this.Ui=new Lb(this.xc.bind(this),this.cn,i),this.qt().Fc().l(this.jm.bind(this),this),this.Hm=new Hb(this,this.N_),this.Lm.appendChild(this.Hm.Wv());const r=e.autoSize&&this.$m();let o=this.cn.width,l=this.cn.height;if(r||o===0||l===0){const a=t.getBoundingClientRect();o=o||a.width,l=l||a.height}this.Um(o,l),this.qm(),t.appendChild(this._m),this.Ym(),this.Ui.yt().Zu().l(this.Ui.$l.bind(this.Ui),this),this.Ui.f_().l(this.Ui.$l.bind(this.Ui),this)}qt(){return this.Ui}W(){return this.cn}Xm(){return this.Rm}Km(){return this.Hm}S(){this.Wm(!1),this.Dm!==0&&window.cancelAnimationFrame(this.Dm),this.Ui.Fc().p(this),this.Ui.yt().Zu().p(this),this.Ui.f_().p(this),this.Ui.S();for(const t of this.Rm)this.Lm.removeChild(t.Wv()),t.Np().p(this),t.Fp().p(this),t.S();this.Rm=[],$(this.Hm).S(),this._m.parentElement!==null&&this._m.parentElement.removeChild(this._m),this.gc.S(),this._p.S(),this.up.S(),this.Zm()}Um(t,e,i=!1){if(this.Qa===e&&this.e_===t)return;const n=(function(l){const a=Math.floor(l.width),h=Math.floor(l.height);return yt({width:a-a%2,height:h-h%2})})(yt({width:t,height:e}));this.Qa=n.height,this.e_=n.width;const r=this.Qa+"px",o=this.e_+"px";$(this._m).style.height=r,$(this._m).style.width=o,this.Lm.style.height=r,this.Lm.style.width=o,i?this.Gm(Lt.es(),performance.now()):this.Ui.$l()}Kv(t){t===void 0&&(t=Lt.es());for(let e=0;e<this.Rm.length;e++)this.Rm[e].Kv(t.Hn(e).Fn);this.cn.timeScale.visible&&this.Hm.Kv(t.jn())}Nh(t){const e=fr(this.cn);this.Ui.Nh(t);const i=fr(this.cn);i!==e&&this.Wm(i),this.Ym(),this.Jm(t)}Np(){return this._p}Fp(){return this.up}Fc(){return this.gc}Qm(){this.Vm!==null&&(this.Gm(this.Vm,performance.now()),this.Vm=null);const t=this.tb(null),e=document.createElement("canvas");e.width=t.width,e.height=t.height;const i=$(e.getContext("2d"));return this.tb(i),e}ib(t){return t==="left"&&!this.nb()||t==="right"&&!this.sb()||this.Rm.length===0?0:$(t==="left"?this.Rm[0].Kp():this.Rm[0].Zp()).Yv()}eb(){return this.cn.autoSize&&this.Im!==null}rb(){return this._m}Ap(t){this.zm=t,this.zm?this.rb().style.setProperty("cursor",t):this.rb().style.removeProperty("cursor")}hb(){return this.zm}lb(){return Kt(this.Rm[0]).Hp()}Jm(t){(t.autoSize!==void 0||!this.Im||t.width===void 0&&t.height===void 0)&&(t.autoSize&&!this.Im&&this.$m(),t.autoSize===!1&&this.Im!==null&&this.Zm(),t.autoSize||t.width===void 0&&t.height===void 0||this.Um(t.width||this.e_,t.height||this.Qa))}tb(t){let e=0,i=0;const n=this.Rm[0],r=(l,a)=>{let h=0;for(let u=0;u<this.Rm.length;u++){const c=this.Rm[u],d=$(l==="left"?c.Kp():c.Zp()),p=d.np();t!==null&&d.sp(t,a,h),h+=p.height}};this.nb()&&(r("left",0),e+=$(n.Kp()).np().width);for(let l=0;l<this.Rm.length;l++){const a=this.Rm[l],h=a.np();t!==null&&a.sp(t,e,i),i+=h.height}e+=n.np().width,this.sb()&&(r("right",e),e+=$(n.Zp()).np().width);const o=(l,a,h)=>{$(l==="left"?this.Hm.pm():this.Hm.bm()).sp($(t),a,h)};if(this.cn.timeScale.visible){const l=this.Hm.np();if(t!==null){let a=0;this.nb()&&(o("left",a,i),a=$(n.Kp()).np().width),this.Hm.sp(t,a,i),a+=l.width,this.sb()&&o("right",a,i)}i+=l.height}return yt({width:e,height:i})}ab(){let t=0,e=0,i=0;for(const g of this.Rm)this.nb()&&(e=Math.max(e,$(g.Kp()).Hv(),this.cn.leftPriceScale.minimumWidth)),this.sb()&&(i=Math.max(i,$(g.Zp()).Hv(),this.cn.rightPriceScale.minimumWidth)),t+=g.v_();e=Fr(e),i=Fr(i);const n=this.e_,r=this.Qa,o=Math.max(n-e-i,0),l=this.cn.timeScale.visible;let a=l?Math.max(this.Hm.Mm(),this.cn.timeScale.minimumHeight):0;var h;a=(h=a)+h%2;const u=0+a,c=r<u?0:r-u,d=c/t;let p=0;for(let g=0;g<this.Rm.length;++g){const v=this.Rm[g];v.Cp(this.Ui.Ec()[g]);let S=0,_=0;_=g===this.Rm.length-1?c-p:Math.round(v.v_()*d),S=Math.max(_,2),p+=S,v.qv(yt({width:o,height:S})),this.nb()&&v.jp(e,"left"),this.sb()&&v.jp(i,"right"),v.Xv()&&this.Ui.Wc(v.Xv(),S)}this.Hm.gm(yt({width:l?o:0,height:a}),l?e:0,l?i:0),this.Ui.m_(o),this.Om!==e&&(this.Om=e),this.Am!==i&&(this.Am=i)}Wm(t){t?this._m.addEventListener("wheel",this.Nm,{passive:!1}):this._m.removeEventListener("wheel",this.Nm)}ob(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return jb?1/window.devicePixelRatio:1}Fm(t){if(!(t.deltaX!==0&&this.cn.handleScroll.mouseWheel||t.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const e=this.ob(t),i=e*t.deltaX/100,n=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),n!==0&&this.cn.handleScale.mouseWheel){const r=Math.sign(n)*Math.min(1,Math.abs(n)),o=t.clientX-this._m.getBoundingClientRect().left;this.qt().$c(o,r)}i!==0&&this.cn.handleScroll.mouseWheel&&this.qt().Uc(-80*i)}Gm(t,e){var i;const n=t.jn();n===3&&this._b(),n!==3&&n!==2||(this.ub(t),this.cb(t,e),this.Hm.gt(),this.Rm.forEach((r=>{r.Pp()})),((i=this.Vm)===null||i===void 0?void 0:i.jn())===3&&(this.Vm.ts(t),this._b(),this.ub(this.Vm),this.cb(this.Vm,e),t=this.Vm,this.Vm=null)),this.Kv(t)}cb(t,e){for(const i of t.Qn())this.ns(i,e)}ub(t){const e=this.Ui.Ec();for(let i=0;i<e.length;i++)t.Hn(i).Wn&&e[i].V_()}ns(t,e){const i=this.Ui.yt();switch(t.qn){case 0:i.Ju();break;case 1:i.Qu(t.Vt);break;case 2:i.Gn(t.Vt);break;case 3:i.Jn(t.Vt);break;case 4:i.Nu();break;case 5:t.Vt.qu(e)||i.Jn(t.Vt.Yu(e))}}xc(t){this.Vm!==null?this.Vm.ts(t):this.Vm=t,this.Bm||(this.Bm=!0,this.Dm=window.requestAnimationFrame((e=>{if(this.Bm=!1,this.Dm=0,this.Vm!==null){const i=this.Vm;this.Vm=null,this.Gm(i,e);for(const n of i.Qn())if(n.qn===5&&!n.Vt.qu(e)){this.qt().Xn(n.Vt);break}}})))}_b(){this.qm()}qm(){const t=this.Ui.Ec(),e=t.length,i=this.Rm.length;for(let n=e;n<i;n++){const r=Kt(this.Rm.pop());this.Lm.removeChild(r.Wv()),r.Np().p(this),r.Fp().p(this),r.S()}for(let n=i;n<e;n++){const r=new Mo(this,t[n]);r.Np().l(this.fb.bind(this),this),r.Fp().l(this.vb.bind(this),this),this.Rm.push(r),this.Lm.insertBefore(r.Wv(),this.Hm.Wv())}for(let n=0;n<e;n++){const r=t[n],o=this.Rm[n];o.Xv()!==r?o.Cp(r):o.yp()}this.Ym(),this.ab()}pb(t,e,i){var n;const r=new Map;t!==null&&this.Ui.Mt().forEach((u=>{const c=u.In().nl(t);c!==null&&r.set(u,c)}));let o;if(t!==null){const u=(n=this.Ui.yt().qi(t))===null||n===void 0?void 0:n.originalTime;u!==void 0&&(o=u)}const l=this.qt().Ac(),a=l!==null&&l.Bc instanceof xo?l.Bc:void 0,h=l!==null&&l.vv!==void 0?l.vv.wr:void 0;return{mb:o,se:t??void 0,bb:e??void 0,wb:a,gb:r,Mb:h,xb:i??void 0}}fb(t,e,i){this._p.m((()=>this.pb(t,e,i)))}vb(t,e,i){this.up.m((()=>this.pb(t,e,i)))}jm(t,e,i){this.gc.m((()=>this.pb(t,e,i)))}Ym(){const t=this.cn.timeScale.visible?"":"none";this.Hm.Wv().style.display=t}nb(){return this.Rm[0].Xv().S_().W().visible}sb(){return this.Rm[0].Xv().k_().W().visible}$m(){return"ResizeObserver"in window&&(this.Im=new ResizeObserver((t=>{const e=t.find((i=>i.target===this.Em));e&&this.Um(e.contentRect.width,e.contentRect.height)})),this.Im.observe(this.Em,{box:"border-box"}),!0)}Zm(){this.Im!==null&&this.Im.disconnect(),this.Im=null}}function fr(s){return!!(s.handleScroll.mouseWheel||s.handleScale.mouseWheel)}function gu(s,t){var e={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&t.indexOf(i)<0&&(e[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(i=Object.getOwnPropertySymbols(s);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(s,i[n])&&(e[i[n]]=s[i[n]])}return e}function fa(s,t,e,i){const n=e.value,r={se:t,ut:s,Vt:[n,n,n,n],mb:i};return e.color!==void 0&&(r.O=e.color),r}function Gb(s,t,e,i){const n=e.value,r={se:t,ut:s,Vt:[n,n,n,n],mb:i};return e.lineColor!==void 0&&(r._t=e.lineColor),e.topColor!==void 0&&(r.Ts=e.topColor),e.bottomColor!==void 0&&(r.Ps=e.bottomColor),r}function Jb(s,t,e,i){const n=e.value,r={se:t,ut:s,Vt:[n,n,n,n],mb:i};return e.topLineColor!==void 0&&(r.Pe=e.topLineColor),e.bottomLineColor!==void 0&&(r.Re=e.bottomLineColor),e.topFillColor1!==void 0&&(r.Se=e.topFillColor1),e.topFillColor2!==void 0&&(r.ke=e.topFillColor2),e.bottomFillColor1!==void 0&&(r.ye=e.bottomFillColor1),e.bottomFillColor2!==void 0&&(r.Ce=e.bottomFillColor2),r}function Xb(s,t,e,i){const n={se:t,ut:s,Vt:[e.open,e.high,e.low,e.close],mb:i};return e.color!==void 0&&(n.O=e.color),n}function Yb(s,t,e,i){const n={se:t,ut:s,Vt:[e.open,e.high,e.low,e.close],mb:i};return e.color!==void 0&&(n.O=e.color),e.borderColor!==void 0&&(n.Bt=e.borderColor),e.wickColor!==void 0&&(n.$h=e.wickColor),n}function Qb(s,t,e,i,n){const r=Kt(n)(e),o=Math.max(...r),l=Math.min(...r),a=r[r.length-1],h=[a,o,l,a],u=e,{time:c,color:d}=u;return{se:t,ut:s,Vt:h,mb:i,He:gu(u,["time","color"]),O:d}}function qi(s){return s.Vt!==void 0}function da(s,t){return t.customValues!==void 0&&(s.Sb=t.customValues),s}function hs(s){return(t,e,i,n,r,o)=>(function(l,a){return a?a(l):(h=l).open===void 0&&h.value===void 0;var h})(i,o)?da({ut:t,se:e,mb:n},i):da(s(t,e,i,n,r),i)}function pa(s){return{Candlestick:hs(Yb),Bar:hs(Xb),Area:hs(Gb),Baseline:hs(Jb),Histogram:hs(fa),Line:hs(fa),Custom:hs(Qb)}[s]}function ma(s){return{se:0,kb:new Map,ia:s}}function va(s,t){if(s!==void 0&&s.length!==0)return{yb:t.key(s[0].ut),Cb:t.key(s[s.length-1].ut)}}function ga(s){let t;return s.forEach((e=>{t===void 0&&(t=e.mb)})),Kt(t)}class Zb{constructor(t){this.Tb=new Map,this.Pb=new Map,this.Rb=new Map,this.Db=[],this.N_=t}S(){this.Tb.clear(),this.Pb.clear(),this.Rb.clear(),this.Db=[]}Ob(t,e){let i=this.Tb.size!==0,n=!1;const r=this.Pb.get(t);if(r!==void 0)if(this.Pb.size===1)i=!1,n=!0,this.Tb.clear();else for(const a of this.Db)a.pointData.kb.delete(t)&&(n=!0);let o=[];if(e.length!==0){const a=e.map((p=>p.time)),h=this.N_.createConverterToInternalObj(e),u=pa(t.Xh()),c=t.ga(),d=t.Ma();o=e.map(((p,g)=>{const v=h(p.time),S=this.N_.key(v);let _=this.Tb.get(S);_===void 0&&(_=ma(v),this.Tb.set(S,_),n=!0);const b=u(v,_.se,p,a[g],c,d);return _.kb.set(t,b),b}))}i&&this.Ab(),this.Vb(t,o);let l=-1;if(n){const a=[];this.Tb.forEach((h=>{a.push({timeWeight:0,time:h.ia,pointData:h,originalTime:ga(h.kb)})})),a.sort(((h,u)=>this.N_.key(h.time)-this.N_.key(u.time))),l=this.Bb(a)}return this.Ib(t,l,(function(a,h,u){const c=va(a,u),d=va(h,u);if(c!==void 0&&d!==void 0)return{Xl:c.Cb>=d.Cb&&c.yb>=d.yb}})(this.Pb.get(t),r,this.N_))}rd(t){return this.Ob(t,[])}zb(t,e){const i=e;(function(v){v.mb===void 0&&(v.mb=v.time)})(i),this.N_.preprocessData(e);const n=this.N_.createConverterToInternalObj([e])(e.time),r=this.Rb.get(t);if(r!==void 0&&this.N_.key(n)<this.N_.key(r))throw new Error(`Cannot update oldest data, last time=${r}, new time=${n}`);let o=this.Tb.get(this.N_.key(n));const l=o===void 0;o===void 0&&(o=ma(n),this.Tb.set(this.N_.key(n),o));const a=pa(t.Xh()),h=t.ga(),u=t.Ma(),c=a(n,o.se,e,i.mb,h,u);o.kb.set(t,c),this.Eb(t,c);const d={Xl:qi(c)};if(!l)return this.Ib(t,-1,d);const p={timeWeight:0,time:o.ia,pointData:o,originalTime:ga(o.kb)},g=Li(this.Db,this.N_.key(p.time),((v,S)=>this.N_.key(v.time)<S));this.Db.splice(g,0,p);for(let v=g;v<this.Db.length;++v)dr(this.Db[v].pointData,v);return this.N_.fillWeightsForPoints(this.Db,g),this.Ib(t,g,d)}Eb(t,e){let i=this.Pb.get(t);i===void 0&&(i=[],this.Pb.set(t,i));const n=i.length!==0?i[i.length-1]:null;n===null||this.N_.key(e.ut)>this.N_.key(n.ut)?qi(e)&&i.push(e):qi(e)?i[i.length-1]=e:i.splice(-1,1),this.Rb.set(t,e.ut)}Vb(t,e){e.length!==0?(this.Pb.set(t,e.filter(qi)),this.Rb.set(t,e[e.length-1].ut)):(this.Pb.delete(t),this.Rb.delete(t))}Ab(){for(const t of this.Db)t.pointData.kb.size===0&&this.Tb.delete(this.N_.key(t.time))}Bb(t){let e=-1;for(let i=0;i<this.Db.length&&i<t.length;++i){const n=this.Db[i],r=t[i];if(this.N_.key(n.time)!==this.N_.key(r.time)){e=i;break}r.timeWeight=n.timeWeight,dr(r.pointData,i)}if(e===-1&&this.Db.length!==t.length&&(e=Math.min(this.Db.length,t.length)),e===-1)return-1;for(let i=e;i<t.length;++i)dr(t[i].pointData,i);return this.N_.fillWeightsForPoints(t,e),this.Db=t,e}Lb(){if(this.Pb.size===0)return null;let t=0;return this.Pb.forEach((e=>{e.length!==0&&(t=Math.max(t,e[e.length-1].se))})),t}Ib(t,e,i){const n={Nb:new Map,yt:{Ou:this.Lb()}};if(e!==-1)this.Pb.forEach(((r,o)=>{n.Nb.set(o,{He:r,Fb:o===t?i:void 0})})),this.Pb.has(t)||n.Nb.set(t,{He:[],Fb:i}),n.yt.Wb=this.Db,n.yt.jb=e;else{const r=this.Pb.get(t);n.Nb.set(t,{He:r||[],Fb:i})}return n}}function dr(s,t){s.se=t,s.kb.forEach((e=>{e.se=t}))}function ko(s){const t={value:s.Vt[3],time:s.mb};return s.Sb!==void 0&&(t.customValues=s.Sb),t}function ba(s){const t=ko(s);return s.O!==void 0&&(t.color=s.O),t}function t0(s){const t=ko(s);return s._t!==void 0&&(t.lineColor=s._t),s.Ts!==void 0&&(t.topColor=s.Ts),s.Ps!==void 0&&(t.bottomColor=s.Ps),t}function e0(s){const t=ko(s);return s.Pe!==void 0&&(t.topLineColor=s.Pe),s.Re!==void 0&&(t.bottomLineColor=s.Re),s.Se!==void 0&&(t.topFillColor1=s.Se),s.ke!==void 0&&(t.topFillColor2=s.ke),s.ye!==void 0&&(t.bottomFillColor1=s.ye),s.Ce!==void 0&&(t.bottomFillColor2=s.Ce),t}function bu(s){const t={open:s.Vt[0],high:s.Vt[1],low:s.Vt[2],close:s.Vt[3],time:s.mb};return s.Sb!==void 0&&(t.customValues=s.Sb),t}function s0(s){const t=bu(s);return s.O!==void 0&&(t.color=s.O),t}function i0(s){const t=bu(s),{O:e,Bt:i,$h:n}=s;return e!==void 0&&(t.color=e),i!==void 0&&(t.borderColor=i),n!==void 0&&(t.wickColor=n),t}function Ur(s){return{Area:t0,Line:ba,Baseline:e0,Histogram:ba,Bar:s0,Candlestick:i0,Custom:n0}[s]}function n0(s){const t=s.mb;return Object.assign(Object.assign({},s.He),{time:t})}const r0={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},o0={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},l0={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:vo},pr={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},a0={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0},h0={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:vo,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function ya(){return{width:0,height:0,autoSize:!1,layout:l0,crosshair:r0,grid:o0,overlayPriceScales:Object.assign({},pr),leftPriceScale:Object.assign(Object.assign({},pr),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},pr),{visible:!0}),timeScale:a0,watermark:h0,localization:{locale:zs?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class u0{constructor(t,e){this.Hb=t,this.$b=e}applyOptions(t){this.Hb.qt().Ic(this.$b,t)}options(){return this.Li().W()}width(){return Ln(this.$b)?this.Hb.ib(this.$b):0}Li(){return $(this.Hb.qt().zc(this.$b)).At}}function _a(s,t,e){const i=gu(s,["time","originalTime"]),n=Object.assign({time:t},i);return e!==void 0&&(n.originalTime=e),n}const c0={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class f0{constructor(t){this.Bh=t}applyOptions(t){this.Bh.Nh(t)}options(){return this.Bh.W()}Ub(){return this.Bh}}class d0{constructor(t,e,i,n,r){this.qb=new xt,this.Es=t,this.Yb=e,this.Xb=i,this.N_=r,this.Kb=n}S(){this.qb.S()}priceFormatter(){return this.Es.ca()}priceToCoordinate(t){const e=this.Es.Pt();return e===null?null:this.Es.At().Ot(t,e.Vt)}coordinateToPrice(t){const e=this.Es.Pt();return e===null?null:this.Es.At().pn(t,e.Vt)}barsInLogicalRange(t){if(t===null)return null;const e=new Ps(new ci(t.from,t.to)).iu(),i=this.Es.In();if(i.Fi())return null;const n=i.nl(e.Os(),1),r=i.nl(e.di(),-1),o=$(i.Qh()),l=$(i.Bn());if(n!==null&&r!==null&&n.se>r.se)return{barsBefore:t.from-o,barsAfter:l-t.to};const a={barsBefore:n===null||n.se===o?t.from-o:n.se-o,barsAfter:r===null||r.se===l?l-t.to:l-r.se};return n!==null&&r!==null&&(a.from=n.mb,a.to=r.mb),a}setData(t){this.N_,this.Es.Xh(),this.Yb.Zb(this.Es,t),this.Gb("full")}update(t){this.Es.Xh(),this.Yb.Jb(this.Es,t),this.Gb("update")}dataByIndex(t,e){const i=this.Es.In().nl(t,e);return i===null?null:Ur(this.seriesType())(i)}data(){const t=Ur(this.seriesType());return this.Es.In().ie().map((e=>t(e)))}subscribeDataChanged(t){this.qb.l(t)}unsubscribeDataChanged(t){this.qb.v(t)}setMarkers(t){this.N_;const e=t.map((i=>_a(i,this.N_.convertHorzItemToInternal(i.time),i.time)));this.Es.Zl(e)}markers(){return this.Es.Gl().map((t=>_a(t,t.originalTime,void 0)))}applyOptions(t){this.Es.Nh(t)}options(){return Be(this.Es.W())}priceScale(){return this.Xb.priceScale(this.Es.At().xa())}createPriceLine(t){const e=ge(Be(c0),t),i=this.Es.Jl(e);return new f0(i)}removePriceLine(t){this.Es.Ql(t.Ub())}seriesType(){return this.Es.Xh()}attachPrimitive(t){this.Es.ba(t),t.attached&&t.attached({chart:this.Kb,series:this,requestUpdate:()=>this.Es.qt().$l()})}detachPrimitive(t){this.Es.wa(t),t.detached&&t.detached()}Gb(t){this.qb.M()&&this.qb.m(t)}}class p0{constructor(t,e,i){this.Qb=new xt,this.uu=new xt,this.om=new xt,this.Ui=t,this.wl=t.yt(),this.Hm=e,this.wl.Xu().l(this.tw.bind(this)),this.wl.Ku().l(this.iw.bind(this)),this.Hm.wm().l(this.nw.bind(this)),this.N_=i}S(){this.wl.Xu().p(this),this.wl.Ku().p(this),this.Hm.wm().p(this),this.Qb.S(),this.uu.S(),this.om.S()}scrollPosition(){return this.wl.zu()}scrollToPosition(t,e){e?this.wl.Uu(t,1e3):this.Ui.Jn(t)}scrollToRealTime(){this.wl.$u()}getVisibleRange(){const t=this.wl.yu();return t===null?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){const e={from:this.N_.convertHorzItemToInternal(t.from),to:this.N_.convertHorzItemToInternal(t.to)},i=this.wl.Pu(e);this.Ui.hd(i)}getVisibleLogicalRange(){const t=this.wl.ku();return t===null?null:{from:t.Os(),to:t.di()}}setVisibleLogicalRange(t){rs(t.from<=t.to,"The from index cannot be after the to index."),this.Ui.hd(t)}resetTimeScale(){this.Ui.Zn()}fitContent(){this.Ui.Ju()}logicalToCoordinate(t){const e=this.Ui.yt();return e.Fi()?null:e.Et(t)}coordinateToLogical(t){return this.wl.Fi()?null:this.wl.Au(t)}timeToCoordinate(t){const e=this.N_.convertHorzItemToInternal(t),i=this.wl.ya(e,!1);return i===null?null:this.wl.Et(i)}coordinateToTime(t){const e=this.Ui.yt(),i=e.Au(t),n=e.qi(i);return n===null?null:n.originalTime}width(){return this.Hm.Hp().width}height(){return this.Hm.Hp().height}subscribeVisibleTimeRangeChange(t){this.Qb.l(t)}unsubscribeVisibleTimeRangeChange(t){this.Qb.v(t)}subscribeVisibleLogicalRangeChange(t){this.uu.l(t)}unsubscribeVisibleLogicalRangeChange(t){this.uu.v(t)}subscribeSizeChange(t){this.om.l(t)}unsubscribeSizeChange(t){this.om.v(t)}applyOptions(t){this.wl.Nh(t)}options(){return Object.assign(Object.assign({},Be(this.wl.W())),{barSpacing:this.wl.he()})}tw(){this.Qb.M()&&this.Qb.m(this.getVisibleRange())}iw(){this.uu.M()&&this.uu.m(this.getVisibleLogicalRange())}nw(t){this.om.m(t.width,t.height)}}function m0(s){if(s===void 0||s.type==="custom")return;const t=s;t.minMove!==void 0&&t.precision===void 0&&(t.precision=(function(e){if(e>=1)return 0;let i=0;for(;i<8;i++){const n=Math.round(e);if(Math.abs(n-e)<1e-8)return i;e*=10}return i})(t.minMove))}function wa(s){return(function(t){if(Di(t.handleScale)){const i=t.handleScale;t.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(t.handleScale!==void 0){const{axisPressedMouseMove:i,axisDoubleClickReset:n}=t.handleScale;Di(i)&&(t.handleScale.axisPressedMouseMove={time:i,price:i}),Di(n)&&(t.handleScale.axisDoubleClickReset={time:n,price:n})}const e=t.handleScroll;Di(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})})(s),s}class v0{constructor(t,e,i){this.sw=new Map,this.ew=new Map,this.rw=new xt,this.hw=new xt,this.lw=new xt,this.aw=new Zb(e);const n=i===void 0?Be(ya()):ge(Be(ya()),wa(i));this.N_=e,this.Hb=new Kb(t,n,e),this.Hb.Np().l((o=>{this.rw.M()&&this.rw.m(this.ow(o()))}),this),this.Hb.Fp().l((o=>{this.hw.M()&&this.hw.m(this.ow(o()))}),this),this.Hb.Fc().l((o=>{this.lw.M()&&this.lw.m(this.ow(o()))}),this);const r=this.Hb.qt();this._w=new p0(r,this.Hb.Km(),this.N_)}remove(){this.Hb.Np().p(this),this.Hb.Fp().p(this),this.Hb.Fc().p(this),this._w.S(),this.Hb.S(),this.sw.clear(),this.ew.clear(),this.rw.S(),this.hw.S(),this.lw.S(),this.aw.S()}resize(t,e,i){this.autoSizeActive()||this.Hb.Um(t,e,i)}addCustomSeries(t,e){const i=Ms(t),n=Object.assign(Object.assign({},Gh),i.defaultOptions());return this.uw("Custom",n,e,i)}addAreaSeries(t){return this.uw("Area",sg,t)}addBaselineSeries(t){return this.uw("Baseline",ig,t)}addBarSeries(t){return this.uw("Bar",tg,t)}addCandlestickSeries(t={}){return(function(e){e.borderColor!==void 0&&(e.borderUpColor=e.borderColor,e.borderDownColor=e.borderColor),e.wickColor!==void 0&&(e.wickUpColor=e.wickColor,e.wickDownColor=e.wickColor)})(t),this.uw("Candlestick",Zv,t)}addHistogramSeries(t){return this.uw("Histogram",ng,t)}addLineSeries(t){return this.uw("Line",eg,t)}removeSeries(t){const e=Kt(this.sw.get(t)),i=this.aw.rd(e);this.Hb.qt().rd(e),this.cw(i),this.sw.delete(t),this.ew.delete(e)}Zb(t,e){this.cw(this.aw.Ob(t,e))}Jb(t,e){this.cw(this.aw.zb(t,e))}subscribeClick(t){this.rw.l(t)}unsubscribeClick(t){this.rw.v(t)}subscribeCrosshairMove(t){this.lw.l(t)}unsubscribeCrosshairMove(t){this.lw.v(t)}subscribeDblClick(t){this.hw.l(t)}unsubscribeDblClick(t){this.hw.v(t)}priceScale(t){return new u0(this.Hb,t)}timeScale(){return this._w}applyOptions(t){this.Hb.Nh(wa(t))}options(){return this.Hb.W()}takeScreenshot(){return this.Hb.Qm()}autoSizeActive(){return this.Hb.eb()}chartElement(){return this.Hb.rb()}paneSize(){const t=this.Hb.lb();return{height:t.height,width:t.width}}setCrosshairPosition(t,e,i){const n=this.sw.get(i);if(n===void 0)return;const r=this.Hb.qt().cr(n);r!==null&&this.Hb.qt().Jc(t,e,r)}clearCrosshairPosition(){this.Hb.qt().Qc(!0)}uw(t,e,i={},n){m0(i.priceFormat);const r=ge(Be(Jh),Be(e),i),o=this.Hb.qt().sd(t,r,n),l=new d0(o,this,this,this,this.N_);return this.sw.set(l,o),this.ew.set(o,l),l}cw(t){const e=this.Hb.qt();e.td(t.yt.Ou,t.yt.Wb,t.yt.jb),t.Nb.forEach(((i,n)=>n.it(i.He,i.Fb))),e.Bu()}dw(t){return Kt(this.ew.get(t))}ow(t){const e=new Map;t.gb.forEach(((n,r)=>{const o=r.Xh(),l=Ur(o)(n);if(o!=="Custom")rs((function(a){return a.open!==void 0||a.value!==void 0})(l));else{const a=r.Ma();rs(!a||a(l)===!1)}e.set(this.dw(r),l)}));const i=t.wb===void 0?void 0:this.dw(t.wb);return{time:t.mb,logical:t.se,point:t.bb,hoveredSeries:i,hoveredObjectId:t.Mb,seriesData:e,sourceEvent:t.xb}}}function g0(s,t,e){let i;if(Ai(s)){const r=document.getElementById(s);rs(r!==null,`Cannot find element in DOM with id=${s}`),i=r}else i=s;const n=new v0(i,t,e);return t.setOptions(n.options()),n}function b0(s,t){return g0(s,new la,la.Cd(t))}Object.assign(Object.assign({},Jh),Gh);const yu=(s,t)=>{const e=s.__vccOpts||s;for(const[i,n]of t)e[i]=n;return e},y0={class:"chart"},_0={__name:"ChartView",props:{data:{type:Object,default:null},title:{type:String,default:""},height:{type:Number,default:420}},setup(s){const t=s,e=W(null);let i=null,n=null,r=null;function o(){i&&(i.remove(),i=null,n=null,r=null)}function l(){if(!t.data?.overlays||!n)return;const u=[];for(const c of t.data.overlays)try{if(c.type==="horizontal_line"&&c.price&&n.createPriceLine({price:c.price,color:c.color||"rgba(0, 122, 255, 0.8)",lineWidth:c.width||2,lineStyle:2,axisLabelVisible:!0,title:c.text||""}),(c.type==="marker"||c.type==="label")&&c.start){const d=t.data.bars?.[c.start.barIndex];if(!d)continue;u.push({time:d.time,position:c.position==="below"?"belowBar":"aboveBar",color:c.color||"rgba(0, 122, 255, 0.9)",shape:c.shape||"circle",text:c.text||""})}}catch{}u.length&&n.setMarkers(u)}function a(){if(!e.value||!t.data?.bars?.length)return;const u=e.value.clientWidth;i=b0(e.value,{width:u,height:t.height,layout:{background:{color:"rgba(0, 0, 0, 0.85)"},textColor:"rgba(255, 255, 255, 0.75)"},grid:{vertLines:{color:"rgba(255, 255, 255, 0.06)"},horzLines:{color:"rgba(255, 255, 255, 0.06)"}},crosshair:{mode:Dr.Normal},rightPriceScale:{borderColor:"rgba(255, 255, 255, 0.12)",mode:$r.Normal},timeScale:{borderColor:"rgba(255, 255, 255, 0.12)",timeVisible:!0,secondsVisible:!1},watermark:{visible:!0,text:t.title||t.data?.symbol||"Chart",fontSize:28,color:"rgba(255, 255, 255, 0.06)"}}),n=i.addCandlestickSeries({upColor:"rgba(38, 166, 154, 1)",downColor:"rgba(239, 83, 80, 1)",borderUpColor:"rgba(38, 166, 154, 1)",borderDownColor:"rgba(239, 83, 80, 1)",wickUpColor:"rgba(38, 166, 154, 1)",wickDownColor:"rgba(239, 83, 80, 1)"}),r=i.addHistogramSeries({priceFormat:{type:"volume"},priceScaleId:"",scaleMargins:{top:.82,bottom:0}});const c=t.data.bars.map(p=>({time:p.time,open:p.open,high:p.high,low:p.low,close:p.close})),d=t.data.bars.map(p=>({time:p.time,value:p.volume,color:p.close>=p.open?"rgba(38, 166, 154, 0.45)":"rgba(239, 83, 80, 0.45)"}));n.setData(c),r.setData(d),l(),i.timeScale().fitContent()}function h(){!i||!e.value||i.applyOptions({width:e.value.clientWidth})}return je(()=>{Ds(a),window.addEventListener("resize",h)}),Ws(()=>{window.removeEventListener("resize",h),o()}),ss(()=>t.data,async()=>{o(),await Ds(),a()},{deep:!0}),(u,c)=>(T(),P("div",y0,[f("div",{ref_key:"chartContainer",ref:e,class:"chart-canvas"},null,512)]))}},mr=yu(_0,[["__scopeId","data-v-e357f0a7"]]),w0={key:0,class:"terminal-empty"},S0={class:"terminal-time"},x0={__name:"LogTerminal",props:{logs:{type:Array,default:()=>[]}},setup(s){const t=s,e=W(null);function i(r){try{return new Date(r).toLocaleTimeString("zh-CN")}catch{return""}}function n(r){return r==="stderr"?"terminal-stderr":r==="error"?"terminal-error":"terminal-stdout"}return ss(()=>t.logs.length,async()=>{await Ds(),e.value&&(e.value.scrollTop=e.value.scrollHeight)}),(r,o)=>(T(),P("div",{ref_key:"container",ref:e,class:"terminal"},[s.logs.length===0?(T(),P("div",w0,"...")):H("",!0),(T(!0),P(bt,null,me(s.logs,(l,a)=>(T(),P("div",{key:a,class:"terminal-line"},[f("span",S0,"["+L(i(l.timestamp))+"]",1),f("span",{class:vs(n(l.type))},L(l.data),3)]))),128))],512))}},E0={key:0,class:"iv-card"},C0={class:"iv-header"},M0={class:"iv-title"},T0={class:"iv-title-text"},k0={class:"iv-body"},O0={class:"iv-row-top"},A0={class:"iv-left"},L0={key:0,class:"iv-note"},R0={__name:"IndicatorViewsCard",props:{views:{type:Object,default:null},title:{type:String,default:""}},setup(s){const t=s;function e(a){const h=String(a||"").trim().toLowerCase();return["bullish","long","buy","","","",""].includes(h)?"bullish":["bearish","short","sell","","","",""].includes(h)?"bearish":["neutral","none","wait","hold","",""].includes(h)?"neutral":h||"neutral"}function i(a){const h=String(a||"").trim().toLowerCase();return["above_average","above","strong","high","","",""].includes(h)?"above_average":["below_average","below","weak","low","","",""].includes(h)?"below_average":["average","mid","normal","","",""].includes(h)?"average":h||"average"}function n(a){const h=e(a);return h==="bullish"?"":h==="bearish"?"":h==="neutral"?"":h}function r(a){const h=i(a);return h==="above_average"?"":h==="below_average"?"":h==="average"?"":h}function o(a){const h=e(a);return h==="bullish"?"iv-badge iv-badge--bullish":h==="bearish"?"iv-badge iv-badge--bearish":"iv-badge iv-badge--neutral"}const l=ot(()=>{const a=t.views||{},h=e(a?.bollinger?.bias),u=e(a?.macd?.bias),c=i(a?.trend_strength?.level),d=e(a?.trend_strength?.bias),p=(h==="bullish"?1:h==="bearish"?-1:0)+(u==="bullish"?1:u==="bearish"?-1:0)+(d==="bullish"?1:d==="bearish"?-1:0),g=p>=2?"bullish":p<=-2?"bearish":"neutral";return[{key:"macd",name:"MACD",right:n(u),badgeClass:o(u),note:a?.macd?.note||""},{key:"boll",name:"",right:n(h),badgeClass:o(h),note:a?.bollinger?.note||""},{key:"trend",name:"",right:`${r(c)}  ${n(d)}`,badgeClass:"iv-badge iv-badge--purple",note:a?.trend_strength?.note||""},{key:"overall",name:"",right:n(g),badgeClass:o(g),note:""}]});return(a,h)=>s.views?(T(),P("div",E0,[f("div",C0,[f("div",M0,[f("span",T0,L(s.title),1)]),h[0]||(h[0]=f("span",{class:"iv-subtitle"},"AI ",-1))]),f("div",k0,[(T(!0),P(bt,null,me(l.value,u=>(T(),P("div",{key:u.key,class:"iv-row"},[f("div",O0,[f("span",A0,L(u.name),1),f("span",{class:vs(u.badgeClass)},L(u.right),3)]),u.note?(T(),P("div",L0,L(u.note),1)):H("",!0)]))),128))])])):H("",!0)}},P0=yu(R0,[["__scopeId","data-v-5ac50a0d"]]),Ae=Object.create(null);Ae.open="0";Ae.close="1";Ae.ping="2";Ae.pong="3";Ae.message="4";Ae.upgrade="5";Ae.noop="6";const Zi=Object.create(null);Object.keys(Ae).forEach(s=>{Zi[Ae[s]]=s});const Wr={type:"error",data:"parser error"},_u=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",wu=typeof ArrayBuffer=="function",Su=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,Oo=({type:s,data:t},e,i)=>_u&&t instanceof Blob?e?i(t):Sa(t,i):wu&&(t instanceof ArrayBuffer||Su(t))?e?i(t):Sa(new Blob([t]),i):i(Ae[s]+(t||"")),Sa=(s,t)=>{const e=new FileReader;return e.onload=function(){const i=e.result.split(",")[1];t("b"+(i||""))},e.readAsDataURL(s)};function xa(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let vr;function N0(s,t){if(_u&&s.data instanceof Blob)return s.data.arrayBuffer().then(xa).then(t);if(wu&&(s.data instanceof ArrayBuffer||Su(s.data)))return t(xa(s.data));Oo(s,!1,e=>{vr||(vr=new TextEncoder),t(vr.encode(e))})}const Ea="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ti=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<Ea.length;s++)ti[Ea.charCodeAt(s)]=s;const D0=s=>{let t=s.length*.75,e=s.length,i,n=0,r,o,l,a;s[s.length-1]==="="&&(t--,s[s.length-2]==="="&&t--);const h=new ArrayBuffer(t),u=new Uint8Array(h);for(i=0;i<e;i+=4)r=ti[s.charCodeAt(i)],o=ti[s.charCodeAt(i+1)],l=ti[s.charCodeAt(i+2)],a=ti[s.charCodeAt(i+3)],u[n++]=r<<2|o>>4,u[n++]=(o&15)<<4|l>>2,u[n++]=(l&3)<<6|a&63;return h},I0=typeof ArrayBuffer=="function",Ao=(s,t)=>{if(typeof s!="string")return{type:"message",data:xu(s,t)};const e=s.charAt(0);return e==="b"?{type:"message",data:$0(s.substring(1),t)}:Zi[e]?s.length>1?{type:Zi[e],data:s.substring(1)}:{type:Zi[e]}:Wr},$0=(s,t)=>{if(I0){const e=D0(s);return xu(e,t)}else return{base64:!0,data:s}},xu=(s,t)=>t==="blob"?s instanceof Blob?s:new Blob([s]):s instanceof ArrayBuffer?s:s.buffer,Eu="",B0=(s,t)=>{const e=s.length,i=new Array(e);let n=0;s.forEach((r,o)=>{Oo(r,!1,l=>{i[o]=l,++n===e&&t(i.join(Eu))})})},F0=(s,t)=>{const e=s.split(Eu),i=[];for(let n=0;n<e.length;n++){const r=Ao(e[n],t);if(i.push(r),r.type==="error")break}return i};function V0(){return new TransformStream({transform(s,t){N0(s,e=>{const i=e.length;let n;if(i<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,i);else if(i<65536){n=new Uint8Array(3);const r=new DataView(n.buffer);r.setUint8(0,126),r.setUint16(1,i)}else{n=new Uint8Array(9);const r=new DataView(n.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(i))}s.data&&typeof s.data!="string"&&(n[0]|=128),t.enqueue(n),t.enqueue(e)})}})}let gr;function Hi(s){return s.reduce((t,e)=>t+e.length,0)}function ji(s,t){if(s[0].length===t)return s.shift();const e=new Uint8Array(t);let i=0;for(let n=0;n<t;n++)e[n]=s[0][i++],i===s[0].length&&(s.shift(),i=0);return s.length&&i<s[0].length&&(s[0]=s[0].slice(i)),e}function z0(s,t){gr||(gr=new TextDecoder);const e=[];let i=0,n=-1,r=!1;return new TransformStream({transform(o,l){for(e.push(o);;){if(i===0){if(Hi(e)<1)break;const a=ji(e,1);r=(a[0]&128)===128,n=a[0]&127,n<126?i=3:n===126?i=1:i=2}else if(i===1){if(Hi(e)<2)break;const a=ji(e,2);n=new DataView(a.buffer,a.byteOffset,a.length).getUint16(0),i=3}else if(i===2){if(Hi(e)<8)break;const a=ji(e,8),h=new DataView(a.buffer,a.byteOffset,a.length),u=h.getUint32(0);if(u>Math.pow(2,21)-1){l.enqueue(Wr);break}n=u*Math.pow(2,32)+h.getUint32(4),i=3}else{if(Hi(e)<n)break;const a=ji(e,n);l.enqueue(Ao(r?a:gr.decode(a),t)),i=0}if(n===0||n>s){l.enqueue(Wr);break}}}})}const Cu=4;function Et(s){if(s)return U0(s)}function U0(s){for(var t in Et.prototype)s[t]=Et.prototype[t];return s}Et.prototype.on=Et.prototype.addEventListener=function(s,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(t),this};Et.prototype.once=function(s,t){function e(){this.off(s,e),t.apply(this,arguments)}return e.fn=t,this.on(s,e),this};Et.prototype.off=Et.prototype.removeListener=Et.prototype.removeAllListeners=Et.prototype.removeEventListener=function(s,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+s];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var i,n=0;n<e.length;n++)if(i=e[n],i===t||i.fn===t){e.splice(n,1);break}return e.length===0&&delete this._callbacks["$"+s],this};Et.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+s],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(e){e=e.slice(0);for(var i=0,n=e.length;i<n;++i)e[i].apply(this,t)}return this};Et.prototype.emitReserved=Et.prototype.emit;Et.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};Et.prototype.hasListeners=function(s){return!!this.listeners(s).length};const Nn=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),oe=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),W0="arraybuffer";function Mu(s,...t){return t.reduce((e,i)=>(s.hasOwnProperty(i)&&(e[i]=s[i]),e),{})}const q0=oe.setTimeout,H0=oe.clearTimeout;function Dn(s,t){t.useNativeTimers?(s.setTimeoutFn=q0.bind(oe),s.clearTimeoutFn=H0.bind(oe)):(s.setTimeoutFn=oe.setTimeout.bind(oe),s.clearTimeoutFn=oe.clearTimeout.bind(oe))}const j0=1.33;function K0(s){return typeof s=="string"?G0(s):Math.ceil((s.byteLength||s.size)*j0)}function G0(s){let t=0,e=0;for(let i=0,n=s.length;i<n;i++)t=s.charCodeAt(i),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(i++,e+=4);return e}function Tu(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function J0(s){let t="";for(let e in s)s.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(s[e]));return t}function X0(s){let t={},e=s.split("&");for(let i=0,n=e.length;i<n;i++){let r=e[i].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}class Y0 extends Error{constructor(t,e,i){super(t),this.description=e,this.context=i,this.type="TransportError"}}class Lo extends Et{constructor(t){super(),this.writable=!1,Dn(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,i){return super.emitReserved("error",new Y0(t,e,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=Ao(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const e=J0(t);return e.length?"?"+e:""}}class Q0 extends Lo{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||e()})),this.writable||(i++,this.once("drain",function(){--i||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const e=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};F0(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,B0(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=Tu()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}}let ku=!1;try{ku=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Z0=ku;function ty(){}class ey extends Q0{constructor(t){if(super(t),typeof location<"u"){const e=location.protocol==="https:";let i=location.port;i||(i=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port}}doWrite(t,e){const i=this.request({method:"POST",data:t});i.on("success",e),i.on("error",(n,r)=>{this.onError("xhr post error",n,r)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,i)=>{this.onError("xhr poll error",e,i)}),this.pollXhr=t}}class ke extends Et{constructor(t,e,i){super(),this.createRequest=t,Dn(this,i),this._opts=i,this._method=i.method||"GET",this._uri=e,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var t;const e=Mu(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(e);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&i.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var n;i.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=ke.requestsCount++,ke.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=ty,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ke.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}ke.requestsCount=0;ke.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ca);else if(typeof addEventListener=="function"){const s="onpagehide"in oe?"pagehide":"unload";addEventListener(s,Ca,!1)}}function Ca(){for(let s in ke.requests)ke.requests.hasOwnProperty(s)&&ke.requests[s].abort()}const sy=(function(){const s=Ou({xdomain:!1});return s&&s.responseType!==null})();class iy extends ey{constructor(t){super(t);const e=t&&t.forceBase64;this.supportsBinary=sy&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new ke(Ou,this.uri(),t)}}function Ou(s){const t=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Z0))return new XMLHttpRequest}catch{}if(!t)try{return new oe[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Au=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class ny extends Lo{get name(){return"websocket"}doOpen(){const t=this.uri(),e=this.opts.protocols,i=Au?{}:Mu(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,i)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const i=t[e],n=e===t.length-1;Oo(i,this.supportsBinary,r=>{try{this.doWrite(i,r)}catch{}n&&Nn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=Tu()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}}const br=oe.WebSocket||oe.MozWebSocket;class ry extends ny{createSocket(t,e,i){return Au?new br(t,e,i):e?new br(t,e):new br(t)}doWrite(t,e){this.ws.send(e)}}class oy extends Lo{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const e=z0(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(e).getReader(),n=V0();n.readable.pipeTo(t.writable),this._writer=n.writable.getWriter();const r=()=>{i.read().then(({done:l,value:a})=>{l||(this.onPacket(a),r())}).catch(l=>{})};r();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const i=t[e],n=e===t.length-1;this._writer.write(i).then(()=>{n&&Nn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const ly={websocket:ry,webtransport:oy,polling:iy},ay=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,hy=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function qr(s){if(s.length>8e3)throw"URI too long";const t=s,e=s.indexOf("["),i=s.indexOf("]");e!=-1&&i!=-1&&(s=s.substring(0,e)+s.substring(e,i).replace(/:/g,";")+s.substring(i,s.length));let n=ay.exec(s||""),r={},o=14;for(;o--;)r[hy[o]]=n[o]||"";return e!=-1&&i!=-1&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=uy(r,r.path),r.queryKey=cy(r,r.query),r}function uy(s,t){const e=/\/{2,9}/g,i=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function cy(s,t){const e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,n,r){n&&(e[n]=r)}),e}const Hr=typeof addEventListener=="function"&&typeof removeEventListener=="function",tn=[];Hr&&addEventListener("offline",()=>{tn.forEach(s=>s())},!1);class is extends Et{constructor(t,e){if(super(),this.binaryType=W0,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(e=t,t=null),t){const i=qr(t);e.hostname=i.host,e.secure=i.protocol==="https"||i.protocol==="wss",e.port=i.port,i.query&&(e.query=i.query)}else e.host&&(e.hostname=qr(e.host).host);Dn(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(i=>{const n=i.prototype.name;this.transports.push(n),this._transportsByName[n]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=X0(this.opts.query)),Hr&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},tn.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=Cu,e.transport=t,this.id&&(e.sid=this.id);const i=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&is.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const e=this.createTransport(t);e.open(),this.setTransport(e)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",is.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const e=new Error("server error");e.code=t.data,this._onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let i=0;i<this.writeBuffer.length;i++){const n=this.writeBuffer[i].data;if(n&&(e+=K0(n)),i>0&&e>this._maxPayload)return this.writeBuffer.slice(0,i);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Nn(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,e,i){return this._sendPacket("message",t,e,i),this}send(t,e,i){return this._sendPacket("message",t,e,i),this}_sendPacket(t,e,i,n){if(typeof e=="function"&&(n=e,e=void 0),typeof i=="function"&&(n=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const r={type:t,data:e,options:i};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},i=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}_onError(t){if(is.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Hr&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=tn.indexOf(this._offlineEventListener);i!==-1&&tn.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this._prevBufferLen=0}}}is.protocol=Cu;class fy extends is{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let e=this.createTransport(t),i=!1;is.priorWebsocketSuccess=!1;const n=()=>{i||(e.send([{type:"ping",data:"probe"}]),e.once("packet",c=>{if(!i)if(c.type==="pong"&&c.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;is.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(u(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=e.name,this.emitReserved("upgradeError",d)}}))};function r(){i||(i=!0,u(),e.close(),e=null)}const o=c=>{const d=new Error("probe error: "+c);d.transport=e.name,r(),this.emitReserved("upgradeError",d)};function l(){o("transport closed")}function a(){o("socket closed")}function h(c){e&&c.name!==e.name&&r()}const u=()=>{e.removeListener("open",n),e.removeListener("error",o),e.removeListener("close",l),this.off("close",a),this.off("upgrading",h)};e.once("open",n),e.once("error",o),e.once("close",l),this.once("close",a),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{i||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const e=[];for(let i=0;i<t.length;i++)~this.transports.indexOf(t[i])&&e.push(t[i]);return e}}let dy=class extends fy{constructor(t,e={}){const i=typeof t=="object"?t:e;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(n=>ly[n]).filter(n=>!!n)),super(t,i)}};function py(s,t="",e){let i=s;e=e||typeof location<"u"&&location,s==null&&(s=e.protocol+"//"+e.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=e.protocol+s:s=e.host+s),/^(https?|wss?):\/\//.test(s)||(typeof e<"u"?s=e.protocol+"//"+s:s="https://"+s),i=qr(s)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const r=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+t,i.href=i.protocol+"://"+r+(e&&e.port===i.port?"":":"+i.port),i}const my=typeof ArrayBuffer=="function",vy=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,Lu=Object.prototype.toString,gy=typeof Blob=="function"||typeof Blob<"u"&&Lu.call(Blob)==="[object BlobConstructor]",by=typeof File=="function"||typeof File<"u"&&Lu.call(File)==="[object FileConstructor]";function Ro(s){return my&&(s instanceof ArrayBuffer||vy(s))||gy&&s instanceof Blob||by&&s instanceof File}function en(s,t){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let e=0,i=s.length;e<i;e++)if(en(s[e]))return!0;return!1}if(Ro(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return en(s.toJSON(),!0);for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e)&&en(s[e]))return!0;return!1}function yy(s){const t=[],e=s.data,i=s;return i.data=jr(e,t),i.attachments=t.length,{packet:i,buffers:t}}function jr(s,t){if(!s)return s;if(Ro(s)){const e={_placeholder:!0,num:t.length};return t.push(s),e}else if(Array.isArray(s)){const e=new Array(s.length);for(let i=0;i<s.length;i++)e[i]=jr(s[i],t);return e}else if(typeof s=="object"&&!(s instanceof Date)){const e={};for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=jr(s[i],t));return e}return s}function _y(s,t){return s.data=Kr(s.data,t),delete s.attachments,s}function Kr(s,t){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<t.length)return t[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let e=0;e<s.length;e++)s[e]=Kr(s[e],t);else if(typeof s=="object")for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&(s[e]=Kr(s[e],t));return s}const wy=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Sy=5;var et;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(et||(et={}));class xy{constructor(t){this.replacer=t}encode(t){return(t.type===et.EVENT||t.type===et.ACK)&&en(t)?this.encodeAsBinary({type:t.type===et.EVENT?et.BINARY_EVENT:et.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===et.BINARY_EVENT||t.type===et.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=yy(t),i=this.encodeAsString(e.packet),n=e.buffers;return n.unshift(i),n}}function Ma(s){return Object.prototype.toString.call(s)==="[object Object]"}class Po extends Et{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const i=e.type===et.BINARY_EVENT;i||e.type===et.BINARY_ACK?(e.type=i?et.EVENT:et.ACK,this.reconstructor=new Ey(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(Ro(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0;const i={type:Number(t.charAt(0))};if(et[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===et.BINARY_EVENT||i.type===et.BINARY_ACK){const r=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);const o=t.substring(r,e);if(o!=Number(o)||t.charAt(e)!=="-")throw new Error("Illegal attachments");i.attachments=Number(o)}if(t.charAt(e+1)==="/"){const r=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););i.nsp=t.substring(r,e)}else i.nsp="/";const n=t.charAt(e+1);if(n!==""&&Number(n)==n){const r=e+1;for(;++e;){const o=t.charAt(e);if(o==null||Number(o)!=o){--e;break}if(e===t.length)break}i.id=Number(t.substring(r,e+1))}if(t.charAt(++e)){const r=this.tryParse(t.substr(e));if(Po.isPayloadValid(i.type,r))i.data=r;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case et.CONNECT:return Ma(e);case et.DISCONNECT:return e===void 0;case et.CONNECT_ERROR:return typeof e=="string"||Ma(e);case et.EVENT:case et.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&wy.indexOf(e[0])===-1);case et.ACK:case et.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Ey{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const e=_y(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Cy=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Po,Encoder:xy,get PacketType(){return et},protocol:Sy},Symbol.toStringTag,{value:"Module"}));function he(s,t,e){return s.on(t,e),function(){s.off(t,e)}}const My=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ru extends Et{constructor(t,e,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[he(t,"open",this.onopen.bind(this)),he(t,"packet",this.onpacket.bind(this)),he(t,"error",this.onerror.bind(this)),he(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var i,n,r;if(My.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const o={type:et.EVENT,data:e};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const u=this.ids++,c=e.pop();this._registerAckCallback(u,c),o.id=u}const l=(n=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||n===void 0?void 0:n.writable,a=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!l||(a?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,e){var i;const n=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(n===void 0){this.acks[t]=e;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);e.call(this,new Error("operation has timed out"))},n),o=(...l)=>{this.io.clearTimeoutFn(r),e.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...e){return new Promise((i,n)=>{const r=(o,l)=>o?n(o):i(l);r.withError=!0,e.push(r),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...r)=>i!==this._queue[0]?void 0:(n!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(n)):(this._queue.shift(),e&&e(null,...r)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:et.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(i=>String(i.id)===t)){const i=this.acks[t];delete this.acks[t],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case et.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case et.EVENT:case et.BINARY_EVENT:this.onevent(t);break;case et.ACK:case et.BINARY_ACK:this.onack(t);break;case et.DISCONNECT:this.ondisconnect();break;case et.CONNECT_ERROR:this.destroy();const i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i);break}}onevent(t){const e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const i of e)i.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let i=!1;return function(...n){i||(i=!0,e.packet({type:et.ACK,id:t,data:n}))}}onack(t){const e=this.acks[t.id];typeof e=="function"&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:et.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const i of e)i.apply(this,t.data)}}}function js(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}js.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*s);s=(Math.floor(t*10)&1)==0?s-e:s+e}return Math.min(s,this.max)|0};js.prototype.reset=function(){this.attempts=0};js.prototype.setMin=function(s){this.ms=s};js.prototype.setMax=function(s){this.max=s};js.prototype.setJitter=function(s){this.jitter=s};class Gr extends Et{constructor(t,e){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,Dn(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((i=e.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new js({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;const n=e.parser||Cy;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new dy(this.uri,this.opts);const e=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const n=he(e,"open",function(){i.onopen(),t&&t()}),r=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=he(e,"error",r);if(this._timeout!==!1){const l=this._timeout,a=this.setTimeoutFn(()=>{n(),r(new Error("timeout")),e.close()},l);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}return this.subs.push(n),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(he(t,"ping",this.onping.bind(this)),he(t,"data",this.ondata.bind(this)),he(t,"error",this.onerror.bind(this)),he(t,"close",this.onclose.bind(this)),he(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){Nn(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new Ru(this,t,e),this.nsps[t]=i),i}_destroy(t){const e=Object.keys(this.nsps);for(const i of e)if(this.nsps[i].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let i=0;i<e.length;i++)this.engine.write(e[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},e);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Qs={};function sn(s,t){typeof s=="object"&&(t=s,s=void 0),t=t||{};const e=py(s,t.path||"/socket.io"),i=e.source,n=e.id,r=e.path,o=Qs[n]&&r in Qs[n].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let a;return l?a=new Gr(i,t):(Qs[n]||(Qs[n]=new Gr(i,t)),a=Qs[n]),e.query&&!t.query&&(t.query=e.queryKey),a.socket(e.path,t)}Object.assign(sn,{Manager:Gr,Socket:Ru,io:sn,connect:sn});let us=null;function Ty(){const s=os(),t=ot(()=>s.token.value);function e(){t.value&&(us&&us.connected||(us=sn("/saas",{transports:["websocket","polling"],auth:{token:t.value}})))}function i(){us&&(us.disconnect(),us=null)}return ss(t,n=>{if(!n)return i();i(),e()}),e(),Ws(i),{socket:()=>us}}const ky={key:0,class:"card"},Oy={key:1,class:"card"},Ay={class:"card-content"},Ly={class:"input-with-button"},Ry=["disabled"],Py={key:0,class:"form-error"},Ny={key:1,class:"form-success"},Dy={key:2,class:"grid grid-2"},Iy={class:"card",style:{"grid-column":"1 / -1"}},$y={class:"card-content"},By={class:"grid grid-3"},Fy={class:"stat-row"},Vy={class:"stat-value"},zy={class:"stat-row"},Uy={class:"stat-value"},Wy={class:"stat-row"},qy={class:"stat-value"},Hy={key:0},jy={key:1,class:"text-muted"},Ky={key:0,class:"form-error"},Gy={key:1,class:"form-error"},Jy={class:"card"},Xy={class:"card-content"},Yy={class:"form-group"},Qy=["disabled"],Zy={class:"form-group"},t_=["disabled"],e_=["value"],s_={class:"form-group"},i_=["disabled"],n_={class:"form-group"},r_={class:"input-with-button"},o_={class:"text-muted",style:{display:"flex","align-items":"center",gap:"0.5rem"}},l_=["disabled"],a_={key:0,class:"form-group"},h_=["disabled"],u_=["value"],c_={class:"input-with-button"},f_=["disabled"],d_=["disabled"],p_={key:1,class:"form-error"},m_={class:"card"},v_={class:"card-content"},g_={key:0,class:"grid grid-2",style:{gap:"0.75rem"}},b_={class:"stat-row"},y_={class:"stat-value"},__={class:"stat-row"},w_={class:"stat-value"},S_={key:0,class:"stat-row"},x_={class:"stat-value"},E_={key:1,class:"stat-row"},C_={class:"stat-value"},M_={key:2,class:"stat-row"},T_={class:"stat-value"},k_={key:3,class:"stat-row"},O_={class:"stat-value"},A_={key:1,class:"text-muted"},L_={key:2,class:"mt-16"},R_={class:"stat-row"},P_={class:"stat-value",style:{"text-align":"right","max-width":"70%"}},N_={key:3,class:"mt-16"},D_={class:"card",style:{"grid-column":"1 / -1"}},I_={class:"card",style:{"grid-column":"1 / -1"}},$_={class:"card-content"},B_={key:0,class:"grid grid-2"},F_={key:0},V_={key:1,style:{"grid-column":"1 / -1"}},z_={key:1,class:"text-muted"},U_={__name:"AIStrategyPage",setup(s){const t=["1m","5m","15m","30m","1h","4h","1d"],e=W(!0),i=W(""),n=W(!1),r=W(""),o=W(""),l=jt({subscription:null,subscriptionActive:!1,credit:null,providers:{selectedId:null,items:[]}}),a=jt({symbol:"BTCUSDT",timeframe:"1h",bars:200,enable4x:!1,auxTimeframe:""}),h=W(!1),u=W(null),c=W(""),d=W([]),p=W(""),g=W(null),v=jt({base:null,aux:null,vlm:null}),S=ot(()=>l.providers.items.find(V=>V.id===l.providers.selectedId)||null),_=ot(()=>!!S.value&&!!S.value.hasKey);function b(V,A,q){q&&c.value&&q!==c.value||d.value.push({type:V,data:A,timestamp:Date.now()})}function M(){return`sess_${Date.now()}_${Math.random().toString(36).slice(2,10)}`}function D(V){if(V==null||V===0)return"-";if(V==="market")return"";const A=Number(V);return Number.isFinite(A)?A.toFixed(6):"-"}function J(V){if(!V)return"-";try{return new Date(V).toISOString().slice(0,10)}catch{return String(V)}}function tt(V){return{long:"",short:"",buy:"",sell:""}[String(V).toLowerCase()]||V}async function Y(){const V=await st.request("/api/saas/ai/state");l.subscription=V.subscription||null,l.subscriptionActive=!!V.subscriptionActive,l.credit=V.credit||null,l.providers=V.providers||{selectedId:null,items:[]}}async function rt(){r.value="",o.value="",n.value=!0;try{const V=await st.request("/api/billing/redeem-activation-code",{method:"POST",body:{code:i.value}});l.subscription=V.subscription||null,l.subscriptionActive=!0,o.value="",i.value="",await Y()}catch(V){r.value=V?.message||""}finally{n.value=!1}}async function _t(){p.value="",d.value=[],g.value=null,v.base=null,v.aux=null,v.vlm=null,c.value=M(),h.value=!0;const V=["--symbol",a.symbol,"--timeframe",a.timeframe,"--bars",String(a.bars),"--wait","1000","--session-id",c.value];a.enable4x&&(V.push("--enable-4x-chart"),a.auxTimeframe&&V.push("--aux-timeframe",a.auxTimeframe));try{const A=await st.request("/api/saas/run-script",{method:"POST",body:{script:"main",args:V,sessionId:c.value}});if(u.value=A.pid||null,!u.value)throw new Error("");A.charged?.remainingCredits!==void 0&&l.credit&&(l.credit.remainingCredits=Number(A.charged.remainingCredits),l.credit.periodEnd=A.charged.nextResetAt||l.credit.periodEnd)}catch(A){p.value=A?.message||"",h.value=!1}}function St(){u.value&&Mt().emit("kill-process",u.value)}async function Vt(){if(!c.value)return;const V=await st.request(`/api/saas/chart-data/${encodeURIComponent(c.value)}`);v.base=V.base||null,v.aux=V.aux||null,v.vlm=V.vlm||null,g.value=V.decision||null}const{socket:Mt}=Ty();function kt(V){b(V.type,V.data,V.sessionId)}async function Gt(V){if(!(V.sessionId&&V.sessionId!==c.value)&&(b("stdout",`Process exited with code ${V.code}`,V.sessionId),h.value=!1,u.value=null,V.code===0))try{await Vt()}catch(A){b("error",`: ${A?.message||String(A)}`,V.sessionId)}}function zt(V){V===u.value&&(b("stderr","Process terminated.",c.value),h.value=!1,u.value=null)}return je(async()=>{try{await Y()}finally{e.value=!1}Mt().on("log",kt),Mt().on("process-exit",Gt),Mt().on("process-killed",zt)}),Ws(()=>{Mt()?.off?.("log",kt),Mt()?.off?.("process-exit",Gt),Mt()?.off?.("process-killed",zt)}),(V,A)=>(T(),ae(Hs,{title:"AI ",subtitle:""},{default:Pt(()=>[e.value?(T(),P("div",ky,[...A[6]||(A[6]=[f("p",{class:"text-muted"},"...",-1)])])):l.subscriptionActive?(T(),P("div",Dy,[f("div",Iy,[f("div",$y,[f("div",By,[f("div",Fy,[A[9]||(A[9]=f("span",{class:"stat-label"},"",-1)),f("span",Vy,L((l.credit?.remainingCredits??0).toFixed(2)),1)]),f("div",zy,[A[10]||(A[10]=f("span",{class:"stat-label"},"",-1)),f("span",Uy,L(J(l.credit?.periodEnd)),1)]),f("div",Wy,[A[11]||(A[11]=f("span",{class:"stat-label"},"",-1)),f("span",qy,[S.value?(T(),P("span",Hy,L(S.value.display_name),1)):(T(),P("span",jy,""))])])]),S.value?S.value.hasKey?H("",!0):(T(),P("p",Gy,"")):(T(),P("p",Ky,"AI "))])]),f("div",Jy,[A[19]||(A[19]=f("h2",{class:"card-title"},"",-1)),f("div",Xy,[f("div",Yy,[A[12]||(A[12]=f("label",{class:"form-label"},"",-1)),nt(f("input",{"onUpdate:modelValue":A[1]||(A[1]=q=>a.symbol=q),class:"form-input",placeholder:"BTCUSDT",disabled:h.value},null,8,Qy),[[vt,a.symbol]])]),f("div",Zy,[A[13]||(A[13]=f("label",{class:"form-label"},"",-1)),nt(f("select",{"onUpdate:modelValue":A[2]||(A[2]=q=>a.timeframe=q),class:"form-input",disabled:h.value},[(T(),P(bt,null,me(t,q=>f("option",{key:q,value:q},L(q),9,e_)),64))],8,t_),[[bi,a.timeframe]])]),f("div",s_,[A[14]||(A[14]=f("label",{class:"form-label"},"K",-1)),nt(f("input",{"onUpdate:modelValue":A[3]||(A[3]=q=>a.bars=q),class:"form-input",type:"number",min:"50",max:"2000",disabled:h.value},null,8,i_),[[vt,a.bars,void 0,{number:!0}]])]),f("div",n_,[A[16]||(A[16]=f("label",{class:"form-label"},"4x ",-1)),f("div",r_,[f("label",o_,[nt(f("input",{"onUpdate:modelValue":A[4]||(A[4]=q=>a.enable4x=q),type:"checkbox",disabled:h.value},null,8,l_),[[Jf,a.enable4x]]),A[15]||(A[15]=te("  ",-1))])])]),a.enable4x?(T(),P("div",a_,[A[18]||(A[18]=f("label",{class:"form-label"},"",-1)),nt(f("select",{"onUpdate:modelValue":A[5]||(A[5]=q=>a.auxTimeframe=q),class:"form-input",disabled:h.value},[A[17]||(A[17]=f("option",{value:""},"",-1)),(T(),P(bt,null,me(t,q=>f("option",{key:q,value:q},L(q),9,u_)),64))],8,h_),[[bi,a.auxTimeframe]])])):H("",!0),f("div",c_,[f("button",{class:"btn btn-primary",type:"button",disabled:h.value||!_.value,onClick:_t},L(h.value?"...":""),9,f_),f("button",{class:"btn btn-danger",type:"button",disabled:!u.value,onClick:St},"",8,d_)]),p.value?(T(),P("p",p_,L(p.value),1)):H("",!0)])]),f("div",m_,[A[27]||(A[27]=f("h2",{class:"card-title"},"",-1)),f("div",v_,[g.value?(T(),P("div",g_,[f("div",b_,[A[20]||(A[20]=f("span",{class:"stat-label"},"",-1)),f("span",y_,L(g.value.enter?"":""),1)]),f("div",__,[A[21]||(A[21]=f("span",{class:"stat-label"},"",-1)),f("span",w_,L(Math.round((g.value.confidence||0)*100))+"%",1)]),g.value.enter?(T(),P("div",S_,[A[22]||(A[22]=f("span",{class:"stat-label"},"",-1)),f("span",x_,L(tt(g.value.direction)),1)])):H("",!0),g.value.enter?(T(),P("div",E_,[A[23]||(A[23]=f("span",{class:"stat-label"},"",-1)),f("span",C_,L(D(g.value.entry_price)),1)])):H("",!0),g.value.enter?(T(),P("div",M_,[A[24]||(A[24]=f("span",{class:"stat-label"},"",-1)),f("span",T_,L(D(g.value.stop_loss_price)),1)])):H("",!0),g.value.enter?(T(),P("div",k_,[A[25]||(A[25]=f("span",{class:"stat-label"},"",-1)),f("span",O_,L(D(g.value.take_profit_price)),1)])):H("",!0)])):(T(),P("p",A_,"")),g.value?.reason?(T(),P("div",L_,[f("div",R_,[A[26]||(A[26]=f("span",{class:"stat-label"},"",-1)),f("span",P_,L(g.value.reason),1)])])):H("",!0),g.value?.indicator_views?(T(),P("div",N_,[ct(P0,{views:g.value.indicator_views},null,8,["views"])])):H("",!0)])]),f("div",D_,[A[28]||(A[28]=f("h2",{class:"card-title"},"",-1)),ct(x0,{logs:d.value},null,8,["logs"])]),f("div",I_,[A[32]||(A[32]=f("h2",{class:"card-title"},"",-1)),f("div",$_,[v.base?(T(),P("div",B_,[f("div",null,[A[29]||(A[29]=f("p",{class:"text-muted",style:{"margin-bottom":"0.5rem"}},"Base",-1)),ct(mr,{data:v.base,title:`${v.base.symbol} ${v.base.timeframe}`,height:420},null,8,["data","title"])]),v.aux?(T(),P("div",F_,[A[30]||(A[30]=f("p",{class:"text-muted",style:{"margin-bottom":"0.5rem"}},"Aux",-1)),ct(mr,{data:v.aux,title:`${v.aux.symbol} ${v.aux.timeframe}`,height:420},null,8,["data","title"])])):H("",!0),v.vlm?(T(),P("div",V_,[A[31]||(A[31]=f("p",{class:"text-muted",style:{"margin-bottom":"0.5rem"}},"VLM Overlays",-1)),ct(mr,{data:v.vlm,title:`VLM ${v.vlm.symbol} ${v.vlm.timeframe}`,height:460},null,8,["data","title"])])):H("",!0)])):(T(),P("p",z_,""))])])])):(T(),P("div",Oy,[A[8]||(A[8]=f("h2",{class:"card-title"},"",-1)),f("div",Ay,[A[7]||(A[7]=f("p",{class:"text-muted"},"",-1)),f("div",Ly,[nt(f("input",{"onUpdate:modelValue":A[0]||(A[0]=q=>i.value=q),class:"form-input",placeholder:""},null,512),[[vt,i.value]]),f("button",{class:"btn btn-primary",type:"button",disabled:n.value,onClick:rt},L(n.value?"...":""),9,Ry)]),r.value?(T(),P("p",Py,L(r.value),1)):H("",!0),o.value?(T(),P("p",Ny,L(o.value),1)):H("",!0)])]))]),_:1}))}},W_={key:0,class:"card"},q_={key:1,class:"grid grid-2"},H_={class:"card"},j_={class:"card-content"},K_={class:"stat-row"},G_={class:"stat-value"},J_={key:0,class:"stat-row"},X_={class:"stat-value"},Y_={key:1,class:"stat-row"},Q_={class:"stat-value"},Z_={key:2,class:"stat-row"},tw={class:"stat-value"},ew={key:3,class:"stat-row"},sw={class:"stat-value"},iw={key:4,class:"stat-row"},nw={class:"stat-value"},rw={key:5,class:"text-muted"},ow={class:"card"},lw={class:"card-content"},aw={key:0,class:"text-muted"},hw={key:1},uw={class:"stat-row"},cw={class:"stat-value"},fw={class:"stat-row"},dw={class:"stat-value"},pw={class:"stat-row"},mw={class:"stat-value"},vw={key:0,class:"form-error"},gw={key:1,class:"text-muted"},bw={class:"card",style:{"grid-column":"1 / -1"}},yw={class:"card-content"},_w={key:0,class:"form-error"},ww={class:"data-table"},Sw={key:0},xw={key:0},Ew={key:0,class:"form-success"},Cw={key:1,class:"text-muted"},Mw=["disabled","onClick"],Tw={key:1,class:"mt-16"},kw={class:"grid grid-2"},Ow={class:"form-group"},Aw=["value"],Lw={class:"form-group"},Rw={key:0,class:"form-error"},Pw={key:1,class:"form-success"},Nw=["disabled"],Dw={key:2,class:"text-muted mt-16"},Iw={__name:"AIProvidersPage",setup(s){const t=W(!0),e=W(""),i=jt({subscription:null,subscriptionActive:!1,credit:null,providers:{selectedId:null,items:[]}}),n=W(""),r=jt({providerId:"",apiKey:""}),o=W(!1),l=W(""),a=W(""),h=os(),u=ot(()=>h.isAdmin.value),c=ot(()=>i.providers.items.find(_=>_.id===i.providers.selectedId)||null);function d(_){if(!_)return"-";try{return new Date(_).toISOString().slice(0,10)}catch{return String(_)}}function p(_){return{monthly:"",quarterly:"",yearly:"",free:""}[_]||_}async function g(){e.value="";const _=await st.request("/api/saas/ai/state");i.subscription=_.subscription||null,i.subscriptionActive=!!_.subscriptionActive,i.credit=_.credit||null,i.providers=_.providers||{selectedId:null,items:[]}}async function v(_){n.value=_;try{await st.request("/api/saas/ai/providers/select",{method:"POST",body:{providerId:_}}),await g()}catch(b){e.value=b?.message||""}finally{n.value=""}}async function S(){l.value="",a.value="",o.value=!0;try{if(!r.providerId)throw new Error(" Provider");if(!r.apiKey.trim())throw new Error(" apiKey");await st.request("/api/saas/ai/providers/set-key",{method:"POST",body:{providerId:r.providerId,apiKey:r.apiKey.trim()}}),a.value="",r.apiKey="",await g()}catch(_){l.value=_?.message||""}finally{o.value=!1}}return je(async()=>{try{await g()}catch(_){e.value=_?.message||""}finally{t.value=!1}}),(_,b)=>(T(),ae(Hs,{title:"AI ",subtitle:" AI "},{default:Pt(()=>[t.value?(T(),P("div",W_,[...b[2]||(b[2]=[f("p",{class:"text-muted"},"...",-1)])])):(T(),P("div",q_,[f("div",H_,[b[9]||(b[9]=f("h2",{class:"card-title"},"",-1)),f("div",j_,[f("div",K_,[b[3]||(b[3]=f("span",{class:"stat-label"},"",-1)),f("span",G_,L(i.subscriptionActive?"":""),1)]),i.subscription?(T(),P("div",J_,[b[4]||(b[4]=f("span",{class:"stat-label"},"",-1)),f("span",X_,L(p(i.subscription.plan_code)),1)])):H("",!0),i.credit?(T(),P("div",Y_,[b[5]||(b[5]=f("span",{class:"stat-label"},"",-1)),f("span",Q_,L(i.credit.allowanceCredits.toFixed(2)),1)])):H("",!0),i.credit?(T(),P("div",Z_,[b[6]||(b[6]=f("span",{class:"stat-label"},"",-1)),f("span",tw,L(i.credit.usedCredits.toFixed(2)),1)])):H("",!0),i.credit?(T(),P("div",ew,[b[7]||(b[7]=f("span",{class:"stat-label"},"",-1)),f("span",sw,L(i.credit.remainingCredits.toFixed(2)),1)])):H("",!0),i.credit?(T(),P("div",iw,[b[8]||(b[8]=f("span",{class:"stat-label"},"",-1)),f("span",nw,L(d(i.credit.periodEnd)),1)])):H("",!0),i.subscriptionActive?H("",!0):(T(),P("p",rw,"  Provider "))])]),f("div",ow,[b[13]||(b[13]=f("h2",{class:"card-title"},"",-1)),f("div",lw,[c.value?(T(),P("div",hw,[f("div",uw,[b[10]||(b[10]=f("span",{class:"stat-label"},"",-1)),f("span",cw,L(c.value.display_name),1)]),f("div",fw,[b[11]||(b[11]=f("span",{class:"stat-label"},"",-1)),f("span",dw,L(c.value.model_name),1)]),f("div",pw,[b[12]||(b[12]=f("span",{class:"stat-label"},"",-1)),f("span",mw,L((c.value.multiplier_x100/100).toFixed(2))+"x",1)]),!c.value.hasKey&&u.value?(T(),P("p",vw,"")):c.value.hasKey?H("",!0):(T(),P("p",gw,""))])):(T(),P("p",aw,""))])]),f("div",bw,[b[22]||(b[22]=f("h2",{class:"card-title"},"",-1)),f("div",yw,[e.value?(T(),P("p",_w,L(e.value),1)):H("",!0),f("table",ww,[f("thead",null,[f("tr",null,[b[14]||(b[14]=f("th",null,"",-1)),b[15]||(b[15]=f("th",null,"",-1)),b[16]||(b[16]=f("th",null,"",-1)),u.value?(T(),P("th",Sw,"")):H("",!0),b[17]||(b[17]=f("th",null,"",-1))])]),f("tbody",null,[(T(!0),P(bt,null,me(i.providers.items,M=>(T(),P("tr",{key:M.id},[f("td",null,L(M.display_name),1),f("td",null,L(M.model_name),1),f("td",null,L((M.multiplier_x100/100).toFixed(2))+"x",1),u.value?(T(),P("td",xw,[M.hasKey?(T(),P("span",Ew,"")):(T(),P("span",Cw,""))])):H("",!0),f("td",null,[f("button",{class:"btn btn-secondary btn-sm",type:"button",disabled:n.value===M.id,onClick:D=>v(M.id)},L(i.providers.selectedId===M.id?"":n.value===M.id?"...":""),9,Mw)])]))),128))])]),u.value?(T(),P("div",Tw,[b[21]||(b[21]=f("h3",{class:"card-title",style:{"margin-bottom":"0.75rem"}},"",-1)),f("div",kw,[f("div",Ow,[b[19]||(b[19]=f("label",{class:"form-label"},"",-1)),nt(f("select",{"onUpdate:modelValue":b[0]||(b[0]=M=>r.providerId=M),class:"form-input"},[b[18]||(b[18]=f("option",{value:""},"",-1)),(T(!0),P(bt,null,me(i.providers.items,M=>(T(),P("option",{key:M.id,value:M.id},L(M.display_name)+" ("+L(M.model_name)+") ",9,Aw))),128))],512),[[bi,r.providerId]])]),f("div",Lw,[b[20]||(b[20]=f("label",{class:"form-label"},"",-1)),nt(f("input",{"onUpdate:modelValue":b[1]||(b[1]=M=>r.apiKey=M),class:"form-input",placeholder:"sk-..."},null,512),[[vt,r.apiKey]]),l.value?(T(),P("p",Rw,L(l.value),1)):H("",!0),a.value?(T(),P("p",Pw,L(a.value),1)):H("",!0)])]),f("button",{class:"btn btn-primary",type:"button",disabled:o.value,onClick:S},L(o.value?"...":""),9,Nw)])):(T(),P("p",Dw,""))])])]))]),_:1}))}},$w={class:"card"},Bw={class:"grid grid-3"},Fw={class:"form-group"},Vw={class:"form-group"},zw={class:"form-group"},Uw={class:"grid grid-3"},Ww={class:"form-group"},qw={class:"form-group"},Hw={class:"form-group"},jw=["disabled"],Kw={key:0,class:"form-error"},Gw={class:"card"},Jw={class:"card-content"},Xw=["disabled"],Yw={key:0,class:"form-error"},Qw={class:"mt-16"},Zw={class:"data-table"},t1=["onClick"],e1={key:0,class:"card"},s1={class:"grid grid-3"},i1={class:"form-group"},n1={class:"form-group"},r1={class:"form-group"},o1={class:"grid grid-3"},l1={class:"form-group"},a1={class:"form-group"},h1={class:"input-with-button"},u1=["disabled"],c1={key:0,class:"form-error"},f1={__name:"AdminAIProvidersPage",setup(s){const t=qs(),e=W([]),i=W(!1),n=W(""),r=jt({code:"",displayName:"",modelName:"",baseUrl:"",multiplier:1,isActive:!0}),o=W(!1),l=W(""),a=W(null),h=jt({id:"",displayName:"",modelName:"",baseUrl:"",multiplier:1,isActive:!0}),u=W(!1),c=W("");async function d(){n.value="",i.value=!0;try{const _=await st.request("/api/admin/ai-providers?limit=200&offset=0");e.value=_.items||[]}catch(_){if(_?.status===403)return t.push("/app");n.value=_?.message||""}finally{i.value=!1}}async function p(){l.value="",o.value=!0;try{const _={code:r.code.trim(),displayName:r.displayName.trim(),modelName:r.modelName.trim(),baseUrl:r.baseUrl.trim()||void 0,multiplier:Number(r.multiplier||1),isActive:!!r.isActive};await st.request("/api/admin/ai-providers",{method:"POST",body:_}),r.code="",r.displayName="",r.modelName="",r.baseUrl="",r.multiplier=1,r.isActive=!0,await d()}catch(_){if(_?.status===403)return t.push("/app");l.value=_?.message||""}finally{o.value=!1}}function g(_){a.value=_,h.id=_.id,h.displayName=_.display_name,h.modelName=_.model_name,h.baseUrl=_.base_url||"",h.multiplier=Number(_.multiplier_x100||100)/100,h.isActive=!!_.is_active,c.value=""}function v(){a.value=null}async function S(){c.value="",u.value=!0;try{const _={displayName:h.displayName.trim(),modelName:h.modelName.trim(),baseUrl:h.baseUrl.trim()||null,multiplier:Number(h.multiplier||1),isActive:!!h.isActive};await st.request(`/api/admin/ai-providers/${encodeURIComponent(h.id)}`,{method:"PUT",body:_}),a.value=null,await d()}catch(_){if(_?.status===403)return t.push("/app");c.value=_?.message||""}finally{u.value=!1}}return je(d),(_,b)=>(T(),ae(Hs,{title:"",subtitle:""},{default:Pt(()=>[f("div",$w,[b[18]||(b[18]=f("h2",{class:"card-title"},"",-1)),f("form",{class:"card-content",onSubmit:gs(p,["prevent"])},[f("div",Bw,[f("div",Fw,[b[11]||(b[11]=f("label",{class:"form-label"},"",-1)),nt(f("input",{"onUpdate:modelValue":b[0]||(b[0]=M=>r.code=M),class:"form-input",placeholder:"openai_gpt4o",required:""},null,512),[[vt,r.code]])]),f("div",Vw,[b[12]||(b[12]=f("label",{class:"form-label"},"",-1)),nt(f("input",{"onUpdate:modelValue":b[1]||(b[1]=M=>r.displayName=M),class:"form-input",placeholder:"OpenAI GPT-4o",required:""},null,512),[[vt,r.displayName]])]),f("div",zw,[b[13]||(b[13]=f("label",{class:"form-label"},"",-1)),nt(f("input",{"onUpdate:modelValue":b[2]||(b[2]=M=>r.modelName=M),class:"form-input",placeholder:"gpt-4o-mini",required:""},null,512),[[vt,r.modelName]])])]),f("div",Uw,[f("div",Ww,[b[14]||(b[14]=f("label",{class:"form-label"},"API ",-1)),nt(f("input",{"onUpdate:modelValue":b[3]||(b[3]=M=>r.baseUrl=M),class:"form-input",placeholder:"https://api.openai.com/v1"},null,512),[[vt,r.baseUrl]])]),f("div",qw,[b[15]||(b[15]=f("label",{class:"form-label"},"",-1)),nt(f("input",{"onUpdate:modelValue":b[4]||(b[4]=M=>r.multiplier=M),class:"form-input",type:"number",min:"0.01",step:"0.01"},null,512),[[vt,r.multiplier,void 0,{number:!0}]])]),f("div",Hw,[b[17]||(b[17]=f("label",{class:"form-label"},"",-1)),nt(f("select",{"onUpdate:modelValue":b[5]||(b[5]=M=>r.isActive=M),class:"form-input"},[...b[16]||(b[16]=[f("option",{value:!0},"",-1),f("option",{value:!1},"",-1)])],512),[[bi,r.isActive]])])]),f("button",{class:"btn btn-primary",type:"submit",disabled:o.value},L(o.value?"...":""),9,jw),l.value?(T(),P("p",Kw,L(l.value),1)):H("",!0)],32)]),f("div",Gw,[b[20]||(b[20]=f("h2",{class:"card-title"},"",-1)),f("div",Jw,[f("button",{class:"btn btn-secondary",type:"button",onClick:d,disabled:i.value},L(i.value?"...":""),9,Xw),n.value?(T(),P("p",Yw,L(n.value),1)):H("",!0),f("div",Qw,[f("table",Zw,[b[19]||(b[19]=f("thead",null,[f("tr",null,[f("th",null,""),f("th",null,""),f("th",null,""),f("th",null,""),f("th",null,""),f("th",null,"")])],-1)),f("tbody",null,[(T(!0),P(bt,null,me(e.value,M=>(T(),P("tr",{key:M.id},[f("td",null,L(M.code),1),f("td",null,L(M.display_name),1),f("td",null,L(M.model_name),1),f("td",null,L((M.multiplier_x100/100).toFixed(2))+"x",1),f("td",null,L(M.is_active?"":""),1),f("td",null,[f("button",{class:"btn btn-secondary btn-sm",type:"button",onClick:D=>g(M)},"",8,t1)])]))),128))])])])])]),a.value?(T(),P("div",e1,[b[27]||(b[27]=f("h2",{class:"card-title"},"",-1)),f("form",{class:"card-content",onSubmit:gs(S,["prevent"])},[f("div",s1,[f("div",i1,[b[21]||(b[21]=f("label",{class:"form-label"},"",-1)),nt(f("input",{"onUpdate:modelValue":b[6]||(b[6]=M=>h.displayName=M),class:"form-input",required:""},null,512),[[vt,h.displayName]])]),f("div",n1,[b[22]||(b[22]=f("label",{class:"form-label"},"",-1)),nt(f("input",{"onUpdate:modelValue":b[7]||(b[7]=M=>h.modelName=M),class:"form-input",required:""},null,512),[[vt,h.modelName]])]),f("div",r1,[b[23]||(b[23]=f("label",{class:"form-label"},"API ",-1)),nt(f("input",{"onUpdate:modelValue":b[8]||(b[8]=M=>h.baseUrl=M),class:"form-input"},null,512),[[vt,h.baseUrl]])])]),f("div",o1,[f("div",l1,[b[24]||(b[24]=f("label",{class:"form-label"},"",-1)),nt(f("input",{"onUpdate:modelValue":b[9]||(b[9]=M=>h.multiplier=M),class:"form-input",type:"number",min:"0.01",step:"0.01"},null,512),[[vt,h.multiplier,void 0,{number:!0}]])]),f("div",a1,[b[26]||(b[26]=f("label",{class:"form-label"},"",-1)),nt(f("select",{"onUpdate:modelValue":b[10]||(b[10]=M=>h.isActive=M),class:"form-input"},[...b[25]||(b[25]=[f("option",{value:!0},"",-1),f("option",{value:!1},"",-1)])],512),[[bi,h.isActive]])])]),f("div",h1,[f("button",{class:"btn btn-primary",type:"submit",disabled:u.value},L(u.value?"...":""),9,u1),f("button",{class:"btn btn-secondary",type:"button",onClick:v},"")]),c.value?(T(),P("p",c1,L(c.value),1)):H("",!0)],32)])):H("",!0)]),_:1}))}},d1=[{path:"/",redirect:"/app"},{path:"/login",component:xp,meta:{guestOnly:!0}},{path:"/register",component:Pp,meta:{guestOnly:!0}},{path:"/verify-email",component:Hp},{path:"/app",component:Bm,meta:{requiresAuth:!0}},{path:"/app/ai",component:U_,meta:{requiresAuth:!0}},{path:"/app/providers",component:Iw,meta:{requiresAuth:!0}},{path:"/app/subscription",component:xv,meta:{requiresAuth:!0}},{path:"/app/admin/codes",component:Hv,meta:{requiresAuth:!0}},{path:"/app/admin/providers",component:f1,meta:{requiresAuth:!0}}],Pu=op({history:Vd(),routes:d1});Pu.beforeEach(async s=>{const t=os();return t.initialized.value||await t.init(),s.meta.requiresAuth&&!t.user.value?"/login":s.meta.guestOnly&&t.user.value?"/app":!0});const Nu=td(lp),p1=os();await p1.init();Nu.use(Pu);Nu.mount("#app");
