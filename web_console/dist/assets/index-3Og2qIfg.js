(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();function Gr(s){const t=Object.create(null);for(const e of s.split(","))t[e]=1;return e=>e in t}const ct={},Ms=[],Te=()=>{},Ma=()=>!1,pn=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),Jr=s=>s.startsWith("onUpdate:"),Dt=Object.assign,Xr=(s,t)=>{const e=s.indexOf(t);e>-1&&s.splice(e,1)},Iu=Object.prototype.hasOwnProperty,at=(s,t)=>Iu.call(s,t),G=Array.isArray,Os=s=>xi(s)==="[object Map]",zs=s=>xi(s)==="[object Set]",Bo=s=>xi(s)==="[object Date]",Y=s=>typeof s=="function",Et=s=>typeof s=="string",de=s=>typeof s=="symbol",pt=s=>s!==null&&typeof s=="object",Oa=s=>(pt(s)||Y(s))&&Y(s.then)&&Y(s.catch),ka=Object.prototype.toString,xi=s=>ka.call(s),Du=s=>xi(s).slice(8,-1),La=s=>xi(s)==="[object Object]",Yr=s=>Et(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,Zs=Gr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),mn=s=>{const t=Object.create(null);return(e=>t[e]||(t[e]=s(e)))},Bu=/-\w/g,ts=mn(s=>s.replace(Bu,t=>t.slice(1).toUpperCase())),$u=/\B([A-Z])/g,bs=mn(s=>s.replace($u,"-$1").toLowerCase()),Aa=mn(s=>s.charAt(0).toUpperCase()+s.slice(1)),In=mn(s=>s?`on${Aa(s)}`:""),Qe=(s,t)=>!Object.is(s,t),Ki=(s,...t)=>{for(let e=0;e<s.length;e++)s[e](...t)},Ra=(s,t,e,i=!1)=>{Object.defineProperty(s,t,{configurable:!0,enumerable:!1,writable:i,value:e})},vn=s=>{const t=parseFloat(s);return isNaN(t)?s:t};let $o;const gn=()=>$o||($o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Qr(s){if(G(s)){const t={};for(let e=0;e<s.length;e++){const i=s[e],n=Et(i)?Wu(i):Qr(i);if(n)for(const r in n)t[r]=n[r]}return t}else if(Et(s)||pt(s))return s}const Vu=/;(?![^(]*\))/g,Fu=/:([^]+)/,zu=/\/\*[^]*?\*\//g;function Wu(s){const t={};return s.replace(zu,"").split(Vu).forEach(e=>{if(e){const i=e.split(Fu);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Ei(s){let t="";if(Et(s))t=s;else if(G(s))for(let e=0;e<s.length;e++){const i=Ei(s[e]);i&&(t+=i+" ")}else if(pt(s))for(const e in s)s[e]&&(t+=e+" ");return t.trim()}const Uu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",qu=Gr(Uu);function Pa(s){return!!s||s===""}function Hu(s,t){if(s.length!==t.length)return!1;let e=!0;for(let i=0;e&&i<s.length;i++)e=Ci(s[i],t[i]);return e}function Ci(s,t){if(s===t)return!0;let e=Bo(s),i=Bo(t);if(e||i)return e&&i?s.getTime()===t.getTime():!1;if(e=de(s),i=de(t),e||i)return s===t;if(e=G(s),i=G(t),e||i)return e&&i?Hu(s,t):!1;if(e=pt(s),i=pt(t),e||i){if(!e||!i)return!1;const n=Object.keys(s).length,r=Object.keys(t).length;if(n!==r)return!1;for(const o in s){const l=s.hasOwnProperty(o),a=t.hasOwnProperty(o);if(l&&!a||!l&&a||!Ci(s[o],t[o]))return!1}}return String(s)===String(t)}function Zr(s,t){return s.findIndex(e=>Ci(e,t))}const Na=s=>!!(s&&s.__v_isRef===!0),O=s=>Et(s)?s:s==null?"":G(s)||pt(s)&&(s.toString===ka||!Y(s.toString))?Na(s)?O(s.value):JSON.stringify(s,Ia,2):String(s),Ia=(s,t)=>Na(t)?Ia(s,t.value):Os(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[i,n],r)=>(e[Dn(i,r)+" =>"]=n,e),{})}:zs(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>Dn(e))}:de(t)?Dn(t):pt(t)&&!G(t)&&!La(t)?String(t):t,Dn=(s,t="")=>{var e;return de(s)?`Symbol(${(e=s.description)!=null?e:t})`:s};let Kt;class ju{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Kt,!t&&Kt&&(this.index=(Kt.scopes||(Kt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=Kt;try{return Kt=this,t()}finally{Kt=e}}}on(){++this._on===1&&(this.prevScope=Kt,Kt=this)}off(){this._on>0&&--this._on===0&&(Kt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let e,i;for(e=0,i=this.effects.length;e<i;e++)this.effects[e].stop();for(this.effects.length=0,e=0,i=this.cleanups.length;e<i;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Ku(){return Kt}let vt;const Bn=new WeakSet;class Da{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Kt&&Kt.active&&Kt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Bn.has(this)&&(Bn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||$a(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Vo(this),Va(this);const t=vt,e=ue;vt=this,ue=!0;try{return this.fn()}finally{Fa(this),vt=t,ue=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)so(t);this.deps=this.depsTail=void 0,Vo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Bn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){br(this)&&this.run()}get dirty(){return br(this)}}let Ba=0,ti,ei;function $a(s,t=!1){if(s.flags|=8,t){s.next=ei,ei=s;return}s.next=ti,ti=s}function to(){Ba++}function eo(){if(--Ba>0)return;if(ei){let t=ei;for(ei=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let s;for(;ti;){let t=ti;for(ti=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){s||(s=i)}t=e}}if(s)throw s}function Va(s){for(let t=s.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Fa(s){let t,e=s.depsTail,i=e;for(;i;){const n=i.prevDep;i.version===-1?(i===e&&(e=n),so(i),Gu(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}s.deps=t,s.depsTail=e}function br(s){for(let t=s.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(za(t.dep.computed)||t.dep.version!==t.version))return!0;return!!s._dirty}function za(s){if(s.flags&4&&!(s.flags&16)||(s.flags&=-17,s.globalVersion===ui)||(s.globalVersion=ui,!s.isSSR&&s.flags&128&&(!s.deps&&!s._dirty||!br(s))))return;s.flags|=2;const t=s.dep,e=vt,i=ue;vt=s,ue=!0;try{Va(s);const n=s.fn(s._value);(t.version===0||Qe(n,s._value))&&(s.flags|=128,s._value=n,t.version++)}catch(n){throw t.version++,n}finally{vt=e,ue=i,Fa(s),s.flags&=-3}}function so(s,t=!1){const{dep:e,prevSub:i,nextSub:n}=s;if(i&&(i.nextSub=n,s.prevSub=void 0),n&&(n.prevSub=i,s.nextSub=void 0),e.subs===s&&(e.subs=i,!i&&e.computed)){e.computed.flags&=-5;for(let r=e.computed.deps;r;r=r.nextDep)so(r,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function Gu(s){const{prevDep:t,nextDep:e}=s;t&&(t.nextDep=e,s.prevDep=void 0),e&&(e.prevDep=t,s.nextDep=void 0)}let ue=!0;const Wa=[];function Ve(){Wa.push(ue),ue=!1}function Fe(){const s=Wa.pop();ue=s===void 0?!0:s}function Vo(s){const{cleanup:t}=s;if(s.cleanup=void 0,t){const e=vt;vt=void 0;try{t()}finally{vt=e}}}let ui=0;class Ju{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class io{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!vt||!ue||vt===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==vt)e=this.activeLink=new Ju(vt,this),vt.deps?(e.prevDep=vt.depsTail,vt.depsTail.nextDep=e,vt.depsTail=e):vt.deps=vt.depsTail=e,Ua(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const i=e.nextDep;i.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=i),e.prevDep=vt.depsTail,e.nextDep=void 0,vt.depsTail.nextDep=e,vt.depsTail=e,vt.deps===e&&(vt.deps=i)}return e}trigger(t){this.version++,ui++,this.notify(t)}notify(t){to();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{eo()}}}function Ua(s){if(s.dep.sc++,s.sub.flags&4){const t=s.dep.computed;if(t&&!s.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)Ua(i)}const e=s.dep.subs;e!==s&&(s.prevSub=e,e&&(e.nextSub=s)),s.dep.subs=s}}const yr=new WeakMap,us=Symbol(""),_r=Symbol(""),ci=Symbol("");function At(s,t,e){if(ue&&vt){let i=yr.get(s);i||yr.set(s,i=new Map);let n=i.get(e);n||(i.set(e,n=new io),n.map=i,n.key=e),n.track()}}function Ne(s,t,e,i,n,r){const o=yr.get(s);if(!o){ui++;return}const l=a=>{a&&a.trigger()};if(to(),t==="clear")o.forEach(l);else{const a=G(s),h=a&&Yr(e);if(a&&e==="length"){const u=Number(i);o.forEach((c,d)=>{(d==="length"||d===ci||!de(d)&&d>=u)&&l(c)})}else switch((e!==void 0||o.has(void 0))&&l(o.get(e)),h&&l(o.get(ci)),t){case"add":a?h&&l(o.get("length")):(l(o.get(us)),Os(s)&&l(o.get(_r)));break;case"delete":a||(l(o.get(us)),Os(s)&&l(o.get(_r)));break;case"set":Os(s)&&l(o.get(us));break}}eo()}function ws(s){const t=lt(s);return t===s?t:(At(t,"iterate",ci),le(s)?t:t.map(pe))}function bn(s){return At(s=lt(s),"iterate",ci),s}function Ke(s,t){return ze(s)?cs(s)?Ps(pe(t)):Ps(t):pe(t)}const Xu={__proto__:null,[Symbol.iterator](){return $n(this,Symbol.iterator,s=>Ke(this,s))},concat(...s){return ws(this).concat(...s.map(t=>G(t)?ws(t):t))},entries(){return $n(this,"entries",s=>(s[1]=Ke(this,s[1]),s))},every(s,t){return Ae(this,"every",s,t,void 0,arguments)},filter(s,t){return Ae(this,"filter",s,t,e=>e.map(i=>Ke(this,i)),arguments)},find(s,t){return Ae(this,"find",s,t,e=>Ke(this,e),arguments)},findIndex(s,t){return Ae(this,"findIndex",s,t,void 0,arguments)},findLast(s,t){return Ae(this,"findLast",s,t,e=>Ke(this,e),arguments)},findLastIndex(s,t){return Ae(this,"findLastIndex",s,t,void 0,arguments)},forEach(s,t){return Ae(this,"forEach",s,t,void 0,arguments)},includes(...s){return Vn(this,"includes",s)},indexOf(...s){return Vn(this,"indexOf",s)},join(s){return ws(this).join(s)},lastIndexOf(...s){return Vn(this,"lastIndexOf",s)},map(s,t){return Ae(this,"map",s,t,void 0,arguments)},pop(){return js(this,"pop")},push(...s){return js(this,"push",s)},reduce(s,...t){return Fo(this,"reduce",s,t)},reduceRight(s,...t){return Fo(this,"reduceRight",s,t)},shift(){return js(this,"shift")},some(s,t){return Ae(this,"some",s,t,void 0,arguments)},splice(...s){return js(this,"splice",s)},toReversed(){return ws(this).toReversed()},toSorted(s){return ws(this).toSorted(s)},toSpliced(...s){return ws(this).toSpliced(...s)},unshift(...s){return js(this,"unshift",s)},values(){return $n(this,"values",s=>Ke(this,s))}};function $n(s,t,e){const i=bn(s),n=i[t]();return i!==s&&!le(s)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.done||(r.value=e(r.value)),r}),n}const Yu=Array.prototype;function Ae(s,t,e,i,n,r){const o=bn(s),l=o!==s&&!le(s),a=o[t];if(a!==Yu[t]){const c=a.apply(s,r);return l?pe(c):c}let h=e;o!==s&&(l?h=function(c,d){return e.call(this,Ke(s,c),d,s)}:e.length>2&&(h=function(c,d){return e.call(this,c,d,s)}));const u=a.call(o,h,i);return l&&n?n(u):u}function Fo(s,t,e,i){const n=bn(s);let r=e;return n!==s&&(le(s)?e.length>3&&(r=function(o,l,a){return e.call(this,o,l,a,s)}):r=function(o,l,a){return e.call(this,o,Ke(s,l),a,s)}),n[t](r,...i)}function Vn(s,t,e){const i=lt(s);At(i,"iterate",ci);const n=i[t](...e);return(n===-1||n===!1)&&oo(e[0])?(e[0]=lt(e[0]),i[t](...e)):n}function js(s,t,e=[]){Ve(),to();const i=lt(s)[t].apply(s,e);return eo(),Fe(),i}const Qu=Gr("__proto__,__v_isRef,__isVue"),qa=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(de));function Zu(s){de(s)||(s=String(s));const t=lt(this);return At(t,"has",s),t.hasOwnProperty(s)}class Ha{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,i){if(e==="__v_skip")return t.__v_skip;const n=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!n;if(e==="__v_isReadonly")return n;if(e==="__v_isShallow")return r;if(e==="__v_raw")return i===(n?r?hc:Ja:r?Ga:Ka).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const o=G(t);if(!n){let a;if(o&&(a=Xu[e]))return a;if(e==="hasOwnProperty")return Zu}const l=Reflect.get(t,e,It(t)?t:i);if((de(e)?qa.has(e):Qu(e))||(n||At(t,"get",e),r))return l;if(It(l)){const a=o&&Yr(e)?l:l.value;return n&&pt(a)?Sr(a):a}return pt(l)?n?Sr(l):zt(l):l}}class ja extends Ha{constructor(t=!1){super(!1,t)}set(t,e,i,n){let r=t[e];const o=G(t)&&Yr(e);if(!this._isShallow){const h=ze(r);if(!le(i)&&!ze(i)&&(r=lt(r),i=lt(i)),!o&&It(r)&&!It(i))return h||(r.value=i),!0}const l=o?Number(e)<t.length:at(t,e),a=Reflect.set(t,e,i,It(t)?t:n);return t===lt(n)&&(l?Qe(i,r)&&Ne(t,"set",e,i):Ne(t,"add",e,i)),a}deleteProperty(t,e){const i=at(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&i&&Ne(t,"delete",e,void 0),n}has(t,e){const i=Reflect.has(t,e);return(!de(e)||!qa.has(e))&&At(t,"has",e),i}ownKeys(t){return At(t,"iterate",G(t)?"length":us),Reflect.ownKeys(t)}}class tc extends Ha{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const ec=new ja,sc=new tc,ic=new ja(!0);const wr=s=>s,Ri=s=>Reflect.getPrototypeOf(s);function nc(s,t,e){return function(...i){const n=this.__v_raw,r=lt(n),o=Os(r),l=s==="entries"||s===Symbol.iterator&&o,a=s==="keys"&&o,h=n[s](...i),u=e?wr:t?Ps:pe;return!t&&At(r,"iterate",a?_r:us),{next(){const{value:c,done:d}=h.next();return d?{value:c,done:d}:{value:l?[u(c[0]),u(c[1])]:u(c),done:d}},[Symbol.iterator](){return this}}}}function Pi(s){return function(...t){return s==="delete"?!1:s==="clear"?void 0:this}}function rc(s,t){const e={get(n){const r=this.__v_raw,o=lt(r),l=lt(n);s||(Qe(n,l)&&At(o,"get",n),At(o,"get",l));const{has:a}=Ri(o),h=t?wr:s?Ps:pe;if(a.call(o,n))return h(r.get(n));if(a.call(o,l))return h(r.get(l));r!==o&&r.get(n)},get size(){const n=this.__v_raw;return!s&&At(lt(n),"iterate",us),n.size},has(n){const r=this.__v_raw,o=lt(r),l=lt(n);return s||(Qe(n,l)&&At(o,"has",n),At(o,"has",l)),n===l?r.has(n):r.has(n)||r.has(l)},forEach(n,r){const o=this,l=o.__v_raw,a=lt(l),h=t?wr:s?Ps:pe;return!s&&At(a,"iterate",us),l.forEach((u,c)=>n.call(r,h(u),h(c),o))}};return Dt(e,s?{add:Pi("add"),set:Pi("set"),delete:Pi("delete"),clear:Pi("clear")}:{add(n){!t&&!le(n)&&!ze(n)&&(n=lt(n));const r=lt(this);return Ri(r).has.call(r,n)||(r.add(n),Ne(r,"add",n,n)),this},set(n,r){!t&&!le(r)&&!ze(r)&&(r=lt(r));const o=lt(this),{has:l,get:a}=Ri(o);let h=l.call(o,n);h||(n=lt(n),h=l.call(o,n));const u=a.call(o,n);return o.set(n,r),h?Qe(r,u)&&Ne(o,"set",n,r):Ne(o,"add",n,r),this},delete(n){const r=lt(this),{has:o,get:l}=Ri(r);let a=o.call(r,n);a||(n=lt(n),a=o.call(r,n)),l&&l.call(r,n);const h=r.delete(n);return a&&Ne(r,"delete",n,void 0),h},clear(){const n=lt(this),r=n.size!==0,o=n.clear();return r&&Ne(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{e[n]=nc(n,s,t)}),e}function no(s,t){const e=rc(s,t);return(i,n,r)=>n==="__v_isReactive"?!s:n==="__v_isReadonly"?s:n==="__v_raw"?i:Reflect.get(at(e,n)&&n in i?e:i,n,r)}const oc={get:no(!1,!1)},lc={get:no(!1,!0)},ac={get:no(!0,!1)};const Ka=new WeakMap,Ga=new WeakMap,Ja=new WeakMap,hc=new WeakMap;function uc(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function cc(s){return s.__v_skip||!Object.isExtensible(s)?0:uc(Du(s))}function zt(s){return ze(s)?s:ro(s,!1,ec,oc,Ka)}function Xa(s){return ro(s,!1,ic,lc,Ga)}function Sr(s){return ro(s,!0,sc,ac,Ja)}function ro(s,t,e,i,n){if(!pt(s)||s.__v_raw&&!(t&&s.__v_isReactive))return s;const r=cc(s);if(r===0)return s;const o=n.get(s);if(o)return o;const l=new Proxy(s,r===2?i:e);return n.set(s,l),l}function cs(s){return ze(s)?cs(s.__v_raw):!!(s&&s.__v_isReactive)}function ze(s){return!!(s&&s.__v_isReadonly)}function le(s){return!!(s&&s.__v_isShallow)}function oo(s){return s?!!s.__v_raw:!1}function lt(s){const t=s&&s.__v_raw;return t?lt(t):s}function fc(s){return!at(s,"__v_skip")&&Object.isExtensible(s)&&Ra(s,"__v_skip",!0),s}const pe=s=>pt(s)?zt(s):s,Ps=s=>pt(s)?Sr(s):s;function It(s){return s?s.__v_isRef===!0:!1}function z(s){return Ya(s,!1)}function dc(s){return Ya(s,!0)}function Ya(s,t){return It(s)?s:new pc(s,t)}class pc{constructor(t,e){this.dep=new io,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:lt(t),this._value=e?t:pe(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,i=this.__v_isShallow||le(t)||ze(t);t=i?t:lt(t),Qe(t,e)&&(this._rawValue=t,this._value=i?t:pe(t),this.dep.trigger())}}function Rt(s){return It(s)?s.value:s}const mc={get:(s,t,e)=>t==="__v_raw"?s:Rt(Reflect.get(s,t,e)),set:(s,t,e,i)=>{const n=s[t];return It(n)&&!It(e)?(n.value=e,!0):Reflect.set(s,t,e,i)}};function Qa(s){return cs(s)?s:new Proxy(s,mc)}class vc{constructor(t,e,i){this.fn=t,this.setter=e,this._value=void 0,this.dep=new io(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ui-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&vt!==this)return $a(this,!0),!0}get value(){const t=this.dep.track();return za(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function gc(s,t,e=!1){let i,n;return Y(s)?i=s:(i=s.get,n=s.set),new vc(i,n,e)}const Ni={},nn=new WeakMap;let as;function bc(s,t=!1,e=as){if(e){let i=nn.get(e);i||nn.set(e,i=[]),i.push(s)}}function yc(s,t,e=ct){const{immediate:i,deep:n,once:r,scheduler:o,augmentJob:l,call:a}=e,h=P=>n?P:le(P)||n===!1||n===0?Ie(P,1):Ie(P);let u,c,d,p,m=!1,g=!1;if(It(s)?(c=()=>s.value,m=le(s)):cs(s)?(c=()=>h(s),m=!0):G(s)?(g=!0,m=s.some(P=>cs(P)||le(P)),c=()=>s.map(P=>{if(It(P))return P.value;if(cs(P))return h(P);if(Y(P))return a?a(P,2):P()})):Y(s)?t?c=a?()=>a(s,2):s:c=()=>{if(d){Ve();try{d()}finally{Fe()}}const P=as;as=u;try{return a?a(s,3,[p]):s(p)}finally{as=P}}:c=Te,t&&n){const P=c,J=n===!0?1/0:n;c=()=>Ie(P(),J)}const S=Ku(),_=()=>{u.stop(),S&&S.active&&Xr(S.effects,u)};if(r&&t){const P=t;t=(...J)=>{P(...J),_()}}let y=g?new Array(s.length).fill(Ni):Ni;const x=P=>{if(!(!(u.flags&1)||!u.dirty&&!P))if(t){const J=u.run();if(n||m||(g?J.some((it,Q)=>Qe(it,y[Q])):Qe(J,y))){d&&d();const it=as;as=u;try{const Q=[J,y===Ni?void 0:g&&y[0]===Ni?[]:y,p];y=J,a?a(t,3,Q):t(...Q)}finally{as=it}}}else u.run()};return l&&l(x),u=new Da(c),u.scheduler=o?()=>o(x,!1):x,p=P=>bc(P,!1,u),d=u.onStop=()=>{const P=nn.get(u);if(P){if(a)a(P,4);else for(const J of P)J();nn.delete(u)}},t?i?x(!0):y=u.run():o?o(x.bind(null,!0),!0):u.run(),_.pause=u.pause.bind(u),_.resume=u.resume.bind(u),_.stop=_,_}function Ie(s,t=1/0,e){if(t<=0||!pt(s)||s.__v_skip||(e=e||new Map,(e.get(s)||0)>=t))return s;if(e.set(s,t),t--,It(s))Ie(s.value,t,e);else if(G(s))for(let i=0;i<s.length;i++)Ie(s[i],t,e);else if(zs(s)||Os(s))s.forEach(i=>{Ie(i,t,e)});else if(La(s)){for(const i in s)Ie(s[i],t,e);for(const i of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,i)&&Ie(s[i],t,e)}return s}function Ti(s,t,e,i){try{return i?s(...i):s()}catch(n){yn(n,t,e)}}function Oe(s,t,e,i){if(Y(s)){const n=Ti(s,t,e,i);return n&&Oa(n)&&n.catch(r=>{yn(r,t,e)}),n}if(G(s)){const n=[];for(let r=0;r<s.length;r++)n.push(Oe(s[r],t,e,i));return n}}function yn(s,t,e,i=!0){const n=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||ct;if(t){let l=t.parent;const a=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${e}`;for(;l;){const u=l.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](s,a,h)===!1)return}l=l.parent}if(r){Ve(),Ti(r,null,10,[s,a,h]),Fe();return}}_c(s,e,n,i,o)}function _c(s,t,e,i=!0,n=!1){if(n)throw s;console.error(s)}const Vt=[];let Se=-1;const ks=[];let Ge=null,xs=0;const Za=Promise.resolve();let rn=null;function Ns(s){const t=rn||Za;return s?t.then(this?s.bind(this):s):t}function wc(s){let t=Se+1,e=Vt.length;for(;t<e;){const i=t+e>>>1,n=Vt[i],r=fi(n);r<s||r===s&&n.flags&2?t=i+1:e=i}return t}function lo(s){if(!(s.flags&1)){const t=fi(s),e=Vt[Vt.length-1];!e||!(s.flags&2)&&t>=fi(e)?Vt.push(s):Vt.splice(wc(t),0,s),s.flags|=1,th()}}function th(){rn||(rn=Za.then(sh))}function Sc(s){G(s)?ks.push(...s):Ge&&s.id===-1?Ge.splice(xs+1,0,s):s.flags&1||(ks.push(s),s.flags|=1),th()}function zo(s,t,e=Se+1){for(;e<Vt.length;e++){const i=Vt[e];if(i&&i.flags&2){if(s&&i.id!==s.uid)continue;Vt.splice(e,1),e--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function eh(s){if(ks.length){const t=[...new Set(ks)].sort((e,i)=>fi(e)-fi(i));if(ks.length=0,Ge){Ge.push(...t);return}for(Ge=t,xs=0;xs<Ge.length;xs++){const e=Ge[xs];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}Ge=null,xs=0}}const fi=s=>s.id==null?s.flags&2?-1:1/0:s.id;function sh(s){try{for(Se=0;Se<Vt.length;Se++){const t=Vt[Se];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ti(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Se<Vt.length;Se++){const t=Vt[Se];t&&(t.flags&=-2)}Se=-1,Vt.length=0,eh(),rn=null,(Vt.length||ks.length)&&sh()}}let Nt=null,ih=null;function on(s){const t=Nt;return Nt=s,ih=s&&s.type.__scopeId||null,t}function Pt(s,t=Nt,e){if(!t||s._n)return s;const i=(...n)=>{i._d&&hn(-1);const r=on(t);let o;try{o=s(...n)}finally{on(r),i._d&&hn(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function rt(s,t){if(Nt===null)return s;const e=xn(Nt),i=s.dirs||(s.dirs=[]);for(let n=0;n<t.length;n++){let[r,o,l,a=ct]=t[n];r&&(Y(r)&&(r={mounted:r,updated:r}),r.deep&&Ie(o),i.push({dir:r,instance:e,value:o,oldValue:void 0,arg:l,modifiers:a}))}return s}function ns(s,t,e,i){const n=s.dirs,r=t&&t.dirs;for(let o=0;o<n.length;o++){const l=n[o];r&&(l.oldValue=r[o].value);let a=l.dir[i];a&&(Ve(),Oe(a,e,8,[s.el,l,s,t]),Fe())}}function Gi(s,t){if(Ft){let e=Ft.provides;const i=Ft.parent&&Ft.parent.provides;i===e&&(e=Ft.provides=Object.create(i)),e[s]=t}}function ce(s,t,e=!1){const i=Sf();if(i||As){let n=As?As._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&s in n)return n[s];if(arguments.length>1)return e&&Y(t)?t.call(i&&i.proxy):t}}const xc=Symbol.for("v-scx"),Ec=()=>ce(xc);function fs(s,t,e){return nh(s,t,e)}function nh(s,t,e=ct){const{immediate:i,deep:n,flush:r,once:o}=e,l=Dt({},e),a=t&&i||!t&&r!=="post";let h;if(mi){if(r==="sync"){const p=Ec();h=p.__watcherHandles||(p.__watcherHandles=[])}else if(!a){const p=()=>{};return p.stop=Te,p.resume=Te,p.pause=Te,p}}const u=Ft;l.call=(p,m,g)=>Oe(p,u,m,g);let c=!1;r==="post"?l.scheduler=p=>{Qt(p,u&&u.suspense)}:r!=="sync"&&(c=!0,l.scheduler=(p,m)=>{m?p():lo(p)}),l.augmentJob=p=>{t&&(p.flags|=4),c&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const d=yc(s,t,l);return mi&&(h?h.push(d):a&&d()),d}function Cc(s,t,e){const i=this.proxy,n=Et(s)?s.includes(".")?rh(i,s):()=>i[s]:s.bind(i,i);let r;Y(t)?r=t:(r=t.handler,e=t);const o=Oi(this),l=nh(n,r.bind(i),e);return o(),l}function rh(s,t){const e=t.split(".");return()=>{let i=s;for(let n=0;n<e.length&&i;n++)i=i[e[n]];return i}}const Tc=Symbol("_vte"),Mc=s=>s.__isTeleport,Oc=Symbol("_leaveCb");function ao(s,t){s.shapeFlag&6&&s.component?(s.transition=t,ao(s.component.subTree,t)):s.shapeFlag&128?(s.ssContent.transition=t.clone(s.ssContent),s.ssFallback.transition=t.clone(s.ssFallback)):s.transition=t}function oh(s,t){return Y(s)?Dt({name:s.name},t,{setup:s}):s}function lh(s){s.ids=[s.ids[0]+s.ids[2]+++"-",0,0]}const ln=new WeakMap;function si(s,t,e,i,n=!1){if(G(s)){s.forEach((m,g)=>si(m,t&&(G(t)?t[g]:t),e,i,n));return}if(Ls(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&si(s,t,e,i.component.subTree);return}const r=i.shapeFlag&4?xn(i.component):i.el,o=n?null:r,{i:l,r:a}=s,h=t&&t.r,u=l.refs===ct?l.refs={}:l.refs,c=l.setupState,d=lt(c),p=c===ct?Ma:m=>at(d,m);if(h!=null&&h!==a){if(Wo(t),Et(h))u[h]=null,p(h)&&(c[h]=null);else if(It(h)){h.value=null;const m=t;m.k&&(u[m.k]=null)}}if(Y(a))Ti(a,l,12,[o,u]);else{const m=Et(a),g=It(a);if(m||g){const S=()=>{if(s.f){const _=m?p(a)?c[a]:u[a]:a.value;if(n)G(_)&&Xr(_,r);else if(G(_))_.includes(r)||_.push(r);else if(m)u[a]=[r],p(a)&&(c[a]=u[a]);else{const y=[r];a.value=y,s.k&&(u[s.k]=y)}}else m?(u[a]=o,p(a)&&(c[a]=o)):g&&(a.value=o,s.k&&(u[s.k]=o))};if(o){const _=()=>{S(),ln.delete(s)};_.id=-1,ln.set(s,_),Qt(_,e)}else Wo(s),S()}}}function Wo(s){const t=ln.get(s);t&&(t.flags|=8,ln.delete(s))}gn().requestIdleCallback;gn().cancelIdleCallback;const Ls=s=>!!s.type.__asyncLoader,ah=s=>s.type.__isKeepAlive;function kc(s,t){hh(s,"a",t)}function Lc(s,t){hh(s,"da",t)}function hh(s,t,e=Ft){const i=s.__wdc||(s.__wdc=()=>{let n=e;for(;n;){if(n.isDeactivated)return;n=n.parent}return s()});if(_n(t,i,e),e){let n=e.parent;for(;n&&n.parent;)ah(n.parent.vnode)&&Ac(i,t,e,n),n=n.parent}}function Ac(s,t,e,i){const n=_n(t,s,i,!0);Mi(()=>{Xr(i[t],n)},e)}function _n(s,t,e=Ft,i=!1){if(e){const n=e[s]||(e[s]=[]),r=t.__weh||(t.__weh=(...o)=>{Ve();const l=Oi(e),a=Oe(t,e,s,o);return l(),Fe(),a});return i?n.unshift(r):n.push(r),r}}const Ue=s=>(t,e=Ft)=>{(!mi||s==="sp")&&_n(s,(...i)=>t(...i),e)},Rc=Ue("bm"),fe=Ue("m"),Pc=Ue("bu"),Nc=Ue("u"),Ic=Ue("bum"),Mi=Ue("um"),Dc=Ue("sp"),Bc=Ue("rtg"),$c=Ue("rtc");function Vc(s,t=Ft){_n("ec",s,t)}const Fc=Symbol.for("v-ndc");function ke(s,t,e,i){let n;const r=e,o=G(s);if(o||Et(s)){const l=o&&cs(s);let a=!1,h=!1;l&&(a=!le(s),h=ze(s),s=bn(s)),n=new Array(s.length);for(let u=0,c=s.length;u<c;u++)n[u]=t(a?h?Ps(pe(s[u])):pe(s[u]):s[u],u,void 0,r)}else if(typeof s=="number"){n=new Array(s);for(let l=0;l<s;l++)n[l]=t(l+1,l,void 0,r)}else if(pt(s))if(s[Symbol.iterator])n=Array.from(s,(l,a)=>t(l,a,void 0,r));else{const l=Object.keys(s);n=new Array(l.length);for(let a=0,h=l.length;a<h;a++){const u=l[a];n[a]=t(s[u],u,a,r)}}else n=[];return n}function zc(s,t,e={},i,n){if(Nt.ce||Nt.parent&&Ls(Nt.parent)&&Nt.parent.ce){const h=Object.keys(e).length>0;return C(),ae(_t,null,[ft("slot",e,i)],h?-2:64)}let r=s[t];r&&r._c&&(r._d=!1),C();const o=r&&uh(r(e)),l=e.key||o&&o.key,a=ae(_t,{key:(l&&!de(l)?l:`_${t}`)+(!o&&i?"_fb":"")},o||[],o&&s._===1?64:-2);return a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function uh(s){return s.some(t=>pi(t)?!(t.type===We||t.type===_t&&!uh(t.children)):!0)?s:null}const xr=s=>s?kh(s)?xn(s):xr(s.parent):null,ii=Dt(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>xr(s.parent),$root:s=>xr(s.root),$host:s=>s.ce,$emit:s=>s.emit,$options:s=>fh(s),$forceUpdate:s=>s.f||(s.f=()=>{lo(s.update)}),$nextTick:s=>s.n||(s.n=Ns.bind(s.proxy)),$watch:s=>Cc.bind(s)}),Fn=(s,t)=>s!==ct&&!s.__isScriptSetup&&at(s,t),Wc={get({_:s},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:i,data:n,props:r,accessCache:o,type:l,appContext:a}=s;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return i[t];case 2:return n[t];case 4:return e[t];case 3:return r[t]}else{if(Fn(i,t))return o[t]=1,i[t];if(n!==ct&&at(n,t))return o[t]=2,n[t];if(at(r,t))return o[t]=3,r[t];if(e!==ct&&at(e,t))return o[t]=4,e[t];Er&&(o[t]=0)}}const h=ii[t];let u,c;if(h)return t==="$attrs"&&At(s.attrs,"get",""),h(s);if((u=l.__cssModules)&&(u=u[t]))return u;if(e!==ct&&at(e,t))return o[t]=4,e[t];if(c=a.config.globalProperties,at(c,t))return c[t]},set({_:s},t,e){const{data:i,setupState:n,ctx:r}=s;return Fn(n,t)?(n[t]=e,!0):i!==ct&&at(i,t)?(i[t]=e,!0):at(s.props,t)||t[0]==="$"&&t.slice(1)in s?!1:(r[t]=e,!0)},has({_:{data:s,setupState:t,accessCache:e,ctx:i,appContext:n,props:r,type:o}},l){let a;return!!(e[l]||s!==ct&&l[0]!=="$"&&at(s,l)||Fn(t,l)||at(r,l)||at(i,l)||at(ii,l)||at(n.config.globalProperties,l)||(a=o.__cssModules)&&a[l])},defineProperty(s,t,e){return e.get!=null?s._.accessCache[t]=0:at(e,"value")&&this.set(s,t,e.value,null),Reflect.defineProperty(s,t,e)}};function Uo(s){return G(s)?s.reduce((t,e)=>(t[e]=null,t),{}):s}let Er=!0;function Uc(s){const t=fh(s),e=s.proxy,i=s.ctx;Er=!1,t.beforeCreate&&qo(t.beforeCreate,s,"bc");const{data:n,computed:r,methods:o,watch:l,provide:a,inject:h,created:u,beforeMount:c,mounted:d,beforeUpdate:p,updated:m,activated:g,deactivated:S,beforeDestroy:_,beforeUnmount:y,destroyed:x,unmounted:P,render:J,renderTracked:it,renderTriggered:Q,errorCaptured:ht,serverPrefetch:Ct,expose:Tt,inheritAttrs:Mt,components:ee,directives:Lt,filters:se}=t;if(h&&qc(h,i,null),o)for(const q in o){const Z=o[q];Y(Z)&&(i[q]=Z.bind(e))}if(n){const q=n.call(e,e);pt(q)&&(s.data=zt(q))}if(Er=!0,r)for(const q in r){const Z=r[q],Xt=Y(Z)?Z.bind(e,e):Y(Z.get)?Z.get.bind(e,e):Te,ie=!Y(Z)&&Y(Z.set)?Z.set.bind(e):Te,Ut=dt({get:Xt,set:ie});Object.defineProperty(i,q,{enumerable:!0,configurable:!0,get:()=>Ut.value,set:qt=>Ut.value=qt})}if(l)for(const q in l)ch(l[q],i,e,q);if(a){const q=Y(a)?a.call(e):a;Reflect.ownKeys(q).forEach(Z=>{Gi(Z,q[Z])})}u&&qo(u,s,"c");function k(q,Z){G(Z)?Z.forEach(Xt=>q(Xt.bind(e))):Z&&q(Z.bind(e))}if(k(Rc,c),k(fe,d),k(Pc,p),k(Nc,m),k(kc,g),k(Lc,S),k(Vc,ht),k($c,it),k(Bc,Q),k(Ic,y),k(Mi,P),k(Dc,Ct),G(Tt))if(Tt.length){const q=s.exposed||(s.exposed={});Tt.forEach(Z=>{Object.defineProperty(q,Z,{get:()=>e[Z],set:Xt=>e[Z]=Xt,enumerable:!0})})}else s.exposed||(s.exposed={});J&&s.render===Te&&(s.render=J),Mt!=null&&(s.inheritAttrs=Mt),ee&&(s.components=ee),Lt&&(s.directives=Lt),Ct&&lh(s)}function qc(s,t,e=Te){G(s)&&(s=Cr(s));for(const i in s){const n=s[i];let r;pt(n)?"default"in n?r=ce(n.from||i,n.default,!0):r=ce(n.from||i):r=ce(n),It(r)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[i]=r}}function qo(s,t,e){Oe(G(s)?s.map(i=>i.bind(t.proxy)):s.bind(t.proxy),t,e)}function ch(s,t,e,i){let n=i.includes(".")?rh(e,i):()=>e[i];if(Et(s)){const r=t[s];Y(r)&&fs(n,r)}else if(Y(s))fs(n,s.bind(e));else if(pt(s))if(G(s))s.forEach(r=>ch(r,t,e,i));else{const r=Y(s.handler)?s.handler.bind(e):t[s.handler];Y(r)&&fs(n,r,s)}}function fh(s){const t=s.type,{mixins:e,extends:i}=t,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=s.appContext,l=r.get(t);let a;return l?a=l:!n.length&&!e&&!i?a=t:(a={},n.length&&n.forEach(h=>an(a,h,o,!0)),an(a,t,o)),pt(t)&&r.set(t,a),a}function an(s,t,e,i=!1){const{mixins:n,extends:r}=t;r&&an(s,r,e,!0),n&&n.forEach(o=>an(s,o,e,!0));for(const o in t)if(!(i&&o==="expose")){const l=Hc[o]||e&&e[o];s[o]=l?l(s[o],t[o]):t[o]}return s}const Hc={data:Ho,props:jo,emits:jo,methods:Ys,computed:Ys,beforeCreate:Bt,created:Bt,beforeMount:Bt,mounted:Bt,beforeUpdate:Bt,updated:Bt,beforeDestroy:Bt,beforeUnmount:Bt,destroyed:Bt,unmounted:Bt,activated:Bt,deactivated:Bt,errorCaptured:Bt,serverPrefetch:Bt,components:Ys,directives:Ys,watch:Kc,provide:Ho,inject:jc};function Ho(s,t){return t?s?function(){return Dt(Y(s)?s.call(this,this):s,Y(t)?t.call(this,this):t)}:t:s}function jc(s,t){return Ys(Cr(s),Cr(t))}function Cr(s){if(G(s)){const t={};for(let e=0;e<s.length;e++)t[s[e]]=s[e];return t}return s}function Bt(s,t){return s?[...new Set([].concat(s,t))]:t}function Ys(s,t){return s?Dt(Object.create(null),s,t):t}function jo(s,t){return s?G(s)&&G(t)?[...new Set([...s,...t])]:Dt(Object.create(null),Uo(s),Uo(t??{})):t}function Kc(s,t){if(!s)return t;if(!t)return s;const e=Dt(Object.create(null),s);for(const i in t)e[i]=Bt(s[i],t[i]);return e}function dh(){return{app:null,config:{isNativeTag:Ma,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Gc=0;function Jc(s,t){return function(i,n=null){Y(i)||(i=Dt({},i)),n!=null&&!pt(n)&&(n=null);const r=dh(),o=new WeakSet,l=[];let a=!1;const h=r.app={_uid:Gc++,_component:i,_props:n,_container:null,_context:r,_instance:null,version:Of,get config(){return r.config},set config(u){},use(u,...c){return o.has(u)||(u&&Y(u.install)?(o.add(u),u.install(h,...c)):Y(u)&&(o.add(u),u(h,...c))),h},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),h},component(u,c){return c?(r.components[u]=c,h):r.components[u]},directive(u,c){return c?(r.directives[u]=c,h):r.directives[u]},mount(u,c,d){if(!a){const p=h._ceVNode||ft(i,n);return p.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),s(p,u,d),a=!0,h._container=u,u.__vue_app__=h,xn(p.component)}},onUnmount(u){l.push(u)},unmount(){a&&(Oe(l,h._instance,16),s(null,h._container),delete h._container.__vue_app__)},provide(u,c){return r.provides[u]=c,h},runWithContext(u){const c=As;As=h;try{return u()}finally{As=c}}};return h}}let As=null;const Xc=(s,t)=>t==="modelValue"||t==="model-value"?s.modelModifiers:s[`${t}Modifiers`]||s[`${ts(t)}Modifiers`]||s[`${bs(t)}Modifiers`];function Yc(s,t,...e){if(s.isUnmounted)return;const i=s.vnode.props||ct;let n=e;const r=t.startsWith("update:"),o=r&&Xc(i,t.slice(7));o&&(o.trim&&(n=e.map(u=>Et(u)?u.trim():u)),o.number&&(n=e.map(vn)));let l,a=i[l=In(t)]||i[l=In(ts(t))];!a&&r&&(a=i[l=In(bs(t))]),a&&Oe(a,s,6,n);const h=i[l+"Once"];if(h){if(!s.emitted)s.emitted={};else if(s.emitted[l])return;s.emitted[l]=!0,Oe(h,s,6,n)}}const Qc=new WeakMap;function ph(s,t,e=!1){const i=e?Qc:t.emitsCache,n=i.get(s);if(n!==void 0)return n;const r=s.emits;let o={},l=!1;if(!Y(s)){const a=h=>{const u=ph(h,t,!0);u&&(l=!0,Dt(o,u))};!e&&t.mixins.length&&t.mixins.forEach(a),s.extends&&a(s.extends),s.mixins&&s.mixins.forEach(a)}return!r&&!l?(pt(s)&&i.set(s,null),null):(G(r)?r.forEach(a=>o[a]=null):Dt(o,r),pt(s)&&i.set(s,o),o)}function wn(s,t){return!s||!pn(t)?!1:(t=t.slice(2).replace(/Once$/,""),at(s,t[0].toLowerCase()+t.slice(1))||at(s,bs(t))||at(s,t))}function Ko(s){const{type:t,vnode:e,proxy:i,withProxy:n,propsOptions:[r],slots:o,attrs:l,emit:a,render:h,renderCache:u,props:c,data:d,setupState:p,ctx:m,inheritAttrs:g}=s,S=on(s);let _,y;try{if(e.shapeFlag&4){const P=n||i,J=P;_=xe(h.call(J,P,u,c,p,d,m)),y=l}else{const P=t;_=xe(P.length>1?P(c,{attrs:l,slots:o,emit:a}):P(c,null)),y=t.props?l:Zc(l)}}catch(P){ni.length=0,yn(P,s,1),_=ft(We)}let x=_;if(y&&g!==!1){const P=Object.keys(y),{shapeFlag:J}=x;P.length&&J&7&&(r&&P.some(Jr)&&(y=tf(y,r)),x=Is(x,y,!1,!0))}return e.dirs&&(x=Is(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(e.dirs):e.dirs),e.transition&&ao(x,e.transition),_=x,on(S),_}const Zc=s=>{let t;for(const e in s)(e==="class"||e==="style"||pn(e))&&((t||(t={}))[e]=s[e]);return t},tf=(s,t)=>{const e={};for(const i in s)(!Jr(i)||!(i.slice(9)in t))&&(e[i]=s[i]);return e};function ef(s,t,e){const{props:i,children:n,component:r}=s,{props:o,children:l,patchFlag:a}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&a>=0){if(a&1024)return!0;if(a&16)return i?Go(i,o,h):!!o;if(a&8){const u=t.dynamicProps;for(let c=0;c<u.length;c++){const d=u[c];if(o[d]!==i[d]&&!wn(h,d))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:i===o?!1:i?o?Go(i,o,h):!0:!!o;return!1}function Go(s,t,e){const i=Object.keys(t);if(i.length!==Object.keys(s).length)return!0;for(let n=0;n<i.length;n++){const r=i[n];if(t[r]!==s[r]&&!wn(e,r))return!0}return!1}function sf({vnode:s,parent:t},e){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===s&&(i.el=s.el),i===s)(s=t.vnode).el=e,t=t.parent;else break}}const mh={},vh=()=>Object.create(mh),gh=s=>Object.getPrototypeOf(s)===mh;function nf(s,t,e,i=!1){const n={},r=vh();s.propsDefaults=Object.create(null),bh(s,t,n,r);for(const o in s.propsOptions[0])o in n||(n[o]=void 0);e?s.props=i?n:Xa(n):s.type.props?s.props=n:s.props=r,s.attrs=r}function rf(s,t,e,i){const{props:n,attrs:r,vnode:{patchFlag:o}}=s,l=lt(n),[a]=s.propsOptions;let h=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=s.vnode.dynamicProps;for(let c=0;c<u.length;c++){let d=u[c];if(wn(s.emitsOptions,d))continue;const p=t[d];if(a)if(at(r,d))p!==r[d]&&(r[d]=p,h=!0);else{const m=ts(d);n[m]=Tr(a,l,m,p,s,!1)}else p!==r[d]&&(r[d]=p,h=!0)}}}else{bh(s,t,n,r)&&(h=!0);let u;for(const c in l)(!t||!at(t,c)&&((u=bs(c))===c||!at(t,u)))&&(a?e&&(e[c]!==void 0||e[u]!==void 0)&&(n[c]=Tr(a,l,c,void 0,s,!0)):delete n[c]);if(r!==l)for(const c in r)(!t||!at(t,c))&&(delete r[c],h=!0)}h&&Ne(s.attrs,"set","")}function bh(s,t,e,i){const[n,r]=s.propsOptions;let o=!1,l;if(t)for(let a in t){if(Zs(a))continue;const h=t[a];let u;n&&at(n,u=ts(a))?!r||!r.includes(u)?e[u]=h:(l||(l={}))[u]=h:wn(s.emitsOptions,a)||(!(a in i)||h!==i[a])&&(i[a]=h,o=!0)}if(r){const a=lt(e),h=l||ct;for(let u=0;u<r.length;u++){const c=r[u];e[c]=Tr(n,a,c,h[c],s,!at(h,c))}}return o}function Tr(s,t,e,i,n,r){const o=s[e];if(o!=null){const l=at(o,"default");if(l&&i===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&Y(a)){const{propsDefaults:h}=n;if(e in h)i=h[e];else{const u=Oi(n);i=h[e]=a.call(null,t),u()}}else i=a;n.ce&&n.ce._setProp(e,i)}o[0]&&(r&&!l?i=!1:o[1]&&(i===""||i===bs(e))&&(i=!0))}return i}const of=new WeakMap;function yh(s,t,e=!1){const i=e?of:t.propsCache,n=i.get(s);if(n)return n;const r=s.props,o={},l=[];let a=!1;if(!Y(s)){const u=c=>{a=!0;const[d,p]=yh(c,t,!0);Dt(o,d),p&&l.push(...p)};!e&&t.mixins.length&&t.mixins.forEach(u),s.extends&&u(s.extends),s.mixins&&s.mixins.forEach(u)}if(!r&&!a)return pt(s)&&i.set(s,Ms),Ms;if(G(r))for(let u=0;u<r.length;u++){const c=ts(r[u]);Jo(c)&&(o[c]=ct)}else if(r)for(const u in r){const c=ts(u);if(Jo(c)){const d=r[u],p=o[c]=G(d)||Y(d)?{type:d}:Dt({},d),m=p.type;let g=!1,S=!0;if(G(m))for(let _=0;_<m.length;++_){const y=m[_],x=Y(y)&&y.name;if(x==="Boolean"){g=!0;break}else x==="String"&&(S=!1)}else g=Y(m)&&m.name==="Boolean";p[0]=g,p[1]=S,(g||at(p,"default"))&&l.push(c)}}const h=[o,l];return pt(s)&&i.set(s,h),h}function Jo(s){return s[0]!=="$"&&!Zs(s)}const ho=s=>s==="_"||s==="_ctx"||s==="$stable",uo=s=>G(s)?s.map(xe):[xe(s)],lf=(s,t,e)=>{if(t._n)return t;const i=Pt((...n)=>uo(t(...n)),e);return i._c=!1,i},_h=(s,t,e)=>{const i=s._ctx;for(const n in s){if(ho(n))continue;const r=s[n];if(Y(r))t[n]=lf(n,r,i);else if(r!=null){const o=uo(r);t[n]=()=>o}}},wh=(s,t)=>{const e=uo(t);s.slots.default=()=>e},Sh=(s,t,e)=>{for(const i in t)(e||!ho(i))&&(s[i]=t[i])},af=(s,t,e)=>{const i=s.slots=vh();if(s.vnode.shapeFlag&32){const n=t._;n?(Sh(i,t,e),e&&Ra(i,"_",n,!0)):_h(t,i)}else t&&wh(s,t)},hf=(s,t,e)=>{const{vnode:i,slots:n}=s;let r=!0,o=ct;if(i.shapeFlag&32){const l=t._;l?e&&l===1?r=!1:Sh(n,t,e):(r=!t.$stable,_h(t,n)),o=t}else t&&(wh(s,t),o={default:1});if(r)for(const l in n)!ho(l)&&o[l]==null&&delete n[l]},Qt=pf;function uf(s){return cf(s)}function cf(s,t){const e=gn();e.__VUE__=!0;const{insert:i,remove:n,patchProp:r,createElement:o,createText:l,createComment:a,setText:h,setElementText:u,parentNode:c,nextSibling:d,setScopeId:p=Te,insertStaticContent:m}=s,g=(v,b,w,E=null,L=null,T=null,B=void 0,D=null,I=!!b.dynamicChildren)=>{if(v===b)return;v&&!Ks(v,b)&&(E=M(v),qt(v,L,T,!0),v=null),b.patchFlag===-2&&(I=!1,b.dynamicChildren=null);const{type:R,ref:K,shapeFlag:V}=b;switch(R){case Sn:S(v,b,w,E);break;case We:_(v,b,w,E);break;case Ji:v==null&&y(b,w,E,B);break;case _t:ee(v,b,w,E,L,T,B,D,I);break;default:V&1?J(v,b,w,E,L,T,B,D,I):V&6?Lt(v,b,w,E,L,T,B,D,I):(V&64||V&128)&&R.process(v,b,w,E,L,T,B,D,I,H)}K!=null&&L?si(K,v&&v.ref,T,b||v,!b):K==null&&v&&v.ref!=null&&si(v.ref,null,T,v,!0)},S=(v,b,w,E)=>{if(v==null)i(b.el=l(b.children),w,E);else{const L=b.el=v.el;b.children!==v.children&&h(L,b.children)}},_=(v,b,w,E)=>{v==null?i(b.el=a(b.children||""),w,E):b.el=v.el},y=(v,b,w,E)=>{[v.el,v.anchor]=m(v.children,b,w,E,v.el,v.anchor)},x=({el:v,anchor:b},w,E)=>{let L;for(;v&&v!==b;)L=d(v),i(v,w,E),v=L;i(b,w,E)},P=({el:v,anchor:b})=>{let w;for(;v&&v!==b;)w=d(v),n(v),v=w;n(b)},J=(v,b,w,E,L,T,B,D,I)=>{if(b.type==="svg"?B="svg":b.type==="math"&&(B="mathml"),v==null)it(b,w,E,L,T,B,D,I);else{const R=v.el&&v.el._isVueCE?v.el:null;try{R&&R._beginPatch(),Ct(v,b,L,T,B,D,I)}finally{R&&R._endPatch()}}},it=(v,b,w,E,L,T,B,D)=>{let I,R;const{props:K,shapeFlag:V,transition:j,dirs:X}=v;if(I=v.el=o(v.type,T,K&&K.is,K),V&8?u(I,v.children):V&16&&ht(v.children,I,null,E,L,zn(v,T),B,D),X&&ns(v,null,E,"created"),Q(I,v,v.scopeId,B,E),K){for(const mt in K)mt!=="value"&&!Zs(mt)&&r(I,mt,null,K[mt],T,E);"value"in K&&r(I,"value",null,K.value,T),(R=K.onVnodeBeforeMount)&&_e(R,E,v)}X&&ns(v,null,E,"beforeMount");const st=ff(L,j);st&&j.beforeEnter(I),i(I,b,w),((R=K&&K.onVnodeMounted)||st||X)&&Qt(()=>{R&&_e(R,E,v),st&&j.enter(I),X&&ns(v,null,E,"mounted")},L)},Q=(v,b,w,E,L)=>{if(w&&p(v,w),E)for(let T=0;T<E.length;T++)p(v,E[T]);if(L){let T=L.subTree;if(b===T||Th(T.type)&&(T.ssContent===b||T.ssFallback===b)){const B=L.vnode;Q(v,B,B.scopeId,B.slotScopeIds,L.parent)}}},ht=(v,b,w,E,L,T,B,D,I=0)=>{for(let R=I;R<v.length;R++){const K=v[R]=D?Je(v[R]):xe(v[R]);g(null,K,b,w,E,L,T,B,D)}},Ct=(v,b,w,E,L,T,B)=>{const D=b.el=v.el;let{patchFlag:I,dynamicChildren:R,dirs:K}=b;I|=v.patchFlag&16;const V=v.props||ct,j=b.props||ct;let X;if(w&&rs(w,!1),(X=j.onVnodeBeforeUpdate)&&_e(X,w,b,v),K&&ns(b,v,w,"beforeUpdate"),w&&rs(w,!0),(V.innerHTML&&j.innerHTML==null||V.textContent&&j.textContent==null)&&u(D,""),R?Tt(v.dynamicChildren,R,D,w,E,zn(b,L),T):B||Z(v,b,D,null,w,E,zn(b,L),T,!1),I>0){if(I&16)Mt(D,V,j,w,L);else if(I&2&&V.class!==j.class&&r(D,"class",null,j.class,L),I&4&&r(D,"style",V.style,j.style,L),I&8){const st=b.dynamicProps;for(let mt=0;mt<st.length;mt++){const ut=st[mt],Ht=V[ut],jt=j[ut];(jt!==Ht||ut==="value")&&r(D,ut,Ht,jt,L,w)}}I&1&&v.children!==b.children&&u(D,b.children)}else!B&&R==null&&Mt(D,V,j,w,L);((X=j.onVnodeUpdated)||K)&&Qt(()=>{X&&_e(X,w,b,v),K&&ns(b,v,w,"updated")},E)},Tt=(v,b,w,E,L,T,B)=>{for(let D=0;D<b.length;D++){const I=v[D],R=b[D],K=I.el&&(I.type===_t||!Ks(I,R)||I.shapeFlag&198)?c(I.el):w;g(I,R,K,null,E,L,T,B,!0)}},Mt=(v,b,w,E,L)=>{if(b!==w){if(b!==ct)for(const T in b)!Zs(T)&&!(T in w)&&r(v,T,b[T],null,L,E);for(const T in w){if(Zs(T))continue;const B=w[T],D=b[T];B!==D&&T!=="value"&&r(v,T,D,B,L,E)}"value"in w&&r(v,"value",b.value,w.value,L)}},ee=(v,b,w,E,L,T,B,D,I)=>{const R=b.el=v?v.el:l(""),K=b.anchor=v?v.anchor:l("");let{patchFlag:V,dynamicChildren:j,slotScopeIds:X}=b;X&&(D=D?D.concat(X):X),v==null?(i(R,w,E),i(K,w,E),ht(b.children||[],w,K,L,T,B,D,I)):V>0&&V&64&&j&&v.dynamicChildren&&v.dynamicChildren.length===j.length?(Tt(v.dynamicChildren,j,w,L,T,B,D),(b.key!=null||L&&b===L.subTree)&&xh(v,b,!0)):Z(v,b,w,K,L,T,B,D,I)},Lt=(v,b,w,E,L,T,B,D,I)=>{b.slotScopeIds=D,v==null?b.shapeFlag&512?L.ctx.activate(b,w,E,B,I):se(b,w,E,L,T,B,I):W(v,b,I)},se=(v,b,w,E,L,T,B)=>{const D=v.component=wf(v,E,L);if(ah(v)&&(D.ctx.renderer=H),xf(D,!1,B),D.asyncDep){if(L&&L.registerDep(D,k,B),!v.el){const I=D.subTree=ft(We);_(null,I,b,w),v.placeholder=I.el}}else k(D,v,b,w,L,T,B)},W=(v,b,w)=>{const E=b.component=v.component;if(ef(v,b,w))if(E.asyncDep&&!E.asyncResolved){q(E,b,w);return}else E.next=b,E.update();else b.el=v.el,E.vnode=b},k=(v,b,w,E,L,T,B)=>{const D=()=>{if(v.isMounted){let{next:V,bu:j,u:X,parent:st,vnode:mt}=v;{const be=Eh(v);if(be){V&&(V.el=mt.el,q(v,V,B)),be.asyncDep.then(()=>{v.isUnmounted||D()});return}}let ut=V,Ht;rs(v,!1),V?(V.el=mt.el,q(v,V,B)):V=mt,j&&Ki(j),(Ht=V.props&&V.props.onVnodeBeforeUpdate)&&_e(Ht,st,V,mt),rs(v,!0);const jt=Ko(v),ge=v.subTree;v.subTree=jt,g(ge,jt,c(ge.el),M(ge),v,L,T),V.el=jt.el,ut===null&&sf(v,jt.el),X&&Qt(X,L),(Ht=V.props&&V.props.onVnodeUpdated)&&Qt(()=>_e(Ht,st,V,mt),L)}else{let V;const{el:j,props:X}=b,{bm:st,m:mt,parent:ut,root:Ht,type:jt}=v,ge=Ls(b);rs(v,!1),st&&Ki(st),!ge&&(V=X&&X.onVnodeBeforeMount)&&_e(V,ut,b),rs(v,!0);{Ht.ce&&Ht.ce._def.shadowRoot!==!1&&Ht.ce._injectChildStyle(jt);const be=v.subTree=Ko(v);g(null,be,w,E,v,L,T),b.el=be.el}if(mt&&Qt(mt,L),!ge&&(V=X&&X.onVnodeMounted)){const be=b;Qt(()=>_e(V,ut,be),L)}(b.shapeFlag&256||ut&&Ls(ut.vnode)&&ut.vnode.shapeFlag&256)&&v.a&&Qt(v.a,L),v.isMounted=!0,b=w=E=null}};v.scope.on();const I=v.effect=new Da(D);v.scope.off();const R=v.update=I.run.bind(I),K=v.job=I.runIfDirty.bind(I);K.i=v,K.id=v.uid,I.scheduler=()=>lo(K),rs(v,!0),R()},q=(v,b,w)=>{b.component=v;const E=v.vnode.props;v.vnode=b,v.next=null,rf(v,b.props,E,w),hf(v,b.children,w),Ve(),zo(v),Fe()},Z=(v,b,w,E,L,T,B,D,I=!1)=>{const R=v&&v.children,K=v?v.shapeFlag:0,V=b.children,{patchFlag:j,shapeFlag:X}=b;if(j>0){if(j&128){ie(R,V,w,E,L,T,B,D,I);return}else if(j&256){Xt(R,V,w,E,L,T,B,D,I);return}}X&8?(K&16&&ne(R,L,T),V!==R&&u(w,V)):K&16?X&16?ie(R,V,w,E,L,T,B,D,I):ne(R,L,T,!0):(K&8&&u(w,""),X&16&&ht(V,w,E,L,T,B,D,I))},Xt=(v,b,w,E,L,T,B,D,I)=>{v=v||Ms,b=b||Ms;const R=v.length,K=b.length,V=Math.min(R,K);let j;for(j=0;j<V;j++){const X=b[j]=I?Je(b[j]):xe(b[j]);g(v[j],X,w,null,L,T,B,D,I)}R>K?ne(v,L,T,!0,!1,V):ht(b,w,E,L,T,B,D,I,V)},ie=(v,b,w,E,L,T,B,D,I)=>{let R=0;const K=b.length;let V=v.length-1,j=K-1;for(;R<=V&&R<=j;){const X=v[R],st=b[R]=I?Je(b[R]):xe(b[R]);if(Ks(X,st))g(X,st,w,null,L,T,B,D,I);else break;R++}for(;R<=V&&R<=j;){const X=v[V],st=b[j]=I?Je(b[j]):xe(b[j]);if(Ks(X,st))g(X,st,w,null,L,T,B,D,I);else break;V--,j--}if(R>V){if(R<=j){const X=j+1,st=X<K?b[X].el:E;for(;R<=j;)g(null,b[R]=I?Je(b[R]):xe(b[R]),w,st,L,T,B,D,I),R++}}else if(R>j)for(;R<=V;)qt(v[R],L,T,!0),R++;else{const X=R,st=R,mt=new Map;for(R=st;R<=j;R++){const Yt=b[R]=I?Je(b[R]):xe(b[R]);Yt.key!=null&&mt.set(Yt.key,R)}let ut,Ht=0;const jt=j-st+1;let ge=!1,be=0;const Hs=new Array(jt);for(R=0;R<jt;R++)Hs[R]=0;for(R=X;R<=V;R++){const Yt=v[R];if(Ht>=jt){qt(Yt,L,T,!0);continue}let ye;if(Yt.key!=null)ye=mt.get(Yt.key);else for(ut=st;ut<=j;ut++)if(Hs[ut-st]===0&&Ks(Yt,b[ut])){ye=ut;break}ye===void 0?qt(Yt,L,T,!0):(Hs[ye-st]=R+1,ye>=be?be=ye:ge=!0,g(Yt,b[ye],w,null,L,T,B,D,I),Ht++)}const No=ge?df(Hs):Ms;for(ut=No.length-1,R=jt-1;R>=0;R--){const Yt=st+R,ye=b[Yt],Io=b[Yt+1],Do=Yt+1<K?Io.el||Ch(Io):E;Hs[R]===0?g(null,ye,w,Do,L,T,B,D,I):ge&&(ut<0||R!==No[ut]?Ut(ye,w,Do,2):ut--)}}},Ut=(v,b,w,E,L=null)=>{const{el:T,type:B,transition:D,children:I,shapeFlag:R}=v;if(R&6){Ut(v.component.subTree,b,w,E);return}if(R&128){v.suspense.move(b,w,E);return}if(R&64){B.move(v,b,w,H);return}if(B===_t){i(T,b,w);for(let V=0;V<I.length;V++)Ut(I[V],b,w,E);i(v.anchor,b,w);return}if(B===Ji){x(v,b,w);return}if(E!==2&&R&1&&D)if(E===0)D.beforeEnter(T),i(T,b,w),Qt(()=>D.enter(T),L);else{const{leave:V,delayLeave:j,afterLeave:X}=D,st=()=>{v.ctx.isUnmounted?n(T):i(T,b,w)},mt=()=>{T._isLeaving&&T[Oc](!0),V(T,()=>{st(),X&&X()})};j?j(T,st,mt):mt()}else i(T,b,w)},qt=(v,b,w,E=!1,L=!1)=>{const{type:T,props:B,ref:D,children:I,dynamicChildren:R,shapeFlag:K,patchFlag:V,dirs:j,cacheIndex:X}=v;if(V===-2&&(L=!1),D!=null&&(Ve(),si(D,null,w,v,!0),Fe()),X!=null&&(b.renderCache[X]=void 0),K&256){b.ctx.deactivate(v);return}const st=K&1&&j,mt=!Ls(v);let ut;if(mt&&(ut=B&&B.onVnodeBeforeUnmount)&&_e(ut,b,v),K&6)is(v.component,w,E);else{if(K&128){v.suspense.unmount(w,E);return}st&&ns(v,null,b,"beforeUnmount"),K&64?v.type.remove(v,b,w,H,E):R&&!R.hasOnce&&(T!==_t||V>0&&V&64)?ne(R,b,w,!1,!0):(T===_t&&V&384||!L&&K&16)&&ne(I,b,w),E&&ys(v)}(mt&&(ut=B&&B.onVnodeUnmounted)||st)&&Qt(()=>{ut&&_e(ut,b,v),st&&ns(v,null,b,"unmounted")},w)},ys=v=>{const{type:b,el:w,anchor:E,transition:L}=v;if(b===_t){_s(w,E);return}if(b===Ji){P(v);return}const T=()=>{n(w),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(v.shapeFlag&1&&L&&!L.persisted){const{leave:B,delayLeave:D}=L,I=()=>B(w,T);D?D(v.el,T,I):I()}else T()},_s=(v,b)=>{let w;for(;v!==b;)w=d(v),n(v),v=w;n(b)},is=(v,b,w)=>{const{bum:E,scope:L,job:T,subTree:B,um:D,m:I,a:R}=v;Xo(I),Xo(R),E&&Ki(E),L.stop(),T&&(T.flags|=8,qt(B,v,b,w)),D&&Qt(D,b),Qt(()=>{v.isUnmounted=!0},b)},ne=(v,b,w,E=!1,L=!1,T=0)=>{for(let B=T;B<v.length;B++)qt(v[B],b,w,E,L)},M=v=>{if(v.shapeFlag&6)return M(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const b=d(v.anchor||v.el),w=b&&b[Tc];return w?d(w):b};let F=!1;const $=(v,b,w)=>{let E;v==null?b._vnode&&(qt(b._vnode,null,null,!0),E=b._vnode.component):g(b._vnode||null,v,b,null,null,null,w),b._vnode=v,F||(F=!0,zo(E),eh(),F=!1)},H={p:g,um:qt,m:Ut,r:ys,mt:se,mc:ht,pc:Z,pbc:Tt,n:M,o:s};return{render:$,hydrate:void 0,createApp:Jc($)}}function zn({type:s,props:t},e){return e==="svg"&&s==="foreignObject"||e==="mathml"&&s==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function rs({effect:s,job:t},e){e?(s.flags|=32,t.flags|=4):(s.flags&=-33,t.flags&=-5)}function ff(s,t){return(!s||s&&!s.pendingBranch)&&t&&!t.persisted}function xh(s,t,e=!1){const i=s.children,n=t.children;if(G(i)&&G(n))for(let r=0;r<i.length;r++){const o=i[r];let l=n[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[r]=Je(n[r]),l.el=o.el),!e&&l.patchFlag!==-2&&xh(o,l)),l.type===Sn&&(l.patchFlag!==-1?l.el=o.el:l.__elIndex=r+(s.type===_t?1:0)),l.type===We&&!l.el&&(l.el=o.el)}}function df(s){const t=s.slice(),e=[0];let i,n,r,o,l;const a=s.length;for(i=0;i<a;i++){const h=s[i];if(h!==0){if(n=e[e.length-1],s[n]<h){t[i]=n,e.push(i);continue}for(r=0,o=e.length-1;r<o;)l=r+o>>1,s[e[l]]<h?r=l+1:o=l;h<s[e[r]]&&(r>0&&(t[i]=e[r-1]),e[r]=i)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=t[o];return e}function Eh(s){const t=s.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Eh(t)}function Xo(s){if(s)for(let t=0;t<s.length;t++)s[t].flags|=8}function Ch(s){if(s.placeholder)return s.placeholder;const t=s.component;return t?Ch(t.subTree):null}const Th=s=>s.__isSuspense;function pf(s,t){t&&t.pendingBranch?G(s)?t.effects.push(...s):t.effects.push(s):Sc(s)}const _t=Symbol.for("v-fgt"),Sn=Symbol.for("v-txt"),We=Symbol.for("v-cmt"),Ji=Symbol.for("v-stc"),ni=[];let te=null;function C(s=!1){ni.push(te=s?null:[])}function mf(){ni.pop(),te=ni[ni.length-1]||null}let di=1;function hn(s,t=!1){di+=s,s<0&&te&&t&&(te.hasOnce=!0)}function Mh(s){return s.dynamicChildren=di>0?te||Ms:null,mf(),di>0&&te&&te.push(s),s}function A(s,t,e,i,n,r){return Mh(f(s,t,e,i,n,r,!0))}function ae(s,t,e,i,n){return Mh(ft(s,t,e,i,n,!0))}function pi(s){return s?s.__v_isVNode===!0:!1}function Ks(s,t){return s.type===t.type&&s.key===t.key}const Oh=({key:s})=>s??null,Xi=({ref:s,ref_key:t,ref_for:e})=>(typeof s=="number"&&(s=""+s),s!=null?Et(s)||It(s)||Y(s)?{i:Nt,r:s,k:t,f:!!e}:s:null);function f(s,t=null,e=null,i=0,n=null,r=s===_t?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:s,props:t,key:t&&Oh(t),ref:t&&Xi(t),scopeId:ih,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Nt};return l?(fo(a,e),r&128&&s.normalize(a)):e&&(a.shapeFlag|=Et(e)?8:16),di>0&&!o&&te&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&te.push(a),a}const ft=vf;function vf(s,t=null,e=null,i=0,n=null,r=!1){if((!s||s===Fc)&&(s=We),pi(s)){const l=Is(s,t,!0);return e&&fo(l,e),di>0&&!r&&te&&(l.shapeFlag&6?te[te.indexOf(s)]=l:te.push(l)),l.patchFlag=-2,l}if(Mf(s)&&(s=s.__vccOpts),t){t=gf(t);let{class:l,style:a}=t;l&&!Et(l)&&(t.class=Ei(l)),pt(a)&&(oo(a)&&!G(a)&&(a=Dt({},a)),t.style=Qr(a))}const o=Et(s)?1:Th(s)?128:Mc(s)?64:pt(s)?4:Y(s)?2:0;return f(s,t,e,i,n,o,r,!0)}function gf(s){return s?oo(s)||gh(s)?Dt({},s):s:null}function Is(s,t,e=!1,i=!1){const{props:n,ref:r,patchFlag:o,children:l,transition:a}=s,h=t?bf(n||{},t):n,u={__v_isVNode:!0,__v_skip:!0,type:s.type,props:h,key:h&&Oh(h),ref:t&&t.ref?e&&r?G(r)?r.concat(Xi(t)):[r,Xi(t)]:Xi(t):r,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:l,target:s.target,targetStart:s.targetStart,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:t&&s.type!==_t?o===-1?16:o|16:o,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:a,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&Is(s.ssContent),ssFallback:s.ssFallback&&Is(s.ssFallback),placeholder:s.placeholder,el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return a&&i&&ao(u,a.clone(u)),u}function Zt(s=" ",t=0){return ft(Sn,null,s,t)}function co(s,t){const e=ft(Ji,null,s);return e.staticCount=t,e}function U(s="",t=!1){return t?(C(),ae(We,null,s)):ft(We,null,s)}function xe(s){return s==null||typeof s=="boolean"?ft(We):G(s)?ft(_t,null,s.slice()):pi(s)?Je(s):ft(Sn,null,String(s))}function Je(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:Is(s)}function fo(s,t){let e=0;const{shapeFlag:i}=s;if(t==null)t=null;else if(G(t))e=16;else if(typeof t=="object")if(i&65){const n=t.default;n&&(n._c&&(n._d=!1),fo(s,n()),n._c&&(n._d=!0));return}else{e=32;const n=t._;!n&&!gh(t)?t._ctx=Nt:n===3&&Nt&&(Nt.slots._===1?t._=1:(t._=2,s.patchFlag|=1024))}else Y(t)?(t={default:t,_ctx:Nt},e=32):(t=String(t),i&64?(e=16,t=[Zt(t)]):e=8);s.children=t,s.shapeFlag|=e}function bf(...s){const t={};for(let e=0;e<s.length;e++){const i=s[e];for(const n in i)if(n==="class")t.class!==i.class&&(t.class=Ei([t.class,i.class]));else if(n==="style")t.style=Qr([t.style,i.style]);else if(pn(n)){const r=t[n],o=i[n];o&&r!==o&&!(G(r)&&r.includes(o))&&(t[n]=r?[].concat(r,o):o)}else n!==""&&(t[n]=i[n])}return t}function _e(s,t,e,i=null){Oe(s,t,7,[e,i])}const yf=dh();let _f=0;function wf(s,t,e){const i=s.type,n=(t?t.appContext:s.appContext)||yf,r={uid:_f++,vnode:s,type:i,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ju(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:yh(i,n),emitsOptions:ph(i,n),emit:null,emitted:null,propsDefaults:ct,inheritAttrs:i.inheritAttrs,ctx:ct,data:ct,props:ct,attrs:ct,slots:ct,refs:ct,setupState:ct,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Yc.bind(null,r),s.ce&&s.ce(r),r}let Ft=null;const Sf=()=>Ft||Nt;let un,Mr;{const s=gn(),t=(e,i)=>{let n;return(n=s[e])||(n=s[e]=[]),n.push(i),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};un=t("__VUE_INSTANCE_SETTERS__",e=>Ft=e),Mr=t("__VUE_SSR_SETTERS__",e=>mi=e)}const Oi=s=>{const t=Ft;return un(s),s.scope.on(),()=>{s.scope.off(),un(t)}},Yo=()=>{Ft&&Ft.scope.off(),un(null)};function kh(s){return s.vnode.shapeFlag&4}let mi=!1;function xf(s,t=!1,e=!1){t&&Mr(t);const{props:i,children:n}=s.vnode,r=kh(s);nf(s,i,r,t),af(s,n,e||t);const o=r?Ef(s,t):void 0;return t&&Mr(!1),o}function Ef(s,t){const e=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,Wc);const{setup:i}=e;if(i){Ve();const n=s.setupContext=i.length>1?Tf(s):null,r=Oi(s),o=Ti(i,s,0,[s.props,n]),l=Oa(o);if(Fe(),r(),(l||s.sp)&&!Ls(s)&&lh(s),l){if(o.then(Yo,Yo),t)return o.then(a=>{Qo(s,a)}).catch(a=>{yn(a,s,0)});s.asyncDep=o}else Qo(s,o)}else Lh(s)}function Qo(s,t,e){Y(t)?s.type.__ssrInlineRender?s.ssrRender=t:s.render=t:pt(t)&&(s.setupState=Qa(t)),Lh(s)}function Lh(s,t,e){const i=s.type;s.render||(s.render=i.render||Te);{const n=Oi(s);Ve();try{Uc(s)}finally{Fe(),n()}}}const Cf={get(s,t){return At(s,"get",""),s[t]}};function Tf(s){const t=e=>{s.exposed=e||{}};return{attrs:new Proxy(s.attrs,Cf),slots:s.slots,emit:s.emit,expose:t}}function xn(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(Qa(fc(s.exposed)),{get(t,e){if(e in t)return t[e];if(e in ii)return ii[e](s)},has(t,e){return e in t||e in ii}})):s.proxy}function Mf(s){return Y(s)&&"__vccOpts"in s}const dt=(s,t)=>gc(s,t,mi);function Ah(s,t,e){try{hn(-1);const i=arguments.length;return i===2?pt(t)&&!G(t)?pi(t)?ft(s,null,[t]):ft(s,t):ft(s,null,t):(i>3?e=Array.prototype.slice.call(arguments,2):i===3&&pi(e)&&(e=[e]),ft(s,t,e))}finally{hn(1)}}const Of="3.5.26";let Or;const Zo=typeof window<"u"&&window.trustedTypes;if(Zo)try{Or=Zo.createPolicy("vue",{createHTML:s=>s})}catch{}const Rh=Or?s=>Or.createHTML(s):s=>s,kf="http://www.w3.org/2000/svg",Lf="http://www.w3.org/1998/Math/MathML",Pe=typeof document<"u"?document:null,tl=Pe&&Pe.createElement("template"),Af={insert:(s,t,e)=>{t.insertBefore(s,e||null)},remove:s=>{const t=s.parentNode;t&&t.removeChild(s)},createElement:(s,t,e,i)=>{const n=t==="svg"?Pe.createElementNS(kf,s):t==="mathml"?Pe.createElementNS(Lf,s):e?Pe.createElement(s,{is:e}):Pe.createElement(s);return s==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:s=>Pe.createTextNode(s),createComment:s=>Pe.createComment(s),setText:(s,t)=>{s.nodeValue=t},setElementText:(s,t)=>{s.textContent=t},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>Pe.querySelector(s),setScopeId(s,t){s.setAttribute(t,"")},insertStaticContent(s,t,e,i,n,r){const o=e?e.previousSibling:t.lastChild;if(n&&(n===r||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),e),!(n===r||!(n=n.nextSibling)););else{tl.innerHTML=Rh(i==="svg"?`<svg>${s}</svg>`:i==="mathml"?`<math>${s}</math>`:s);const l=tl.content;if(i==="svg"||i==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}t.insertBefore(l,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},Rf=Symbol("_vtc");function Pf(s,t,e){const i=s[Rf];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?s.removeAttribute("class"):e?s.setAttribute("class",t):s.className=t}const el=Symbol("_vod"),Nf=Symbol("_vsh"),If=Symbol(""),Df=/(?:^|;)\s*display\s*:/;function Bf(s,t,e){const i=s.style,n=Et(e);let r=!1;if(e&&!n){if(t)if(Et(t))for(const o of t.split(";")){const l=o.slice(0,o.indexOf(":")).trim();e[l]==null&&Yi(i,l,"")}else for(const o in t)e[o]==null&&Yi(i,o,"");for(const o in e)o==="display"&&(r=!0),Yi(i,o,e[o])}else if(n){if(t!==e){const o=i[If];o&&(e+=";"+o),i.cssText=e,r=Df.test(e)}}else t&&s.removeAttribute("style");el in s&&(s[el]=r?i.display:"",s[Nf]&&(i.display="none"))}const sl=/\s*!important$/;function Yi(s,t,e){if(G(e))e.forEach(i=>Yi(s,t,i));else if(e==null&&(e=""),t.startsWith("--"))s.setProperty(t,e);else{const i=$f(s,t);sl.test(e)?s.setProperty(bs(i),e.replace(sl,""),"important"):s[i]=e}}const il=["Webkit","Moz","ms"],Wn={};function $f(s,t){const e=Wn[t];if(e)return e;let i=ts(t);if(i!=="filter"&&i in s)return Wn[t]=i;i=Aa(i);for(let n=0;n<il.length;n++){const r=il[n]+i;if(r in s)return Wn[t]=r}return t}const nl="http://www.w3.org/1999/xlink";function rl(s,t,e,i,n,r=qu(t)){i&&t.startsWith("xlink:")?e==null?s.removeAttributeNS(nl,t.slice(6,t.length)):s.setAttributeNS(nl,t,e):e==null||r&&!Pa(e)?s.removeAttribute(t):s.setAttribute(t,r?"":de(e)?String(e):e)}function ol(s,t,e,i,n){if(t==="innerHTML"||t==="textContent"){e!=null&&(s[t]=t==="innerHTML"?Rh(e):e);return}const r=s.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?s.getAttribute("value")||"":s.value,a=e==null?s.type==="checkbox"?"on":"":String(e);(l!==a||!("_value"in s))&&(s.value=a),e==null&&s.removeAttribute(t),s._value=e;return}let o=!1;if(e===""||e==null){const l=typeof s[t];l==="boolean"?e=Pa(e):e==null&&l==="string"?(e="",o=!0):l==="number"&&(e=0,o=!0)}try{s[t]=e}catch{}o&&s.removeAttribute(n||t)}function Ye(s,t,e,i){s.addEventListener(t,e,i)}function Vf(s,t,e,i){s.removeEventListener(t,e,i)}const ll=Symbol("_vei");function Ff(s,t,e,i,n=null){const r=s[ll]||(s[ll]={}),o=r[t];if(i&&o)o.value=i;else{const[l,a]=zf(t);if(i){const h=r[t]=qf(i,n);Ye(s,l,h,a)}else o&&(Vf(s,l,o,a),r[t]=void 0)}}const al=/(?:Once|Passive|Capture)$/;function zf(s){let t;if(al.test(s)){t={};let i;for(;i=s.match(al);)s=s.slice(0,s.length-i[0].length),t[i[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):bs(s.slice(2)),t]}let Un=0;const Wf=Promise.resolve(),Uf=()=>Un||(Wf.then(()=>Un=0),Un=Date.now());function qf(s,t){const e=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=e.attached)return;Oe(Hf(i,e.value),t,5,[i])};return e.value=s,e.attached=Uf(),e}function Hf(s,t){if(G(t)){const e=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{e.call(s),s._stopped=!0},t.map(i=>n=>!n._stopped&&i&&i(n))}else return t}const hl=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,jf=(s,t,e,i,n,r)=>{const o=n==="svg";t==="class"?Pf(s,i,o):t==="style"?Bf(s,e,i):pn(t)?Jr(t)||Ff(s,t,e,i,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Kf(s,t,i,o))?(ol(s,t,i),!s.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&rl(s,t,i,o,r,t!=="value")):s._isVueCE&&(/[A-Z]/.test(t)||!Et(i))?ol(s,ts(t),i,r,t):(t==="true-value"?s._trueValue=i:t==="false-value"&&(s._falseValue=i),rl(s,t,i,o))};function Kf(s,t,e,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in s&&hl(t)&&Y(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&s.tagName==="IFRAME"||t==="form"||t==="list"&&s.tagName==="INPUT"||t==="type"&&s.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=s.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return hl(t)&&Et(e)?!1:t in s}const Ds=s=>{const t=s.props["onUpdate:modelValue"]||!1;return G(t)?e=>Ki(t,e):t};function Gf(s){s.target.composing=!0}function ul(s){const t=s.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const $e=Symbol("_assign");function cl(s,t,e){return t&&(s=s.trim()),e&&(s=vn(s)),s}const gt={created(s,{modifiers:{lazy:t,trim:e,number:i}},n){s[$e]=Ds(n);const r=i||n.props&&n.props.type==="number";Ye(s,t?"change":"input",o=>{o.target.composing||s[$e](cl(s.value,e,r))}),(e||r)&&Ye(s,"change",()=>{s.value=cl(s.value,e,r)}),t||(Ye(s,"compositionstart",Gf),Ye(s,"compositionend",ul),Ye(s,"change",ul))},mounted(s,{value:t}){s.value=t??""},beforeUpdate(s,{value:t,oldValue:e,modifiers:{lazy:i,trim:n,number:r}},o){if(s[$e]=Ds(o),s.composing)return;const l=(r||s.type==="number")&&!/^0\d/.test(s.value)?vn(s.value):s.value,a=t??"";l!==a&&(document.activeElement===s&&s.type!=="range"&&(i&&t===e||n&&s.value.trim()===a)||(s.value=a))}},Jf={deep:!0,created(s,t,e){s[$e]=Ds(e),Ye(s,"change",()=>{const i=s._modelValue,n=gi(s),r=s.checked,o=s[$e];if(G(i)){const l=Zr(i,n),a=l!==-1;if(r&&!a)o(i.concat(n));else if(!r&&a){const h=[...i];h.splice(l,1),o(h)}}else if(zs(i)){const l=new Set(i);r?l.add(n):l.delete(n),o(l)}else o(Ph(s,r))})},mounted:fl,beforeUpdate(s,t,e){s[$e]=Ds(e),fl(s,t,e)}};function fl(s,{value:t,oldValue:e},i){s._modelValue=t;let n;if(G(t))n=Zr(t,i.props.value)>-1;else if(zs(t))n=t.has(i.props.value);else{if(t===e)return;n=Ci(t,Ph(s,!0))}s.checked!==n&&(s.checked=n)}const vi={deep:!0,created(s,{value:t,modifiers:{number:e}},i){const n=zs(t);Ye(s,"change",()=>{const r=Array.prototype.filter.call(s.options,o=>o.selected).map(o=>e?vn(gi(o)):gi(o));s[$e](s.multiple?n?new Set(r):r:r[0]),s._assigning=!0,Ns(()=>{s._assigning=!1})}),s[$e]=Ds(i)},mounted(s,{value:t}){dl(s,t)},beforeUpdate(s,t,e){s[$e]=Ds(e)},updated(s,{value:t}){s._assigning||dl(s,t)}};function dl(s,t){const e=s.multiple,i=G(t);if(!(e&&!i&&!zs(t))){for(let n=0,r=s.options.length;n<r;n++){const o=s.options[n],l=gi(o);if(e)if(i){const a=typeof l;a==="string"||a==="number"?o.selected=t.some(h=>String(h)===String(l)):o.selected=Zr(t,l)>-1}else o.selected=t.has(l);else if(Ci(gi(o),t)){s.selectedIndex!==n&&(s.selectedIndex=n);return}}!e&&s.selectedIndex!==-1&&(s.selectedIndex=-1)}}function gi(s){return"_value"in s?s._value:s.value}function Ph(s,t){const e=t?"_trueValue":"_falseValue";return e in s?s[e]:t}const Xf=["ctrl","shift","alt","meta"],Yf={stop:s=>s.stopPropagation(),prevent:s=>s.preventDefault(),self:s=>s.target!==s.currentTarget,ctrl:s=>!s.ctrlKey,shift:s=>!s.shiftKey,alt:s=>!s.altKey,meta:s=>!s.metaKey,left:s=>"button"in s&&s.button!==0,middle:s=>"button"in s&&s.button!==1,right:s=>"button"in s&&s.button!==2,exact:(s,t)=>Xf.some(e=>s[`${e}Key`]&&!t.includes(e))},ps=(s,t)=>{const e=s._withMods||(s._withMods={}),i=t.join(".");return e[i]||(e[i]=((n,...r)=>{for(let o=0;o<t.length;o++){const l=Yf[t[o]];if(l&&l(n,t))return}return s(n,...r)}))},Qf=Dt({patchProp:jf},Af);let pl;function Zf(){return pl||(pl=uf(Qf))}const td=((...s)=>{const t=Zf().createApp(...s),{mount:e}=t;return t.mount=i=>{const n=sd(i);if(!n)return;const r=t._component;!Y(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=e(n,!1,ed(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t});function ed(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function sd(s){return Et(s)?document.querySelector(s):s}const Es=typeof document<"u";function Nh(s){return typeof s=="object"||"displayName"in s||"props"in s||"__vccOpts"in s}function id(s){return s.__esModule||s[Symbol.toStringTag]==="Module"||s.default&&Nh(s.default)}const ot=Object.assign;function qn(s,t){const e={};for(const i in t){const n=t[i];e[i]=me(n)?n.map(s):s(n)}return e}const ri=()=>{},me=Array.isArray;function ml(s,t){const e={};for(const i in s)e[i]=i in t?t[i]:s[i];return e}const Ih=/#/g,nd=/&/g,rd=/\//g,od=/=/g,ld=/\?/g,Dh=/\+/g,ad=/%5B/g,hd=/%5D/g,Bh=/%5E/g,ud=/%60/g,$h=/%7B/g,cd=/%7C/g,Vh=/%7D/g,fd=/%20/g;function po(s){return s==null?"":encodeURI(""+s).replace(cd,"|").replace(ad,"[").replace(hd,"]")}function dd(s){return po(s).replace($h,"{").replace(Vh,"}").replace(Bh,"^")}function kr(s){return po(s).replace(Dh,"%2B").replace(fd,"+").replace(Ih,"%23").replace(nd,"%26").replace(ud,"`").replace($h,"{").replace(Vh,"}").replace(Bh,"^")}function pd(s){return kr(s).replace(od,"%3D")}function md(s){return po(s).replace(Ih,"%23").replace(ld,"%3F")}function vd(s){return md(s).replace(rd,"%2F")}function bi(s){if(s==null)return null;try{return decodeURIComponent(""+s)}catch{}return""+s}const gd=/\/$/,bd=s=>s.replace(gd,"");function Hn(s,t,e="/"){let i,n={},r="",o="";const l=t.indexOf("#");let a=t.indexOf("?");return a=l>=0&&a>l?-1:a,a>=0&&(i=t.slice(0,a),r=t.slice(a,l>0?l:t.length),n=s(r.slice(1))),l>=0&&(i=i||t.slice(0,l),o=t.slice(l,t.length)),i=Sd(i??t,e),{fullPath:i+r+o,path:i,query:n,hash:bi(o)}}function yd(s,t){const e=t.query?s(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function vl(s,t){return!t||!s.toLowerCase().startsWith(t.toLowerCase())?s:s.slice(t.length)||"/"}function _d(s,t,e){const i=t.matched.length-1,n=e.matched.length-1;return i>-1&&i===n&&Bs(t.matched[i],e.matched[n])&&Fh(t.params,e.params)&&s(t.query)===s(e.query)&&t.hash===e.hash}function Bs(s,t){return(s.aliasOf||s)===(t.aliasOf||t)}function Fh(s,t){if(Object.keys(s).length!==Object.keys(t).length)return!1;for(var e in s)if(!wd(s[e],t[e]))return!1;return!0}function wd(s,t){return me(s)?gl(s,t):me(t)?gl(t,s):s?.valueOf()===t?.valueOf()}function gl(s,t){return me(t)?s.length===t.length&&s.every((e,i)=>e===t[i]):s.length===1&&s[0]===t}function Sd(s,t){if(s.startsWith("/"))return s;if(!s)return t;const e=t.split("/"),i=s.split("/"),n=i[i.length-1];(n===".."||n===".")&&i.push("");let r=e.length-1,o,l;for(o=0;o<i.length;o++)if(l=i[o],l!==".")if(l==="..")r>1&&r--;else break;return e.slice(0,r).join("/")+"/"+i.slice(o).join("/")}const He={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Lr=(function(s){return s.pop="pop",s.push="push",s})({}),jn=(function(s){return s.back="back",s.forward="forward",s.unknown="",s})({});function xd(s){if(!s)if(Es){const t=document.querySelector("base");s=t&&t.getAttribute("href")||"/",s=s.replace(/^\w+:\/\/[^\/]+/,"")}else s="/";return s[0]!=="/"&&s[0]!=="#"&&(s="/"+s),bd(s)}const Ed=/^[^#]+#/;function Cd(s,t){return s.replace(Ed,"#")+t}function Td(s,t){const e=document.documentElement.getBoundingClientRect(),i=s.getBoundingClientRect();return{behavior:t.behavior,left:i.left-e.left-(t.left||0),top:i.top-e.top-(t.top||0)}}const En=()=>({left:window.scrollX,top:window.scrollY});function Md(s){let t;if("el"in s){const e=s.el,i=typeof e=="string"&&e.startsWith("#"),n=typeof e=="string"?i?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!n)return;t=Td(n,s)}else t=s;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function bl(s,t){return(history.state?history.state.position-t:-1)+s}const Ar=new Map;function Od(s,t){Ar.set(s,t)}function kd(s){const t=Ar.get(s);return Ar.delete(s),t}function Ld(s){return typeof s=="string"||s&&typeof s=="object"}function zh(s){return typeof s=="string"||typeof s=="symbol"}let wt=(function(s){return s[s.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",s[s.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",s[s.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",s[s.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",s[s.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",s})({});const Wh=Symbol("");wt.MATCHER_NOT_FOUND+"",wt.NAVIGATION_GUARD_REDIRECT+"",wt.NAVIGATION_ABORTED+"",wt.NAVIGATION_CANCELLED+"",wt.NAVIGATION_DUPLICATED+"";function $s(s,t){return ot(new Error,{type:s,[Wh]:!0},t)}function Re(s,t){return s instanceof Error&&Wh in s&&(t==null||!!(s.type&t))}const Ad=["params","query","hash"];function Rd(s){if(typeof s=="string")return s;if(s.path!=null)return s.path;const t={};for(const e of Ad)e in s&&(t[e]=s[e]);return JSON.stringify(t,null,2)}function Pd(s){const t={};if(s===""||s==="?")return t;const e=(s[0]==="?"?s.slice(1):s).split("&");for(let i=0;i<e.length;++i){const n=e[i].replace(Dh," "),r=n.indexOf("="),o=bi(r<0?n:n.slice(0,r)),l=r<0?null:bi(n.slice(r+1));if(o in t){let a=t[o];me(a)||(a=t[o]=[a]),a.push(l)}else t[o]=l}return t}function yl(s){let t="";for(let e in s){const i=s[e];if(e=pd(e),i==null){i!==void 0&&(t+=(t.length?"&":"")+e);continue}(me(i)?i.map(n=>n&&kr(n)):[i&&kr(i)]).forEach(n=>{n!==void 0&&(t+=(t.length?"&":"")+e,n!=null&&(t+="="+n))})}return t}function Nd(s){const t={};for(const e in s){const i=s[e];i!==void 0&&(t[e]=me(i)?i.map(n=>n==null?null:""+n):i==null?i:""+i)}return t}const Id=Symbol(""),_l=Symbol(""),Cn=Symbol(""),mo=Symbol(""),Rr=Symbol("");function Gs(){let s=[];function t(i){return s.push(i),()=>{const n=s.indexOf(i);n>-1&&s.splice(n,1)}}function e(){s=[]}return{add:t,list:()=>s.slice(),reset:e}}function Xe(s,t,e,i,n,r=o=>o()){const o=i&&(i.enterCallbacks[n]=i.enterCallbacks[n]||[]);return()=>new Promise((l,a)=>{const h=d=>{d===!1?a($s(wt.NAVIGATION_ABORTED,{from:e,to:t})):d instanceof Error?a(d):Ld(d)?a($s(wt.NAVIGATION_GUARD_REDIRECT,{from:t,to:d})):(o&&i.enterCallbacks[n]===o&&typeof d=="function"&&o.push(d),l())},u=r(()=>s.call(i&&i.instances[n],t,e,h));let c=Promise.resolve(u);s.length<3&&(c=c.then(h)),c.catch(d=>a(d))})}function Kn(s,t,e,i,n=r=>r()){const r=[];for(const o of s)for(const l in o.components){let a=o.components[l];if(!(t!=="beforeRouteEnter"&&!o.instances[l]))if(Nh(a)){const h=(a.__vccOpts||a)[t];h&&r.push(Xe(h,e,i,o,l,n))}else{let h=a();r.push(()=>h.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const c=id(u)?u.default:u;o.mods[l]=u,o.components[l]=c;const d=(c.__vccOpts||c)[t];return d&&Xe(d,e,i,o,l,n)()}))}}return r}function Dd(s,t){const e=[],i=[],n=[],r=Math.max(t.matched.length,s.matched.length);for(let o=0;o<r;o++){const l=t.matched[o];l&&(s.matched.find(h=>Bs(h,l))?i.push(l):e.push(l));const a=s.matched[o];a&&(t.matched.find(h=>Bs(h,a))||n.push(a))}return[e,i,n]}let Bd=()=>location.protocol+"//"+location.host;function Uh(s,t){const{pathname:e,search:i,hash:n}=t,r=s.indexOf("#");if(r>-1){let o=n.includes(s.slice(r))?s.slice(r).length:1,l=n.slice(o);return l[0]!=="/"&&(l="/"+l),vl(l,"")}return vl(e,s)+i+n}function $d(s,t,e,i){let n=[],r=[],o=null;const l=({state:d})=>{const p=Uh(s,location),m=e.value,g=t.value;let S=0;if(d){if(e.value=p,t.value=d,o&&o===m){o=null;return}S=g?d.position-g.position:0}else i(p);n.forEach(_=>{_(e.value,m,{delta:S,type:Lr.pop,direction:S?S>0?jn.forward:jn.back:jn.unknown})})};function a(){o=e.value}function h(d){n.push(d);const p=()=>{const m=n.indexOf(d);m>-1&&n.splice(m,1)};return r.push(p),p}function u(){if(document.visibilityState==="hidden"){const{history:d}=window;if(!d.state)return;d.replaceState(ot({},d.state,{scroll:En()}),"")}}function c(){for(const d of r)d();r=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:a,listen:h,destroy:c}}function wl(s,t,e,i=!1,n=!1){return{back:s,current:t,forward:e,replaced:i,position:window.history.length,scroll:n?En():null}}function Vd(s){const{history:t,location:e}=window,i={value:Uh(s,e)},n={value:t.state};n.value||r(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(a,h,u){const c=s.indexOf("#"),d=c>-1?(e.host&&document.querySelector("base")?s:s.slice(c))+a:Bd()+s+a;try{t[u?"replaceState":"pushState"](h,"",d),n.value=h}catch(p){console.error(p),e[u?"replace":"assign"](d)}}function o(a,h){r(a,ot({},t.state,wl(n.value.back,a,n.value.forward,!0),h,{position:n.value.position}),!0),i.value=a}function l(a,h){const u=ot({},n.value,t.state,{forward:a,scroll:En()});r(u.current,u,!0),r(a,ot({},wl(i.value,a,null),{position:u.position+1},h),!1),i.value=a}return{location:i,state:n,push:l,replace:o}}function Fd(s){s=xd(s);const t=Vd(s),e=$d(s,t.state,t.location,t.replace);function i(r,o=!0){o||e.pauseListeners(),history.go(r)}const n=ot({location:"",base:s,go:i,createHref:Cd.bind(null,s)},t,e);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}let hs=(function(s){return s[s.Static=0]="Static",s[s.Param=1]="Param",s[s.Group=2]="Group",s})({});var Ot=(function(s){return s[s.Static=0]="Static",s[s.Param=1]="Param",s[s.ParamRegExp=2]="ParamRegExp",s[s.ParamRegExpEnd=3]="ParamRegExpEnd",s[s.EscapeNext=4]="EscapeNext",s})(Ot||{});const zd={type:hs.Static,value:""},Wd=/[a-zA-Z0-9_]/;function Ud(s){if(!s)return[[]];if(s==="/")return[[zd]];if(!s.startsWith("/"))throw new Error(`Invalid path "${s}"`);function t(p){throw new Error(`ERR (${e})/"${h}": ${p}`)}let e=Ot.Static,i=e;const n=[];let r;function o(){r&&n.push(r),r=[]}let l=0,a,h="",u="";function c(){h&&(e===Ot.Static?r.push({type:hs.Static,value:h}):e===Ot.Param||e===Ot.ParamRegExp||e===Ot.ParamRegExpEnd?(r.length>1&&(a==="*"||a==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),r.push({type:hs.Param,value:h,regexp:u,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):t("Invalid state to consume buffer"),h="")}function d(){h+=a}for(;l<s.length;){if(a=s[l++],a==="\\"&&e!==Ot.ParamRegExp){i=e,e=Ot.EscapeNext;continue}switch(e){case Ot.Static:a==="/"?(h&&c(),o()):a===":"?(c(),e=Ot.Param):d();break;case Ot.EscapeNext:d(),e=i;break;case Ot.Param:a==="("?e=Ot.ParamRegExp:Wd.test(a)?d():(c(),e=Ot.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case Ot.ParamRegExp:a===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+a:e=Ot.ParamRegExpEnd:u+=a;break;case Ot.ParamRegExpEnd:c(),e=Ot.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--,u="";break;default:t("Unknown state");break}}return e===Ot.ParamRegExp&&t(`Unfinished custom RegExp for param "${h}"`),c(),o(),n}const Sl="[^/]+?",qd={sensitive:!1,strict:!1,start:!0,end:!0};var $t=(function(s){return s[s._multiplier=10]="_multiplier",s[s.Root=90]="Root",s[s.Segment=40]="Segment",s[s.SubSegment=30]="SubSegment",s[s.Static=40]="Static",s[s.Dynamic=20]="Dynamic",s[s.BonusCustomRegExp=10]="BonusCustomRegExp",s[s.BonusWildcard=-50]="BonusWildcard",s[s.BonusRepeatable=-20]="BonusRepeatable",s[s.BonusOptional=-8]="BonusOptional",s[s.BonusStrict=.7000000000000001]="BonusStrict",s[s.BonusCaseSensitive=.25]="BonusCaseSensitive",s})($t||{});const Hd=/[.+*?^${}()[\]/\\]/g;function jd(s,t){const e=ot({},qd,t),i=[];let n=e.start?"^":"";const r=[];for(const h of s){const u=h.length?[]:[$t.Root];e.strict&&!h.length&&(n+="/");for(let c=0;c<h.length;c++){const d=h[c];let p=$t.Segment+(e.sensitive?$t.BonusCaseSensitive:0);if(d.type===hs.Static)c||(n+="/"),n+=d.value.replace(Hd,"\\$&"),p+=$t.Static;else if(d.type===hs.Param){const{value:m,repeatable:g,optional:S,regexp:_}=d;r.push({name:m,repeatable:g,optional:S});const y=_||Sl;if(y!==Sl){p+=$t.BonusCustomRegExp;try{`${y}`}catch(P){throw new Error(`Invalid custom RegExp for param "${m}" (${y}): `+P.message)}}let x=g?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;c||(x=S&&h.length<2?`(?:/${x})`:"/"+x),S&&(x+="?"),n+=x,p+=$t.Dynamic,S&&(p+=$t.BonusOptional),g&&(p+=$t.BonusRepeatable),y===".*"&&(p+=$t.BonusWildcard)}u.push(p)}i.push(u)}if(e.strict&&e.end){const h=i.length-1;i[h][i[h].length-1]+=$t.BonusStrict}e.strict||(n+="/?"),e.end?n+="$":e.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,e.sensitive?"":"i");function l(h){const u=h.match(o),c={};if(!u)return null;for(let d=1;d<u.length;d++){const p=u[d]||"",m=r[d-1];c[m.name]=p&&m.repeatable?p.split("/"):p}return c}function a(h){let u="",c=!1;for(const d of s){(!c||!u.endsWith("/"))&&(u+="/"),c=!1;for(const p of d)if(p.type===hs.Static)u+=p.value;else if(p.type===hs.Param){const{value:m,repeatable:g,optional:S}=p,_=m in h?h[m]:"";if(me(_)&&!g)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const y=me(_)?_.join("/"):_;if(!y)if(S)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):c=!0);else throw new Error(`Missing required param "${m}"`);u+=y}}return u||"/"}return{re:o,score:i,keys:r,parse:l,stringify:a}}function Kd(s,t){let e=0;for(;e<s.length&&e<t.length;){const i=t[e]-s[e];if(i)return i;e++}return s.length<t.length?s.length===1&&s[0]===$t.Static+$t.Segment?-1:1:s.length>t.length?t.length===1&&t[0]===$t.Static+$t.Segment?1:-1:0}function qh(s,t){let e=0;const i=s.score,n=t.score;for(;e<i.length&&e<n.length;){const r=Kd(i[e],n[e]);if(r)return r;e++}if(Math.abs(n.length-i.length)===1){if(xl(i))return 1;if(xl(n))return-1}return n.length-i.length}function xl(s){const t=s[s.length-1];return s.length>0&&t[t.length-1]<0}const Gd={strict:!1,end:!0,sensitive:!1};function Jd(s,t,e){const i=jd(Ud(s.path),e),n=ot(i,{record:s,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function Xd(s,t){const e=[],i=new Map;t=ml(Gd,t);function n(c){return i.get(c)}function r(c,d,p){const m=!p,g=Cl(c);g.aliasOf=p&&p.record;const S=ml(t,c),_=[g];if("alias"in c){const P=typeof c.alias=="string"?[c.alias]:c.alias;for(const J of P)_.push(Cl(ot({},g,{components:p?p.record.components:g.components,path:J,aliasOf:p?p.record:g})))}let y,x;for(const P of _){const{path:J}=P;if(d&&J[0]!=="/"){const it=d.record.path,Q=it[it.length-1]==="/"?"":"/";P.path=d.record.path+(J&&Q+J)}if(y=Jd(P,d,S),p?p.alias.push(y):(x=x||y,x!==y&&x.alias.push(y),m&&c.name&&!Tl(y)&&o(c.name)),Hh(y)&&a(y),g.children){const it=g.children;for(let Q=0;Q<it.length;Q++)r(it[Q],y,p&&p.children[Q])}p=p||y}return x?()=>{o(x)}:ri}function o(c){if(zh(c)){const d=i.get(c);d&&(i.delete(c),e.splice(e.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=e.indexOf(c);d>-1&&(e.splice(d,1),c.record.name&&i.delete(c.record.name),c.children.forEach(o),c.alias.forEach(o))}}function l(){return e}function a(c){const d=Zd(c,e);e.splice(d,0,c),c.record.name&&!Tl(c)&&i.set(c.record.name,c)}function h(c,d){let p,m={},g,S;if("name"in c&&c.name){if(p=i.get(c.name),!p)throw $s(wt.MATCHER_NOT_FOUND,{location:c});S=p.record.name,m=ot(El(d.params,p.keys.filter(x=>!x.optional).concat(p.parent?p.parent.keys.filter(x=>x.optional):[]).map(x=>x.name)),c.params&&El(c.params,p.keys.map(x=>x.name))),g=p.stringify(m)}else if(c.path!=null)g=c.path,p=e.find(x=>x.re.test(g)),p&&(m=p.parse(g),S=p.record.name);else{if(p=d.name?i.get(d.name):e.find(x=>x.re.test(d.path)),!p)throw $s(wt.MATCHER_NOT_FOUND,{location:c,currentLocation:d});S=p.record.name,m=ot({},d.params,c.params),g=p.stringify(m)}const _=[];let y=p;for(;y;)_.unshift(y.record),y=y.parent;return{name:S,path:g,params:m,matched:_,meta:Qd(_)}}s.forEach(c=>r(c));function u(){e.length=0,i.clear()}return{addRoute:r,resolve:h,removeRoute:o,clearRoutes:u,getRoutes:l,getRecordMatcher:n}}function El(s,t){const e={};for(const i of t)i in s&&(e[i]=s[i]);return e}function Cl(s){const t={path:s.path,redirect:s.redirect,name:s.name,meta:s.meta||{},aliasOf:s.aliasOf,beforeEnter:s.beforeEnter,props:Yd(s),children:s.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in s?s.components||null:s.component&&{default:s.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Yd(s){const t={},e=s.props||!1;if("component"in s)t.default=e;else for(const i in s.components)t[i]=typeof e=="object"?e[i]:e;return t}function Tl(s){for(;s;){if(s.record.aliasOf)return!0;s=s.parent}return!1}function Qd(s){return s.reduce((t,e)=>ot(t,e.meta),{})}function Zd(s,t){let e=0,i=t.length;for(;e!==i;){const r=e+i>>1;qh(s,t[r])<0?i=r:e=r+1}const n=tp(s);return n&&(i=t.lastIndexOf(n,i-1)),i}function tp(s){let t=s;for(;t=t.parent;)if(Hh(t)&&qh(s,t)===0)return t}function Hh({record:s}){return!!(s.name||s.components&&Object.keys(s.components).length||s.redirect)}function Ml(s){const t=ce(Cn),e=ce(mo),i=dt(()=>{const a=Rt(s.to);return t.resolve(a)}),n=dt(()=>{const{matched:a}=i.value,{length:h}=a,u=a[h-1],c=e.matched;if(!u||!c.length)return-1;const d=c.findIndex(Bs.bind(null,u));if(d>-1)return d;const p=Ol(a[h-2]);return h>1&&Ol(u)===p&&c[c.length-1].path!==p?c.findIndex(Bs.bind(null,a[h-2])):d}),r=dt(()=>n.value>-1&&np(e.params,i.value.params)),o=dt(()=>n.value>-1&&n.value===e.matched.length-1&&Fh(e.params,i.value.params));function l(a={}){if(ip(a)){const h=t[Rt(s.replace)?"replace":"push"](Rt(s.to)).catch(ri);return s.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:i,href:dt(()=>i.value.href),isActive:r,isExactActive:o,navigate:l}}function ep(s){return s.length===1?s[0]:s}const sp=oh({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Ml,setup(s,{slots:t}){const e=zt(Ml(s)),{options:i}=ce(Cn),n=dt(()=>({[kl(s.activeClass,i.linkActiveClass,"router-link-active")]:e.isActive,[kl(s.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const r=t.default&&ep(t.default(e));return s.custom?r:Ah("a",{"aria-current":e.isExactActive?s.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:n.value},r)}}}),Ee=sp;function ip(s){if(!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)&&!s.defaultPrevented&&!(s.button!==void 0&&s.button!==0)){if(s.currentTarget&&s.currentTarget.getAttribute){const t=s.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return s.preventDefault&&s.preventDefault(),!0}}function np(s,t){for(const e in t){const i=t[e],n=s[e];if(typeof i=="string"){if(i!==n)return!1}else if(!me(n)||n.length!==i.length||i.some((r,o)=>r.valueOf()!==n[o].valueOf()))return!1}return!0}function Ol(s){return s?s.aliasOf?s.aliasOf.path:s.path:""}const kl=(s,t,e)=>s??t??e,rp=oh({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(s,{attrs:t,slots:e}){const i=ce(Rr),n=dt(()=>s.route||i.value),r=ce(_l,0),o=dt(()=>{let h=Rt(r);const{matched:u}=n.value;let c;for(;(c=u[h])&&!c.components;)h++;return h}),l=dt(()=>n.value.matched[o.value]);Gi(_l,dt(()=>o.value+1)),Gi(Id,l),Gi(Rr,n);const a=z();return fs(()=>[a.value,l.value,s.name],([h,u,c],[d,p,m])=>{u&&(u.instances[c]=h,p&&p!==u&&h&&h===d&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),h&&u&&(!p||!Bs(u,p)||!d)&&(u.enterCallbacks[c]||[]).forEach(g=>g(h))},{flush:"post"}),()=>{const h=n.value,u=s.name,c=l.value,d=c&&c.components[u];if(!d)return Ll(e.default,{Component:d,route:h});const p=c.props[u],m=p?p===!0?h.params:typeof p=="function"?p(h):p:null,S=Ah(d,ot({},m,t,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(c.instances[u]=null)},ref:a}));return Ll(e.default,{Component:S,route:h})||S}}});function Ll(s,t){if(!s)return null;const e=s(t);return e.length===1?e[0]:e}const jh=rp;function op(s){const t=Xd(s.routes,s),e=s.parseQuery||Pd,i=s.stringifyQuery||yl,n=s.history,r=Gs(),o=Gs(),l=Gs(),a=dc(He);let h=He;Es&&s.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=qn.bind(null,M=>""+M),c=qn.bind(null,vd),d=qn.bind(null,bi);function p(M,F){let $,H;return zh(M)?($=t.getRecordMatcher(M),H=F):H=M,t.addRoute(H,$)}function m(M){const F=t.getRecordMatcher(M);F&&t.removeRoute(F)}function g(){return t.getRoutes().map(M=>M.record)}function S(M){return!!t.getRecordMatcher(M)}function _(M,F){if(F=ot({},F||a.value),typeof M=="string"){const w=Hn(e,M,F.path),E=t.resolve({path:w.path},F),L=n.createHref(w.fullPath);return ot(w,E,{params:d(E.params),hash:bi(w.hash),redirectedFrom:void 0,href:L})}let $;if(M.path!=null)$=ot({},M,{path:Hn(e,M.path,F.path).path});else{const w=ot({},M.params);for(const E in w)w[E]==null&&delete w[E];$=ot({},M,{params:c(w)}),F.params=c(F.params)}const H=t.resolve($,F),et=M.hash||"";H.params=u(d(H.params));const v=yd(i,ot({},M,{hash:dd(et),path:H.path})),b=n.createHref(v);return ot({fullPath:v,hash:et,query:i===yl?Nd(M.query):M.query||{}},H,{redirectedFrom:void 0,href:b})}function y(M){return typeof M=="string"?Hn(e,M,a.value.path):ot({},M)}function x(M,F){if(h!==M)return $s(wt.NAVIGATION_CANCELLED,{from:F,to:M})}function P(M){return Q(M)}function J(M){return P(ot(y(M),{replace:!0}))}function it(M,F){const $=M.matched[M.matched.length-1];if($&&$.redirect){const{redirect:H}=$;let et=typeof H=="function"?H(M,F):H;return typeof et=="string"&&(et=et.includes("?")||et.includes("#")?et=y(et):{path:et},et.params={}),ot({query:M.query,hash:M.hash,params:et.path!=null?{}:M.params},et)}}function Q(M,F){const $=h=_(M),H=a.value,et=M.state,v=M.force,b=M.replace===!0,w=it($,H);if(w)return Q(ot(y(w),{state:typeof w=="object"?ot({},et,w.state):et,force:v,replace:b}),F||$);const E=$;E.redirectedFrom=F;let L;return!v&&_d(i,H,$)&&(L=$s(wt.NAVIGATION_DUPLICATED,{to:E,from:H}),Ut(H,H,!0,!1)),(L?Promise.resolve(L):Tt(E,H)).catch(T=>Re(T)?Re(T,wt.NAVIGATION_GUARD_REDIRECT)?T:ie(T):Z(T,E,H)).then(T=>{if(T){if(Re(T,wt.NAVIGATION_GUARD_REDIRECT))return Q(ot({replace:b},y(T.to),{state:typeof T.to=="object"?ot({},et,T.to.state):et,force:v}),F||E)}else T=ee(E,H,!0,b,et);return Mt(E,H,T),T})}function ht(M,F){const $=x(M,F);return $?Promise.reject($):Promise.resolve()}function Ct(M){const F=_s.values().next().value;return F&&typeof F.runWithContext=="function"?F.runWithContext(M):M()}function Tt(M,F){let $;const[H,et,v]=Dd(M,F);$=Kn(H.reverse(),"beforeRouteLeave",M,F);for(const w of H)w.leaveGuards.forEach(E=>{$.push(Xe(E,M,F))});const b=ht.bind(null,M,F);return $.push(b),ne($).then(()=>{$=[];for(const w of r.list())$.push(Xe(w,M,F));return $.push(b),ne($)}).then(()=>{$=Kn(et,"beforeRouteUpdate",M,F);for(const w of et)w.updateGuards.forEach(E=>{$.push(Xe(E,M,F))});return $.push(b),ne($)}).then(()=>{$=[];for(const w of v)if(w.beforeEnter)if(me(w.beforeEnter))for(const E of w.beforeEnter)$.push(Xe(E,M,F));else $.push(Xe(w.beforeEnter,M,F));return $.push(b),ne($)}).then(()=>(M.matched.forEach(w=>w.enterCallbacks={}),$=Kn(v,"beforeRouteEnter",M,F,Ct),$.push(b),ne($))).then(()=>{$=[];for(const w of o.list())$.push(Xe(w,M,F));return $.push(b),ne($)}).catch(w=>Re(w,wt.NAVIGATION_CANCELLED)?w:Promise.reject(w))}function Mt(M,F,$){l.list().forEach(H=>Ct(()=>H(M,F,$)))}function ee(M,F,$,H,et){const v=x(M,F);if(v)return v;const b=F===He,w=Es?history.state:{};$&&(H||b?n.replace(M.fullPath,ot({scroll:b&&w&&w.scroll},et)):n.push(M.fullPath,et)),a.value=M,Ut(M,F,$,b),ie()}let Lt;function se(){Lt||(Lt=n.listen((M,F,$)=>{if(!is.listening)return;const H=_(M),et=it(H,is.currentRoute.value);if(et){Q(ot(et,{replace:!0,force:!0}),H).catch(ri);return}h=H;const v=a.value;Es&&Od(bl(v.fullPath,$.delta),En()),Tt(H,v).catch(b=>Re(b,wt.NAVIGATION_ABORTED|wt.NAVIGATION_CANCELLED)?b:Re(b,wt.NAVIGATION_GUARD_REDIRECT)?(Q(ot(y(b.to),{force:!0}),H).then(w=>{Re(w,wt.NAVIGATION_ABORTED|wt.NAVIGATION_DUPLICATED)&&!$.delta&&$.type===Lr.pop&&n.go(-1,!1)}).catch(ri),Promise.reject()):($.delta&&n.go(-$.delta,!1),Z(b,H,v))).then(b=>{b=b||ee(H,v,!1),b&&($.delta&&!Re(b,wt.NAVIGATION_CANCELLED)?n.go(-$.delta,!1):$.type===Lr.pop&&Re(b,wt.NAVIGATION_ABORTED|wt.NAVIGATION_DUPLICATED)&&n.go(-1,!1)),Mt(H,v,b)}).catch(ri)}))}let W=Gs(),k=Gs(),q;function Z(M,F,$){ie(M);const H=k.list();return H.length?H.forEach(et=>et(M,F,$)):console.error(M),Promise.reject(M)}function Xt(){return q&&a.value!==He?Promise.resolve():new Promise((M,F)=>{W.add([M,F])})}function ie(M){return q||(q=!M,se(),W.list().forEach(([F,$])=>M?$(M):F()),W.reset()),M}function Ut(M,F,$,H){const{scrollBehavior:et}=s;if(!Es||!et)return Promise.resolve();const v=!$&&kd(bl(M.fullPath,0))||(H||!$)&&history.state&&history.state.scroll||null;return Ns().then(()=>et(M,F,v)).then(b=>b&&Md(b)).catch(b=>Z(b,M,F))}const qt=M=>n.go(M);let ys;const _s=new Set,is={currentRoute:a,listening:!0,addRoute:p,removeRoute:m,clearRoutes:t.clearRoutes,hasRoute:S,getRoutes:g,resolve:_,options:s,push:P,replace:J,go:qt,back:()=>qt(-1),forward:()=>qt(1),beforeEach:r.add,beforeResolve:o.add,afterEach:l.add,onError:k.add,isReady:Xt,install(M){M.component("RouterLink",Ee),M.component("RouterView",jh),M.config.globalProperties.$router=is,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>Rt(a)}),Es&&!ys&&a.value===He&&(ys=!0,P(n.location).catch(H=>{}));const F={};for(const H in He)Object.defineProperty(F,H,{get:()=>a.value[H],enumerable:!0});M.provide(Cn,is),M.provide(mo,Xa(F)),M.provide(Rr,a);const $=M.unmount;_s.add(M),M.unmount=function(){_s.delete(M),_s.size<1&&(h=He,Lt&&Lt(),Lt=null,a.value=He,ys=!1,q=!1),$()}}};function ne(M){return M.reduce((F,$)=>F.then(()=>Ct($)),Promise.resolve())}return is}function Ws(){return ce(Cn)}function Kh(s){return ce(mo)}const lp={__name:"App",setup(s){return(t,e)=>(C(),ae(Rt(jh)))}},ap={"Content-Type":"application/json"};class hp{#t=null;setToken(t){this.#t=t?String(t):null}async request(t,{method:e="GET",body:i=void 0,headers:n={}}={}){const r={...ap,...n};this.#t&&(r.Authorization=`Bearer ${this.#t}`);const o=await fetch(t,{method:e,headers:r,body:i===void 0?void 0:JSON.stringify(i)}),l=await o.json().catch(()=>null);if(o.ok)return l;const a=l&&typeof l=="object"&&l.error?String(l.error):`: ${o.status}`,h=new Error(a);throw h.status=o.status,h.payload=l,h}}const nt=new hp,Pr="arkilo_session_token",bt=zt({token:sessionStorage.getItem(Pr)||null,user:null,isAdmin:!1,initialized:!1});nt.setToken(bt.token);function ki(s){bt.token=s,nt.setToken(s),s?sessionStorage.setItem(Pr,s):sessionStorage.removeItem(Pr)}async function up(){if(!bt.initialized){if(!bt.token){bt.initialized=!0;return}try{const s=await nt.request("/api/auth/me");bt.user=s.user||null;try{await nt.request("/api/admin/activation-codes?limit=1&offset=0"),bt.isAdmin=!0}catch{bt.isAdmin=!1}}catch{ki(null)}finally{bt.initialized=!0}}}async function cp(){if(!bt.token)return bt.user=null,bt.isAdmin=!1,null;const s=await nt.request("/api/auth/me");return bt.user=s.user||null,bt.user}async function fp({email:s,password:t}){const e=await nt.request("/api/auth/login",{method:"POST",body:{email:s,password:t}});ki(e.token),bt.user=e.user;try{await nt.request("/api/admin/activation-codes?limit=1&offset=0"),bt.isAdmin=!0}catch{bt.isAdmin=!1}return e.user}async function dp({email:s,password:t,displayName:e}){const i=await nt.request("/api/auth/register",{method:"POST",body:{email:s,password:t,displayName:e||void 0}});ki(i.token),bt.user=i.user;try{await nt.request("/api/admin/activation-codes?limit=1&offset=0"),bt.isAdmin=!0}catch{bt.isAdmin=!1}return i.user}async function pp(){try{await nt.request("/api/auth/logout",{method:"POST"})}finally{bt.user=null,bt.isAdmin=!1,ki(null)}}function ss(){return{token:dt(()=>bt.token),user:dt(()=>bt.user),isAdmin:dt(()=>bt.isAdmin),initialized:dt(()=>bt.initialized),init:up,refreshUser:cp,login:fp,register:dp,logout:pp,setToken:ki}}const Tn="/logo.png",mp={class:"auth-page"},vp={class:"auth-container"},gp={class:"auth-card"},bp={class:"form-group"},yp={class:"form-group"},_p={key:0,class:"form-error"},wp=["disabled"],Sp={class:"auth-footer"},xp={__name:"LoginPage",setup(s){const t=ss(),e=Ws(),i=z(""),n=z(""),r=z(""),o=z(!1);async function l(){r.value="",o.value=!0;try{await t.login({email:i.value.trim(),password:n.value}),await e.push("/app")}catch(a){r.value=a?.message||""}finally{o.value=!1}}return(a,h)=>(C(),A("div",mp,[f("div",vp,[f("div",gp,[h[6]||(h[6]=co('<div class="auth-header"><div class="auth-logo"><img src="'+Tn+'" alt="Arkilo"><span>Arkilo</span></div><h1 class="auth-title"></h1><p class="auth-subtitle"> SaaS </p></div>',1)),f("form",{onSubmit:ps(l,["prevent"])},[f("div",bp,[h[2]||(h[2]=f("label",{class:"form-label",for:"email"},"",-1)),rt(f("input",{id:"email","onUpdate:modelValue":h[0]||(h[0]=u=>i.value=u),class:"form-input",type:"email",autocomplete:"email",required:""},null,512),[[gt,i.value]])]),f("div",yp,[h[3]||(h[3]=f("label",{class:"form-label",for:"password"},"",-1)),rt(f("input",{id:"password","onUpdate:modelValue":h[1]||(h[1]=u=>n.value=u),class:"form-input",type:"password",autocomplete:"current-password",required:""},null,512),[[gt,n.value]]),r.value?(C(),A("p",_p,O(r.value),1)):U("",!0)]),f("button",{class:"btn btn-primary btn-full",type:"submit",disabled:o.value},O(o.value?"...":""),9,wp)],32),f("div",Sp,[f("p",null,[h[5]||(h[5]=Zt("  ",-1)),ft(Rt(Ee),{class:"link",to:"/register"},{default:Pt(()=>[...h[4]||(h[4]=[Zt("",-1)])]),_:1})])])])])]))}},Ep={class:"auth-page"},Cp={class:"auth-container"},Tp={class:"auth-card"},Mp={class:"form-group"},Op={class:"form-group"},kp={class:"form-group"},Lp={key:0,class:"form-error"},Ap=["disabled"],Rp={class:"auth-footer"},Pp={__name:"RegisterPage",setup(s){const t=ss(),e=Ws(),i=z(""),n=z(""),r=z(""),o=z(""),l=z(!1);async function a(){o.value="",l.value=!0;try{await t.register({email:n.value.trim(),password:r.value,displayName:i.value.trim()}),await e.push("/app")}catch(h){o.value=h?.message||""}finally{l.value=!1}}return(h,u)=>(C(),A("div",Ep,[f("div",Cp,[f("div",Tp,[u[8]||(u[8]=co('<div class="auth-header"><div class="auth-logo"><img src="'+Tn+'" alt="Arkilo"><span>Arkilo</span></div><h1 class="auth-title"></h1><p class="auth-subtitle"></p></div>',1)),f("form",{onSubmit:ps(a,["prevent"])},[f("div",Mp,[u[3]||(u[3]=f("label",{class:"form-label",for:"displayName"},"",-1)),rt(f("input",{id:"displayName","onUpdate:modelValue":u[0]||(u[0]=c=>i.value=c),class:"form-input",type:"text",maxlength:"80"},null,512),[[gt,i.value]])]),f("div",Op,[u[4]||(u[4]=f("label",{class:"form-label",for:"email"},"",-1)),rt(f("input",{id:"email","onUpdate:modelValue":u[1]||(u[1]=c=>n.value=c),class:"form-input",type:"email",autocomplete:"email",required:""},null,512),[[gt,n.value]])]),f("div",kp,[u[5]||(u[5]=f("label",{class:"form-label",for:"password"},"",-1)),rt(f("input",{id:"password","onUpdate:modelValue":u[2]||(u[2]=c=>r.value=c),class:"form-input",type:"password",autocomplete:"new-password",required:""},null,512),[[gt,r.value]]),o.value?(C(),A("p",Lp,O(o.value),1)):U("",!0)]),f("button",{class:"btn btn-primary btn-full",type:"submit",disabled:l.value},O(l.value?"...":""),9,Ap)],32),f("div",Rp,[f("p",null,[u[7]||(u[7]=Zt("  ",-1)),ft(Rt(Ee),{class:"link",to:"/login"},{default:Pt(()=>[...u[6]||(u[6]=[Zt("",-1)])]),_:1})])])])])]))}},Np={class:"auth-page"},Ip={class:"auth-container"},Dp={class:"auth-card"},Bp={class:"card-content"},$p={key:0,class:"text-muted"},Vp={key:1,class:"text-muted"},Fp={key:2,class:"form-success"},zp={key:3,class:"form-error"},Wp={class:"input-with-button"},Up=["disabled"],qp={class:"auth-footer"},Hp={__name:"VerifyEmailPage",setup(s){const t=Kh(),e=Ws(),i=ss(),n=dt(()=>String(t.query.token||"").trim()),r=z("idle"),o=z("");async function l(){if(o.value="",!n.value){r.value="error",o.value=" token";return}r.value="verifying";try{await nt.request("/api/auth/email-verifications/verify",{method:"POST",body:{token:n.value}}),r.value="success",await i.refreshUser().catch(()=>null),i.user.value&&await e.push("/app")}catch(a){r.value="error",o.value=a?.message||""}}return fe(l),(a,h)=>(C(),A("div",Np,[f("div",Ip,[f("div",Dp,[h[1]||(h[1]=co('<div class="auth-header"><div class="auth-logo"><img src="'+Tn+'" alt="Arkilo"><span>Arkilo</span></div><h1 class="auth-title"></h1><p class="auth-subtitle"> AI </p></div>',1)),f("div",Bp,[r.value==="idle"?(C(),A("p",$p,"...")):U("",!0),r.value==="verifying"?(C(),A("p",Vp,"...")):U("",!0),r.value==="success"?(C(),A("p",Fp,"")):U("",!0),r.value==="error"?(C(),A("p",zp,O(o.value),1)):U("",!0),f("div",Wp,[f("button",{class:"btn btn-primary btn-full",type:"button",disabled:r.value==="verifying",onClick:l},O(r.value==="verifying"?"...":""),9,Up)]),f("div",qp,[ft(Rt(Ee),{class:"link",to:"/login"},{default:Pt(()=>[...h[0]||(h[0]=[Zt("",-1)])]),_:1})])])])])]))}},jp={class:"app-layout"},Kp={class:"sidebar"},Gp={class:"nav-menu"},Jp={class:"main-content"},Xp={class:"topbar"},Yp={class:"topbar-title"},Qp={key:0},Zp={class:"topbar-user"},tm={class:"user-info"},em={class:"user-name"},sm={class:"user-email"},im={class:"content-wrapper"},nm={key:0,class:"card card-warn"},rm={class:"card-content banner-row"},om={key:0,class:"banner-msg"},lm=["disabled"],am={key:0,class:"card-content"},hm=["href"],Us={__name:"AppShell",props:{title:{type:String,required:!0},subtitle:{type:String,default:""}},setup(s){const t=ss(),e=Ws(),i=dt(()=>t.user.value?.email||""),n=dt(()=>t.user.value?.display_name||t.user.value?.email||""),r=dt(()=>t.isAdmin.value),o=dt(()=>!!t.user.value&&!t.user.value?.email_verified_at),l=z(!1),a=z(""),h=z("");async function u(){await t.logout(),await e.push("/login")}async function c(){a.value="",h.value="",l.value=!0;try{const d=await nt.request("/api/auth/email-verifications/send",{method:"POST"});a.value=d?.alreadyVerified?"":"",h.value=d?.debugLink||"",await t.refreshUser().catch(()=>null)}catch(d){a.value=d?.message||""}finally{l.value=!1}}return(d,p)=>(C(),A("div",jp,[f("aside",Kp,[p[6]||(p[6]=f("div",{class:"sidebar-header"},[f("div",{class:"logo"},[f("img",{src:Tn,alt:"Arkilo"}),f("span",null,"Arkilo Console")])],-1)),f("nav",Gp,[ft(Rt(Ee),{class:"nav-item",to:"/app"},{default:Pt(()=>[...p[0]||(p[0]=[Zt("",-1)])]),_:1}),ft(Rt(Ee),{class:"nav-item",to:"/app/ai"},{default:Pt(()=>[...p[1]||(p[1]=[Zt("AI ",-1)])]),_:1}),ft(Rt(Ee),{class:"nav-item",to:"/app/providers"},{default:Pt(()=>[...p[2]||(p[2]=[Zt("AI Provider",-1)])]),_:1}),ft(Rt(Ee),{class:"nav-item",to:"/app/subscription"},{default:Pt(()=>[...p[3]||(p[3]=[Zt("",-1)])]),_:1}),r.value?(C(),ae(Rt(Ee),{key:0,class:"nav-item",to:"/app/admin/codes"},{default:Pt(()=>[...p[4]||(p[4]=[Zt("",-1)])]),_:1})):U("",!0),r.value?(C(),ae(Rt(Ee),{key:1,class:"nav-item",to:"/app/admin/providers"},{default:Pt(()=>[...p[5]||(p[5]=[Zt("Provider ",-1)])]),_:1})):U("",!0)]),f("div",{class:"sidebar-footer"},[f("button",{class:"btn btn-secondary btn-full",type:"button",onClick:u},"")])]),f("main",Jp,[f("header",Xp,[f("div",Yp,[f("h1",null,O(s.title),1),s.subtitle?(C(),A("p",Qp,O(s.subtitle),1)):U("",!0)]),f("div",Zp,[f("div",tm,[f("span",em,O(n.value),1),f("span",sm,O(i.value),1)])])]),f("div",im,[o.value?(C(),A("div",nm,[f("div",rm,[f("div",null,[p[7]||(p[7]=f("div",{class:"banner-title"},"",-1)),p[8]||(p[8]=f("div",{class:"text-muted"},"",-1)),a.value?(C(),A("div",om,O(a.value),1)):U("",!0)]),f("button",{class:"btn btn-primary",type:"button",disabled:l.value,onClick:c},O(l.value?"...":""),9,lm)]),h.value?(C(),A("div",am,[p[9]||(p[9]=f("div",{class:"text-muted"}," SMTP",-1)),f("a",{class:"link",href:h.value},O(h.value),9,hm)])):U("",!0)])):U("",!0),zc(d.$slots,"default")])])]))}},um=3e4,Gt=zt({value:null,fetchedAt:0,pending:null});function cm(){return Gt.value&&Date.now()-Gt.fetchedAt<um}async function fm(){const s=await nt.request("/api/console/overview");return Gt.value=s,Gt.fetchedAt=Date.now(),s}function dm(){async function s({force:e=!1}={}){return!e&&cm()?Gt.value:(Gt.pending||(Gt.pending=fm().finally(()=>{Gt.pending=null})),Gt.pending)}function t(){Gt.value=null,Gt.fetchedAt=0,Gt.pending=null}return{state:Gt,get:s,invalidate:t}}const pm={class:"card"},mm={class:"card-content",style:{"flex-direction":"row","align-items":"center","justify-content":"space-between"}},vm={class:"text-muted"},gm=["disabled"],bm={class:"grid grid-2"},ym={class:"card"},_m={key:0,class:"card-content"},wm={class:"stat-row"},Sm={class:"stat-value"},xm={class:"stat-row"},Em={class:"stat-value"},Cm={class:"stat-row"},Tm={class:"stat-value"},Mm={key:1,class:"text-muted"},Om={class:"card"},km={key:0,class:"card-content"},Lm={class:"stat-row"},Am={class:"stat-value"},Rm={class:"stat-row"},Pm={class:"stat-value"},Nm={key:1,class:"text-muted"},Im={class:"card"},Dm={class:"input-with-button"},Bm=["disabled"],$m={key:0,class:"form-error"},Vm={key:1,class:"form-success"},Fm={__name:"DashboardPage",setup(s){const t=zt({user:null,organization:null,subscription:null}),e=z(""),i=z(""),n=z(""),r=z(!1),o=z(!1),l=dm(),a=dt(()=>{const p=l.state.fetchedAt;if(!p)return"-";try{return new Date(p).toLocaleTimeString("zh-CN")}catch{return"-"}});function h(p){if(!p)return"-";try{return new Date(p).toISOString().slice(0,10)}catch{return String(p)}}async function u({force:p=!1}={}){o.value=!0;try{const m=await l.get({force:p});t.user=m.user,t.organization=m.organization,t.subscription=m.subscription}finally{o.value=!1}}async function c(){await u({force:!0})}async function d(){i.value="",n.value="",r.value=!0;try{const p=await nt.request("/api/billing/redeem-activation-code",{method:"POST",body:{code:e.value}});l.invalidate(),await u({force:!0}),t.organization=p.organization,t.subscription=p.subscription,n.value="",e.value="";return}catch(p){i.value=p?.message||""}finally{r.value=!1}}return fe(()=>u({force:!1})),(p,m)=>(C(),ae(Us,{title:"",subtitle:""},{default:Pt(()=>[f("div",pm,[f("div",mm,[f("div",vm,""+O(a.value),1),f("button",{class:"btn btn-secondary btn-sm",type:"button",disabled:o.value,onClick:c},O(o.value?"...":""),9,gm)])]),f("div",bm,[f("div",ym,[m[4]||(m[4]=f("h2",{class:"card-title"},"",-1)),t.organization?(C(),A("div",_m,[f("div",wm,[m[1]||(m[1]=f("span",{class:"stat-label"},"",-1)),f("span",Sm,O(t.organization.name),1)]),f("div",xm,[m[2]||(m[2]=f("span",{class:"stat-label"},"Slug",-1)),f("span",Em,[f("code",null,O(t.organization.slug),1)])]),f("div",Cm,[m[3]||(m[3]=f("span",{class:"stat-label"},"",-1)),f("span",Tm,O(t.organization.role),1)])])):(C(),A("p",Mm,"..."))]),f("div",Om,[m[7]||(m[7]=f("h2",{class:"card-title"},"",-1)),t.subscription?(C(),A("div",km,[f("div",Lm,[m[5]||(m[5]=f("span",{class:"stat-label"},"",-1)),f("span",Am,O(t.subscription.plan_code),1)]),f("div",Rm,[m[6]||(m[6]=f("span",{class:"stat-label"},"",-1)),f("span",Pm,O(h(t.subscription.current_period_end)),1)])])):(C(),A("p",Nm,""))])]),f("div",Im,[m[8]||(m[8]=f("h2",{class:"card-title"},"",-1)),f("form",{class:"card-content",onSubmit:ps(d,["prevent"])},[f("div",Dm,[rt(f("input",{"onUpdate:modelValue":m[0]||(m[0]=g=>e.value=g),class:"form-input",placeholder:"",required:""},null,512),[[gt,e.value]]),f("button",{class:"btn btn-primary",type:"submit",disabled:r.value},O(r.value?"...":""),9,Bm)]),i.value?(C(),A("p",$m,O(i.value),1)):U("",!0),n.value?(C(),A("p",Vm,O(n.value),1)):U("",!0)],32)])]),_:1}))}},zm={class:"card"},Wm={class:"card-content"},Um={key:0},qm={class:"stat-row"},Hm={class:"stat-value"},jm={class:"stat-row"},Km={class:"stat-value"},Gm={class:"stat-row"},Jm={class:"stat-value"},Xm={key:1,class:"text-muted"},Ym={class:"card"},Qm={class:"card-content"},Zm={key:0,class:"form-error"},tv={key:1,class:"form-success"},ev={key:2,class:"grid grid-2"},sv={class:"stat-row"},iv={class:"stat-value"},nv={class:"stat-row"},rv={class:"stat-value"},ov=["disabled","onClick"],lv={class:"card"},av={class:"input-with-button"},hv=["disabled"],uv={key:0,class:"form-error"},cv={key:1,class:"form-success"},fv={__name:"SubscriptionPage",setup(s){const t=z(null),e=z(""),i=z(""),n=z(""),r=z(!1),o=z(null),l=z(""),a=z(""),h=z(!1),u=Kh();function c(_){if(!_)return"-";try{return new Date(_).toISOString().slice(0,10)}catch{return String(_)}}async function d(){const _=await nt.request("/api/billing/subscription");t.value=_.subscription||null}async function p(){l.value="";try{o.value=await nt.request("/api/stripe/config")}catch(_){o.value=null,l.value=_?.message||"Stripe "}}async function m(_){l.value="",a.value="",h.value=!0;try{const y=await nt.request("/api/stripe/checkout/create",{method:"POST",body:{planCode:_}});if(!y?.url)throw new Error("");window.location.assign(y.url)}catch(y){l.value=y?.message||""}finally{h.value=!1}}async function g(){const _=String(u.query.stripe||"").trim(),y=String(u.query.session_id||"").trim();if(_==="cancel"){a.value="";return}if(_==="success"&&y){a.value="...";try{await nt.request("/api/stripe/checkout/complete",{method:"POST",body:{sessionId:y}})}catch{}await nt.request("/api/stripe/subscriptions/sync",{method:"POST"}).catch(()=>null),await d(),a.value=""}}async function S(){i.value="",n.value="",r.value=!0;try{const _=await nt.request("/api/billing/redeem-activation-code",{method:"POST",body:{code:e.value}});t.value=_.subscription||null,n.value="",e.value=""}catch(_){i.value=_?.message||""}finally{r.value=!1}}return fe(d),fe(p),fe(g),(_,y)=>(C(),ae(Us,{title:"",subtitle:""},{default:Pt(()=>[f("div",zm,[y[4]||(y[4]=f("h2",{class:"card-title"},"",-1)),f("div",Wm,[t.value?(C(),A("div",Um,[f("div",qm,[y[1]||(y[1]=f("span",{class:"stat-label"},"",-1)),f("span",Hm,O(t.value.plan_code),1)]),f("div",jm,[y[2]||(y[2]=f("span",{class:"stat-label"},"",-1)),f("span",Km,O(t.value.status),1)]),f("div",Gm,[y[3]||(y[3]=f("span",{class:"stat-label"},"",-1)),f("span",Jm,O(c(t.value.current_period_end)),1)])])):(C(),A("p",Xm,""))])]),f("div",Ym,[y[8]||(y[8]=f("h2",{class:"card-title"},"Stripe ",-1)),f("div",Qm,[y[7]||(y[7]=f("p",{class:"text-muted"}," Stripe ",-1)),l.value?(C(),A("div",Zm,O(l.value),1)):U("",!0),a.value?(C(),A("p",tv,O(a.value),1)):U("",!0),o.value?(C(),A("div",ev,[(C(!0),A(_t,null,ke(o.value.plans,x=>(C(),A("div",{key:x.code,class:"card",style:{padding:"1rem"}},[f("div",sv,[y[5]||(y[5]=f("span",{class:"stat-label"},"",-1)),f("span",iv,O(x.displayName),1)]),f("div",nv,[y[6]||(y[6]=f("span",{class:"stat-label"},"",-1)),f("span",rv,[f("code",null,O(Number(x.allowanceCreditsPerMonth).toFixed(2)),1)])]),f("button",{class:"btn btn-primary mt-16",type:"button",disabled:h.value||!x.available,onClick:P=>m(x.code)},O(x.available?h.value?"...":"":""),9,ov)]))),128))])):U("",!0)])]),f("div",lv,[y[9]||(y[9]=f("h2",{class:"card-title"},"",-1)),f("form",{class:"card-content",onSubmit:ps(S,["prevent"])},[f("div",av,[rt(f("input",{"onUpdate:modelValue":y[0]||(y[0]=x=>e.value=x),class:"form-input",placeholder:"",required:""},null,512),[[gt,e.value]]),f("button",{class:"btn btn-primary",type:"submit",disabled:r.value},O(r.value?"...":""),9,hv)]),i.value?(C(),A("p",uv,O(i.value),1)):U("",!0),n.value?(C(),A("p",cv,O(n.value),1)):U("",!0)],32)])]),_:1}))}},dv={class:"card"},pv={class:"grid grid-3"},mv={class:"form-group"},vv={class:"form-group"},gv={class:"form-group"},bv={class:"grid grid-3"},yv={class:"form-group"},_v={class:"form-group"},wv={class:"form-group"},Sv=["disabled"],xv={key:0,class:"form-error"},Ev={key:1,class:"form-success"},Cv={key:2,class:"mt-16"},Tv={class:"data-table"},Mv={class:"card"},Ov={class:"card-content"},kv=["disabled"],Lv={key:0,class:"form-error"},Av={class:"mt-16"},Rv={class:"data-table"},Pv=["disabled","onClick"],Nv={__name:"AdminActivationCodesPage",setup(s){const t=Ws(),e=zt({planCode:"monthly",durationDays:30,count:1,maxRedemptions:1,expiresAt:"",note:""}),i=z([]),n=z([]),r=z(!1),o=z(""),l=z(!1),a=z(""),h=z("");function u(m){if(!m)return"-";try{return new Date(m).toISOString().slice(0,10)}catch{return String(m)}}async function c(){a.value="",l.value=!0;try{const m=await nt.request("/api/admin/activation-codes?limit=50&offset=0");i.value=m.items||[]}catch(m){if(m?.status===403)return t.push("/app");a.value=m?.message||""}finally{l.value=!1}}async function d(){o.value="",n.value=[],r.value=!0;try{const m={planCode:e.planCode.trim(),durationDays:Number(e.durationDays),count:Number(e.count||1),maxRedemptions:Number(e.maxRedemptions||1),note:e.note.trim()||void 0};e.expiresAt.trim()&&(m.expiresAt=e.expiresAt.trim());const g=await nt.request("/api/admin/activation-codes",{method:"POST",body:m});n.value=g.codes||[],await c()}catch(m){if(m?.status===403)return t.push("/app");o.value=m?.message||""}finally{r.value=!1}}async function p(m){h.value=m;try{await nt.request(`/api/admin/activation-codes/${encodeURIComponent(m)}/revoke`,{method:"POST"}),await c()}catch(g){a.value=g?.message||""}finally{h.value=""}}return fe(c),(m,g)=>(C(),ae(Us,{title:"",subtitle:""},{default:Pt(()=>[f("div",dv,[g[13]||(g[13]=f("h2",{class:"card-title"},"",-1)),f("form",{class:"card-content",onSubmit:ps(d,["prevent"])},[f("div",pv,[f("div",mv,[g[6]||(g[6]=f("label",{class:"form-label"},"planCode",-1)),rt(f("input",{"onUpdate:modelValue":g[0]||(g[0]=S=>e.planCode=S),class:"form-input",placeholder:"monthly / yearly",required:""},null,512),[[gt,e.planCode]])]),f("div",vv,[g[7]||(g[7]=f("label",{class:"form-label"},"durationDays",-1)),rt(f("input",{"onUpdate:modelValue":g[1]||(g[1]=S=>e.durationDays=S),class:"form-input",type:"number",min:"1",required:""},null,512),[[gt,e.durationDays,void 0,{number:!0}]])]),f("div",gv,[g[8]||(g[8]=f("label",{class:"form-label"},"count",-1)),rt(f("input",{"onUpdate:modelValue":g[2]||(g[2]=S=>e.count=S),class:"form-input",type:"number",min:"1",max:"100"},null,512),[[gt,e.count,void 0,{number:!0}]])])]),f("div",bv,[f("div",yv,[g[9]||(g[9]=f("label",{class:"form-label"},"maxRedemptions",-1)),rt(f("input",{"onUpdate:modelValue":g[3]||(g[3]=S=>e.maxRedemptions=S),class:"form-input",type:"number",min:"1",max:"1000"},null,512),[[gt,e.maxRedemptions,void 0,{number:!0}]])]),f("div",_v,[g[10]||(g[10]=f("label",{class:"form-label"},"expiresAtISO",-1)),rt(f("input",{"onUpdate:modelValue":g[4]||(g[4]=S=>e.expiresAt=S),class:"form-input",placeholder:"2026-01-01T00:00:00.000Z"},null,512),[[gt,e.expiresAt]])]),f("div",wv,[g[11]||(g[11]=f("label",{class:"form-label"},"note",-1)),rt(f("input",{"onUpdate:modelValue":g[5]||(g[5]=S=>e.note=S),class:"form-input",maxlength:"2000"},null,512),[[gt,e.note]])])]),f("button",{class:"btn btn-primary",type:"submit",disabled:r.value},O(r.value?"...":""),9,Sv),o.value?(C(),A("p",xv,O(o.value),1)):U("",!0),n.value.length?(C(),A("p",Ev," "+O(n.value.length)+" ",1)):U("",!0),n.value.length?(C(),A("div",Cv,[f("table",Tv,[g[12]||(g[12]=f("thead",null,[f("tr",null,[f("th",null,"code"),f("th",null,"plan"),f("th",null,"days"),f("th",null,"max"),f("th",null,"expires")])],-1)),f("tbody",null,[(C(!0),A(_t,null,ke(n.value,S=>(C(),A("tr",{key:S.id},[f("td",null,[f("code",null,O(S.plaintext),1)]),f("td",null,O(S.plan_code),1),f("td",null,O(S.duration_days),1),f("td",null,O(S.max_redemptions),1),f("td",null,O(u(S.expires_at)),1)]))),128))])])])):U("",!0)],32)]),f("div",Mv,[g[15]||(g[15]=f("h2",{class:"card-title"},"",-1)),f("div",Ov,[f("button",{class:"btn btn-secondary",type:"button",onClick:c,disabled:l.value},O(l.value?"...":""),9,kv),a.value?(C(),A("p",Lv,O(a.value),1)):U("",!0),f("div",Av,[f("table",Rv,[g[14]||(g[14]=f("thead",null,[f("tr",null,[f("th",null,"id"),f("th",null,"plan"),f("th",null,"days"),f("th",null,"redeemed"),f("th",null,"max"),f("th",null,"expires"),f("th",null,"revoked"),f("th",null,"created"),f("th",null,"op")])],-1)),f("tbody",null,[(C(!0),A(_t,null,ke(i.value,S=>(C(),A("tr",{key:S.id},[f("td",null,[f("code",null,O(S.id),1)]),f("td",null,O(S.plan_code),1),f("td",null,O(S.duration_days),1),f("td",null,O(S.redeemed_count),1),f("td",null,O(S.max_redemptions),1),f("td",null,O(u(S.expires_at)),1),f("td",null,O(S.revoked_at?"":"-"),1),f("td",null,O(u(S.created_at)),1),f("td",null,[f("button",{class:"btn btn-danger btn-sm",type:"button",disabled:!!S.revoked_at||h.value===S.id,onClick:_=>p(S.id)},O(h.value===S.id?"...":""),9,Pv)])]))),128))])])])])])]),_:1}))}};function yt(s){var t=s.width,e=s.height;if(t<0)throw new Error("Negative width is not allowed for Size");if(e<0)throw new Error("Negative height is not allowed for Size");return{width:t,height:e}}function ds(s,t){return s.width===t.width&&s.height===t.height}var Iv=(function(){function s(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return s.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(s.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),s.prototype.subscribe=function(t){var e=this,i={next:t};return this._observers.push(i),{unsubscribe:function(){e._observers=e._observers.filter(function(n){return n!==i})}}},s.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},s.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},s.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},s.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(e){return e.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},s})();function Dv(s){return new Iv(s)}var Bv=(function(){function s(t,e,i){var n;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=yt({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=e??(function(r){return r}),this._allowResizeObserver=(n=i?.allowResizeObserver)!==null&&n!==void 0?n:!0,this._chooseAndInitObserver()}return s.prototype.dispose=function(){var t,e;if(this._canvasElement===null)throw new Error("Object is disposed");(t=this._canvasElementResizeObserver)===null||t===void 0||t.disconnect(),this._canvasElementResizeObserver=null,(e=this._devicePixelRatioObservable)===null||e===void 0||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(s.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"bitmapSize",{get:function(){return yt({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),s.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=yt(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},s.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},s.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(e){return e!==t})},Object.defineProperty(s.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),s.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},s.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(e){return e!==t})},s.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},s.prototype._resizeBitmap=function(t){var e=this.bitmapSize;ds(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},s.prototype._emitBitmapSizeChanged=function(t,e){var i=this;this._bitmapSizeChangedListeners.forEach(function(n){return n.call(i,t,e)})},s.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,i=yt(this._transformBitmapSize(t,this._canvasElementClientSize)),n=ds(this.bitmapSize,i)?null:i;e===null&&n===null||e!==null&&n!==null&&ds(e,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(e,n))},s.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(n){return n.call(i,t,e)})},s.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}Vv().then(function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})},s.prototype._initDevicePixelRatioObservable=function(){var t=this;if(this._canvasElement!==null){var e=Al(this._canvasElement);if(e===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=Dv(e),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},s.prototype._invalidateBitmapSize=function(){var t,e;if(this._canvasElement!==null){var i=Al(this._canvasElement);if(i!==null){var n=(e=(t=this._devicePixelRatioObservable)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:i.devicePixelRatio,r=this._canvasElement.getClientRects(),o=r[0]!==void 0?Fv(r[0],n):yt({width:this._canvasElementClientSize.width*n,height:this._canvasElementClientSize.height*n});this._suggestNewBitmapSize(o)}}},s.prototype._initResizeObserver=function(){var t=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(e){var i=e.find(function(o){return o.target===t._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var n=i.devicePixelContentBoxSize[0],r=yt({width:n.inlineSize,height:n.blockSize});t._suggestNewBitmapSize(r)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},s})();function $v(s,t){return new Bv(s,t.transform,t.options)}function Al(s){return s.ownerDocument.defaultView}function Vv(){return new Promise(function(s){var t=new ResizeObserver(function(e){s(e.every(function(i){return"devicePixelContentBoxSize"in i})),t.disconnect()});t.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function Fv(s,t){return yt({width:Math.round(s.left*t+s.width*t)-Math.round(s.left*t),height:Math.round(s.top*t+s.height*t)-Math.round(s.top*t)})}var zv=(function(){function s(t,e,i){if(e.width===0||e.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=t}return s.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},s.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(s.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),s})();function ms(s,t){var e=s.canvasElementClientSize;if(e.width===0||e.height===0)return null;var i=s.bitmapSize;if(i.width===0||i.height===0)return null;var n=s.canvasElement.getContext("2d",t);return n===null?null:new zv(n,e,i)}const Wv={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Uv={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},qv={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Hv={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},jv={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Kv={color:"#26a69a",base:0},Gh={color:"#2196f3"},Jh={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var Rl,Pl;function vs(s,t){const e={0:[],1:[s.lineWidth,s.lineWidth],2:[2*s.lineWidth,2*s.lineWidth],3:[6*s.lineWidth,6*s.lineWidth],4:[s.lineWidth,4*s.lineWidth]}[t];s.setLineDash(e)}function Xh(s,t,e,i){s.beginPath();const n=s.lineWidth%2?.5:0;s.moveTo(e,t+n),s.lineTo(i,t+n),s.stroke()}function es(s,t){if(!s)throw new Error("Assertion failed"+(t?": "+t:""))}function Wt(s){if(s===void 0)throw new Error("Value is undefined");return s}function N(s){if(s===null)throw new Error("Value is null");return s}function Cs(s){return N(Wt(s))}(function(s){s[s.Simple=0]="Simple",s[s.WithSteps=1]="WithSteps",s[s.Curved=2]="Curved"})(Rl||(Rl={})),(function(s){s[s.Solid=0]="Solid",s[s.Dotted=1]="Dotted",s[s.Dashed=2]="Dashed",s[s.LargeDashed=3]="LargeDashed",s[s.SparseDotted=4]="SparseDotted"})(Pl||(Pl={}));const Nl={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function re(s){return s<0?0:s>255?255:Math.round(s)||0}function Yh(s){return s<=0||s>0?s<0?0:s>1?1:Math.round(1e4*s)/1e4:0}const Gv=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,Jv=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,Xv=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,Yv=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function cn(s){(s=s.toLowerCase())in Nl&&(s=Nl[s]);{const t=Yv.exec(s)||Xv.exec(s);if(t)return[re(parseInt(t[1],10)),re(parseInt(t[2],10)),re(parseInt(t[3],10)),Yh(t.length<5?1:parseFloat(t[4]))]}{const t=Jv.exec(s);if(t)return[re(parseInt(t[1],16)),re(parseInt(t[2],16)),re(parseInt(t[3],16)),1]}{const t=Gv.exec(s);if(t)return[re(17*parseInt(t[1],16)),re(17*parseInt(t[2],16)),re(17*parseInt(t[3],16)),1]}throw new Error(`Cannot parse color: ${s}`)}function Mn(s){const t=cn(s);return{t:`rgb(${t[0]}, ${t[1]}, ${t[2]})`,i:(e=t,.199*e[0]+.687*e[1]+.114*e[2]>160?"black":"white")};var e}class St{constructor(){this.h=[]}l(t,e,i){const n={o:t,_:e,u:i===!0};this.h.push(n)}v(t){const e=this.h.findIndex((i=>t===i.o));e>-1&&this.h.splice(e,1)}p(t){this.h=this.h.filter((e=>e._!==t))}m(t,e,i){const n=[...this.h];this.h=this.h.filter((r=>!r.u)),n.forEach((r=>r.o(t,e,i)))}M(){return this.h.length>0}S(){this.h=[]}}function ve(s,...t){for(const e of t)for(const i in e)e[i]!==void 0&&(typeof e[i]!="object"||s[i]===void 0||Array.isArray(e[i])?s[i]=e[i]:ve(s[i],e[i]));return s}function Ce(s){return typeof s=="number"&&isFinite(s)}function yi(s){return typeof s=="number"&&s%1==0}function Li(s){return typeof s=="string"}function Ii(s){return typeof s=="boolean"}function De(s){const t=s;if(!t||typeof t!="object")return t;let e,i,n;for(i in e=Array.isArray(t)?[]:{},t)t.hasOwnProperty(i)&&(n=t[i],e[i]=n&&typeof n=="object"?De(n):n);return e}function Qv(s){return s!==null}function _i(s){return s===null?void 0:s}const vo="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Vs(s,t,e){return t===void 0&&(t=vo),`${e=e!==void 0?`${e} `:""}${s}px ${t}`}class Zv{constructor(t){this.k={C:1,T:5,P:NaN,R:"",D:"",O:"",A:"",V:0,B:0,I:0,L:0,N:0},this.F=t}W(){const t=this.k,e=this.j(),i=this.H();return t.P===e&&t.D===i||(t.P=e,t.D=i,t.R=Vs(e,i),t.L=2.5/12*e,t.V=t.L,t.B=e/12*t.T,t.I=e/12*t.T,t.N=0),t.O=this.$(),t.A=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class go{constructor(){this.Y=[]}X(t){this.Y=t}K(t,e,i){this.Y.forEach((n=>{n.K(t,e,i)}))}}class bo{K(t,e,i){t.useMediaCoordinateSpace((n=>this.Z(n,e,i)))}G(t,e,i){t.useMediaCoordinateSpace((n=>this.J(n,e,i)))}J(t,e,i){}}class tg extends bo{constructor(){super(...arguments),this.tt=null}it(t){this.tt=t}Z({context:t}){if(this.tt===null||this.tt.nt===null)return;const e=this.tt.nt,i=this.tt,n=r=>{t.beginPath();for(let o=e.to-1;o>=e.from;--o){const l=i.st[o];t.moveTo(l.et,l.rt),t.arc(l.et,l.rt,r,0,2*Math.PI)}t.fill()};i.ht>0&&(t.fillStyle=i.lt,n(i.ot+i.ht)),t.fillStyle=i._t,n(i.ot)}}function eg(){return{st:[{et:0,rt:0,ut:0,ct:0}],_t:"",lt:"",ot:0,ht:0,nt:null}}const sg={from:0,to:1};class ig{constructor(t,e){this.dt=new go,this.ft=[],this.vt=[],this.bt=!0,this.F=t,this.wt=e,this.dt.X(this.ft)}gt(t){const e=this.F.Mt();e.length!==this.ft.length&&(this.vt=e.map(eg),this.ft=this.vt.map((i=>{const n=new tg;return n.it(i),n})),this.dt.X(this.ft)),this.bt=!0}xt(){return this.bt&&(this.St(),this.bt=!1),this.dt}St(){const t=this.wt.W().mode===2,e=this.F.Mt(),i=this.wt.kt(),n=this.F.yt();e.forEach(((r,o)=>{var l;const a=this.vt[o],h=r.Ct(i);if(t||h===null||!r.Tt())return void(a.nt=null);const u=N(r.Pt());a._t=h.Rt,a.ot=h.ot,a.ht=h.Dt,a.st[0].ct=h.ct,a.st[0].rt=r.At().Ot(h.ct,u.Vt),a.lt=(l=h.Bt)!==null&&l!==void 0?l:this.F.It(a.st[0].rt/r.At().zt()),a.st[0].ut=i,a.st[0].et=n.Et(i),a.nt=sg}))}}class qe{K(t,e,i){t.useBitmapCoordinateSpace((n=>this.Z(n,e,i)))}}class ng extends qe{constructor(t){super(),this.Lt=t}Z({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.Lt===null)return;const r=this.Lt.Nt.Tt,o=this.Lt.Ft.Tt;if(!r&&!o)return;const l=Math.round(this.Lt.et*i),a=Math.round(this.Lt.rt*n);t.lineCap="butt",r&&l>=0&&(t.lineWidth=Math.floor(this.Lt.Nt.ht*i),t.strokeStyle=this.Lt.Nt.O,t.fillStyle=this.Lt.Nt.O,vs(t,this.Lt.Nt.Wt),(function(h,u,c,d){h.beginPath();const p=h.lineWidth%2?.5:0;h.moveTo(u+p,c),h.lineTo(u+p,d),h.stroke()})(t,l,0,e.height)),o&&a>=0&&(t.lineWidth=Math.floor(this.Lt.Ft.ht*n),t.strokeStyle=this.Lt.Ft.O,t.fillStyle=this.Lt.Ft.O,vs(t,this.Lt.Ft.Wt),Xh(t,a,0,e.width))}}class rg{constructor(t){this.bt=!0,this.jt={Nt:{ht:1,Wt:0,O:"",Tt:!1},Ft:{ht:1,Wt:0,O:"",Tt:!1},et:0,rt:0},this.Ht=new ng(this.jt),this.$t=t}gt(){this.bt=!0}xt(){return this.bt&&(this.St(),this.bt=!1),this.Ht}St(){const t=this.$t.Tt(),e=N(this.$t.Ut()),i=e.qt().W().crosshair,n=this.jt;if(i.mode===2)return n.Ft.Tt=!1,void(n.Nt.Tt=!1);n.Ft.Tt=t&&this.$t.Yt(e),n.Nt.Tt=t&&this.$t.Xt(),n.Ft.ht=i.horzLine.width,n.Ft.Wt=i.horzLine.style,n.Ft.O=i.horzLine.color,n.Nt.ht=i.vertLine.width,n.Nt.Wt=i.vertLine.style,n.Nt.O=i.vertLine.color,n.et=this.$t.Kt(),n.rt=this.$t.Zt()}}function og(s,t,e,i,n,r){s.fillRect(t+r,e,i-2*r,r),s.fillRect(t+r,e+n-r,i-2*r,r),s.fillRect(t,e,r,n),s.fillRect(t+i-r,e,r,n)}function On(s,t,e,i,n,r){s.save(),s.globalCompositeOperation="copy",s.fillStyle=r,s.fillRect(t,e,i,n),s.restore()}function Il(s,t){return s.map((e=>e===0?e:e+t))}function Gn(s,t,e,i,n,r){s.beginPath(),s.lineTo(t+i-r[1],e),r[1]!==0&&s.arcTo(t+i,e,t+i,e+r[1],r[1]),s.lineTo(t+i,e+n-r[2]),r[2]!==0&&s.arcTo(t+i,e+n,t+i-r[2],e+n,r[2]),s.lineTo(t+r[3],e+n),r[3]!==0&&s.arcTo(t,e+n,t,e+n-r[3],r[3]),s.lineTo(t,e+r[0]),r[0]!==0&&s.arcTo(t,e,t+r[0],e,r[0])}function Dl(s,t,e,i,n,r,o=0,l=[0,0,0,0],a=""){if(s.save(),!o||!a||a===r)return Gn(s,t,e,i,n,l),s.fillStyle=r,s.fill(),void s.restore();const h=o/2;r!=="transparent"&&(Gn(s,t+o,e+o,i-2*o,n-2*o,Il(l,-o)),s.fillStyle=r,s.fill()),a!=="transparent"&&(Gn(s,t+h,e+h,i-o,n-o,Il(l,-h)),s.lineWidth=o,s.strokeStyle=a,s.closePath(),s.stroke()),s.restore()}function Qh(s,t,e,i,n,r,o){s.save(),s.globalCompositeOperation="copy";const l=s.createLinearGradient(0,0,0,n);l.addColorStop(0,r),l.addColorStop(1,o),s.fillStyle=l,s.fillRect(t,e,i,n),s.restore()}class Bl{constructor(t,e){this.it(t,e)}it(t,e){this.Lt=t,this.Gt=e}zt(t,e){return this.Lt.Tt?t.P+t.L+t.V:0}K(t,e,i,n){if(!this.Lt.Tt||this.Lt.Jt.length===0)return;const r=this.Lt.O,o=this.Gt.t,l=t.useBitmapCoordinateSpace((a=>{const h=a.context;h.font=e.R;const u=this.Qt(a,e,i,n),c=u.ti,d=(p,m)=>{u.ii?Dl(h,c.ni,c.si,c.ei,c.ri,p,c.hi,[c.ot,0,0,c.ot],m):Dl(h,c.li,c.si,c.ei,c.ri,p,c.hi,[0,c.ot,c.ot,0],m)};return d(o,"transparent"),this.Lt.ai&&(h.fillStyle=r,h.fillRect(c.li,c.oi,c._i-c.li,c.ui)),d("transparent",o),this.Lt.ci&&(h.fillStyle=e.A,h.fillRect(u.ii?c.di-c.hi:0,c.si,c.hi,c.fi-c.si)),u}));t.useMediaCoordinateSpace((({context:a})=>{const h=l.vi;a.font=e.R,a.textAlign=l.ii?"right":"left",a.textBaseline="middle",a.fillStyle=r,a.fillText(this.Lt.Jt,h.pi,(h.si+h.fi)/2+h.mi)}))}Qt(t,e,i,n){var r;const{context:o,bitmapSize:l,mediaSize:a,horizontalPixelRatio:h,verticalPixelRatio:u}=t,c=this.Lt.ai||!this.Lt.bi?e.T:0,d=this.Lt.wi?e.C:0,p=e.L+this.Gt.gi,m=e.V+this.Gt.Mi,g=e.B,S=e.I,_=this.Lt.Jt,y=e.P,x=i.xi(o,_),P=Math.ceil(i.Si(o,_)),J=y+p+m,it=e.C+g+S+P+c,Q=Math.max(1,Math.floor(u));let ht=Math.round(J*u);ht%2!=Q%2&&(ht+=1);const Ct=d>0?Math.max(1,Math.floor(d*h)):0,Tt=Math.round(it*h),Mt=Math.round(c*h),ee=(r=this.Gt.ki)!==null&&r!==void 0?r:this.Gt.yi,Lt=Math.round(ee*u)-Math.floor(.5*u),se=Math.floor(Lt+Q/2-ht/2),W=se+ht,k=n==="right",q=k?a.width-d:d,Z=k?l.width-Ct:Ct;let Xt,ie,Ut;return k?(Xt=Z-Tt,ie=Z-Mt,Ut=q-c-g-d):(Xt=Z+Tt,ie=Z+Mt,Ut=q+c+g),{ii:k,ti:{si:se,oi:Lt,fi:W,ei:Tt,ri:ht,ot:2*h,hi:Ct,ni:Xt,li:Z,_i:ie,ui:Q,di:l.width},vi:{si:se/u,fi:W/u,pi:Ut,mi:x}}}}class kn{constructor(t){this.Ci={yi:0,t:"#000",Mi:0,gi:0},this.Ti={Jt:"",Tt:!1,ai:!0,bi:!1,Bt:"",O:"#FFF",ci:!1,wi:!1},this.Pi={Jt:"",Tt:!1,ai:!1,bi:!0,Bt:"",O:"#FFF",ci:!0,wi:!0},this.bt=!0,this.Ri=new(t||Bl)(this.Ti,this.Ci),this.Di=new(t||Bl)(this.Pi,this.Ci)}Jt(){return this.Oi(),this.Ti.Jt}yi(){return this.Oi(),this.Ci.yi}gt(){this.bt=!0}zt(t,e=!1){return Math.max(this.Ri.zt(t,e),this.Di.zt(t,e))}Ai(){return this.Ci.ki||0}Vi(t){this.Ci.ki=t}Bi(){return this.Oi(),this.Ti.Tt||this.Pi.Tt}Ii(){return this.Oi(),this.Ti.Tt}xt(t){return this.Oi(),this.Ti.ai=this.Ti.ai&&t.W().ticksVisible,this.Pi.ai=this.Pi.ai&&t.W().ticksVisible,this.Ri.it(this.Ti,this.Ci),this.Di.it(this.Pi,this.Ci),this.Ri}zi(){return this.Oi(),this.Ri.it(this.Ti,this.Ci),this.Di.it(this.Pi,this.Ci),this.Di}Oi(){this.bt&&(this.Ti.ai=!0,this.Pi.ai=!1,this.Ei(this.Ti,this.Pi,this.Ci))}}class lg extends kn{constructor(t,e,i){super(),this.$t=t,this.Li=e,this.Ni=i}Ei(t,e,i){if(t.Tt=!1,this.$t.W().mode===2)return;const n=this.$t.W().horzLine;if(!n.labelVisible)return;const r=this.Li.Pt();if(!this.$t.Tt()||this.Li.Fi()||r===null)return;const o=Mn(n.labelBackgroundColor);i.t=o.t,t.O=o.i;const l=2/12*this.Li.P();i.gi=l,i.Mi=l;const a=this.Ni(this.Li);i.yi=a.yi,t.Jt=this.Li.Wi(a.ct,r),t.Tt=!0}}const ag=/[1-9]/g;class Zh{constructor(){this.Lt=null}it(t){this.Lt=t}K(t,e){if(this.Lt===null||this.Lt.Tt===!1||this.Lt.Jt.length===0)return;const i=t.useMediaCoordinateSpace((({context:d})=>(d.font=e.R,Math.round(e.ji.Si(d,N(this.Lt).Jt,ag)))));if(i<=0)return;const n=e.Hi,r=i+2*n,o=r/2,l=this.Lt.$i;let a=this.Lt.yi,h=Math.floor(a-o)+.5;h<0?(a+=Math.abs(0-h),h=Math.floor(a-o)+.5):h+r>l&&(a-=Math.abs(l-(h+r)),h=Math.floor(a-o)+.5);const u=h+r,c=Math.ceil(0+e.C+e.T+e.L+e.P+e.V);t.useBitmapCoordinateSpace((({context:d,horizontalPixelRatio:p,verticalPixelRatio:m})=>{const g=N(this.Lt);d.fillStyle=g.t;const S=Math.round(h*p),_=Math.round(0*m),y=Math.round(u*p),x=Math.round(c*m),P=Math.round(2*p);if(d.beginPath(),d.moveTo(S,_),d.lineTo(S,x-P),d.arcTo(S,x,S+P,x,P),d.lineTo(y-P,x),d.arcTo(y,x,y,x-P,P),d.lineTo(y,_),d.fill(),g.ai){const J=Math.round(g.yi*p),it=_,Q=Math.round((it+e.T)*m);d.fillStyle=g.O;const ht=Math.max(1,Math.floor(p)),Ct=Math.floor(.5*p);d.fillRect(J-Ct,it,ht,Q-it)}})),t.useMediaCoordinateSpace((({context:d})=>{const p=N(this.Lt),m=0+e.C+e.T+e.L+e.P/2;d.font=e.R,d.textAlign="left",d.textBaseline="middle",d.fillStyle=p.O;const g=e.ji.xi(d,"Apr0");d.translate(h+n,m+g),d.fillText(p.Jt,0,0)}))}}class hg{constructor(t,e,i){this.bt=!0,this.Ht=new Zh,this.jt={Tt:!1,t:"#4c525e",O:"white",Jt:"",$i:0,yi:NaN,ai:!0},this.wt=t,this.Ui=e,this.Ni=i}gt(){this.bt=!0}xt(){return this.bt&&(this.St(),this.bt=!1),this.Ht.it(this.jt),this.Ht}St(){const t=this.jt;if(t.Tt=!1,this.wt.W().mode===2)return;const e=this.wt.W().vertLine;if(!e.labelVisible)return;const i=this.Ui.yt();if(i.Fi())return;t.$i=i.$i();const n=this.Ni();if(n===null)return;t.yi=n.yi;const r=i.qi(this.wt.kt());t.Jt=i.Yi(N(r)),t.Tt=!0;const o=Mn(e.labelBackgroundColor);t.t=o.t,t.O=o.i,t.ai=i.W().ticksVisible}}class yo{constructor(){this.Xi=null,this.Ki=0}Zi(){return this.Ki}Gi(t){this.Ki=t}At(){return this.Xi}Ji(t){this.Xi=t}Qi(t){return[]}tn(){return[]}Tt(){return!0}}var Nr;(function(s){s[s.Normal=0]="Normal",s[s.Magnet=1]="Magnet",s[s.Hidden=2]="Hidden"})(Nr||(Nr={}));class ug extends yo{constructor(t,e){super(),this.nn=null,this.sn=NaN,this.en=0,this.rn=!0,this.hn=new Map,this.ln=!1,this.an=NaN,this.on=NaN,this._n=NaN,this.un=NaN,this.Ui=t,this.cn=e,this.dn=new ig(t,this),this.fn=((n,r)=>o=>{const l=r(),a=n();if(o===N(this.nn).vn())return{ct:a,yi:l};{const h=N(o.Pt());return{ct:o.pn(l,h),yi:l}}})((()=>this.sn),(()=>this.on));const i=((n,r)=>()=>{const o=this.Ui.yt().mn(n()),l=r();return o&&Number.isFinite(l)?{ut:o,yi:l}:null})((()=>this.en),(()=>this.Kt()));this.bn=new hg(this,t,i),this.wn=new rg(this)}W(){return this.cn}gn(t,e){this._n=t,this.un=e}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(t,e,i){this.ln||(this.ln=!0),this.rn=!0,this.yn(t,e,i)}kt(){return this.en}Kt(){return this.an}Zt(){return this.on}Tt(){return this.rn}Cn(){this.rn=!1,this.Tn(),this.sn=NaN,this.an=NaN,this.on=NaN,this.nn=null,this.Mn()}Pn(t){return this.nn!==null?[this.wn,this.dn]:[]}Yt(t){return t===this.nn&&this.cn.horzLine.visible}Xt(){return this.cn.vertLine.visible}Rn(t,e){this.rn&&this.nn===t||this.hn.clear();const i=[];return this.nn===t&&i.push(this.Dn(this.hn,e,this.fn)),i}tn(){return this.rn?[this.bn]:[]}Ut(){return this.nn}On(){this.wn.gt(),this.hn.forEach((t=>t.gt())),this.bn.gt(),this.dn.gt()}An(t){return t&&!t.vn().Fi()?t.vn():null}yn(t,e,i){this.Vn(t,e,i)&&this.On()}Vn(t,e,i){const n=this.an,r=this.on,o=this.sn,l=this.en,a=this.nn,h=this.An(i);this.en=t,this.an=isNaN(t)?NaN:this.Ui.yt().Et(t),this.nn=i;const u=h!==null?h.Pt():null;return h!==null&&u!==null?(this.sn=e,this.on=h.Ot(e,u)):(this.sn=NaN,this.on=NaN),n!==this.an||r!==this.on||l!==this.en||o!==this.sn||a!==this.nn}Tn(){const t=this.Ui.Mt().map((i=>i.In().Bn())).filter(Qv),e=t.length===0?null:Math.max(...t);this.en=e!==null?e:NaN}Dn(t,e,i){let n=t.get(e);return n===void 0&&(n=new lg(this,e,i),t.set(e,n)),n}}function Ln(s){return s==="left"||s==="right"}class kt{constructor(t){this.zn=new Map,this.En=[],this.Ln=t}Nn(t,e){const i=(function(n,r){return n===void 0?r:{Fn:Math.max(n.Fn,r.Fn),Wn:n.Wn||r.Wn}})(this.zn.get(t),e);this.zn.set(t,i)}jn(){return this.Ln}Hn(t){const e=this.zn.get(t);return e===void 0?{Fn:this.Ln}:{Fn:Math.max(this.Ln,e.Fn),Wn:e.Wn}}$n(){this.Un(),this.En=[{qn:0}]}Yn(t){this.Un(),this.En=[{qn:1,Vt:t}]}Xn(t){this.Kn(),this.En.push({qn:5,Vt:t})}Un(){this.Kn(),this.En.push({qn:6})}Zn(){this.Un(),this.En=[{qn:4}]}Gn(t){this.Un(),this.En.push({qn:2,Vt:t})}Jn(t){this.Un(),this.En.push({qn:3,Vt:t})}Qn(){return this.En}ts(t){for(const e of t.En)this.ns(e);this.Ln=Math.max(this.Ln,t.Ln),t.zn.forEach(((e,i)=>{this.Nn(i,e)}))}static ss(){return new kt(2)}static es(){return new kt(3)}ns(t){switch(t.qn){case 0:this.$n();break;case 1:this.Yn(t.Vt);break;case 2:this.Gn(t.Vt);break;case 3:this.Jn(t.Vt);break;case 4:this.Zn();break;case 5:this.Xn(t.Vt);break;case 6:this.Kn()}}Kn(){const t=this.En.findIndex((e=>e.qn===5));t!==-1&&this.En.splice(t,1)}}const $l=".";function Be(s,t){if(!Ce(s))return"n/a";if(!yi(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return t===0?s.toString():("0000000000000000"+s.toString()).slice(-t)}class An{constructor(t,e){if(e||(e=1),Ce(t)&&yi(t)||(t=100),t<0)throw new TypeError("invalid base");this.Li=t,this.rs=e,this.hs()}format(t){const e=t<0?"":"";return t=Math.abs(t),e+this.ls(t)}hs(){if(this.os=0,this.Li>0&&this.rs>0){let t=this.Li;for(;t>1;)t/=10,this.os++}}ls(t){const e=this.Li/this.rs;let i=Math.floor(t),n="";const r=this.os!==void 0?this.os:NaN;if(e>1){let o=+(Math.round(t*e)-i*e).toFixed(this.os);o>=e&&(o-=e,i+=1),n=$l+Be(+o.toFixed(this.os)*this.rs,r)}else i=Math.round(i*e)/e,r>0&&(n=$l+Be(0,r));return i.toFixed(0)+n}}class tu extends An{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class cg{constructor(t){this._s=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.us(t):t<999995?e+this.us(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.us(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.us(t/1e9)+"B")}us(t){let e;const i=Math.pow(10,this._s);return e=(t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this._s).replace(/\.?0+$/,""):String(t),e.replace(/(\.[1-9]*)0+$/,((n,r)=>r))}}function eu(s,t,e,i,n,r,o){if(t.length===0||i.from>=t.length||i.to<=0)return;const{context:l,horizontalPixelRatio:a,verticalPixelRatio:h}=s,u=t[i.from];let c=r(s,u),d=u;if(i.to-i.from<2){const p=n/2;l.beginPath();const m={et:u.et-p,rt:u.rt},g={et:u.et+p,rt:u.rt};l.moveTo(m.et*a,m.rt*h),l.lineTo(g.et*a,g.rt*h),o(s,c,m,g)}else{const p=(g,S)=>{o(s,c,d,S),l.beginPath(),c=g,d=S};let m=d;l.beginPath(),l.moveTo(u.et*a,u.rt*h);for(let g=i.from+1;g<i.to;++g){m=t[g];const S=r(s,m);switch(e){case 0:l.lineTo(m.et*a,m.rt*h);break;case 1:l.lineTo(m.et*a,t[g-1].rt*h),S!==c&&(p(S,m),l.lineTo(m.et*a,t[g-1].rt*h)),l.lineTo(m.et*a,m.rt*h);break;case 2:{const[_,y]=fg(t,g-1,g);l.bezierCurveTo(_.et*a,_.rt*h,y.et*a,y.rt*h,m.et*a,m.rt*h);break}}e!==1&&S!==c&&(p(S,m),l.moveTo(m.et*a,m.rt*h))}(d!==m||d===m&&e===1)&&o(s,c,d,m)}}const Vl=6;function Jn(s,t){return{et:s.et-t.et,rt:s.rt-t.rt}}function Fl(s,t){return{et:s.et/t,rt:s.rt/t}}function fg(s,t,e){const i=Math.max(0,t-1),n=Math.min(s.length-1,e+1);var r,o;return[(r=s[t],o=Fl(Jn(s[e],s[i]),Vl),{et:r.et+o.et,rt:r.rt+o.rt}),Jn(s[e],Fl(Jn(s[n],s[t]),Vl))]}function dg(s,t,e,i,n){const{context:r,horizontalPixelRatio:o,verticalPixelRatio:l}=t;r.lineTo(n.et*o,s*l),r.lineTo(i.et*o,s*l),r.closePath(),r.fillStyle=e,r.fill()}class su extends qe{constructor(){super(...arguments),this.tt=null}it(t){this.tt=t}Z(t){var e;if(this.tt===null)return;const{st:i,nt:n,cs:r,ht:o,Wt:l,ds:a}=this.tt,h=(e=this.tt.fs)!==null&&e!==void 0?e:this.tt.vs?0:t.mediaSize.height;if(n===null)return;const u=t.context;u.lineCap="butt",u.lineJoin="round",u.lineWidth=o,vs(u,l),u.lineWidth=1,eu(t,i,a,n,r,this.ps.bind(this),dg.bind(null,h))}}function Ir(s,t,e){return Math.min(Math.max(s,t),e)}function Di(s,t,e){return t-s<=e}function iu(s){const t=Math.ceil(s);return t%2==0?t-1:t}class _o{bs(t,e){const i=this.ws,{gs:n,Ms:r,xs:o,Ss:l,ks:a,fs:h}=e;if(this.ys===void 0||i===void 0||i.gs!==n||i.Ms!==r||i.xs!==o||i.Ss!==l||i.fs!==h||i.ks!==a){const u=t.context.createLinearGradient(0,0,0,a);if(u.addColorStop(0,n),h!=null){const c=Ir(h*t.verticalPixelRatio/a,0,1);u.addColorStop(c,r),u.addColorStop(c,o)}u.addColorStop(1,l),this.ys=u,this.ws=e}return this.ys}}class pg extends su{constructor(){super(...arguments),this.Cs=new _o}ps(t,e){return this.Cs.bs(t,{gs:e.Ts,Ms:"",xs:"",Ss:e.Ps,ks:t.bitmapSize.height})}}function mg(s,t){const e=s.context;e.strokeStyle=t,e.stroke()}class nu extends qe{constructor(){super(...arguments),this.tt=null}it(t){this.tt=t}Z(t){if(this.tt===null)return;const{st:e,nt:i,cs:n,ds:r,ht:o,Wt:l,Rs:a}=this.tt;if(i===null)return;const h=t.context;h.lineCap="butt",h.lineWidth=o*t.verticalPixelRatio,vs(h,l),h.lineJoin="round";const u=this.Ds.bind(this);r!==void 0&&eu(t,e,r,i,n,u,mg),a&&(function(c,d,p,m,g){const{horizontalPixelRatio:S,verticalPixelRatio:_,context:y}=c;let x=null;const P=Math.max(1,Math.floor(S))%2/2,J=p*_+P;for(let it=m.to-1;it>=m.from;--it){const Q=d[it];if(Q){const ht=g(c,Q);ht!==x&&(y.beginPath(),x!==null&&y.fill(),y.fillStyle=ht,x=ht);const Ct=Math.round(Q.et*S)+P,Tt=Q.rt*_;y.moveTo(Ct,Tt),y.arc(Ct,Tt,J,0,2*Math.PI)}}y.fill()})(t,e,a,i,u)}}class ru extends nu{Ds(t,e){return e._t}}function ou(s,t,e,i,n=0,r=t.length){let o=r-n;for(;0<o;){const l=o>>1,a=n+l;i(t[a],e)===s?(n=a+1,o-=l+1):o=l}return n}const Ai=ou.bind(null,!0),lu=ou.bind(null,!1);function vg(s,t){return s.ut<t}function gg(s,t){return t<s.ut}function au(s,t,e){const i=t.Os(),n=t.di(),r=Ai(s,i,vg),o=lu(s,n,gg);if(!e)return{from:r,to:o};let l=r,a=o;return r>0&&r<s.length&&s[r].ut>=i&&(l=r-1),o>0&&o<s.length&&s[o-1].ut<=n&&(a=o+1),{from:l,to:a}}class wo{constructor(t,e,i){this.As=!0,this.Vs=!0,this.Bs=!0,this.Is=[],this.zs=null,this.Es=t,this.Ls=e,this.Ns=i}gt(t){this.As=!0,t==="data"&&(this.Vs=!0),t==="options"&&(this.Bs=!0)}xt(){return this.Es.Tt()?(this.Fs(),this.zs===null?null:this.Ws):null}js(){this.Is=this.Is.map((t=>Object.assign(Object.assign({},t),this.Es.$s().Hs(t.ut))))}Us(){this.zs=null}Fs(){this.Vs&&(this.qs(),this.Vs=!1),this.Bs&&(this.js(),this.Bs=!1),this.As&&(this.Ys(),this.As=!1)}Ys(){const t=this.Es.At(),e=this.Ls.yt();if(this.Us(),e.Fi()||t.Fi())return;const i=e.Xs();if(i===null||this.Es.In().Ks()===0)return;const n=this.Es.Pt();n!==null&&(this.zs=au(this.Is,i,this.Ns),this.Zs(t,e,n.Vt),this.Gs())}}class Rn extends wo{constructor(t,e){super(t,e,!0)}Zs(t,e,i){e.Js(this.Is,_i(this.zs)),t.Qs(this.Is,i,_i(this.zs))}te(t,e){return{ut:t,ct:e,et:NaN,rt:NaN}}qs(){const t=this.Es.$s();this.Is=this.Es.In().ie().map((e=>{const i=e.Vt[3];return this.ne(e.se,i,t)}))}}class bg extends Rn{constructor(t,e){super(t,e),this.Ws=new go,this.ee=new pg,this.re=new ru,this.Ws.X([this.ee,this.re])}ne(t,e,i){return Object.assign(Object.assign({},this.te(t,e)),i.Hs(t))}Gs(){const t=this.Es.W();this.ee.it({ds:t.lineType,st:this.Is,Wt:t.lineStyle,ht:t.lineWidth,fs:null,vs:t.invertFilledArea,nt:this.zs,cs:this.Ls.yt().he()}),this.re.it({ds:t.lineVisible?t.lineType:void 0,st:this.Is,Wt:t.lineStyle,ht:t.lineWidth,nt:this.zs,cs:this.Ls.yt().he(),Rs:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0})}}class yg extends qe{constructor(){super(...arguments),this.Lt=null,this.le=0,this.ae=0}it(t){this.Lt=t}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(this.Lt===null||this.Lt.In.length===0||this.Lt.nt===null)return;this.le=this.oe(e),this.le>=2&&Math.max(1,Math.floor(e))%2!=this.le%2&&this.le--,this.ae=this.Lt._e?Math.min(this.le,Math.floor(e)):this.le;let n=null;const r=this.ae<=this.le&&this.Lt.he>=Math.floor(1.5*e);for(let o=this.Lt.nt.from;o<this.Lt.nt.to;++o){const l=this.Lt.In[o];n!==l.ue&&(t.fillStyle=l.ue,n=l.ue);const a=Math.floor(.5*this.ae),h=Math.round(l.et*e),u=h-a,c=this.ae,d=u+c-1,p=Math.min(l.ce,l.de),m=Math.max(l.ce,l.de),g=Math.round(p*i)-a,S=Math.round(m*i)+a,_=Math.max(S-g,this.ae);t.fillRect(u,g,c,_);const y=Math.ceil(1.5*this.le);if(r){if(this.Lt.fe){const it=h-y;let Q=Math.max(g,Math.round(l.ve*i)-a),ht=Q+c-1;ht>g+_-1&&(ht=g+_-1,Q=ht-c+1),t.fillRect(it,Q,u-it,ht-Q+1)}const x=h+y;let P=Math.max(g,Math.round(l.pe*i)-a),J=P+c-1;J>g+_-1&&(J=g+_-1,P=J-c+1),t.fillRect(d+1,P,x-d,J-P+1)}}}oe(t){const e=Math.floor(t);return Math.max(e,Math.floor((function(i,n){return Math.floor(.3*i*n)})(N(this.Lt).he,t)))}}class hu extends wo{constructor(t,e){super(t,e,!1)}Zs(t,e,i){e.Js(this.Is,_i(this.zs)),t.me(this.Is,i,_i(this.zs))}be(t,e,i){return{ut:t,we:e.Vt[0],ge:e.Vt[1],Me:e.Vt[2],xe:e.Vt[3],et:NaN,ve:NaN,ce:NaN,de:NaN,pe:NaN}}qs(){const t=this.Es.$s();this.Is=this.Es.In().ie().map((e=>this.ne(e.se,e,t)))}}class _g extends hu{constructor(){super(...arguments),this.Ws=new yg}ne(t,e,i){return Object.assign(Object.assign({},this.be(t,e,i)),i.Hs(t))}Gs(){const t=this.Es.W();this.Ws.it({In:this.Is,he:this.Ls.yt().he(),fe:t.openVisible,_e:t.thinBars,nt:this.zs})}}class wg extends su{constructor(){super(...arguments),this.Cs=new _o}ps(t,e){const i=this.tt;return this.Cs.bs(t,{gs:e.Se,Ms:e.ke,xs:e.ye,Ss:e.Ce,ks:t.bitmapSize.height,fs:i.fs})}}class Sg extends nu{constructor(){super(...arguments),this.Te=new _o}Ds(t,e){const i=this.tt;return this.Te.bs(t,{gs:e.Pe,Ms:e.Pe,xs:e.Re,Ss:e.Re,ks:t.bitmapSize.height,fs:i.fs})}}class xg extends Rn{constructor(t,e){super(t,e),this.Ws=new go,this.De=new wg,this.Oe=new Sg,this.Ws.X([this.De,this.Oe])}ne(t,e,i){return Object.assign(Object.assign({},this.te(t,e)),i.Hs(t))}Gs(){const t=this.Es.Pt();if(t===null)return;const e=this.Es.W(),i=this.Es.At().Ot(e.baseValue.price,t.Vt),n=this.Ls.yt().he();this.De.it({st:this.Is,ht:e.lineWidth,Wt:e.lineStyle,ds:e.lineType,fs:i,vs:!1,nt:this.zs,cs:n}),this.Oe.it({st:this.Is,ht:e.lineWidth,Wt:e.lineStyle,ds:e.lineVisible?e.lineType:void 0,Rs:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,fs:i,nt:this.zs,cs:n})}}class Eg extends qe{constructor(){super(...arguments),this.Lt=null,this.le=0}it(t){this.Lt=t}Z(t){if(this.Lt===null||this.Lt.In.length===0||this.Lt.nt===null)return;const{horizontalPixelRatio:e}=t;this.le=(function(r,o){if(r>=2.5&&r<=4)return Math.floor(3*o);const l=1-.2*Math.atan(Math.max(4,r)-4)/(.5*Math.PI),a=Math.floor(r*l*o),h=Math.floor(r*o),u=Math.min(a,h);return Math.max(Math.floor(o),u)})(this.Lt.he,e),this.le>=2&&Math.floor(e)%2!=this.le%2&&this.le--;const i=this.Lt.In;this.Lt.Ae&&this.Ve(t,i,this.Lt.nt),this.Lt.ci&&this.Be(t,i,this.Lt.nt);const n=this.Ie(e);(!this.Lt.ci||this.le>2*n)&&this.ze(t,i,this.Lt.nt)}Ve(t,e,i){if(this.Lt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:o}=t;let l="",a=Math.min(Math.floor(r),Math.floor(this.Lt.he*r));a=Math.max(Math.floor(r),Math.min(a,this.le));const h=Math.floor(.5*a);let u=null;for(let c=i.from;c<i.to;c++){const d=e[c];d.Ee!==l&&(n.fillStyle=d.Ee,l=d.Ee);const p=Math.round(Math.min(d.ve,d.pe)*o),m=Math.round(Math.max(d.ve,d.pe)*o),g=Math.round(d.ce*o),S=Math.round(d.de*o);let _=Math.round(r*d.et)-h;const y=_+a-1;u!==null&&(_=Math.max(u+1,_),_=Math.min(_,y));const x=y-_+1;n.fillRect(_,g,x,p-g),n.fillRect(_,m+1,x,S-m),u=y}}Ie(t){let e=Math.floor(1*t);this.le<=2*e&&(e=Math.floor(.5*(this.le-1)));const i=Math.max(Math.floor(t),e);return this.le<=2*i?Math.max(Math.floor(t),Math.floor(1*t)):i}Be(t,e,i){if(this.Lt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:o}=t;let l="";const a=this.Ie(r);let h=null;for(let u=i.from;u<i.to;u++){const c=e[u];c.Le!==l&&(n.fillStyle=c.Le,l=c.Le);let d=Math.round(c.et*r)-Math.floor(.5*this.le);const p=d+this.le-1,m=Math.round(Math.min(c.ve,c.pe)*o),g=Math.round(Math.max(c.ve,c.pe)*o);if(h!==null&&(d=Math.max(h+1,d),d=Math.min(d,p)),this.Lt.he*r>2*a)og(n,d,m,p-d+1,g-m+1,a);else{const S=p-d+1;n.fillRect(d,m,S,g-m+1)}h=p}}ze(t,e,i){if(this.Lt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:o}=t;let l="";const a=this.Ie(r);for(let h=i.from;h<i.to;h++){const u=e[h];let c=Math.round(Math.min(u.ve,u.pe)*o),d=Math.round(Math.max(u.ve,u.pe)*o),p=Math.round(u.et*r)-Math.floor(.5*this.le),m=p+this.le-1;if(u.ue!==l){const g=u.ue;n.fillStyle=g,l=g}this.Lt.ci&&(p+=a,c+=a,m-=a,d-=a),c>d||n.fillRect(p,c,m-p+1,d-c+1)}}}class Cg extends hu{constructor(){super(...arguments),this.Ws=new Eg}ne(t,e,i){return Object.assign(Object.assign({},this.be(t,e,i)),i.Hs(t))}Gs(){const t=this.Es.W();this.Ws.it({In:this.Is,he:this.Ls.yt().he(),Ae:t.wickVisible,ci:t.borderVisible,nt:this.zs})}}class Tg{constructor(t,e){this.Ne=t,this.Li=e}K(t,e,i){this.Ne.draw(t,this.Li,e,i)}}class Xn extends wo{constructor(t,e,i){super(t,e,!1),this.wn=i,this.Ws=new Tg(this.wn.renderer(),(n=>{const r=t.Pt();return r===null?null:t.At().Ot(n,r.Vt)}))}Fe(t){return this.wn.priceValueBuilder(t)}We(t){return this.wn.isWhitespace(t)}qs(){const t=this.Es.$s();this.Is=this.Es.In().ie().map((e=>Object.assign(Object.assign({ut:e.se,et:NaN},t.Hs(e.se)),{je:e.He})))}Zs(t,e){e.Js(this.Is,_i(this.zs))}Gs(){this.wn.update({bars:this.Is.map(Mg),barSpacing:this.Ls.yt().he(),visibleRange:this.zs},this.Es.W())}}function Mg(s){return{x:s.et,time:s.ut,originalData:s.je,barColor:s.ue}}class Og extends qe{constructor(){super(...arguments),this.Lt=null,this.$e=[]}it(t){this.Lt=t,this.$e=[]}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(this.Lt===null||this.Lt.st.length===0||this.Lt.nt===null)return;this.$e.length||this.Ue(e);const n=Math.max(1,Math.floor(i)),r=Math.round(this.Lt.qe*i)-Math.floor(n/2),o=r+n;for(let l=this.Lt.nt.from;l<this.Lt.nt.to;l++){const a=this.Lt.st[l],h=this.$e[l-this.Lt.nt.from],u=Math.round(a.rt*i);let c,d;t.fillStyle=a.ue,u<=r?(c=u,d=o):(c=r,d=u-Math.floor(n/2)+n),t.fillRect(h.Os,c,h.di-h.Os+1,d-c)}}Ue(t){if(this.Lt===null||this.Lt.st.length===0||this.Lt.nt===null)return void(this.$e=[]);const e=Math.ceil(this.Lt.he*t)<=1?0:Math.max(1,Math.floor(t)),i=Math.round(this.Lt.he*t)-e;this.$e=new Array(this.Lt.nt.to-this.Lt.nt.from);for(let r=this.Lt.nt.from;r<this.Lt.nt.to;r++){const o=this.Lt.st[r],l=Math.round(o.et*t);let a,h;if(i%2){const u=(i-1)/2;a=l-u,h=l+u}else{const u=i/2;a=l-u,h=l+u-1}this.$e[r-this.Lt.nt.from]={Os:a,di:h,Ye:l,Xe:o.et*t,ut:o.ut}}for(let r=this.Lt.nt.from+1;r<this.Lt.nt.to;r++){const o=this.$e[r-this.Lt.nt.from],l=this.$e[r-this.Lt.nt.from-1];o.ut===l.ut+1&&o.Os-l.di!==e+1&&(l.Ye>l.Xe?l.di=o.Os-e-1:o.Os=l.di+e+1)}let n=Math.ceil(this.Lt.he*t);for(let r=this.Lt.nt.from;r<this.Lt.nt.to;r++){const o=this.$e[r-this.Lt.nt.from];o.di<o.Os&&(o.di=o.Os);const l=o.di-o.Os+1;n=Math.min(l,n)}if(e>0&&n<4)for(let r=this.Lt.nt.from;r<this.Lt.nt.to;r++){const o=this.$e[r-this.Lt.nt.from];o.di-o.Os+1>n&&(o.Ye>o.Xe?o.di-=1:o.Os+=1)}}}class kg extends Rn{constructor(){super(...arguments),this.Ws=new Og}ne(t,e,i){return Object.assign(Object.assign({},this.te(t,e)),i.Hs(t))}Gs(){const t={st:this.Is,he:this.Ls.yt().he(),nt:this.zs,qe:this.Es.At().Ot(this.Es.W().base,N(this.Es.Pt()).Vt)};this.Ws.it(t)}}class Lg extends Rn{constructor(){super(...arguments),this.Ws=new ru}ne(t,e,i){return Object.assign(Object.assign({},this.te(t,e)),i.Hs(t))}Gs(){const t=this.Es.W(),e={st:this.Is,Wt:t.lineStyle,ds:t.lineVisible?t.lineType:void 0,ht:t.lineWidth,Rs:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,nt:this.zs,cs:this.Ls.yt().he()};this.Ws.it(e)}}const Ag=/[2-9]/g;class wi{constructor(t=50){this.Ke=0,this.Ze=1,this.Ge=1,this.Je={},this.Qe=new Map,this.tr=t}ir(){this.Ke=0,this.Qe.clear(),this.Ze=1,this.Ge=1,this.Je={}}Si(t,e,i){return this.nr(t,e,i).width}xi(t,e,i){const n=this.nr(t,e,i);return((n.actualBoundingBoxAscent||0)-(n.actualBoundingBoxDescent||0))/2}nr(t,e,i){const n=i||Ag,r=String(e).replace(n,"0");if(this.Qe.has(r))return Wt(this.Qe.get(r)).sr;if(this.Ke===this.tr){const l=this.Je[this.Ge];delete this.Je[this.Ge],this.Qe.delete(l),this.Ge++,this.Ke--}t.save(),t.textBaseline="middle";const o=t.measureText(r);return t.restore(),o.width===0&&e.length||(this.Qe.set(r,{sr:o,er:this.Ze}),this.Je[this.Ze]=r,this.Ke++,this.Ze++),o}}class Rg{constructor(t){this.rr=null,this.k=null,this.hr="right",this.lr=t}ar(t,e,i){this.rr=t,this.k=e,this.hr=i}K(t){this.k!==null&&this.rr!==null&&this.rr.K(t,this.k,this.lr,this.hr)}}class uu{constructor(t,e,i){this._r=t,this.lr=new wi(50),this.ur=e,this.F=i,this.j=-1,this.Ht=new Rg(this.lr)}xt(){const t=this.F.cr(this.ur);if(t===null)return null;const e=t.dr(this.ur)?t.vr():this.ur.At();if(e===null)return null;const i=t.pr(e);if(i==="overlay")return null;const n=this.F.mr();return n.P!==this.j&&(this.j=n.P,this.lr.ir()),this.Ht.ar(this._r.zi(),n,i),this.Ht}}class Pg extends qe{constructor(){super(...arguments),this.Lt=null}it(t){this.Lt=t}br(t,e){var i;if(!(!((i=this.Lt)===null||i===void 0)&&i.Tt))return null;const{rt:n,ht:r,wr:o}=this.Lt;return e>=n-r-7&&e<=n+r+7?{gr:this.Lt,wr:o}:null}Z({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.Lt===null||this.Lt.Tt===!1)return;const r=Math.round(this.Lt.rt*n);r<0||r>e.height||(t.lineCap="butt",t.strokeStyle=this.Lt.O,t.lineWidth=Math.floor(this.Lt.ht*i),vs(t,this.Lt.Wt),Xh(t,r,0,e.width))}}class So{constructor(t){this.Mr={rt:0,O:"rgba(0, 0, 0, 0)",ht:1,Wt:0,Tt:!1},this.Sr=new Pg,this.bt=!0,this.Es=t,this.Ls=t.qt(),this.Sr.it(this.Mr)}gt(){this.bt=!0}xt(){return this.Es.Tt()?(this.bt&&(this.kr(),this.bt=!1),this.Sr):null}}class Ng extends So{constructor(t){super(t)}kr(){this.Mr.Tt=!1;const t=this.Es.At(),e=t.yr().yr;if(e!==2&&e!==3)return;const i=this.Es.W();if(!i.baseLineVisible||!this.Es.Tt())return;const n=this.Es.Pt();n!==null&&(this.Mr.Tt=!0,this.Mr.rt=t.Ot(n.Vt,n.Vt),this.Mr.O=i.baseLineColor,this.Mr.ht=i.baseLineWidth,this.Mr.Wt=i.baseLineStyle)}}class Ig extends qe{constructor(){super(...arguments),this.Lt=null}it(t){this.Lt=t}He(){return this.Lt}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){const n=this.Lt;if(n===null)return;const r=Math.max(1,Math.floor(e)),o=r%2/2,l=Math.round(n.Xe.x*e)+o,a=n.Xe.y*i;t.fillStyle=n.Cr,t.beginPath();const h=Math.max(2,1.5*n.Tr)*e;t.arc(l,a,h,0,2*Math.PI,!1),t.fill(),t.fillStyle=n.Pr,t.beginPath(),t.arc(l,a,n.ot*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=r,t.strokeStyle=n.Rr,t.beginPath(),t.arc(l,a,n.ot*e+r/2,0,2*Math.PI,!1),t.stroke()}}const Dg=[{Dr:0,Or:.25,Ar:4,Vr:10,Br:.25,Ir:0,zr:.4,Er:.8},{Dr:.25,Or:.525,Ar:10,Vr:14,Br:0,Ir:0,zr:.8,Er:0},{Dr:.525,Or:1,Ar:14,Vr:14,Br:0,Ir:0,zr:0,Er:0}];function zl(s,t,e,i){return(function(n,r){if(n==="transparent")return n;const o=cn(n),l=o[3];return`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${r*l})`})(s,e+(i-e)*t)}function Wl(s,t){const e=s%2600/2600;let i;for(const a of Dg)if(e>=a.Dr&&e<=a.Or){i=a;break}es(i!==void 0,"Last price animation internal logic error");const n=(e-i.Dr)/(i.Or-i.Dr);return{Pr:zl(t,n,i.Br,i.Ir),Rr:zl(t,n,i.zr,i.Er),ot:(r=n,o=i.Ar,l=i.Vr,o+(l-o)*r)};var r,o,l}class Bg{constructor(t){this.Ht=new Ig,this.bt=!0,this.Lr=!0,this.Nr=performance.now(),this.Fr=this.Nr-1,this.Wr=t}jr(){this.Fr=this.Nr-1,this.gt()}Hr(){if(this.gt(),this.Wr.W().lastPriceAnimation===2){const t=performance.now(),e=this.Fr-t;if(e>0)return void(e<650&&(this.Fr+=2600));this.Nr=t,this.Fr=t+2600}}gt(){this.bt=!0}$r(){this.Lr=!0}Tt(){return this.Wr.W().lastPriceAnimation!==0}Ur(){switch(this.Wr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Fr}}xt(){return this.bt?(this.St(),this.bt=!1,this.Lr=!1):this.Lr&&(this.qr(),this.Lr=!1),this.Ht}St(){this.Ht.it(null);const t=this.Wr.qt().yt(),e=t.Xs(),i=this.Wr.Pt();if(e===null||i===null)return;const n=this.Wr.Yr(!0);if(n.Xr||!e.Kr(n.se))return;const r={x:t.Et(n.se),y:this.Wr.At().Ot(n.ct,i.Vt)},o=n.O,l=this.Wr.W().lineWidth,a=Wl(this.Zr(),o);this.Ht.it({Cr:o,Tr:l,Pr:a.Pr,Rr:a.Rr,ot:a.ot,Xe:r})}qr(){const t=this.Ht.He();if(t!==null){const e=Wl(this.Zr(),t.Cr);t.Pr=e.Pr,t.Rr=e.Rr,t.ot=e.ot}}Zr(){return this.Ur()?performance.now()-this.Nr:2599}}function oi(s,t){return iu(Math.min(Math.max(s,12),30)*t)}function Si(s,t){switch(s){case"arrowDown":case"arrowUp":return oi(t,1);case"circle":return oi(t,.8);case"square":return oi(t,.7)}}function cu(s){return(function(t){const e=Math.ceil(t);return e%2!=0?e-1:e})(oi(s,1))}function Ul(s){return Math.max(oi(s,.1),3)}function fu(s,t,e,i,n){const r=Si("square",e),o=(r-1)/2,l=s-o,a=t-o;return i>=l&&i<=l+r&&n>=a&&n<=a+r}function ql(s,t,e,i,n){const r=(Si("arrowUp",n)-1)/2,o=(iu(n/2)-1)/2;t.beginPath(),s?(t.moveTo(e-r,i),t.lineTo(e,i-r),t.lineTo(e+r,i),t.lineTo(e+o,i),t.lineTo(e+o,i+r),t.lineTo(e-o,i+r),t.lineTo(e-o,i)):(t.moveTo(e-r,i),t.lineTo(e,i+r),t.lineTo(e+r,i),t.lineTo(e+o,i),t.lineTo(e+o,i-r),t.lineTo(e-o,i-r),t.lineTo(e-o,i)),t.fill()}function $g(s,t,e,i,n,r){return fu(t,e,i,n,r)}class Vg extends bo{constructor(){super(...arguments),this.Lt=null,this.lr=new wi,this.j=-1,this.H="",this.Gr=""}it(t){this.Lt=t}ar(t,e){this.j===t&&this.H===e||(this.j=t,this.H=e,this.Gr=Vs(t,e),this.lr.ir())}br(t,e){if(this.Lt===null||this.Lt.nt===null)return null;for(let i=this.Lt.nt.from;i<this.Lt.nt.to;i++){const n=this.Lt.st[i];if(zg(n,t,e))return{gr:n.Jr,wr:n.wr}}return null}Z({context:t},e,i){if(this.Lt!==null&&this.Lt.nt!==null){t.textBaseline="middle",t.font=this.Gr;for(let n=this.Lt.nt.from;n<this.Lt.nt.to;n++){const r=this.Lt.st[n];r.Jt!==void 0&&(r.Jt.$i=this.lr.Si(t,r.Jt.Qr),r.Jt.zt=this.j,r.Jt.et=r.et-r.Jt.$i/2),Fg(r,t)}}}}function Fg(s,t){t.fillStyle=s.O,s.Jt!==void 0&&(function(e,i,n,r){e.fillText(i,n,r)})(t,s.Jt.Qr,s.Jt.et,s.Jt.rt),(function(e,i){if(e.Ks!==0){switch(e.th){case"arrowDown":return void ql(!1,i,e.et,e.rt,e.Ks);case"arrowUp":return void ql(!0,i,e.et,e.rt,e.Ks);case"circle":return void(function(n,r,o,l){const a=(Si("circle",l)-1)/2;n.beginPath(),n.arc(r,o,a,0,2*Math.PI,!1),n.fill()})(i,e.et,e.rt,e.Ks);case"square":return void(function(n,r,o,l){const a=Si("square",l),h=(a-1)/2,u=r-h,c=o-h;n.fillRect(u,c,a,a)})(i,e.et,e.rt,e.Ks)}e.th}})(s,t)}function zg(s,t,e){return!(s.Jt===void 0||!(function(i,n,r,o,l,a){const h=o/2;return l>=i&&l<=i+r&&a>=n-h&&a<=n+h})(s.Jt.et,s.Jt.rt,s.Jt.$i,s.Jt.zt,t,e))||(function(i,n,r){if(i.Ks===0)return!1;switch(i.th){case"arrowDown":case"arrowUp":return $g(0,i.et,i.rt,i.Ks,n,r);case"circle":return(function(o,l,a,h,u){const c=2+Si("circle",a)/2,d=o-h,p=l-u;return Math.sqrt(d*d+p*p)<=c})(i.et,i.rt,i.Ks,n,r);case"square":return fu(i.et,i.rt,i.Ks,n,r)}})(s,t,e)}function Wg(s,t,e,i,n,r,o,l,a){const h=Ce(e)?e:e.xe,u=Ce(e)?e:e.ge,c=Ce(e)?e:e.Me,d=Ce(t.size)?Math.max(t.size,0):1,p=cu(l.he())*d,m=p/2;switch(s.Ks=p,t.position){case"inBar":return s.rt=o.Ot(h,a),void(s.Jt!==void 0&&(s.Jt.rt=s.rt+m+r+.6*n));case"aboveBar":return s.rt=o.Ot(u,a)-m-i.ih,s.Jt!==void 0&&(s.Jt.rt=s.rt-m-.6*n,i.ih+=1.2*n),void(i.ih+=p+r);case"belowBar":return s.rt=o.Ot(c,a)+m+i.nh,s.Jt!==void 0&&(s.Jt.rt=s.rt+m+r+.6*n,i.nh+=1.2*n),void(i.nh+=p+r)}t.position}class Ug{constructor(t,e){this.bt=!0,this.sh=!0,this.eh=!0,this.rh=null,this.Ht=new Vg,this.Wr=t,this.Ui=e,this.Lt={st:[],nt:null}}gt(t){this.bt=!0,this.eh=!0,t==="data"&&(this.sh=!0)}xt(t){if(!this.Wr.Tt())return null;this.bt&&this.hh();const e=this.Ui.W().layout;return this.Ht.ar(e.fontSize,e.fontFamily),this.Ht.it(this.Lt),this.Ht}lh(){if(this.eh){if(this.Wr.ah().length>0){const t=this.Ui.yt().he(),e=Ul(t),i=1.5*cu(t)+2*e;this.rh={above:i,below:i}}else this.rh=null;this.eh=!1}return this.rh}hh(){const t=this.Wr.At(),e=this.Ui.yt(),i=this.Wr.ah();this.sh&&(this.Lt.st=i.map((u=>({ut:u.time,et:0,rt:0,Ks:0,th:u.shape,O:u.color,Jr:u.Jr,wr:u.id,Jt:void 0}))),this.sh=!1);const n=this.Ui.W().layout;this.Lt.nt=null;const r=e.Xs();if(r===null)return;const o=this.Wr.Pt();if(o===null||this.Lt.st.length===0)return;let l=NaN;const a=Ul(e.he()),h={ih:a,nh:a};this.Lt.nt=au(this.Lt.st,r,!0);for(let u=this.Lt.nt.from;u<this.Lt.nt.to;u++){const c=i[u];c.time!==l&&(h.ih=a,h.nh=a,l=c.time);const d=this.Lt.st[u];d.et=e.Et(c.time),c.text!==void 0&&c.text.length>0&&(d.Jt={Qr:c.text,et:0,rt:0,$i:0,zt:0});const p=this.Wr.oh(c.time);p!==null&&Wg(d,c,p,h,n.fontSize,a,t,e,o.Vt)}this.bt=!1}}class qg extends So{constructor(t){super(t)}kr(){const t=this.Mr;t.Tt=!1;const e=this.Es.W();if(!e.priceLineVisible||!this.Es.Tt())return;const i=this.Es.Yr(e.priceLineSource===0);i.Xr||(t.Tt=!0,t.rt=i.yi,t.O=this.Es._h(i.O),t.ht=e.priceLineWidth,t.Wt=e.priceLineStyle)}}class Hg extends kn{constructor(t){super(),this.$t=t}Ei(t,e,i){t.Tt=!1,e.Tt=!1;const n=this.$t;if(!n.Tt())return;const r=n.W(),o=r.lastValueVisible,l=n.uh()!=="",a=r.seriesLastValueMode===0,h=n.Yr(!1);if(h.Xr)return;o&&(t.Jt=this.dh(h,o,a),t.Tt=t.Jt.length!==0),(l||a)&&(e.Jt=this.fh(h,o,l,a),e.Tt=e.Jt.length>0);const u=n._h(h.O),c=Mn(u);i.t=c.t,i.yi=h.yi,e.Bt=n.qt().It(h.yi/n.At().zt()),t.Bt=u,t.O=c.i,e.O=c.i}fh(t,e,i,n){let r="";const o=this.$t.uh();return i&&o.length!==0&&(r+=`${o} `),e&&n&&(r+=this.$t.At().ph()?t.mh:t.bh),r.trim()}dh(t,e,i){return e?i?this.$t.At().ph()?t.bh:t.mh:t.Jt:""}}function Hl(s,t,e,i){const n=Number.isFinite(t),r=Number.isFinite(e);return n&&r?s(t,e):n||r?n?t:e:i}class Jt{constructor(t,e){this.wh=t,this.gh=e}Mh(t){return t!==null&&this.wh===t.wh&&this.gh===t.gh}xh(){return new Jt(this.wh,this.gh)}Sh(){return this.wh}kh(){return this.gh}yh(){return this.gh-this.wh}Fi(){return this.gh===this.wh||Number.isNaN(this.gh)||Number.isNaN(this.wh)}ts(t){return t===null?this:new Jt(Hl(Math.min,this.Sh(),t.Sh(),-1/0),Hl(Math.max,this.kh(),t.kh(),1/0))}Ch(t){if(!Ce(t)||this.gh-this.wh===0)return;const e=.5*(this.gh+this.wh);let i=this.gh-e,n=this.wh-e;i*=t,n*=t,this.gh=e+i,this.wh=e+n}Th(t){Ce(t)&&(this.gh+=t,this.wh+=t)}Ph(){return{minValue:this.wh,maxValue:this.gh}}static Rh(t){return t===null?null:new Jt(t.minValue,t.maxValue)}}class fn{constructor(t,e){this.Dh=t,this.Oh=e||null}Ah(){return this.Dh}Vh(){return this.Oh}Ph(){return this.Dh===null?null:{priceRange:this.Dh.Ph(),margins:this.Oh||void 0}}static Rh(t){return t===null?null:new fn(Jt.Rh(t.priceRange),t.margins)}}class jg extends So{constructor(t,e){super(t),this.Bh=e}kr(){const t=this.Mr;t.Tt=!1;const e=this.Bh.W();if(!this.Es.Tt()||!e.lineVisible)return;const i=this.Bh.Ih();i!==null&&(t.Tt=!0,t.rt=i,t.O=e.color,t.ht=e.lineWidth,t.Wt=e.lineStyle,t.wr=this.Bh.W().id)}}class Kg extends kn{constructor(t,e){super(),this.Wr=t,this.Bh=e}Ei(t,e,i){t.Tt=!1,e.Tt=!1;const n=this.Bh.W(),r=n.axisLabelVisible,o=n.title!=="",l=this.Wr;if(!r||!l.Tt())return;const a=this.Bh.Ih();if(a===null)return;o&&(e.Jt=n.title,e.Tt=!0),e.Bt=l.qt().It(a/l.At().zt()),t.Jt=this.zh(n.price),t.Tt=!0;const h=Mn(n.axisLabelColor||n.color);i.t=h.t;const u=n.axisLabelTextColor||h.i;t.O=u,e.O=u,i.yi=a}zh(t){const e=this.Wr.Pt();return e===null?"":this.Wr.At().Wi(t,e.Vt)}}class Gg{constructor(t,e){this.Wr=t,this.cn=e,this.Eh=new jg(t,this),this._r=new Kg(t,this),this.Lh=new uu(this._r,t,t.qt())}Nh(t){ve(this.cn,t),this.gt(),this.Wr.qt().Fh()}W(){return this.cn}Wh(){return this.Eh}jh(){return this.Lh}Hh(){return this._r}gt(){this.Eh.gt(),this._r.gt()}Ih(){const t=this.Wr,e=t.At();if(t.qt().yt().Fi()||e.Fi())return null;const i=t.Pt();return i===null?null:e.Ot(this.cn.price,i.Vt)}}class Jg extends yo{constructor(t){super(),this.Ui=t}qt(){return this.Ui}}const Xg={Bar:(s,t,e,i)=>{var n;const r=t.upColor,o=t.downColor,l=N(s(e,i)),a=Cs(l.Vt[0])<=Cs(l.Vt[3]);return{ue:(n=l.O)!==null&&n!==void 0?n:a?r:o}},Candlestick:(s,t,e,i)=>{var n,r,o;const l=t.upColor,a=t.downColor,h=t.borderUpColor,u=t.borderDownColor,c=t.wickUpColor,d=t.wickDownColor,p=N(s(e,i)),m=Cs(p.Vt[0])<=Cs(p.Vt[3]);return{ue:(n=p.O)!==null&&n!==void 0?n:m?l:a,Le:(r=p.Bt)!==null&&r!==void 0?r:m?h:u,Ee:(o=p.$h)!==null&&o!==void 0?o:m?c:d}},Custom:(s,t,e,i)=>{var n;return{ue:(n=N(s(e,i)).O)!==null&&n!==void 0?n:t.color}},Area:(s,t,e,i)=>{var n,r,o,l;const a=N(s(e,i));return{ue:(n=a._t)!==null&&n!==void 0?n:t.lineColor,_t:(r=a._t)!==null&&r!==void 0?r:t.lineColor,Ts:(o=a.Ts)!==null&&o!==void 0?o:t.topColor,Ps:(l=a.Ps)!==null&&l!==void 0?l:t.bottomColor}},Baseline:(s,t,e,i)=>{var n,r,o,l,a,h;const u=N(s(e,i));return{ue:u.Vt[3]>=t.baseValue.price?t.topLineColor:t.bottomLineColor,Pe:(n=u.Pe)!==null&&n!==void 0?n:t.topLineColor,Re:(r=u.Re)!==null&&r!==void 0?r:t.bottomLineColor,Se:(o=u.Se)!==null&&o!==void 0?o:t.topFillColor1,ke:(l=u.ke)!==null&&l!==void 0?l:t.topFillColor2,ye:(a=u.ye)!==null&&a!==void 0?a:t.bottomFillColor1,Ce:(h=u.Ce)!==null&&h!==void 0?h:t.bottomFillColor2}},Line:(s,t,e,i)=>{var n,r;const o=N(s(e,i));return{ue:(n=o.O)!==null&&n!==void 0?n:t.color,_t:(r=o.O)!==null&&r!==void 0?r:t.color}},Histogram:(s,t,e,i)=>{var n;return{ue:(n=N(s(e,i)).O)!==null&&n!==void 0?n:t.color}}};class Yg{constructor(t){this.Uh=(e,i)=>i!==void 0?i.Vt:this.Wr.In().qh(e),this.Wr=t,this.Yh=Xg[t.Xh()]}Hs(t,e){return this.Yh(this.Uh,this.Wr.W(),t,e)}}var jl;(function(s){s[s.NearestLeft=-1]="NearestLeft",s[s.None=0]="None",s[s.NearestRight=1]="NearestRight"})(jl||(jl={}));const je=30;class Qg{constructor(){this.Kh=[],this.Zh=new Map,this.Gh=new Map}Jh(){return this.Ks()>0?this.Kh[this.Kh.length-1]:null}Qh(){return this.Ks()>0?this.tl(0):null}Bn(){return this.Ks()>0?this.tl(this.Kh.length-1):null}Ks(){return this.Kh.length}Fi(){return this.Ks()===0}Kr(t){return this.il(t,0)!==null}qh(t){return this.nl(t)}nl(t,e=0){const i=this.il(t,e);return i===null?null:Object.assign(Object.assign({},this.sl(i)),{se:this.tl(i)})}ie(){return this.Kh}el(t,e,i){if(this.Fi())return null;let n=null;for(const r of i)n=Bi(n,this.rl(t,e,r));return n}it(t){this.Gh.clear(),this.Zh.clear(),this.Kh=t}tl(t){return this.Kh[t].se}sl(t){return this.Kh[t]}il(t,e){const i=this.hl(t);if(i===null&&e!==0)switch(e){case-1:return this.ll(t);case 1:return this.al(t);default:throw new TypeError("Unknown search mode")}return i}ll(t){let e=this.ol(t);return e>0&&(e-=1),e!==this.Kh.length&&this.tl(e)<t?e:null}al(t){const e=this._l(t);return e!==this.Kh.length&&t<this.tl(e)?e:null}hl(t){const e=this.ol(t);return e===this.Kh.length||t<this.Kh[e].se?null:e}ol(t){return Ai(this.Kh,t,((e,i)=>e.se<i))}_l(t){return lu(this.Kh,t,((e,i)=>e.se>i))}ul(t,e,i){let n=null;for(let r=t;r<e;r++){const o=this.Kh[r].Vt[i];Number.isNaN(o)||(n===null?n={cl:o,dl:o}:(o<n.cl&&(n.cl=o),o>n.dl&&(n.dl=o)))}return n}rl(t,e,i){if(this.Fi())return null;let n=null;const r=N(this.Qh()),o=N(this.Bn()),l=Math.max(t,r),a=Math.min(e,o),h=Math.ceil(l/je)*je,u=Math.max(h,Math.floor(a/je)*je);{const d=this.ol(l),p=this._l(Math.min(a,h,e));n=Bi(n,this.ul(d,p,i))}let c=this.Zh.get(i);c===void 0&&(c=new Map,this.Zh.set(i,c));for(let d=Math.max(h+1,l);d<u;d+=je){const p=Math.floor(d/je);let m=c.get(p);if(m===void 0){const g=this.ol(p*je),S=this._l((p+1)*je-1);m=this.ul(g,S,i),c.set(p,m)}n=Bi(n,m)}{const d=this.ol(u),p=this._l(a);n=Bi(n,this.ul(d,p,i))}return n}}function Bi(s,t){return s===null?t:t===null?s:{cl:Math.min(s.cl,t.cl),dl:Math.max(s.dl,t.dl)}}class Zg{constructor(t){this.fl=t}K(t,e,i){this.fl.draw(t)}G(t,e,i){var n,r;(r=(n=this.fl).drawBackground)===null||r===void 0||r.call(n,t)}}class Yn{constructor(t){this.Qe=null,this.wn=t}xt(){var t;const e=this.wn.renderer();if(e===null)return null;if(((t=this.Qe)===null||t===void 0?void 0:t.vl)===e)return this.Qe.pl;const i=new Zg(e);return this.Qe={vl:e,pl:i},i}ml(){var t,e,i;return(i=(e=(t=this.wn).zOrder)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:"normal"}}function du(s){var t,e,i,n,r;return{Jt:s.text(),yi:s.coordinate(),ki:(t=s.fixedCoordinate)===null||t===void 0?void 0:t.call(s),O:s.textColor(),t:s.backColor(),Tt:(i=(e=s.visible)===null||e===void 0?void 0:e.call(s))===null||i===void 0||i,ai:(r=(n=s.tickVisible)===null||n===void 0?void 0:n.call(s))===null||r===void 0||r}}class tb{constructor(t,e){this.Ht=new Zh,this.bl=t,this.wl=e}xt(){return this.Ht.it(Object.assign({$i:this.wl.$i()},du(this.bl))),this.Ht}}class eb extends kn{constructor(t,e){super(),this.bl=t,this.Li=e}Ei(t,e,i){const n=du(this.bl);i.t=n.t,t.O=n.O;const r=2/12*this.Li.P();i.gi=r,i.Mi=r,i.yi=n.yi,i.ki=n.ki,t.Jt=n.Jt,t.Tt=n.Tt,t.ai=n.ai}}class sb{constructor(t,e){this.gl=null,this.Ml=null,this.xl=null,this.Sl=null,this.kl=null,this.yl=t,this.Wr=e}Cl(){return this.yl}On(){var t,e;(e=(t=this.yl).updateAllViews)===null||e===void 0||e.call(t)}Pn(){var t,e,i,n;const r=(i=(e=(t=this.yl).paneViews)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:[];if(((n=this.gl)===null||n===void 0?void 0:n.vl)===r)return this.gl.pl;const o=r.map((l=>new Yn(l)));return this.gl={vl:r,pl:o},o}tn(){var t,e,i,n;const r=(i=(e=(t=this.yl).timeAxisViews)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:[];if(((n=this.Ml)===null||n===void 0?void 0:n.vl)===r)return this.Ml.pl;const o=this.Wr.qt().yt(),l=r.map((a=>new tb(a,o)));return this.Ml={vl:r,pl:l},l}Rn(){var t,e,i,n;const r=(i=(e=(t=this.yl).priceAxisViews)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:[];if(((n=this.xl)===null||n===void 0?void 0:n.vl)===r)return this.xl.pl;const o=this.Wr.At(),l=r.map((a=>new eb(a,o)));return this.xl={vl:r,pl:l},l}Tl(){var t,e,i,n;const r=(i=(e=(t=this.yl).priceAxisPaneViews)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:[];if(((n=this.Sl)===null||n===void 0?void 0:n.vl)===r)return this.Sl.pl;const o=r.map((l=>new Yn(l)));return this.Sl={vl:r,pl:o},o}Pl(){var t,e,i,n;const r=(i=(e=(t=this.yl).timeAxisPaneViews)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:[];if(((n=this.kl)===null||n===void 0?void 0:n.vl)===r)return this.kl.pl;const o=r.map((l=>new Yn(l)));return this.kl={vl:r,pl:o},o}Rl(t,e){var i,n,r;return(r=(n=(i=this.yl).autoscaleInfo)===null||n===void 0?void 0:n.call(i,t,e))!==null&&r!==void 0?r:null}br(t,e){var i,n,r;return(r=(n=(i=this.yl).hitTest)===null||n===void 0?void 0:n.call(i,t,e))!==null&&r!==void 0?r:null}}function Qn(s,t,e,i){s.forEach((n=>{t(n).forEach((r=>{r.ml()===e&&i.push(r)}))}))}function Zn(s){return s.Pn()}function ib(s){return s.Tl()}function nb(s){return s.Pl()}class xo extends Jg{constructor(t,e,i,n,r){super(t),this.Lt=new Qg,this.Eh=new qg(this),this.Dl=[],this.Ol=new Ng(this),this.Al=null,this.Vl=null,this.Bl=[],this.Il=[],this.zl=null,this.El=[],this.cn=e,this.Ll=i;const o=new Hg(this);this.hn=[o],this.Lh=new uu(o,this,t),i!=="Area"&&i!=="Line"&&i!=="Baseline"||(this.Al=new Bg(this)),this.Nl(),this.Fl(r)}S(){this.zl!==null&&clearTimeout(this.zl)}_h(t){return this.cn.priceLineColor||t}Yr(t){const e={Xr:!0},i=this.At();if(this.qt().yt().Fi()||i.Fi()||this.Lt.Fi())return e;const n=this.qt().yt().Xs(),r=this.Pt();if(n===null||r===null)return e;let o,l;if(t){const c=this.Lt.Jh();if(c===null)return e;o=c,l=c.se}else{const c=this.Lt.nl(n.di(),-1);if(c===null||(o=this.Lt.qh(c.se),o===null))return e;l=c.se}const a=o.Vt[3],h=this.$s().Hs(l,{Vt:o}),u=i.Ot(a,r.Vt);return{Xr:!1,ct:a,Jt:i.Wi(a,r.Vt),mh:i.Wl(a),bh:i.jl(a,r.Vt),O:h.ue,yi:u,se:l}}$s(){return this.Vl!==null||(this.Vl=new Yg(this)),this.Vl}W(){return this.cn}Nh(t){const e=t.priceScaleId;e!==void 0&&e!==this.cn.priceScaleId&&this.qt().Hl(this,e),ve(this.cn,t),t.priceFormat!==void 0&&(this.Nl(),this.qt().$l()),this.qt().Ul(this),this.qt().ql(),this.wn.gt("options")}it(t,e){this.Lt.it(t),this.Yl(),this.wn.gt("data"),this.dn.gt("data"),this.Al!==null&&(e&&e.Xl?this.Al.Hr():t.length===0&&this.Al.jr());const i=this.qt().cr(this);this.qt().Kl(i),this.qt().Ul(this),this.qt().ql(),this.qt().Fh()}Zl(t){this.Bl=t,this.Yl();const e=this.qt().cr(this);this.dn.gt("data"),this.qt().Kl(e),this.qt().Ul(this),this.qt().ql(),this.qt().Fh()}Gl(){return this.Bl}ah(){return this.Il}Jl(t){const e=new Gg(this,t);return this.Dl.push(e),this.qt().Ul(this),e}Ql(t){const e=this.Dl.indexOf(t);e!==-1&&this.Dl.splice(e,1),this.qt().Ul(this)}Xh(){return this.Ll}Pt(){const t=this.ta();return t===null?null:{Vt:t.Vt[3],ia:t.ut}}ta(){const t=this.qt().yt().Xs();if(t===null)return null;const e=t.Os();return this.Lt.nl(e,1)}In(){return this.Lt}oh(t){const e=this.Lt.qh(t);return e===null?null:this.Ll==="Bar"||this.Ll==="Candlestick"||this.Ll==="Custom"?{we:e.Vt[0],ge:e.Vt[1],Me:e.Vt[2],xe:e.Vt[3]}:e.Vt[3]}na(t){const e=[];Qn(this.El,Zn,"top",e);const i=this.Al;return i!==null&&i.Tt()&&(this.zl===null&&i.Ur()&&(this.zl=setTimeout((()=>{this.zl=null,this.qt().sa()}),0)),i.$r(),e.push(i)),e}Pn(){const t=[];this.ea()||t.push(this.Ol),t.push(this.wn,this.Eh,this.dn);const e=this.Dl.map((i=>i.Wh()));return t.push(...e),Qn(this.El,Zn,"normal",t),t}ra(){return this.ha(Zn,"bottom")}la(t){return this.ha(ib,t)}aa(t){return this.ha(nb,t)}oa(t,e){return this.El.map((i=>i.br(t,e))).filter((i=>i!==null))}Qi(t){return[this.Lh,...this.Dl.map((e=>e.jh()))]}Rn(t,e){if(e!==this.Xi&&!this.ea())return[];const i=[...this.hn];for(const n of this.Dl)i.push(n.Hh());return this.El.forEach((n=>{i.push(...n.Rn())})),i}tn(){const t=[];return this.El.forEach((e=>{t.push(...e.tn())})),t}Rl(t,e){if(this.cn.autoscaleInfoProvider!==void 0){const i=this.cn.autoscaleInfoProvider((()=>{const n=this._a(t,e);return n===null?null:n.Ph()}));return fn.Rh(i)}return this._a(t,e)}ua(){return this.cn.priceFormat.minMove}ca(){return this.da}On(){var t;this.wn.gt(),this.dn.gt();for(const e of this.hn)e.gt();for(const e of this.Dl)e.gt();this.Eh.gt(),this.Ol.gt(),(t=this.Al)===null||t===void 0||t.gt(),this.El.forEach((e=>e.On()))}At(){return N(super.At())}Ct(t){if(!((this.Ll==="Line"||this.Ll==="Area"||this.Ll==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const e=this.Lt.qh(t);return e===null?null:{ct:e.Vt[3],ot:this.fa(),Bt:this.va(),Dt:this.pa(),Rt:this.ma(t)}}uh(){return this.cn.title}Tt(){return this.cn.visible}ba(t){this.El.push(new sb(t,this))}wa(t){this.El=this.El.filter((e=>e.Cl()!==t))}ga(){if(this.wn instanceof Xn)return t=>this.wn.Fe(t)}Ma(){if(this.wn instanceof Xn)return t=>this.wn.We(t)}ea(){return!Ln(this.At().xa())}_a(t,e){if(!yi(t)||!yi(e)||this.Lt.Fi())return null;const i=this.Ll==="Line"||this.Ll==="Area"||this.Ll==="Baseline"||this.Ll==="Histogram"?[3]:[2,1],n=this.Lt.el(t,e,i);let r=n!==null?new Jt(n.cl,n.dl):null;if(this.Xh()==="Histogram"){const l=this.cn.base,a=new Jt(l,l);r=r!==null?r.ts(a):a}let o=this.dn.lh();return this.El.forEach((l=>{const a=l.Rl(t,e);if(a?.priceRange){const p=new Jt(a.priceRange.minValue,a.priceRange.maxValue);r=r!==null?r.ts(p):p}var h,u,c,d;a?.margins&&(h=o,u=a.margins,o={above:Math.max((c=h?.above)!==null&&c!==void 0?c:0,u.above),below:Math.max((d=h?.below)!==null&&d!==void 0?d:0,u.below)})})),new fn(r,o)}fa(){switch(this.Ll){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}va(){switch(this.Ll){case"Line":case"Area":case"Baseline":{const t=this.cn.crosshairMarkerBorderColor;if(t.length!==0)return t}}return null}pa(){switch(this.Ll){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}ma(t){switch(this.Ll){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBackgroundColor;if(e.length!==0)return e}}return this.$s().Hs(t).ue}Nl(){switch(this.cn.priceFormat.type){case"custom":this.da={format:this.cn.priceFormat.formatter};break;case"volume":this.da=new cg(this.cn.priceFormat.precision);break;case"percent":this.da=new tu(this.cn.priceFormat.precision);break;default:{const t=Math.pow(10,this.cn.priceFormat.precision);this.da=new An(t,this.cn.priceFormat.minMove*t)}}this.Xi!==null&&this.Xi.Sa()}Yl(){const t=this.qt().yt();if(!t.ka()||this.Lt.Fi())return void(this.Il=[]);const e=N(this.Lt.Qh());this.Il=this.Bl.map(((i,n)=>{const r=N(t.ya(i.time,!0)),o=r<e?1:-1;return{time:N(this.Lt.nl(r,o)).se,position:i.position,shape:i.shape,color:i.color,id:i.id,Jr:n,text:i.text,size:i.size,originalTime:i.originalTime}}))}Fl(t){switch(this.dn=new Ug(this,this.qt()),this.Ll){case"Bar":this.wn=new _g(this,this.qt());break;case"Candlestick":this.wn=new Cg(this,this.qt());break;case"Line":this.wn=new Lg(this,this.qt());break;case"Custom":this.wn=new Xn(this,this.qt(),Wt(t));break;case"Area":this.wn=new bg(this,this.qt());break;case"Baseline":this.wn=new xg(this,this.qt());break;case"Histogram":this.wn=new kg(this,this.qt());break;default:throw Error("Unknown chart style assigned: "+this.Ll)}}ha(t,e){const i=[];return Qn(this.El,t,e,i),i}}class rb{constructor(t){this.cn=t}Ca(t,e,i){let n=t;if(this.cn.mode===0)return n;const r=i.vn(),o=r.Pt();if(o===null)return n;const l=r.Ot(t,o),a=i.Ta().filter((u=>u instanceof xo)).reduce(((u,c)=>{if(i.dr(c)||!c.Tt())return u;const d=c.At(),p=c.In();if(d.Fi()||!p.Kr(e))return u;const m=p.qh(e);if(m===null)return u;const g=Cs(c.Pt());return u.concat([d.Ot(m.Vt[3],g.Vt)])}),[]);if(a.length===0)return n;a.sort(((u,c)=>Math.abs(u-l)-Math.abs(c-l)));const h=a[0];return n=r.pn(h,o),n}}class ob extends qe{constructor(){super(...arguments),this.Lt=null}it(t){this.Lt=t}Z({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.Lt===null)return;const r=Math.max(1,Math.floor(i));t.lineWidth=r,(function(o,l){o.save(),o.lineWidth%2&&o.translate(.5,.5),l(),o.restore()})(t,(()=>{const o=N(this.Lt);if(o.Pa){t.strokeStyle=o.Ra,vs(t,o.Da),t.beginPath();for(const l of o.Oa){const a=Math.round(l.Aa*i);t.moveTo(a,-r),t.lineTo(a,e.height+r)}t.stroke()}if(o.Va){t.strokeStyle=o.Ba,vs(t,o.Ia),t.beginPath();for(const l of o.za){const a=Math.round(l.Aa*n);t.moveTo(-r,a),t.lineTo(e.width+r,a)}t.stroke()}}))}}class lb{constructor(t){this.Ht=new ob,this.bt=!0,this.nn=t}gt(){this.bt=!0}xt(){if(this.bt){const t=this.nn.qt().W().grid,e={Va:t.horzLines.visible,Pa:t.vertLines.visible,Ba:t.horzLines.color,Ra:t.vertLines.color,Ia:t.horzLines.style,Da:t.vertLines.style,za:this.nn.vn().Ea(),Oa:(this.nn.qt().yt().Ea()||[]).map((i=>({Aa:i.coord})))};this.Ht.it(e),this.bt=!1}return this.Ht}}class ab{constructor(t){this.wn=new lb(t)}Wh(){return this.wn}}const tr={La:4,Na:1e-4};function Ts(s,t){const e=100*(s-t)/t;return t<0?-e:e}function hb(s,t){const e=Ts(s.Sh(),t),i=Ts(s.kh(),t);return new Jt(e,i)}function li(s,t){const e=100*(s-t)/t+100;return t<0?-e:e}function ub(s,t){const e=li(s.Sh(),t),i=li(s.kh(),t);return new Jt(e,i)}function dn(s,t){const e=Math.abs(s);if(e<1e-15)return 0;const i=Math.log10(e+t.Na)+t.La;return s<0?-i:i}function ai(s,t){const e=Math.abs(s);if(e<1e-15)return 0;const i=Math.pow(10,e-t.La)-t.Na;return s<0?-i:i}function Js(s,t){if(s===null)return null;const e=dn(s.Sh(),t),i=dn(s.kh(),t);return new Jt(e,i)}function $i(s,t){if(s===null)return null;const e=ai(s.Sh(),t),i=ai(s.kh(),t);return new Jt(e,i)}function er(s){if(s===null)return tr;const t=Math.abs(s.kh()-s.Sh());if(t>=1||t<1e-15)return tr;const e=Math.ceil(Math.abs(Math.log10(t))),i=tr.La+e;return{La:i,Na:1/Math.pow(10,i)}}class sr{constructor(t,e){if(this.Fa=t,this.Wa=e,(function(i){if(i<0)return!1;for(let n=i;n>1;n/=10)if(n%10!=0)return!1;return!0})(this.Fa))this.ja=[2,2.5,2];else{this.ja=[];for(let i=this.Fa;i!==1;){if(i%2==0)this.ja.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.ja.push(2,2.5),i/=5}if(this.ja.length>100)throw new Error("something wrong with base")}}}Ha(t,e,i){const n=this.Fa===0?0:1/this.Fa;let r=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),o=0,l=this.Wa[0];for(;;){const c=Di(r,n,1e-14)&&r>n+1e-14,d=Di(r,i*l,1e-14),p=Di(r,1,1e-14);if(!(c&&d&&p))break;r/=l,l=this.Wa[++o%this.Wa.length]}if(r<=n+1e-14&&(r=n),r=Math.max(1,r),this.ja.length>0&&(a=r,h=1,u=1e-14,Math.abs(a-h)<u))for(o=0,l=this.ja[0];Di(r,i*l,1e-14)&&r>n+1e-14;)r/=l,l=this.ja[++o%this.ja.length];var a,h,u;return r}}class Kl{constructor(t,e,i,n){this.$a=[],this.Li=t,this.Fa=e,this.Ua=i,this.qa=n}Ha(t,e){if(t<e)throw new Error("high < low");const i=this.Li.zt(),n=(t-e)*this.Ya()/i,r=new sr(this.Fa,[2,2.5,2]),o=new sr(this.Fa,[2,2,2.5]),l=new sr(this.Fa,[2.5,2,2]),a=[];return a.push(r.Ha(t,e,n),o.Ha(t,e,n),l.Ha(t,e,n)),(function(h){if(h.length<1)throw Error("array is empty");let u=h[0];for(let c=1;c<h.length;++c)h[c]<u&&(u=h[c]);return u})(a)}Xa(){const t=this.Li,e=t.Pt();if(e===null)return void(this.$a=[]);const i=t.zt(),n=this.Ua(i-1,e),r=this.Ua(0,e),o=this.Li.W().entireTextOnly?this.Ka()/2:0,l=o,a=i-1-o,h=Math.max(n,r),u=Math.min(n,r);if(h===u)return void(this.$a=[]);let c=this.Ha(h,u),d=h%c;d+=d<0?c:0;const p=h>=u?1:-1;let m=null,g=0;for(let S=h-d;S>u;S-=c){const _=this.qa(S,e,!0);m!==null&&Math.abs(_-m)<this.Ya()||_<l||_>a||(g<this.$a.length?(this.$a[g].Aa=_,this.$a[g].Za=t.Ga(S)):this.$a.push({Aa:_,Za:t.Ga(S)}),g++,m=_,t.Ja()&&(c=this.Ha(S*p,u)))}this.$a.length=g}Ea(){return this.$a}Ka(){return this.Li.P()}Ya(){return Math.ceil(2.5*this.Ka())}}function pu(s){return s.slice().sort(((t,e)=>N(t.Zi())-N(e.Zi())))}var Dr;(function(s){s[s.Normal=0]="Normal",s[s.Logarithmic=1]="Logarithmic",s[s.Percentage=2]="Percentage",s[s.IndexedTo100=3]="IndexedTo100"})(Dr||(Dr={}));const Gl=new tu,Jl=new An(100,1);class cb{constructor(t,e,i,n){this.Qa=0,this.io=null,this.Dh=null,this.no=null,this.so={eo:!1,ro:null},this.ho=0,this.lo=0,this.ao=new St,this.oo=new St,this._o=[],this.uo=null,this.co=null,this.do=null,this.fo=null,this.da=Jl,this.vo=er(null),this.po=t,this.cn=e,this.mo=i,this.bo=n,this.wo=new Kl(this,100,this.Mo.bind(this),this.xo.bind(this))}xa(){return this.po}W(){return this.cn}Nh(t){if(ve(this.cn,t),this.Sa(),t.mode!==void 0&&this.So({yr:t.mode}),t.scaleMargins!==void 0){const e=Wt(t.scaleMargins.top),i=Wt(t.scaleMargins.bottom);if(e<0||e>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(i<0||i>1||e+i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(e+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${e+i}`);this.ko(),this.co=null}}yo(){return this.cn.autoScale}Ja(){return this.cn.mode===1}ph(){return this.cn.mode===2}Co(){return this.cn.mode===3}yr(){return{Wn:this.cn.autoScale,To:this.cn.invertScale,yr:this.cn.mode}}So(t){const e=this.yr();let i=null;t.Wn!==void 0&&(this.cn.autoScale=t.Wn),t.yr!==void 0&&(this.cn.mode=t.yr,t.yr!==2&&t.yr!==3||(this.cn.autoScale=!0),this.so.eo=!1),e.yr===1&&t.yr!==e.yr&&((function(r,o){if(r===null)return!1;const l=ai(r.Sh(),o),a=ai(r.kh(),o);return isFinite(l)&&isFinite(a)})(this.Dh,this.vo)?(i=$i(this.Dh,this.vo),i!==null&&this.Po(i)):this.cn.autoScale=!0),t.yr===1&&t.yr!==e.yr&&(i=Js(this.Dh,this.vo),i!==null&&this.Po(i));const n=e.yr!==this.cn.mode;n&&(e.yr===2||this.ph())&&this.Sa(),n&&(e.yr===3||this.Co())&&this.Sa(),t.To!==void 0&&e.To!==t.To&&(this.cn.invertScale=t.To,this.Ro()),this.oo.m(e,this.yr())}Do(){return this.oo}P(){return this.mo.fontSize}zt(){return this.Qa}Oo(t){this.Qa!==t&&(this.Qa=t,this.ko(),this.co=null)}Ao(){if(this.io)return this.io;const t=this.zt()-this.Vo()-this.Bo();return this.io=t,t}Ah(){return this.Io(),this.Dh}Po(t,e){const i=this.Dh;(e||i===null&&t!==null||i!==null&&!i.Mh(t))&&(this.co=null,this.Dh=t)}Fi(){return this.Io(),this.Qa===0||!this.Dh||this.Dh.Fi()}zo(t){return this.To()?t:this.zt()-1-t}Ot(t,e){return this.ph()?t=Ts(t,e):this.Co()&&(t=li(t,e)),this.xo(t,e)}Qs(t,e,i){this.Io();const n=this.Bo(),r=N(this.Ah()),o=r.Sh(),l=r.kh(),a=this.Ao()-1,h=this.To(),u=a/(l-o),c=i===void 0?0:i.from,d=i===void 0?t.length:i.to,p=this.Eo();for(let m=c;m<d;m++){const g=t[m],S=g.ct;if(isNaN(S))continue;let _=S;p!==null&&(_=p(g.ct,e));const y=n+u*(_-o),x=h?y:this.Qa-1-y;g.rt=x}}me(t,e,i){this.Io();const n=this.Bo(),r=N(this.Ah()),o=r.Sh(),l=r.kh(),a=this.Ao()-1,h=this.To(),u=a/(l-o),c=i===void 0?0:i.from,d=i===void 0?t.length:i.to,p=this.Eo();for(let m=c;m<d;m++){const g=t[m];let S=g.we,_=g.ge,y=g.Me,x=g.xe;p!==null&&(S=p(g.we,e),_=p(g.ge,e),y=p(g.Me,e),x=p(g.xe,e));let P=n+u*(S-o),J=h?P:this.Qa-1-P;g.ve=J,P=n+u*(_-o),J=h?P:this.Qa-1-P,g.ce=J,P=n+u*(y-o),J=h?P:this.Qa-1-P,g.de=J,P=n+u*(x-o),J=h?P:this.Qa-1-P,g.pe=J}}pn(t,e){const i=this.Mo(t,e);return this.Lo(i,e)}Lo(t,e){let i=t;return this.ph()?i=(function(n,r){return r<0&&(n=-n),n/100*r+r})(i,e):this.Co()&&(i=(function(n,r){return n-=100,r<0&&(n=-n),n/100*r+r})(i,e)),i}Ta(){return this._o}No(){if(this.uo)return this.uo;let t=[];for(let e=0;e<this._o.length;e++){const i=this._o[e];i.Zi()===null&&i.Gi(e+1),t.push(i)}return t=pu(t),this.uo=t,this.uo}Fo(t){this._o.indexOf(t)===-1&&(this._o.push(t),this.Sa(),this.Wo())}jo(t){const e=this._o.indexOf(t);if(e===-1)throw new Error("source is not attached to scale");this._o.splice(e,1),this._o.length===0&&(this.So({Wn:!0}),this.Po(null)),this.Sa(),this.Wo()}Pt(){let t=null;for(const e of this._o){const i=e.Pt();i!==null&&(t===null||i.ia<t.ia)&&(t=i)}return t===null?null:t.Vt}To(){return this.cn.invertScale}Ea(){const t=this.Pt()===null;if(this.co!==null&&(t||this.co.Ho===t))return this.co.Ea;this.wo.Xa();const e=this.wo.Ea();return this.co={Ea:e,Ho:t},this.ao.m(),e}$o(){return this.ao}Uo(t){this.ph()||this.Co()||this.do===null&&this.no===null&&(this.Fi()||(this.do=this.Qa-t,this.no=N(this.Ah()).xh()))}qo(t){if(this.ph()||this.Co()||this.do===null)return;this.So({Wn:!1}),(t=this.Qa-t)<0&&(t=0);let e=(this.do+.2*(this.Qa-1))/(t+.2*(this.Qa-1));const i=N(this.no).xh();e=Math.max(e,.1),i.Ch(e),this.Po(i)}Yo(){this.ph()||this.Co()||(this.do=null,this.no=null)}Xo(t){this.yo()||this.fo===null&&this.no===null&&(this.Fi()||(this.fo=t,this.no=N(this.Ah()).xh()))}Ko(t){if(this.yo()||this.fo===null)return;const e=N(this.Ah()).yh()/(this.Ao()-1);let i=t-this.fo;this.To()&&(i*=-1);const n=i*e,r=N(this.no).xh();r.Th(n),this.Po(r,!0),this.co=null}Zo(){this.yo()||this.fo!==null&&(this.fo=null,this.no=null)}ca(){return this.da||this.Sa(),this.da}Wi(t,e){switch(this.cn.mode){case 2:return this.Go(Ts(t,e));case 3:return this.ca().format(li(t,e));default:return this.zh(t)}}Ga(t){switch(this.cn.mode){case 2:return this.Go(t);case 3:return this.ca().format(t);default:return this.zh(t)}}Wl(t){return this.zh(t,N(this.Jo()).ca())}jl(t,e){return t=Ts(t,e),this.Go(t,Gl)}Qo(){return this._o}t_(t){this.so={ro:t,eo:!1}}On(){this._o.forEach((t=>t.On()))}Sa(){this.co=null;const t=this.Jo();let e=100;t!==null&&(e=Math.round(1/t.ua())),this.da=Jl,this.ph()?(this.da=Gl,e=100):this.Co()?(this.da=new An(100,1),e=100):t!==null&&(this.da=t.ca()),this.wo=new Kl(this,e,this.Mo.bind(this),this.xo.bind(this)),this.wo.Xa()}Wo(){this.uo=null}Jo(){return this._o[0]||null}Vo(){return this.To()?this.cn.scaleMargins.bottom*this.zt()+this.lo:this.cn.scaleMargins.top*this.zt()+this.ho}Bo(){return this.To()?this.cn.scaleMargins.top*this.zt()+this.ho:this.cn.scaleMargins.bottom*this.zt()+this.lo}Io(){this.so.eo||(this.so.eo=!0,this.i_())}ko(){this.io=null}xo(t,e){if(this.Io(),this.Fi())return 0;t=this.Ja()&&t?dn(t,this.vo):t;const i=N(this.Ah()),n=this.Bo()+(this.Ao()-1)*(t-i.Sh())/i.yh();return this.zo(n)}Mo(t,e){if(this.Io(),this.Fi())return 0;const i=this.zo(t),n=N(this.Ah()),r=n.Sh()+n.yh()*((i-this.Bo())/(this.Ao()-1));return this.Ja()?ai(r,this.vo):r}Ro(){this.co=null,this.wo.Xa()}i_(){const t=this.so.ro;if(t===null)return;let e=null;const i=this.Qo();let n=0,r=0;for(const a of i){if(!a.Tt())continue;const h=a.Pt();if(h===null)continue;const u=a.Rl(t.Os(),t.di());let c=u&&u.Ah();if(c!==null){switch(this.cn.mode){case 1:c=Js(c,this.vo);break;case 2:c=hb(c,h.Vt);break;case 3:c=ub(c,h.Vt)}if(e=e===null?c:e.ts(N(c)),u!==null){const d=u.Vh();d!==null&&(n=Math.max(n,d.above),r=Math.max(n,d.below))}}}if(n===this.ho&&r===this.lo||(this.ho=n,this.lo=r,this.co=null,this.ko()),e!==null){if(e.Sh()===e.kh()){const a=this.Jo(),h=5*(a===null||this.ph()||this.Co()?1:a.ua());this.Ja()&&(e=$i(e,this.vo)),e=new Jt(e.Sh()-h,e.kh()+h),this.Ja()&&(e=Js(e,this.vo))}if(this.Ja()){const a=$i(e,this.vo),h=er(a);if(o=h,l=this.vo,o.La!==l.La||o.Na!==l.Na){const u=this.no!==null?$i(this.no,this.vo):null;this.vo=h,e=Js(a,h),u!==null&&(this.no=Js(u,h))}}this.Po(e)}else this.Dh===null&&(this.Po(new Jt(-.5,.5)),this.vo=er(null));var o,l;this.so.eo=!0}Eo(){return this.ph()?Ts:this.Co()?li:this.Ja()?t=>dn(t,this.vo):null}n_(t,e,i){return e===void 0?(i===void 0&&(i=this.ca()),i.format(t)):e(t)}zh(t,e){return this.n_(t,this.bo.priceFormatter,e)}Go(t,e){return this.n_(t,this.bo.percentageFormatter,e)}}class fb{constructor(t,e){this._o=[],this.s_=new Map,this.Qa=0,this.e_=0,this.r_=1e3,this.uo=null,this.h_=new St,this.wl=t,this.Ui=e,this.l_=new ab(this);const i=e.W();this.a_=this.o_("left",i.leftPriceScale),this.__=this.o_("right",i.rightPriceScale),this.a_.Do().l(this.u_.bind(this,this.a_),this),this.__.Do().l(this.u_.bind(this,this.__),this),this.c_(i)}c_(t){if(t.leftPriceScale&&this.a_.Nh(t.leftPriceScale),t.rightPriceScale&&this.__.Nh(t.rightPriceScale),t.localization&&(this.a_.Sa(),this.__.Sa()),t.overlayPriceScales){const e=Array.from(this.s_.values());for(const i of e){const n=N(i[0].At());n.Nh(t.overlayPriceScales),t.localization&&n.Sa()}}}d_(t){switch(t){case"left":return this.a_;case"right":return this.__}return this.s_.has(t)?Wt(this.s_.get(t))[0].At():null}S(){this.qt().f_().p(this),this.a_.Do().p(this),this.__.Do().p(this),this._o.forEach((t=>{t.S&&t.S()})),this.h_.m()}v_(){return this.r_}p_(t){this.r_=t}qt(){return this.Ui}$i(){return this.e_}zt(){return this.Qa}m_(t){this.e_=t,this.b_()}Oo(t){this.Qa=t,this.a_.Oo(t),this.__.Oo(t),this._o.forEach((e=>{if(this.dr(e)){const i=e.At();i!==null&&i.Oo(t)}})),this.b_()}Ta(){return this._o}dr(t){const e=t.At();return e===null||this.a_!==e&&this.__!==e}Fo(t,e,i){const n=i!==void 0?i:this.g_().w_+1;this.M_(t,e,n)}jo(t){const e=this._o.indexOf(t);es(e!==-1,"removeDataSource: invalid data source"),this._o.splice(e,1);const i=N(t.At()).xa();if(this.s_.has(i)){const r=Wt(this.s_.get(i)),o=r.indexOf(t);o!==-1&&(r.splice(o,1),r.length===0&&this.s_.delete(i))}const n=t.At();n&&n.Ta().indexOf(t)>=0&&n.jo(t),n!==null&&(n.Wo(),this.x_(n)),this.uo=null}pr(t){return t===this.a_?"left":t===this.__?"right":"overlay"}S_(){return this.a_}k_(){return this.__}y_(t,e){t.Uo(e)}C_(t,e){t.qo(e),this.b_()}T_(t){t.Yo()}P_(t,e){t.Xo(e)}R_(t,e){t.Ko(e),this.b_()}D_(t){t.Zo()}b_(){this._o.forEach((t=>{t.On()}))}vn(){let t=null;return this.Ui.W().rightPriceScale.visible&&this.__.Ta().length!==0?t=this.__:this.Ui.W().leftPriceScale.visible&&this.a_.Ta().length!==0?t=this.a_:this._o.length!==0&&(t=this._o[0].At()),t===null&&(t=this.__),t}vr(){let t=null;return this.Ui.W().rightPriceScale.visible?t=this.__:this.Ui.W().leftPriceScale.visible&&(t=this.a_),t}x_(t){t!==null&&t.yo()&&this.O_(t)}A_(t){const e=this.wl.Xs();t.So({Wn:!0}),e!==null&&t.t_(e),this.b_()}V_(){this.O_(this.a_),this.O_(this.__)}B_(){this.x_(this.a_),this.x_(this.__),this._o.forEach((t=>{this.dr(t)&&this.x_(t.At())})),this.b_(),this.Ui.Fh()}No(){return this.uo===null&&(this.uo=pu(this._o)),this.uo}I_(){return this.h_}z_(){return this.l_}O_(t){const e=t.Qo();if(e&&e.length>0&&!this.wl.Fi()){const i=this.wl.Xs();i!==null&&t.t_(i)}t.On()}g_(){const t=this.No();if(t.length===0)return{E_:0,w_:0};let e=0,i=0;for(let n=0;n<t.length;n++){const r=t[n].Zi();r!==null&&(r<e&&(e=r),r>i&&(i=r))}return{E_:e,w_:i}}M_(t,e,i){let n=this.d_(e);if(n===null&&(n=this.o_(e,this.Ui.W().overlayPriceScales)),this._o.push(t),!Ln(e)){const r=this.s_.get(e)||[];r.push(t),this.s_.set(e,r)}n.Fo(t),t.Ji(n),t.Gi(i),this.x_(n),this.uo=null}u_(t,e,i){e.yr!==i.yr&&this.O_(t)}o_(t,e){const i=Object.assign({visible:!0,autoScale:!0},De(e)),n=new cb(t,i,this.Ui.W().layout,this.Ui.W().localization);return n.Oo(this.zt()),n}}class db{constructor(t,e,i=50){this.Ke=0,this.Ze=1,this.Ge=1,this.Qe=new Map,this.Je=new Map,this.L_=t,this.N_=e,this.tr=i}F_(t){const e=t.time,i=this.N_.cacheKey(e),n=this.Qe.get(i);if(n!==void 0)return n.W_;if(this.Ke===this.tr){const o=this.Je.get(this.Ge);this.Je.delete(this.Ge),this.Qe.delete(Wt(o)),this.Ge++,this.Ke--}const r=this.L_(t);return this.Qe.set(i,{W_:r,er:this.Ze}),this.Je.set(this.Ze,i),this.Ke++,this.Ze++,r}}class hi{constructor(t,e){es(t<=e,"right should be >= left"),this.j_=t,this.H_=e}Os(){return this.j_}di(){return this.H_}U_(){return this.H_-this.j_+1}Kr(t){return this.j_<=t&&t<=this.H_}Mh(t){return this.j_===t.Os()&&this.H_===t.di()}}function Xl(s,t){return s===null||t===null?s===t:s.Mh(t)}class pb{constructor(){this.q_=new Map,this.Qe=null,this.Y_=!1}X_(t){this.Y_=t,this.Qe=null}K_(t,e){this.Z_(e),this.Qe=null;for(let i=e;i<t.length;++i){const n=t[i];let r=this.q_.get(n.timeWeight);r===void 0&&(r=[],this.q_.set(n.timeWeight,r)),r.push({index:i,time:n.time,weight:n.timeWeight,originalTime:n.originalTime})}}G_(t,e){const i=Math.ceil(e/t);return this.Qe!==null&&this.Qe.J_===i||(this.Qe={Ea:this.Q_(i),J_:i}),this.Qe.Ea}Z_(t){if(t===0)return void this.q_.clear();const e=[];this.q_.forEach(((i,n)=>{t<=i[0].index?e.push(n):i.splice(Ai(i,t,(r=>r.index<t)),1/0)}));for(const i of e)this.q_.delete(i)}Q_(t){let e=[];for(const i of Array.from(this.q_.keys()).sort(((n,r)=>r-n))){if(!this.q_.get(i))continue;const n=e;e=[];const r=n.length;let o=0;const l=Wt(this.q_.get(i)),a=l.length;let h=1/0,u=-1/0;for(let c=0;c<a;c++){const d=l[c],p=d.index;for(;o<r;){const m=n[o],g=m.index;if(!(g<p)){h=g;break}o++,e.push(m),u=g,h=1/0}if(h-p>=t&&p-u>=t)e.push(d),u=p;else if(this.Y_)return n}for(;o<r;o++)e.push(n[o])}return e}}class Rs{constructor(t){this.tu=t}iu(){return this.tu===null?null:new hi(Math.floor(this.tu.Os()),Math.ceil(this.tu.di()))}nu(){return this.tu}static su(){return new Rs(null)}}function mb(s,t){return s.weight>t.weight?s:t}class vb{constructor(t,e,i,n){this.e_=0,this.eu=null,this.ru=[],this.fo=null,this.do=null,this.hu=new pb,this.lu=new Map,this.au=Rs.su(),this.ou=!0,this._u=new St,this.uu=new St,this.cu=new St,this.du=null,this.fu=null,this.vu=[],this.cn=e,this.bo=i,this.pu=e.rightOffset,this.mu=e.barSpacing,this.Ui=t,this.N_=n,this.bu(),this.hu.X_(e.uniformDistribution)}W(){return this.cn}wu(t){ve(this.bo,t),this.gu(),this.bu()}Nh(t,e){var i;ve(this.cn,t),this.cn.fixLeftEdge&&this.Mu(),this.cn.fixRightEdge&&this.xu(),t.barSpacing!==void 0&&this.Ui.Gn(t.barSpacing),t.rightOffset!==void 0&&this.Ui.Jn(t.rightOffset),t.minBarSpacing!==void 0&&this.Ui.Gn((i=t.barSpacing)!==null&&i!==void 0?i:this.mu),this.gu(),this.bu(),this.cu.m()}mn(t){var e,i;return(i=(e=this.ru[t])===null||e===void 0?void 0:e.time)!==null&&i!==void 0?i:null}qi(t){var e;return(e=this.ru[t])!==null&&e!==void 0?e:null}ya(t,e){if(this.ru.length<1)return null;if(this.N_.key(t)>this.N_.key(this.ru[this.ru.length-1].time))return e?this.ru.length-1:null;const i=Ai(this.ru,this.N_.key(t),((n,r)=>this.N_.key(n.time)<r));return this.N_.key(t)<this.N_.key(this.ru[i].time)?e?i:null:i}Fi(){return this.e_===0||this.ru.length===0||this.eu===null}ka(){return this.ru.length>0}Xs(){return this.Su(),this.au.iu()}ku(){return this.Su(),this.au.nu()}yu(){const t=this.Xs();if(t===null)return null;const e={from:t.Os(),to:t.di()};return this.Cu(e)}Cu(t){const e=Math.round(t.from),i=Math.round(t.to),n=N(this.Tu()),r=N(this.Bn());return{from:N(this.qi(Math.max(n,e))),to:N(this.qi(Math.min(r,i)))}}Pu(t){return{from:N(this.ya(t.from,!0)),to:N(this.ya(t.to,!0))}}$i(){return this.e_}m_(t){if(!isFinite(t)||t<=0||this.e_===t)return;const e=this.ku(),i=this.e_;if(this.e_=t,this.ou=!0,this.cn.lockVisibleTimeRangeOnResize&&i!==0){const n=this.mu*t/i;this.mu=n}if(this.cn.fixLeftEdge&&e!==null&&e.Os()<=0){const n=i-t;this.pu-=Math.round(n/this.mu)+1,this.ou=!0}this.Ru(),this.Du()}Et(t){if(this.Fi()||!yi(t))return 0;const e=this.Ou()+this.pu-t;return this.e_-(e+.5)*this.mu-1}Js(t,e){const i=this.Ou(),n=e===void 0?0:e.from,r=e===void 0?t.length:e.to;for(let o=n;o<r;o++){const l=t[o].ut,a=i+this.pu-l,h=this.e_-(a+.5)*this.mu-1;t[o].et=h}}Au(t){return Math.ceil(this.Vu(t))}Jn(t){this.ou=!0,this.pu=t,this.Du(),this.Ui.Bu(),this.Ui.Fh()}he(){return this.mu}Gn(t){this.Iu(t),this.Du(),this.Ui.Bu(),this.Ui.Fh()}zu(){return this.pu}Ea(){if(this.Fi())return null;if(this.fu!==null)return this.fu;const t=this.mu,e=5*(this.Ui.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),i=Math.round(e/t),n=N(this.Xs()),r=Math.max(n.Os(),n.Os()-i),o=Math.max(n.di(),n.di()-i),l=this.hu.G_(t,e),a=this.Tu()+i,h=this.Bn()-i,u=this.Eu(),c=this.cn.fixLeftEdge||u,d=this.cn.fixRightEdge||u;let p=0;for(const m of l){if(!(r<=m.index&&m.index<=o))continue;let g;p<this.vu.length?(g=this.vu[p],g.coord=this.Et(m.index),g.label=this.Lu(m),g.weight=m.weight):(g={needAlignCoordinate:!1,coord:this.Et(m.index),label:this.Lu(m),weight:m.weight},this.vu.push(g)),this.mu>e/2&&!u?g.needAlignCoordinate=!1:g.needAlignCoordinate=c&&m.index<=a||d&&m.index>=h,p++}return this.vu.length=p,this.fu=this.vu,this.vu}Nu(){this.ou=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Fu(t){this.ou=!0,this.eu=t,this.Du(),this.Mu()}Wu(t,e){const i=this.Vu(t),n=this.he(),r=n+e*(n/10);this.Gn(r),this.cn.rightBarStaysOnScroll||this.Jn(this.zu()+(i-this.Vu(t)))}Uo(t){this.fo&&this.Zo(),this.do===null&&this.du===null&&(this.Fi()||(this.do=t,this.ju()))}qo(t){if(this.du===null)return;const e=Ir(this.e_-t,0,this.e_),i=Ir(this.e_-N(this.do),0,this.e_);e!==0&&i!==0&&this.Gn(this.du.he*e/i)}Yo(){this.do!==null&&(this.do=null,this.Hu())}Xo(t){this.fo===null&&this.du===null&&(this.Fi()||(this.fo=t,this.ju()))}Ko(t){if(this.fo===null)return;const e=(this.fo-t)/this.he();this.pu=N(this.du).zu+e,this.ou=!0,this.Du()}Zo(){this.fo!==null&&(this.fo=null,this.Hu())}$u(){this.Uu(this.cn.rightOffset)}Uu(t,e=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.pu,n=performance.now();this.Ui.Xn({qu:r=>(r-n)/e>=1,Yu:r=>{const o=(r-n)/e;return o>=1?t:i+(t-i)*o}})}gt(t,e){this.ou=!0,this.ru=t,this.hu.K_(t,e),this.Du()}Xu(){return this._u}Ku(){return this.uu}Zu(){return this.cu}Ou(){return this.eu||0}Gu(t){const e=t.U_();this.Iu(this.e_/e),this.pu=t.di()-this.Ou(),this.Du(),this.ou=!0,this.Ui.Bu(),this.Ui.Fh()}Ju(){const t=this.Tu(),e=this.Bn();t!==null&&e!==null&&this.Gu(new hi(t,e+this.cn.rightOffset))}Qu(t){const e=new hi(t.from,t.to);this.Gu(e)}Yi(t){return this.bo.timeFormatter!==void 0?this.bo.timeFormatter(t.originalTime):this.N_.formatHorzItem(t.time)}Bn(){return this.ru.length===0?null:this.ru.length-1}Eu(){const{handleScroll:t,handleScale:e}=this.Ui.W();return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}Tu(){return this.ru.length===0?null:0}tc(t){return(this.e_-1-t)/this.mu}Vu(t){const e=this.tc(t),i=this.Ou()+this.pu-e;return Math.round(1e6*i)/1e6}Iu(t){const e=this.mu;this.mu=t,this.Ru(),e!==this.mu&&(this.ou=!0,this.ic())}Su(){if(!this.ou)return;if(this.ou=!1,this.Fi())return void this.nc(Rs.su());const t=this.Ou(),e=this.e_/this.mu,i=this.pu+t,n=new hi(i-e+1,i);this.nc(new Rs(n))}Ru(){const t=this.sc();if(this.mu<t&&(this.mu=t,this.ou=!0),this.e_!==0){const e=.5*this.e_;this.mu>e&&(this.mu=e,this.ou=!0)}}sc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.ru.length!==0?this.e_/this.ru.length:this.cn.minBarSpacing}Du(){const t=this.ec();this.pu>t&&(this.pu=t,this.ou=!0);const e=this.rc();e!==null&&this.pu<e&&(this.pu=e,this.ou=!0)}rc(){const t=this.Tu(),e=this.eu;return t===null||e===null?null:t-e-1+(this.cn.fixLeftEdge?this.e_/this.mu:Math.min(2,this.ru.length))}ec(){return this.cn.fixRightEdge?0:this.e_/this.mu-Math.min(2,this.ru.length)}ju(){this.du={he:this.he(),zu:this.zu()}}Hu(){this.du=null}Lu(t){let e=this.lu.get(t.weight);return e===void 0&&(e=new db((i=>this.hc(i)),this.N_),this.lu.set(t.weight,e)),e.F_(t)}hc(t){return this.N_.formatTickmark(t,this.bo)}nc(t){const e=this.au;this.au=t,Xl(e.iu(),this.au.iu())||this._u.m(),Xl(e.nu(),this.au.nu())||this.uu.m(),this.ic()}ic(){this.fu=null}gu(){this.ic(),this.lu.clear()}bu(){this.N_.updateFormatter(this.bo)}Mu(){if(!this.cn.fixLeftEdge)return;const t=this.Tu();if(t===null)return;const e=this.Xs();if(e===null)return;const i=e.Os()-t;if(i<0){const n=this.pu-i-1;this.Jn(n)}this.Ru()}xu(){this.Du(),this.Ru()}}class gb extends bo{constructor(t){super(),this.lc=new Map,this.Lt=t}Z(t){}J(t){if(!this.Lt.Tt)return;const{context:e,mediaSize:i}=t;let n=0;for(const o of this.Lt.ac){if(o.Jt.length===0)continue;e.font=o.R;const l=this.oc(e,o.Jt);l>i.width?o.Wu=i.width/l:o.Wu=1,n+=o._c*o.Wu}let r=0;switch(this.Lt.uc){case"top":r=0;break;case"center":r=Math.max((i.height-n)/2,0);break;case"bottom":r=Math.max(i.height-n,0)}e.fillStyle=this.Lt.O;for(const o of this.Lt.ac){e.save();let l=0;switch(this.Lt.cc){case"left":e.textAlign="left",l=o._c/2;break;case"center":e.textAlign="center",l=i.width/2;break;case"right":e.textAlign="right",l=i.width-1-o._c/2}e.translate(l,r),e.textBaseline="top",e.font=o.R,e.scale(o.Wu,o.Wu),e.fillText(o.Jt,0,o.dc),e.restore(),r+=o._c*o.Wu}}oc(t,e){const i=this.fc(t.font);let n=i.get(e);return n===void 0&&(n=t.measureText(e).width,i.set(e,n)),n}fc(t){let e=this.lc.get(t);return e===void 0&&(e=new Map,this.lc.set(t,e)),e}}class bb{constructor(t){this.bt=!0,this.jt={Tt:!1,O:"",ac:[],uc:"center",cc:"center"},this.Ht=new gb(this.jt),this.$t=t}gt(){this.bt=!0}xt(){return this.bt&&(this.St(),this.bt=!1),this.Ht}St(){const t=this.$t.W(),e=this.jt;e.Tt=t.visible,e.Tt&&(e.O=t.color,e.cc=t.horzAlign,e.uc=t.vertAlign,e.ac=[{Jt:t.text,R:Vs(t.fontSize,t.fontFamily,t.fontStyle),_c:1.2*t.fontSize,dc:0,Wu:0}])}}class yb extends yo{constructor(t,e){super(),this.cn=e,this.wn=new bb(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}On(){this.wn.gt()}}var Yl,Ql,Zl,ta,ea;(function(s){s[s.OnTouchEnd=0]="OnTouchEnd",s[s.OnNextTap=1]="OnNextTap"})(Yl||(Yl={}));class _b{constructor(t,e,i){this.vc=[],this.mc=[],this.e_=0,this.bc=null,this.wc=new St,this.gc=new St,this.Mc=null,this.xc=t,this.cn=e,this.N_=i,this.Sc=new Zv(this),this.wl=new vb(this,e.timeScale,this.cn.localization,i),this.wt=new ug(this,e.crosshair),this.kc=new rb(e.crosshair),this.yc=new yb(this,e.watermark),this.Cc(),this.vc[0].p_(2e3),this.Tc=this.Pc(0),this.Rc=this.Pc(1)}$l(){this.Dc(kt.es())}Fh(){this.Dc(kt.ss())}sa(){this.Dc(new kt(1))}Ul(t){const e=this.Oc(t);this.Dc(e)}Ac(){return this.bc}Vc(t){const e=this.bc;this.bc=t,e!==null&&this.Ul(e.Bc),t!==null&&this.Ul(t.Bc)}W(){return this.cn}Nh(t){ve(this.cn,t),this.vc.forEach((e=>e.c_(t))),t.timeScale!==void 0&&this.wl.Nh(t.timeScale),t.localization!==void 0&&this.wl.wu(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.wc.m(),this.Tc=this.Pc(0),this.Rc=this.Pc(1),this.$l()}Ic(t,e){if(t==="left")return void this.Nh({leftPriceScale:e});if(t==="right")return void this.Nh({rightPriceScale:e});const i=this.zc(t);i!==null&&(i.At.Nh(e),this.wc.m())}zc(t){for(const e of this.vc){const i=e.d_(t);if(i!==null)return{Ut:e,At:i}}return null}yt(){return this.wl}Ec(){return this.vc}Lc(){return this.yc}Nc(){return this.wt}Fc(){return this.gc}Wc(t,e){t.Oo(e),this.Bu()}m_(t){this.e_=t,this.wl.m_(this.e_),this.vc.forEach((e=>e.m_(t))),this.Bu()}Cc(t){const e=new fb(this.wl,this);t!==void 0?this.vc.splice(t,0,e):this.vc.push(e);const i=t===void 0?this.vc.length-1:t,n=kt.es();return n.Nn(i,{Fn:0,Wn:!0}),this.Dc(n),e}y_(t,e,i){t.y_(e,i)}C_(t,e,i){t.C_(e,i),this.ql(),this.Dc(this.jc(t,2))}T_(t,e){t.T_(e),this.Dc(this.jc(t,2))}P_(t,e,i){e.yo()||t.P_(e,i)}R_(t,e,i){e.yo()||(t.R_(e,i),this.ql(),this.Dc(this.jc(t,2)))}D_(t,e){e.yo()||(t.D_(e),this.Dc(this.jc(t,2)))}A_(t,e){t.A_(e),this.Dc(this.jc(t,2))}Hc(t){this.wl.Uo(t)}$c(t,e){const i=this.yt();if(i.Fi()||e===0)return;const n=i.$i();t=Math.max(1,Math.min(t,n)),i.Wu(t,e),this.Bu()}Uc(t){this.qc(0),this.Yc(t),this.Xc()}Kc(t){this.wl.qo(t),this.Bu()}Zc(){this.wl.Yo(),this.Fh()}qc(t){this.wl.Xo(t)}Yc(t){this.wl.Ko(t),this.Bu()}Xc(){this.wl.Zo(),this.Fh()}Mt(){return this.mc}Gc(t,e,i,n,r){this.wt.gn(t,e);let o=NaN,l=this.wl.Au(t);const a=this.wl.Xs();a!==null&&(l=Math.min(Math.max(a.Os(),l),a.di()));const h=n.vn(),u=h.Pt();u!==null&&(o=h.pn(e,u)),o=this.kc.Ca(o,l,n),this.wt.kn(l,o,n),this.sa(),r||this.gc.m(this.wt.kt(),{x:t,y:e},i)}Jc(t,e,i){const n=i.vn(),r=n.Pt(),o=n.Ot(t,N(r)),l=this.wl.ya(e,!0),a=this.wl.Et(N(l));this.Gc(a,o,null,i,!0)}Qc(t){this.Nc().Cn(),this.sa(),t||this.gc.m(null,null,null)}ql(){const t=this.wt.Ut();if(t!==null){const e=this.wt.xn(),i=this.wt.Sn();this.Gc(e,i,null,t)}this.wt.On()}td(t,e,i){const n=this.wl.mn(0),r=this.wl.Bn();e!==void 0&&i!==void 0&&this.wl.gt(e,i);const o=this.wl.mn(0),l=this.wl.Ou(),a=this.wl.Xs();if(a!==null&&n!==null&&o!==null){const h=a.Kr(l),u=this.N_.key(n)>this.N_.key(o),c=t!==null&&t>l&&!u,d=this.wl.Bn(),p=h&&d!==r&&this.wl.W().shiftVisibleRangeOnNewBar;if(c&&!p){const m=t-l;this.wl.Jn(this.wl.zu()-m)}}this.wl.Fu(t)}Kl(t){t!==null&&t.B_()}cr(t){const e=this.vc.find((i=>i.No().includes(t)));return e===void 0?null:e}Bu(){this.yc.On(),this.vc.forEach((t=>t.B_())),this.ql()}S(){this.vc.forEach((t=>t.S())),this.vc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}nd(){return this.Sc}mr(){return this.Sc.W()}f_(){return this.wc}sd(t,e,i){const n=this.vc[0],r=this.ed(e,t,n,i);return this.mc.push(r),this.mc.length===1?this.$l():this.Fh(),r}rd(t){const e=this.cr(t),i=this.mc.indexOf(t);es(i!==-1,"Series not found"),this.mc.splice(i,1),N(e).jo(t),t.S&&t.S()}Hl(t,e){const i=N(this.cr(t));i.jo(t);const n=this.zc(e);if(n===null){const r=t.Zi();i.Fo(t,e,r)}else{const r=n.Ut===i?t.Zi():void 0;n.Ut.Fo(t,e,r)}}Ju(){const t=kt.ss();t.$n(),this.Dc(t)}hd(t){const e=kt.ss();e.Yn(t),this.Dc(e)}Zn(){const t=kt.ss();t.Zn(),this.Dc(t)}Gn(t){const e=kt.ss();e.Gn(t),this.Dc(e)}Jn(t){const e=kt.ss();e.Jn(t),this.Dc(e)}Xn(t){const e=kt.ss();e.Xn(t),this.Dc(e)}Un(){const t=kt.ss();t.Un(),this.Dc(t)}ld(){return this.cn.rightPriceScale.visible?"right":"left"}ad(){return this.Rc}q(){return this.Tc}It(t){const e=this.Rc,i=this.Tc;if(e===i)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),this.Mc===null||this.Mc.Ts!==i||this.Mc.Ps!==e)this.Mc={Ts:i,Ps:e,od:new Map};else{const r=this.Mc.od.get(t);if(r!==void 0)return r}const n=(function(r,o,l){const[a,h,u,c]=cn(r),[d,p,m,g]=cn(o),S=[re(a+l*(d-a)),re(h+l*(p-h)),re(u+l*(m-u)),Yh(c+l*(g-c))];return`rgba(${S[0]}, ${S[1]}, ${S[2]}, ${S[3]})`})(i,e,t/100);return this.Mc.od.set(t,n),n}jc(t,e){const i=new kt(e);if(t!==null){const n=this.vc.indexOf(t);i.Nn(n,{Fn:e})}return i}Oc(t,e){return e===void 0&&(e=2),this.jc(this.cr(t),e)}Dc(t){this.xc&&this.xc(t),this.vc.forEach((e=>e.z_().Wh().gt()))}ed(t,e,i,n){const r=new xo(this,t,e,i,n),o=t.priceScaleId!==void 0?t.priceScaleId:this.ld();return i.Fo(r,o),Ln(o)||r.Nh(t),r}Pc(t){const e=this.cn.layout;return e.background.type==="gradient"?t===0?e.background.topColor:e.background.bottomColor:e.background.color}}function Br(s){return!Ce(s)&&!Li(s)}function mu(s){return Ce(s)}(function(s){s[s.Disabled=0]="Disabled",s[s.Continuous=1]="Continuous",s[s.OnDataUpdate=2]="OnDataUpdate"})(Ql||(Ql={})),(function(s){s[s.LastBar=0]="LastBar",s[s.LastVisible=1]="LastVisible"})(Zl||(Zl={})),(function(s){s.Solid="solid",s.VerticalGradient="gradient"})(ta||(ta={})),(function(s){s[s.Year=0]="Year",s[s.Month=1]="Month",s[s.DayOfMonth=2]="DayOfMonth",s[s.Time=3]="Time",s[s.TimeWithSeconds=4]="TimeWithSeconds"})(ea||(ea={}));const sa=s=>s.getUTCFullYear();function wb(s,t,e){return t.replace(/yyyy/g,(i=>Be(sa(i),4))(s)).replace(/yy/g,(i=>Be(sa(i)%100,2))(s)).replace(/MMMM/g,((i,n)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(n,{month:"long"}))(s,e)).replace(/MMM/g,((i,n)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(n,{month:"short"}))(s,e)).replace(/MM/g,(i=>Be((n=>n.getUTCMonth()+1)(i),2))(s)).replace(/dd/g,(i=>Be((n=>n.getUTCDate())(i),2))(s))}class vu{constructor(t="yyyy-MM-dd",e="default"){this._d=t,this.ud=e}F_(t){return wb(t,this._d,this.ud)}}class Sb{constructor(t){this.dd=t||"%h:%m:%s"}F_(t){return this.dd.replace("%h",Be(t.getUTCHours(),2)).replace("%m",Be(t.getUTCMinutes(),2)).replace("%s",Be(t.getUTCSeconds(),2))}}const xb={fd:"yyyy-MM-dd",vd:"%h:%m:%s",pd:" ",md:"default"};class Eb{constructor(t={}){const e=Object.assign(Object.assign({},xb),t);this.bd=new vu(e.fd,e.md),this.wd=new Sb(e.vd),this.gd=e.pd}F_(t){return`${this.bd.F_(t)}${this.gd}${this.wd.F_(t)}`}}function Vi(s){return 60*s*60*1e3}function ir(s){return 60*s*1e3}const Fi=[{Md:(ia=1,1e3*ia),xd:10},{Md:ir(1),xd:20},{Md:ir(5),xd:21},{Md:ir(30),xd:22},{Md:Vi(1),xd:30},{Md:Vi(3),xd:31},{Md:Vi(6),xd:32},{Md:Vi(12),xd:33}];var ia;function na(s,t){if(s.getUTCFullYear()!==t.getUTCFullYear())return 70;if(s.getUTCMonth()!==t.getUTCMonth())return 60;if(s.getUTCDate()!==t.getUTCDate())return 50;for(let e=Fi.length-1;e>=0;--e)if(Math.floor(t.getTime()/Fi[e].Md)!==Math.floor(s.getTime()/Fi[e].Md))return Fi[e].xd;return 0}function nr(s){let t=s;if(Li(s)&&(t=Eo(s)),!Br(t))throw new Error("time must be of type BusinessDay");const e=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{Sd:Math.round(e.getTime()/1e3),kd:t}}function ra(s){if(!mu(s))throw new Error("time must be of type isUTCTimestamp");return{Sd:s}}function Eo(s){const t=new Date(s);if(isNaN(t.getTime()))throw new Error(`Invalid date string=${s}, expected format=yyyy-mm-dd`);return{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()}}function oa(s){Li(s.time)&&(s.time=Eo(s.time))}class la{options(){return this.cn}setOptions(t){this.cn=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?(function(e){e.forEach(oa)})(t):oa(t)}createConverterToInternalObj(t){return N((function(e){return e.length===0?null:Br(e[0].time)||Li(e[0].time)?nr:ra})(t))}key(t){return typeof t=="object"&&"Sd"in t?t.Sd:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){const e=t;return e.kd===void 0?new Date(1e3*e.Sd).getTime():new Date(Date.UTC(e.kd.year,e.kd.month-1,e.kd.day)).getTime()}convertHorzItemToInternal(t){return mu(e=t)?ra(e):Br(e)?nr(e):nr(Eo(e));var e}updateFormatter(t){if(!this.cn)return;const e=t.dateFormat;this.cn.timeScale.timeVisible?this.yd=new Eb({fd:e,vd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",pd:"   ",md:t.locale}):this.yd=new vu(e,t.locale)}formatHorzItem(t){const e=t;return this.yd.F_(new Date(1e3*e.Sd))}formatTickmark(t,e){const i=(function(r,o,l){switch(r){case 0:case 10:return o?l?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}})(t.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),n=this.cn.timeScale;if(n.tickMarkFormatter!==void 0){const r=n.tickMarkFormatter(t.originalTime,i,e.locale);if(r!==null)return r}return(function(r,o,l){const a={};switch(o){case 0:a.year="numeric";break;case 1:a.month="short";break;case 2:a.day="numeric";break;case 3:a.hour12=!1,a.hour="2-digit",a.minute="2-digit";break;case 4:a.hour12=!1,a.hour="2-digit",a.minute="2-digit",a.second="2-digit"}const h=r.kd===void 0?new Date(1e3*r.Sd):new Date(Date.UTC(r.kd.year,r.kd.month-1,r.kd.day));return new Date(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()).toLocaleString(l,a)})(t.time,i,e.locale)}maxTickMarkWeight(t){let e=t.reduce(mb,t[0]).weight;return e>30&&e<50&&(e=30),e}fillWeightsForPoints(t,e){(function(i,n=0){if(i.length===0)return;let r=n===0?null:i[n-1].time.Sd,o=r!==null?new Date(1e3*r):null,l=0;for(let a=n;a<i.length;++a){const h=i[a],u=new Date(1e3*h.time.Sd);o!==null&&(h.timeWeight=na(u,o)),l+=h.time.Sd-(r||h.time.Sd),r=h.time.Sd,o=u}if(n===0&&i.length>1){const a=Math.ceil(l/(i.length-1)),h=new Date(1e3*(i[0].time.Sd-a));i[0].timeWeight=na(new Date(1e3*i[0].time.Sd),h)}})(t,e)}static Cd(t){return ve({localization:{dateFormat:"dd MMM 'yy"}},t??{})}}const Fs=typeof window<"u";function aa(){return!!Fs&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function rr(){return!!Fs&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function $r(s){return s+s%2}function or(s,t){return s.Td-t.Td}function lr(s,t,e){const i=(s.Td-t.Td)/(s.ut-t.ut);return Math.sign(i)*Math.min(Math.abs(i),e)}class Cb{constructor(t,e,i,n){this.Pd=null,this.Rd=null,this.Dd=null,this.Od=null,this.Ad=null,this.Vd=0,this.Bd=0,this.Id=t,this.zd=e,this.Ed=i,this.rs=n}Ld(t,e){if(this.Pd!==null){if(this.Pd.ut===e)return void(this.Pd.Td=t);if(Math.abs(this.Pd.Td-t)<this.rs)return}this.Od=this.Dd,this.Dd=this.Rd,this.Rd=this.Pd,this.Pd={ut:e,Td:t}}Dr(t,e){if(this.Pd===null||this.Rd===null||e-this.Pd.ut>50)return;let i=0;const n=lr(this.Pd,this.Rd,this.zd),r=or(this.Pd,this.Rd),o=[n],l=[r];if(i+=r,this.Dd!==null){const h=lr(this.Rd,this.Dd,this.zd);if(Math.sign(h)===Math.sign(n)){const u=or(this.Rd,this.Dd);if(o.push(h),l.push(u),i+=u,this.Od!==null){const c=lr(this.Dd,this.Od,this.zd);if(Math.sign(c)===Math.sign(n)){const d=or(this.Dd,this.Od);o.push(c),l.push(d),i+=d}}}}let a=0;for(let h=0;h<o.length;++h)a+=l[h]/i*o[h];Math.abs(a)<this.Id||(this.Ad={Td:t,ut:e},this.Bd=a,this.Vd=(function(h,u){const c=Math.log(u);return Math.log(1*c/-h)/c})(Math.abs(a),this.Ed))}Yu(t){const e=N(this.Ad),i=t-e.ut;return e.Td+this.Bd*(Math.pow(this.Ed,i)-1)/Math.log(this.Ed)}qu(t){return this.Ad===null||this.Nd(t)===this.Vd}Nd(t){const e=t-N(this.Ad).ut;return Math.min(e,this.Vd)}}function gs(s,t){const e=N(s.ownerDocument).createElement("canvas");s.appendChild(e);const i=$v(e,{options:{allowResizeObserver:!1},transform:(n,r)=>({width:Math.max(n.width,r.width),height:Math.max(n.height,r.height)})});return i.resizeCanvasElement(t),i}function Vr(s,t,e,i){s.G&&s.G(t,e,i)}function Qi(s,t,e,i){s.K(t,e,i)}function Fr(s,t,e,i){const n=s(e,i);for(const r of n){const o=r.xt();o!==null&&t(o)}}function Tb(s){Fs&&window.chrome!==void 0&&s.addEventListener("mousedown",(t=>{if(t.button===1)return t.preventDefault(),!1}))}class Co{constructor(t,e,i){this.Fd=0,this.Wd=null,this.jd={et:Number.NEGATIVE_INFINITY,rt:Number.POSITIVE_INFINITY},this.Hd=0,this.$d=null,this.Ud={et:Number.NEGATIVE_INFINITY,rt:Number.POSITIVE_INFINITY},this.qd=null,this.Yd=!1,this.Xd=null,this.Kd=null,this.Zd=!1,this.Gd=!1,this.Jd=!1,this.Qd=null,this.tf=null,this.if=null,this.nf=null,this.sf=null,this.ef=null,this.rf=null,this.hf=0,this.lf=!1,this.af=!1,this._f=!1,this.uf=0,this.cf=null,this.df=!rr(),this.ff=n=>{this.vf(n)},this.pf=n=>{if(this.mf(n)){const r=this.bf(n);if(++this.Hd,this.$d&&this.Hd>1){const{wf:o}=this.gf(we(n),this.Ud);o<30&&!this.Jd&&this.Mf(r,this.Sf.xf),this.kf()}}else{const r=this.bf(n);if(++this.Fd,this.Wd&&this.Fd>1){const{wf:o}=this.gf(we(n),this.jd);o<5&&!this.Gd&&this.yf(r,this.Sf.Cf),this.Tf()}}},this.Pf=t,this.Sf=e,this.cn=i,this.Rf()}S(){this.Qd!==null&&(this.Qd(),this.Qd=null),this.tf!==null&&(this.tf(),this.tf=null),this.nf!==null&&(this.nf(),this.nf=null),this.sf!==null&&(this.sf(),this.sf=null),this.ef!==null&&(this.ef(),this.ef=null),this.if!==null&&(this.if(),this.if=null),this.Df(),this.Tf()}Of(t){this.nf&&this.nf();const e=this.Af.bind(this);if(this.nf=()=>{this.Pf.removeEventListener("mousemove",e)},this.Pf.addEventListener("mousemove",e),this.mf(t))return;const i=this.bf(t);this.yf(i,this.Sf.Vf),this.df=!0}Tf(){this.Wd!==null&&clearTimeout(this.Wd),this.Fd=0,this.Wd=null,this.jd={et:Number.NEGATIVE_INFINITY,rt:Number.POSITIVE_INFINITY}}kf(){this.$d!==null&&clearTimeout(this.$d),this.Hd=0,this.$d=null,this.Ud={et:Number.NEGATIVE_INFINITY,rt:Number.POSITIVE_INFINITY}}Af(t){if(this._f||this.Kd!==null||this.mf(t))return;const e=this.bf(t);this.yf(e,this.Sf.Bf),this.df=!0}If(t){const e=ar(t.changedTouches,N(this.cf));if(e===null||(this.uf=zi(t),this.rf!==null)||this.af)return;this.lf=!0;const i=this.gf(we(e),N(this.Kd)),{zf:n,Ef:r,wf:o}=i;if(this.Zd||!(o<5)){if(!this.Zd){const l=.5*n,a=r>=l&&!this.cn.Lf(),h=l>r&&!this.cn.Nf();a||h||(this.af=!0),this.Zd=!0,this.Jd=!0,this.Df(),this.kf()}if(!this.af){const l=this.bf(t,e);this.Mf(l,this.Sf.Ff),Ss(t)}}}Wf(t){if(t.button!==0)return;const e=this.gf(we(t),N(this.Xd)),{wf:i}=e;if(i>=5&&(this.Gd=!0,this.Tf()),this.Gd){const n=this.bf(t);this.yf(n,this.Sf.jf)}}gf(t,e){const i=Math.abs(e.et-t.et),n=Math.abs(e.rt-t.rt);return{zf:i,Ef:n,wf:i+n}}Hf(t){let e=ar(t.changedTouches,N(this.cf));if(e===null&&t.touches.length===0&&(e=t.changedTouches[0]),e===null)return;this.cf=null,this.uf=zi(t),this.Df(),this.Kd=null,this.ef&&(this.ef(),this.ef=null);const i=this.bf(t,e);if(this.Mf(i,this.Sf.$f),++this.Hd,this.$d&&this.Hd>1){const{wf:n}=this.gf(we(e),this.Ud);n<30&&!this.Jd&&this.Mf(i,this.Sf.xf),this.kf()}else this.Jd||(this.Mf(i,this.Sf.Uf),this.Sf.Uf&&Ss(t));this.Hd===0&&Ss(t),t.touches.length===0&&this.Yd&&(this.Yd=!1,Ss(t))}vf(t){if(t.button!==0)return;const e=this.bf(t);if(this.Xd=null,this._f=!1,this.sf&&(this.sf(),this.sf=null),aa()&&this.Pf.ownerDocument.documentElement.removeEventListener("mouseleave",this.ff),!this.mf(t))if(this.yf(e,this.Sf.qf),++this.Fd,this.Wd&&this.Fd>1){const{wf:i}=this.gf(we(t),this.jd);i<5&&!this.Gd&&this.yf(e,this.Sf.Cf),this.Tf()}else this.Gd||this.yf(e,this.Sf.Yf)}Df(){this.qd!==null&&(clearTimeout(this.qd),this.qd=null)}Xf(t){if(this.cf!==null)return;const e=t.changedTouches[0];this.cf=e.identifier,this.uf=zi(t);const i=this.Pf.ownerDocument.documentElement;this.Jd=!1,this.Zd=!1,this.af=!1,this.Kd=we(e),this.ef&&(this.ef(),this.ef=null);{const r=this.If.bind(this),o=this.Hf.bind(this);this.ef=()=>{i.removeEventListener("touchmove",r),i.removeEventListener("touchend",o)},i.addEventListener("touchmove",r,{passive:!1}),i.addEventListener("touchend",o,{passive:!1}),this.Df(),this.qd=setTimeout(this.Kf.bind(this,t),240)}const n=this.bf(t,e);this.Mf(n,this.Sf.Zf),this.$d||(this.Hd=0,this.$d=setTimeout(this.kf.bind(this),500),this.Ud=we(e))}Gf(t){if(t.button!==0)return;const e=this.Pf.ownerDocument.documentElement;aa()&&e.addEventListener("mouseleave",this.ff),this.Gd=!1,this.Xd=we(t),this.sf&&(this.sf(),this.sf=null);{const n=this.Wf.bind(this),r=this.vf.bind(this);this.sf=()=>{e.removeEventListener("mousemove",n),e.removeEventListener("mouseup",r)},e.addEventListener("mousemove",n),e.addEventListener("mouseup",r)}if(this._f=!0,this.mf(t))return;const i=this.bf(t);this.yf(i,this.Sf.Jf),this.Wd||(this.Fd=0,this.Wd=setTimeout(this.Tf.bind(this),500),this.jd=we(t))}Rf(){this.Pf.addEventListener("mouseenter",this.Of.bind(this)),this.Pf.addEventListener("touchcancel",this.Df.bind(this));{const t=this.Pf.ownerDocument,e=i=>{this.Sf.Qf&&(i.composed&&this.Pf.contains(i.composedPath()[0])||i.target&&this.Pf.contains(i.target)||this.Sf.Qf())};this.tf=()=>{t.removeEventListener("touchstart",e)},this.Qd=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}rr()&&(this.if=()=>{this.Pf.removeEventListener("dblclick",this.pf)},this.Pf.addEventListener("dblclick",this.pf)),this.Pf.addEventListener("mouseleave",this.tv.bind(this)),this.Pf.addEventListener("touchstart",this.Xf.bind(this),{passive:!0}),Tb(this.Pf),this.Pf.addEventListener("mousedown",this.Gf.bind(this)),this.iv(),this.Pf.addEventListener("touchmove",(()=>{}),{passive:!1})}iv(){this.Sf.nv===void 0&&this.Sf.sv===void 0&&this.Sf.ev===void 0||(this.Pf.addEventListener("touchstart",(t=>this.rv(t.touches)),{passive:!0}),this.Pf.addEventListener("touchmove",(t=>{if(t.touches.length===2&&this.rf!==null&&this.Sf.sv!==void 0){const e=ha(t.touches[0],t.touches[1])/this.hf;this.Sf.sv(this.rf,e),Ss(t)}}),{passive:!1}),this.Pf.addEventListener("touchend",(t=>{this.rv(t.touches)})))}rv(t){t.length===1&&(this.lf=!1),t.length!==2||this.lf||this.Yd?this.hv():this.lv(t)}lv(t){const e=this.Pf.getBoundingClientRect()||{left:0,top:0};this.rf={et:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,rt:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.hf=ha(t[0],t[1]),this.Sf.nv!==void 0&&this.Sf.nv(),this.Df()}hv(){this.rf!==null&&(this.rf=null,this.Sf.ev!==void 0&&this.Sf.ev())}tv(t){if(this.nf&&this.nf(),this.mf(t)||!this.df)return;const e=this.bf(t);this.yf(e,this.Sf.av),this.df=!rr()}Kf(t){const e=ar(t.touches,N(this.cf));if(e===null)return;const i=this.bf(t,e);this.Mf(i,this.Sf.ov),this.Jd=!0,this.Yd=!0}mf(t){return t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents!==void 0?t.sourceCapabilities.firesTouchEvents:zi(t)<this.uf+500}Mf(t,e){e&&e.call(this.Sf,t)}yf(t,e){e&&e.call(this.Sf,t)}bf(t,e){const i=e||t,n=this.Pf.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-n.left,localY:i.clientY-n.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,_v:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click",uv:t.type,cv:i.target,dv:t.view,fv:()=>{t.type!=="touchstart"&&Ss(t)}}}}function ha(s,t){const e=s.clientX-t.clientX,i=s.clientY-t.clientY;return Math.sqrt(e*e+i*i)}function Ss(s){s.cancelable&&s.preventDefault()}function we(s){return{et:s.pageX,rt:s.pageY}}function zi(s){return s.timeStamp||performance.now()}function ar(s,t){for(let e=0;e<s.length;++e)if(s[e].identifier===t)return s[e];return null}function Wi(s){return{Bc:s.Bc,vv:{wr:s.pv.externalId},mv:s.pv.cursorStyle}}function Mb(s,t,e){for(const i of s){const n=i.xt();if(n!==null&&n.br){const r=n.br(t,e);if(r!==null)return{dv:i,vv:r}}}return null}function hr(s,t){return e=>{var i,n,r,o;return((n=(i=e.At())===null||i===void 0?void 0:i.xa())!==null&&n!==void 0?n:"")!==t?[]:(o=(r=e.la)===null||r===void 0?void 0:r.call(e,s))!==null&&o!==void 0?o:[]}}class ua{constructor(t,e,i,n){this.Li=null,this.bv=null,this.wv=!1,this.gv=new wi(200),this.Gr=null,this.Mv=0,this.xv=!1,this.Sv=()=>{this.xv||this.nn.kv().qt().Fh()},this.yv=()=>{this.xv||this.nn.kv().qt().Fh()},this.nn=t,this.cn=e,this.mo=e.layout,this.Sc=i,this.Cv=n==="left",this.Tv=hr("normal",n),this.Pv=hr("top",n),this.Rv=hr("bottom",n),this.Dv=document.createElement("div"),this.Dv.style.height="100%",this.Dv.style.overflow="hidden",this.Dv.style.width="25px",this.Dv.style.left="0",this.Dv.style.position="relative",this.Ov=gs(this.Dv,yt({width:16,height:16})),this.Ov.subscribeSuggestedBitmapSizeChanged(this.Sv);const r=this.Ov.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Av=gs(this.Dv,yt({width:16,height:16})),this.Av.subscribeSuggestedBitmapSizeChanged(this.yv);const o=this.Av.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const l={Jf:this.Vv.bind(this),Zf:this.Vv.bind(this),jf:this.Bv.bind(this),Ff:this.Bv.bind(this),Qf:this.Iv.bind(this),qf:this.zv.bind(this),$f:this.zv.bind(this),Cf:this.Ev.bind(this),xf:this.Ev.bind(this),Vf:this.Lv.bind(this),av:this.Nv.bind(this)};this.Fv=new Co(this.Av.canvasElement,l,{Lf:()=>!1,Nf:()=>!0})}S(){this.Fv.S(),this.Av.unsubscribeSuggestedBitmapSizeChanged(this.yv),this.Av.dispose(),this.Ov.unsubscribeSuggestedBitmapSizeChanged(this.Sv),this.Ov.dispose(),this.Li!==null&&this.Li.$o().p(this),this.Li=null}Wv(){return this.Dv}P(){return this.mo.fontSize}jv(){const t=this.Sc.W();return this.Gr!==t.R&&(this.gv.ir(),this.Gr=t.R),t}Hv(){if(this.Li===null)return 0;let t=0;const e=this.jv(),i=N(this.Ov.canvasElement.getContext("2d"));i.save();const n=this.Li.Ea();i.font=this.$v(),n.length>0&&(t=Math.max(this.gv.Si(i,n[0].Za),this.gv.Si(i,n[n.length-1].Za)));const r=this.Uv();for(let a=r.length;a--;){const h=this.gv.Si(i,r[a].Jt());h>t&&(t=h)}const o=this.Li.Pt();if(o!==null&&this.bv!==null){const a=this.Li.pn(1,o),h=this.Li.pn(this.bv.height-2,o);t=Math.max(t,this.gv.Si(i,this.Li.Wi(Math.floor(Math.min(a,h))+.11111111111111,o)),this.gv.Si(i,this.Li.Wi(Math.ceil(Math.max(a,h))-.11111111111111,o)))}i.restore();const l=t||34;return $r(Math.ceil(e.C+e.T+e.B+e.I+5+l))}qv(t){this.bv!==null&&ds(this.bv,t)||(this.bv=t,this.xv=!0,this.Ov.resizeCanvasElement(t),this.Av.resizeCanvasElement(t),this.xv=!1,this.Dv.style.width=`${t.width}px`,this.Dv.style.height=`${t.height}px`)}Yv(){return N(this.bv).width}Ji(t){this.Li!==t&&(this.Li!==null&&this.Li.$o().p(this),this.Li=t,t.$o().l(this.ao.bind(this),this))}At(){return this.Li}ir(){const t=this.nn.Xv();this.nn.kv().qt().A_(t,N(this.At()))}Kv(t){if(this.bv===null)return;if(t!==1){this.Zv(),this.Ov.applySuggestedBitmapSize();const i=ms(this.Ov);i!==null&&(i.useBitmapCoordinateSpace((n=>{this.Gv(n),this.Be(n)})),this.nn.Jv(i,this.Rv),this.Qv(i),this.nn.Jv(i,this.Tv),this.tp(i))}this.Av.applySuggestedBitmapSize();const e=ms(this.Av);e!==null&&(e.useBitmapCoordinateSpace((({context:i,bitmapSize:n})=>{i.clearRect(0,0,n.width,n.height)})),this.ip(e),this.nn.Jv(e,this.Pv))}np(){return this.Ov.bitmapSize}sp(t,e,i){const n=this.np();n.width>0&&n.height>0&&t.drawImage(this.Ov.canvasElement,e,i)}gt(){var t;(t=this.Li)===null||t===void 0||t.Ea()}Vv(t){if(this.Li===null||this.Li.Fi()||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.nn.kv().qt(),i=this.nn.Xv();this.wv=!0,e.y_(i,this.Li,t.localY)}Bv(t){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.nn.kv().qt(),i=this.nn.Xv(),n=this.Li;e.C_(i,n,t.localY)}Iv(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const t=this.nn.kv().qt(),e=this.nn.Xv(),i=this.Li;this.wv&&(this.wv=!1,t.T_(e,i))}zv(t){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.nn.kv().qt(),i=this.nn.Xv();this.wv=!1,e.T_(i,this.Li)}Ev(t){this.cn.handleScale.axisDoubleClickReset.price&&this.ir()}Lv(t){this.Li!==null&&(!this.nn.kv().qt().W().handleScale.axisPressedMouseMove.price||this.Li.ph()||this.Li.Co()||this.ep(1))}Nv(t){this.ep(0)}Uv(){const t=[],e=this.Li===null?void 0:this.Li;return(i=>{for(let n=0;n<i.length;++n){const r=i[n].Rn(this.nn.Xv(),e);for(let o=0;o<r.length;o++)t.push(r[o])}})(this.nn.Xv().No()),t}Gv({context:t,bitmapSize:e}){const{width:i,height:n}=e,r=this.nn.Xv().qt(),o=r.q(),l=r.ad();o===l?On(t,0,0,i,n,o):Qh(t,0,0,i,n,o,l)}Be({context:t,bitmapSize:e,horizontalPixelRatio:i}){if(this.bv===null||this.Li===null||!this.Li.W().borderVisible)return;t.fillStyle=this.Li.W().borderColor;const n=Math.max(1,Math.floor(this.jv().C*i));let r;r=this.Cv?e.width-n:0,t.fillRect(r,0,n,e.height)}Qv(t){if(this.bv===null||this.Li===null)return;const e=this.Li.Ea(),i=this.Li.W(),n=this.jv(),r=this.Cv?this.bv.width-n.T:0;i.borderVisible&&i.ticksVisible&&t.useBitmapCoordinateSpace((({context:o,horizontalPixelRatio:l,verticalPixelRatio:a})=>{o.fillStyle=i.borderColor;const h=Math.max(1,Math.floor(a)),u=Math.floor(.5*a),c=Math.round(n.T*l);o.beginPath();for(const d of e)o.rect(Math.floor(r*l),Math.round(d.Aa*a)-u,c,h);o.fill()})),t.useMediaCoordinateSpace((({context:o})=>{var l;o.font=this.$v(),o.fillStyle=(l=i.textColor)!==null&&l!==void 0?l:this.mo.textColor,o.textAlign=this.Cv?"right":"left",o.textBaseline="middle";const a=this.Cv?Math.round(r-n.B):Math.round(r+n.T+n.B),h=e.map((u=>this.gv.xi(o,u.Za)));for(let u=e.length;u--;){const c=e[u];o.fillText(c.Za,a,c.Aa+h[u])}}))}Zv(){if(this.bv===null||this.Li===null)return;let t=this.bv.height/2;const e=[],i=this.Li.No().slice(),n=this.nn.Xv(),r=this.jv();this.Li===n.vr()&&this.nn.Xv().No().forEach((a=>{n.dr(a)&&i.push(a)}));const o=this.Li.Ta()[0],l=this.Li;i.forEach((a=>{const h=a.Rn(n,l);h.forEach((u=>{u.Vi(null),u.Bi()&&e.push(u)})),o===a&&h.length>0&&(t=h[0].yi())})),e.forEach((a=>a.Vi(a.yi()))),this.Li.W().alignLabels&&this.rp(e,r,t)}rp(t,e,i){if(this.bv===null)return;const n=t.filter((o=>o.yi()<=i)),r=t.filter((o=>o.yi()>i));n.sort(((o,l)=>l.yi()-o.yi())),n.length&&r.length&&r.push(n[0]),r.sort(((o,l)=>o.yi()-l.yi()));for(const o of t){const l=Math.floor(o.zt(e)/2),a=o.yi();a>-l&&a<l&&o.Vi(l),a>this.bv.height-l&&a<this.bv.height+l&&o.Vi(this.bv.height-l)}for(let o=1;o<n.length;o++){const l=n[o],a=n[o-1],h=a.zt(e,!1),u=l.yi(),c=a.Ai();u>c-h&&l.Vi(c-h)}for(let o=1;o<r.length;o++){const l=r[o],a=r[o-1],h=a.zt(e,!0),u=l.yi(),c=a.Ai();u<c+h&&l.Vi(c+h)}}tp(t){if(this.bv===null)return;const e=this.Uv(),i=this.jv(),n=this.Cv?"right":"left";e.forEach((r=>{r.Ii()&&r.xt(N(this.Li)).K(t,i,this.gv,n)}))}ip(t){if(this.bv===null||this.Li===null)return;const e=this.nn.kv().qt(),i=[],n=this.nn.Xv(),r=e.Nc().Rn(n,this.Li);r.length&&i.push(r);const o=this.jv(),l=this.Cv?"right":"left";i.forEach((a=>{a.forEach((h=>{h.xt(N(this.Li)).K(t,o,this.gv,l)}))}))}ep(t){this.Dv.style.cursor=t===1?"ns-resize":"default"}ao(){const t=this.Hv();this.Mv<t&&this.nn.kv().qt().$l(),this.Mv=t}$v(){return Vs(this.mo.fontSize,this.mo.fontFamily)}}function Ob(s,t){var e,i;return(i=(e=s.ra)===null||e===void 0?void 0:e.call(s,t))!==null&&i!==void 0?i:[]}function Ui(s,t){var e,i;return(i=(e=s.Pn)===null||e===void 0?void 0:e.call(s,t))!==null&&i!==void 0?i:[]}function kb(s,t){var e,i;return(i=(e=s.Qi)===null||e===void 0?void 0:e.call(s,t))!==null&&i!==void 0?i:[]}function Lb(s,t){var e,i;return(i=(e=s.na)===null||e===void 0?void 0:e.call(s,t))!==null&&i!==void 0?i:[]}class To{constructor(t,e){this.bv=yt({width:0,height:0}),this.hp=null,this.lp=null,this.ap=null,this.op=!1,this._p=new St,this.up=new St,this.cp=0,this.dp=!1,this.fp=null,this.vp=!1,this.pp=null,this.mp=null,this.xv=!1,this.Sv=()=>{this.xv||this.bp===null||this.Ui().Fh()},this.yv=()=>{this.xv||this.bp===null||this.Ui().Fh()},this.wp=t,this.bp=e,this.bp.I_().l(this.gp.bind(this),this,!0),this.Mp=document.createElement("td"),this.Mp.style.padding="0",this.Mp.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.xp=document.createElement("td"),this.xp.style.padding="0",this.Sp=document.createElement("td"),this.Sp.style.padding="0",this.Mp.appendChild(i),this.Ov=gs(i,yt({width:16,height:16})),this.Ov.subscribeSuggestedBitmapSizeChanged(this.Sv);const n=this.Ov.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Av=gs(i,yt({width:16,height:16})),this.Av.subscribeSuggestedBitmapSizeChanged(this.yv);const r=this.Av.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.kp=document.createElement("tr"),this.kp.appendChild(this.xp),this.kp.appendChild(this.Mp),this.kp.appendChild(this.Sp),this.yp(),this.Fv=new Co(this.Av.canvasElement,this,{Lf:()=>this.fp===null&&!this.wp.W().handleScroll.vertTouchDrag,Nf:()=>this.fp===null&&!this.wp.W().handleScroll.horzTouchDrag})}S(){this.hp!==null&&this.hp.S(),this.lp!==null&&this.lp.S(),this.Av.unsubscribeSuggestedBitmapSizeChanged(this.yv),this.Av.dispose(),this.Ov.unsubscribeSuggestedBitmapSizeChanged(this.Sv),this.Ov.dispose(),this.bp!==null&&this.bp.I_().p(this),this.Fv.S()}Xv(){return N(this.bp)}Cp(t){this.bp!==null&&this.bp.I_().p(this),this.bp=t,this.bp!==null&&this.bp.I_().l(To.prototype.gp.bind(this),this,!0),this.yp()}kv(){return this.wp}Wv(){return this.kp}yp(){if(this.bp!==null&&(this.Tp(),this.Ui().Mt().length!==0)){if(this.hp!==null){const t=this.bp.S_();this.hp.Ji(N(t))}if(this.lp!==null){const t=this.bp.k_();this.lp.Ji(N(t))}}}Pp(){this.hp!==null&&this.hp.gt(),this.lp!==null&&this.lp.gt()}v_(){return this.bp!==null?this.bp.v_():0}p_(t){this.bp&&this.bp.p_(t)}Vf(t){if(!this.bp)return;this.Rp();const e=t.localX,i=t.localY;this.Dp(e,i,t)}Jf(t){this.Rp(),this.Op(),this.Dp(t.localX,t.localY,t)}Bf(t){var e;if(!this.bp)return;this.Rp();const i=t.localX,n=t.localY;this.Dp(i,n,t);const r=this.br(i,n);this.wp.Ap((e=r?.mv)!==null&&e!==void 0?e:null),this.Ui().Vc(r&&{Bc:r.Bc,vv:r.vv})}Yf(t){this.bp!==null&&(this.Rp(),this.Vp(t))}Cf(t){this.bp!==null&&this.Bp(this.up,t)}xf(t){this.Cf(t)}jf(t){this.Rp(),this.Ip(t),this.Dp(t.localX,t.localY,t)}qf(t){this.bp!==null&&(this.Rp(),this.dp=!1,this.zp(t))}Uf(t){this.bp!==null&&this.Vp(t)}ov(t){if(this.dp=!0,this.fp===null){const e={x:t.localX,y:t.localY};this.Ep(e,e,t)}}av(t){this.bp!==null&&(this.Rp(),this.bp.qt().Vc(null),this.Lp())}Np(){return this._p}Fp(){return this.up}nv(){this.cp=1,this.Ui().Un()}sv(t,e){if(!this.wp.W().handleScale.pinch)return;const i=5*(e-this.cp);this.cp=e,this.Ui().$c(t.et,i)}Zf(t){this.dp=!1,this.vp=this.fp!==null,this.Op();const e=this.Ui().Nc();this.fp!==null&&e.Tt()&&(this.pp={x:e.Kt(),y:e.Zt()},this.fp={x:t.localX,y:t.localY})}Ff(t){if(this.bp===null)return;const e=t.localX,i=t.localY;if(this.fp===null)this.Ip(t);else{this.vp=!1;const n=N(this.pp),r=n.x+(e-this.fp.x),o=n.y+(i-this.fp.y);this.Dp(r,o,t)}}$f(t){this.kv().W().trackingMode.exitMode===0&&(this.vp=!0),this.Wp(),this.zp(t)}br(t,e){const i=this.bp;return i===null?null:(function(n,r,o){const l=n.No(),a=(function(h,u,c){var d,p;let m,g;for(const y of h){const x=(p=(d=y.oa)===null||d===void 0?void 0:d.call(y,u,c))!==null&&p!==void 0?p:[];for(const P of x)S=P.zOrder,(!(_=m?.zOrder)||S==="top"&&_!=="top"||S==="normal"&&_==="bottom")&&(m=P,g=y)}var S,_;return m&&g?{pv:m,Bc:g}:null})(l,r,o);if(a?.pv.zOrder==="top")return Wi(a);for(const h of l){if(a&&a.Bc===h&&a.pv.zOrder!=="bottom"&&!a.pv.isBackground)return Wi(a);const u=Mb(h.Pn(n),r,o);if(u!==null)return{Bc:h,dv:u.dv,vv:u.vv};if(a&&a.Bc===h&&a.pv.zOrder!=="bottom"&&a.pv.isBackground)return Wi(a)}return a?.pv?Wi(a):null})(i,t,e)}jp(t,e){N(e==="left"?this.hp:this.lp).qv(yt({width:t,height:this.bv.height}))}Hp(){return this.bv}qv(t){ds(this.bv,t)||(this.bv=t,this.xv=!0,this.Ov.resizeCanvasElement(t),this.Av.resizeCanvasElement(t),this.xv=!1,this.Mp.style.width=t.width+"px",this.Mp.style.height=t.height+"px")}$p(){const t=N(this.bp);t.x_(t.S_()),t.x_(t.k_());for(const e of t.Ta())if(t.dr(e)){const i=e.At();i!==null&&t.x_(i),e.On()}}np(){return this.Ov.bitmapSize}sp(t,e,i){const n=this.np();n.width>0&&n.height>0&&t.drawImage(this.Ov.canvasElement,e,i)}Kv(t){if(t===0||this.bp===null)return;if(t>1&&this.$p(),this.hp!==null&&this.hp.Kv(t),this.lp!==null&&this.lp.Kv(t),t!==1){this.Ov.applySuggestedBitmapSize();const i=ms(this.Ov);i!==null&&(i.useBitmapCoordinateSpace((n=>{this.Gv(n)})),this.bp&&(this.Up(i,Ob),this.qp(i),this.Yp(i),this.Up(i,Ui),this.Up(i,kb)))}this.Av.applySuggestedBitmapSize();const e=ms(this.Av);e!==null&&(e.useBitmapCoordinateSpace((({context:i,bitmapSize:n})=>{i.clearRect(0,0,n.width,n.height)})),this.Xp(e),this.Up(e,Lb))}Kp(){return this.hp}Zp(){return this.lp}Jv(t,e){this.Up(t,e)}gp(){this.bp!==null&&this.bp.I_().p(this),this.bp=null}Vp(t){this.Bp(this._p,t)}Bp(t,e){const i=e.localX,n=e.localY;t.M()&&t.m(this.Ui().yt().Au(i),{x:i,y:n},e)}Gv({context:t,bitmapSize:e}){const{width:i,height:n}=e,r=this.Ui(),o=r.q(),l=r.ad();o===l?On(t,0,0,i,n,l):Qh(t,0,0,i,n,o,l)}qp(t){const e=N(this.bp).z_().Wh().xt();e!==null&&e.K(t,!1)}Yp(t){const e=this.Ui().Lc();this.Gp(t,Ui,Vr,e),this.Gp(t,Ui,Qi,e)}Xp(t){this.Gp(t,Ui,Qi,this.Ui().Nc())}Up(t,e){const i=N(this.bp).No();for(const n of i)this.Gp(t,e,Vr,n);for(const n of i)this.Gp(t,e,Qi,n)}Gp(t,e,i,n){const r=N(this.bp),o=r.qt().Ac(),l=o!==null&&o.Bc===n,a=o!==null&&l&&o.vv!==void 0?o.vv.gr:void 0;Fr(e,(h=>i(h,t,l,a)),n,r)}Tp(){if(this.bp===null)return;const t=this.wp,e=this.bp.S_().W().visible,i=this.bp.k_().W().visible;e||this.hp===null||(this.xp.removeChild(this.hp.Wv()),this.hp.S(),this.hp=null),i||this.lp===null||(this.Sp.removeChild(this.lp.Wv()),this.lp.S(),this.lp=null);const n=t.qt().nd();e&&this.hp===null&&(this.hp=new ua(this,t.W(),n,"left"),this.xp.appendChild(this.hp.Wv())),i&&this.lp===null&&(this.lp=new ua(this,t.W(),n,"right"),this.Sp.appendChild(this.lp.Wv()))}Jp(t){return t._v&&this.dp||this.fp!==null}Qp(t){return Math.max(0,Math.min(t,this.bv.width-1))}tm(t){return Math.max(0,Math.min(t,this.bv.height-1))}Dp(t,e,i){this.Ui().Gc(this.Qp(t),this.tm(e),i,N(this.bp))}Lp(){this.Ui().Qc()}Wp(){this.vp&&(this.fp=null,this.Lp())}Ep(t,e,i){this.fp=t,this.vp=!1,this.Dp(e.x,e.y,i);const n=this.Ui().Nc();this.pp={x:n.Kt(),y:n.Zt()}}Ui(){return this.wp.qt()}zp(t){if(!this.op)return;const e=this.Ui(),i=this.Xv();if(e.D_(i,i.vn()),this.ap=null,this.op=!1,e.Xc(),this.mp!==null){const n=performance.now(),r=e.yt();this.mp.Dr(r.zu(),n),this.mp.qu(n)||e.Xn(this.mp)}}Rp(){this.fp=null}Op(){if(this.bp){if(this.Ui().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)N(document.activeElement).blur();else{const t=document.getSelection();t!==null&&t.removeAllRanges()}!this.bp.vn().Fi()&&this.Ui().yt().Fi()}}Ip(t){if(this.bp===null)return;const e=this.Ui(),i=e.yt();if(i.Fi())return;const n=this.wp.W(),r=n.handleScroll,o=n.kineticScroll;if((!r.pressedMouseMove||t._v)&&(!r.horzTouchDrag&&!r.vertTouchDrag||!t._v))return;const l=this.bp.vn(),a=performance.now();if(this.ap!==null||this.Jp(t)||(this.ap={x:t.clientX,y:t.clientY,Sd:a,im:t.localX,nm:t.localY}),this.ap!==null&&!this.op&&(this.ap.x!==t.clientX||this.ap.y!==t.clientY)){if(t._v&&o.touch||!t._v&&o.mouse){const h=i.he();this.mp=new Cb(.2/h,7/h,.997,15/h),this.mp.Ld(i.zu(),this.ap.Sd)}else this.mp=null;l.Fi()||e.P_(this.bp,l,t.localY),e.qc(t.localX),this.op=!0}this.op&&(l.Fi()||e.R_(this.bp,l,t.localY),e.Yc(t.localX),this.mp!==null&&this.mp.Ld(i.zu(),a))}}class ca{constructor(t,e,i,n,r){this.bt=!0,this.bv=yt({width:0,height:0}),this.Sv=()=>this.Kv(3),this.Cv=t==="left",this.Sc=i.nd,this.cn=e,this.sm=n,this.rm=r,this.Dv=document.createElement("div"),this.Dv.style.width="25px",this.Dv.style.height="100%",this.Dv.style.overflow="hidden",this.Ov=gs(this.Dv,yt({width:16,height:16})),this.Ov.subscribeSuggestedBitmapSizeChanged(this.Sv)}S(){this.Ov.unsubscribeSuggestedBitmapSizeChanged(this.Sv),this.Ov.dispose()}Wv(){return this.Dv}Hp(){return this.bv}qv(t){ds(this.bv,t)||(this.bv=t,this.Ov.resizeCanvasElement(t),this.Dv.style.width=`${t.width}px`,this.Dv.style.height=`${t.height}px`,this.bt=!0)}Kv(t){if(t<3&&!this.bt||this.bv.width===0||this.bv.height===0)return;this.bt=!1,this.Ov.applySuggestedBitmapSize();const e=ms(this.Ov);e!==null&&e.useBitmapCoordinateSpace((i=>{this.Gv(i),this.Be(i)}))}np(){return this.Ov.bitmapSize}sp(t,e,i){const n=this.np();n.width>0&&n.height>0&&t.drawImage(this.Ov.canvasElement,e,i)}Be({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(!this.sm())return;t.fillStyle=this.cn.timeScale.borderColor;const r=Math.floor(this.Sc.W().C*i),o=Math.floor(this.Sc.W().C*n),l=this.Cv?e.width-r:0;t.fillRect(l,0,r,o)}Gv({context:t,bitmapSize:e}){On(t,0,0,e.width,e.height,this.rm())}}function Mo(s){return t=>{var e,i;return(i=(e=t.aa)===null||e===void 0?void 0:e.call(t,s))!==null&&i!==void 0?i:[]}}const Ab=Mo("normal"),Rb=Mo("top"),Pb=Mo("bottom");class Nb{constructor(t,e){this.hm=null,this.lm=null,this.k=null,this.am=!1,this.bv=yt({width:0,height:0}),this.om=new St,this.gv=new wi(5),this.xv=!1,this.Sv=()=>{this.xv||this.wp.qt().Fh()},this.yv=()=>{this.xv||this.wp.qt().Fh()},this.wp=t,this.N_=e,this.cn=t.W().layout,this._m=document.createElement("tr"),this.um=document.createElement("td"),this.um.style.padding="0",this.dm=document.createElement("td"),this.dm.style.padding="0",this.Dv=document.createElement("td"),this.Dv.style.height="25px",this.Dv.style.padding="0",this.fm=document.createElement("div"),this.fm.style.width="100%",this.fm.style.height="100%",this.fm.style.position="relative",this.fm.style.overflow="hidden",this.Dv.appendChild(this.fm),this.Ov=gs(this.fm,yt({width:16,height:16})),this.Ov.subscribeSuggestedBitmapSizeChanged(this.Sv);const i=this.Ov.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Av=gs(this.fm,yt({width:16,height:16})),this.Av.subscribeSuggestedBitmapSizeChanged(this.yv);const n=this.Av.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this._m.appendChild(this.um),this._m.appendChild(this.Dv),this._m.appendChild(this.dm),this.vm(),this.wp.qt().f_().l(this.vm.bind(this),this),this.Fv=new Co(this.Av.canvasElement,this,{Lf:()=>!0,Nf:()=>!1})}S(){this.Fv.S(),this.hm!==null&&this.hm.S(),this.lm!==null&&this.lm.S(),this.Av.unsubscribeSuggestedBitmapSizeChanged(this.yv),this.Av.dispose(),this.Ov.unsubscribeSuggestedBitmapSizeChanged(this.Sv),this.Ov.dispose()}Wv(){return this._m}pm(){return this.hm}bm(){return this.lm}Jf(t){if(this.am)return;this.am=!0;const e=this.wp.qt();!e.yt().Fi()&&this.wp.W().handleScale.axisPressedMouseMove.time&&e.Hc(t.localX)}Zf(t){this.Jf(t)}Qf(){const t=this.wp.qt();!t.yt().Fi()&&this.am&&(this.am=!1,this.wp.W().handleScale.axisPressedMouseMove.time&&t.Zc())}jf(t){const e=this.wp.qt();!e.yt().Fi()&&this.wp.W().handleScale.axisPressedMouseMove.time&&e.Kc(t.localX)}Ff(t){this.jf(t)}qf(){this.am=!1;const t=this.wp.qt();t.yt().Fi()&&!this.wp.W().handleScale.axisPressedMouseMove.time||t.Zc()}$f(){this.qf()}Cf(){this.wp.W().handleScale.axisDoubleClickReset.time&&this.wp.qt().Zn()}xf(){this.Cf()}Vf(){this.wp.qt().W().handleScale.axisPressedMouseMove.time&&this.ep(1)}av(){this.ep(0)}Hp(){return this.bv}wm(){return this.om}gm(t,e,i){ds(this.bv,t)||(this.bv=t,this.xv=!0,this.Ov.resizeCanvasElement(t),this.Av.resizeCanvasElement(t),this.xv=!1,this.Dv.style.width=`${t.width}px`,this.Dv.style.height=`${t.height}px`,this.om.m(t)),this.hm!==null&&this.hm.qv(yt({width:e,height:t.height})),this.lm!==null&&this.lm.qv(yt({width:i,height:t.height}))}Mm(){const t=this.xm();return Math.ceil(t.C+t.T+t.P+t.L+t.V+t.Sm)}gt(){this.wp.qt().yt().Ea()}np(){return this.Ov.bitmapSize}sp(t,e,i){const n=this.np();n.width>0&&n.height>0&&t.drawImage(this.Ov.canvasElement,e,i)}Kv(t){if(t===0)return;if(t!==1){this.Ov.applySuggestedBitmapSize();const i=ms(this.Ov);i!==null&&(i.useBitmapCoordinateSpace((n=>{this.Gv(n),this.Be(n),this.km(i,Pb)})),this.Qv(i),this.km(i,Ab)),this.hm!==null&&this.hm.Kv(t),this.lm!==null&&this.lm.Kv(t)}this.Av.applySuggestedBitmapSize();const e=ms(this.Av);e!==null&&(e.useBitmapCoordinateSpace((({context:i,bitmapSize:n})=>{i.clearRect(0,0,n.width,n.height)})),this.ym([...this.wp.qt().Mt(),this.wp.qt().Nc()],e),this.km(e,Rb))}km(t,e){const i=this.wp.qt().Mt();for(const n of i)Fr(e,(r=>Vr(r,t,!1,void 0)),n,void 0);for(const n of i)Fr(e,(r=>Qi(r,t,!1,void 0)),n,void 0)}Gv({context:t,bitmapSize:e}){On(t,0,0,e.width,e.height,this.wp.qt().ad())}Be({context:t,bitmapSize:e,verticalPixelRatio:i}){if(this.wp.W().timeScale.borderVisible){t.fillStyle=this.Cm();const n=Math.max(1,Math.floor(this.xm().C*i));t.fillRect(0,0,e.width,n)}}Qv(t){const e=this.wp.qt().yt(),i=e.Ea();if(!i||i.length===0)return;const n=this.N_.maxTickMarkWeight(i),r=this.xm(),o=e.W();o.borderVisible&&o.ticksVisible&&t.useBitmapCoordinateSpace((({context:l,horizontalPixelRatio:a,verticalPixelRatio:h})=>{l.strokeStyle=this.Cm(),l.fillStyle=this.Cm();const u=Math.max(1,Math.floor(a)),c=Math.floor(.5*a);l.beginPath();const d=Math.round(r.T*h);for(let p=i.length;p--;){const m=Math.round(i[p].coord*a);l.rect(m-c,0,u,d)}l.fill()})),t.useMediaCoordinateSpace((({context:l})=>{const a=r.C+r.T+r.L+r.P/2;l.textAlign="center",l.textBaseline="middle",l.fillStyle=this.$(),l.font=this.$v();for(const h of i)if(h.weight<n){const u=h.needAlignCoordinate?this.Tm(l,h.coord,h.label):h.coord;l.fillText(h.label,u,a)}l.font=this.Pm();for(const h of i)if(h.weight>=n){const u=h.needAlignCoordinate?this.Tm(l,h.coord,h.label):h.coord;l.fillText(h.label,u,a)}}))}Tm(t,e,i){const n=this.gv.Si(t,i),r=n/2,o=Math.floor(e-r)+.5;return o<0?e+=Math.abs(0-o):o+n>this.bv.width&&(e-=Math.abs(this.bv.width-(o+n))),e}ym(t,e){const i=this.xm();for(const n of t)for(const r of n.tn())r.xt().K(e,i)}Cm(){return this.wp.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}$v(){return Vs(this.j(),this.cn.fontFamily)}Pm(){return Vs(this.j(),this.cn.fontFamily,"bold")}xm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,V:NaN,Hi:NaN,T:5,P:NaN,R:"",ji:new wi,Sm:0});const t=this.k,e=this.$v();if(t.R!==e){const i=this.j();t.P=i,t.R=e,t.L=3*i/12,t.V=3*i/12,t.Hi=9*i/12,t.N=0,t.Sm=4*i/12,t.ji.ir()}return this.k}ep(t){this.Dv.style.cursor=t===1?"ew-resize":"default"}vm(){const t=this.wp.qt(),e=t.W();e.leftPriceScale.visible||this.hm===null||(this.um.removeChild(this.hm.Wv()),this.hm.S(),this.hm=null),e.rightPriceScale.visible||this.lm===null||(this.dm.removeChild(this.lm.Wv()),this.lm.S(),this.lm=null);const i={nd:this.wp.qt().nd()},n=()=>e.leftPriceScale.borderVisible&&t.yt().W().borderVisible,r=()=>t.ad();e.leftPriceScale.visible&&this.hm===null&&(this.hm=new ca("left",e,i,n,r),this.um.appendChild(this.hm.Wv())),e.rightPriceScale.visible&&this.lm===null&&(this.lm=new ca("right",e,i,n,r),this.dm.appendChild(this.lm.Wv()))}}const Ib=!!Fs&&!!navigator.userAgentData&&navigator.userAgentData.brands.some((s=>s.brand.includes("Chromium")))&&!!Fs&&(!((ur=navigator?.userAgentData)===null||ur===void 0)&&ur.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var ur;class Db{constructor(t,e,i){var n;this.Rm=[],this.Dm=0,this.Qa=0,this.e_=0,this.Om=0,this.Am=0,this.Vm=null,this.Bm=!1,this._p=new St,this.up=new St,this.gc=new St,this.Im=null,this.zm=null,this.Em=t,this.cn=e,this.N_=i,this._m=document.createElement("div"),this._m.classList.add("tv-lightweight-charts"),this._m.style.overflow="hidden",this._m.style.direction="ltr",this._m.style.width="100%",this._m.style.height="100%",(n=this._m).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.Lm=document.createElement("table"),this.Lm.setAttribute("cellspacing","0"),this._m.appendChild(this.Lm),this.Nm=this.Fm.bind(this),cr(this.cn)&&this.Wm(!0),this.Ui=new _b(this.xc.bind(this),this.cn,i),this.qt().Fc().l(this.jm.bind(this),this),this.Hm=new Nb(this,this.N_),this.Lm.appendChild(this.Hm.Wv());const r=e.autoSize&&this.$m();let o=this.cn.width,l=this.cn.height;if(r||o===0||l===0){const a=t.getBoundingClientRect();o=o||a.width,l=l||a.height}this.Um(o,l),this.qm(),t.appendChild(this._m),this.Ym(),this.Ui.yt().Zu().l(this.Ui.$l.bind(this.Ui),this),this.Ui.f_().l(this.Ui.$l.bind(this.Ui),this)}qt(){return this.Ui}W(){return this.cn}Xm(){return this.Rm}Km(){return this.Hm}S(){this.Wm(!1),this.Dm!==0&&window.cancelAnimationFrame(this.Dm),this.Ui.Fc().p(this),this.Ui.yt().Zu().p(this),this.Ui.f_().p(this),this.Ui.S();for(const t of this.Rm)this.Lm.removeChild(t.Wv()),t.Np().p(this),t.Fp().p(this),t.S();this.Rm=[],N(this.Hm).S(),this._m.parentElement!==null&&this._m.parentElement.removeChild(this._m),this.gc.S(),this._p.S(),this.up.S(),this.Zm()}Um(t,e,i=!1){if(this.Qa===e&&this.e_===t)return;const n=(function(l){const a=Math.floor(l.width),h=Math.floor(l.height);return yt({width:a-a%2,height:h-h%2})})(yt({width:t,height:e}));this.Qa=n.height,this.e_=n.width;const r=this.Qa+"px",o=this.e_+"px";N(this._m).style.height=r,N(this._m).style.width=o,this.Lm.style.height=r,this.Lm.style.width=o,i?this.Gm(kt.es(),performance.now()):this.Ui.$l()}Kv(t){t===void 0&&(t=kt.es());for(let e=0;e<this.Rm.length;e++)this.Rm[e].Kv(t.Hn(e).Fn);this.cn.timeScale.visible&&this.Hm.Kv(t.jn())}Nh(t){const e=cr(this.cn);this.Ui.Nh(t);const i=cr(this.cn);i!==e&&this.Wm(i),this.Ym(),this.Jm(t)}Np(){return this._p}Fp(){return this.up}Fc(){return this.gc}Qm(){this.Vm!==null&&(this.Gm(this.Vm,performance.now()),this.Vm=null);const t=this.tb(null),e=document.createElement("canvas");e.width=t.width,e.height=t.height;const i=N(e.getContext("2d"));return this.tb(i),e}ib(t){return t==="left"&&!this.nb()||t==="right"&&!this.sb()||this.Rm.length===0?0:N(t==="left"?this.Rm[0].Kp():this.Rm[0].Zp()).Yv()}eb(){return this.cn.autoSize&&this.Im!==null}rb(){return this._m}Ap(t){this.zm=t,this.zm?this.rb().style.setProperty("cursor",t):this.rb().style.removeProperty("cursor")}hb(){return this.zm}lb(){return Wt(this.Rm[0]).Hp()}Jm(t){(t.autoSize!==void 0||!this.Im||t.width===void 0&&t.height===void 0)&&(t.autoSize&&!this.Im&&this.$m(),t.autoSize===!1&&this.Im!==null&&this.Zm(),t.autoSize||t.width===void 0&&t.height===void 0||this.Um(t.width||this.e_,t.height||this.Qa))}tb(t){let e=0,i=0;const n=this.Rm[0],r=(l,a)=>{let h=0;for(let u=0;u<this.Rm.length;u++){const c=this.Rm[u],d=N(l==="left"?c.Kp():c.Zp()),p=d.np();t!==null&&d.sp(t,a,h),h+=p.height}};this.nb()&&(r("left",0),e+=N(n.Kp()).np().width);for(let l=0;l<this.Rm.length;l++){const a=this.Rm[l],h=a.np();t!==null&&a.sp(t,e,i),i+=h.height}e+=n.np().width,this.sb()&&(r("right",e),e+=N(n.Zp()).np().width);const o=(l,a,h)=>{N(l==="left"?this.Hm.pm():this.Hm.bm()).sp(N(t),a,h)};if(this.cn.timeScale.visible){const l=this.Hm.np();if(t!==null){let a=0;this.nb()&&(o("left",a,i),a=N(n.Kp()).np().width),this.Hm.sp(t,a,i),a+=l.width,this.sb()&&o("right",a,i)}i+=l.height}return yt({width:e,height:i})}ab(){let t=0,e=0,i=0;for(const m of this.Rm)this.nb()&&(e=Math.max(e,N(m.Kp()).Hv(),this.cn.leftPriceScale.minimumWidth)),this.sb()&&(i=Math.max(i,N(m.Zp()).Hv(),this.cn.rightPriceScale.minimumWidth)),t+=m.v_();e=$r(e),i=$r(i);const n=this.e_,r=this.Qa,o=Math.max(n-e-i,0),l=this.cn.timeScale.visible;let a=l?Math.max(this.Hm.Mm(),this.cn.timeScale.minimumHeight):0;var h;a=(h=a)+h%2;const u=0+a,c=r<u?0:r-u,d=c/t;let p=0;for(let m=0;m<this.Rm.length;++m){const g=this.Rm[m];g.Cp(this.Ui.Ec()[m]);let S=0,_=0;_=m===this.Rm.length-1?c-p:Math.round(g.v_()*d),S=Math.max(_,2),p+=S,g.qv(yt({width:o,height:S})),this.nb()&&g.jp(e,"left"),this.sb()&&g.jp(i,"right"),g.Xv()&&this.Ui.Wc(g.Xv(),S)}this.Hm.gm(yt({width:l?o:0,height:a}),l?e:0,l?i:0),this.Ui.m_(o),this.Om!==e&&(this.Om=e),this.Am!==i&&(this.Am=i)}Wm(t){t?this._m.addEventListener("wheel",this.Nm,{passive:!1}):this._m.removeEventListener("wheel",this.Nm)}ob(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return Ib?1/window.devicePixelRatio:1}Fm(t){if(!(t.deltaX!==0&&this.cn.handleScroll.mouseWheel||t.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const e=this.ob(t),i=e*t.deltaX/100,n=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),n!==0&&this.cn.handleScale.mouseWheel){const r=Math.sign(n)*Math.min(1,Math.abs(n)),o=t.clientX-this._m.getBoundingClientRect().left;this.qt().$c(o,r)}i!==0&&this.cn.handleScroll.mouseWheel&&this.qt().Uc(-80*i)}Gm(t,e){var i;const n=t.jn();n===3&&this._b(),n!==3&&n!==2||(this.ub(t),this.cb(t,e),this.Hm.gt(),this.Rm.forEach((r=>{r.Pp()})),((i=this.Vm)===null||i===void 0?void 0:i.jn())===3&&(this.Vm.ts(t),this._b(),this.ub(this.Vm),this.cb(this.Vm,e),t=this.Vm,this.Vm=null)),this.Kv(t)}cb(t,e){for(const i of t.Qn())this.ns(i,e)}ub(t){const e=this.Ui.Ec();for(let i=0;i<e.length;i++)t.Hn(i).Wn&&e[i].V_()}ns(t,e){const i=this.Ui.yt();switch(t.qn){case 0:i.Ju();break;case 1:i.Qu(t.Vt);break;case 2:i.Gn(t.Vt);break;case 3:i.Jn(t.Vt);break;case 4:i.Nu();break;case 5:t.Vt.qu(e)||i.Jn(t.Vt.Yu(e))}}xc(t){this.Vm!==null?this.Vm.ts(t):this.Vm=t,this.Bm||(this.Bm=!0,this.Dm=window.requestAnimationFrame((e=>{if(this.Bm=!1,this.Dm=0,this.Vm!==null){const i=this.Vm;this.Vm=null,this.Gm(i,e);for(const n of i.Qn())if(n.qn===5&&!n.Vt.qu(e)){this.qt().Xn(n.Vt);break}}})))}_b(){this.qm()}qm(){const t=this.Ui.Ec(),e=t.length,i=this.Rm.length;for(let n=e;n<i;n++){const r=Wt(this.Rm.pop());this.Lm.removeChild(r.Wv()),r.Np().p(this),r.Fp().p(this),r.S()}for(let n=i;n<e;n++){const r=new To(this,t[n]);r.Np().l(this.fb.bind(this),this),r.Fp().l(this.vb.bind(this),this),this.Rm.push(r),this.Lm.insertBefore(r.Wv(),this.Hm.Wv())}for(let n=0;n<e;n++){const r=t[n],o=this.Rm[n];o.Xv()!==r?o.Cp(r):o.yp()}this.Ym(),this.ab()}pb(t,e,i){var n;const r=new Map;t!==null&&this.Ui.Mt().forEach((u=>{const c=u.In().nl(t);c!==null&&r.set(u,c)}));let o;if(t!==null){const u=(n=this.Ui.yt().qi(t))===null||n===void 0?void 0:n.originalTime;u!==void 0&&(o=u)}const l=this.qt().Ac(),a=l!==null&&l.Bc instanceof xo?l.Bc:void 0,h=l!==null&&l.vv!==void 0?l.vv.wr:void 0;return{mb:o,se:t??void 0,bb:e??void 0,wb:a,gb:r,Mb:h,xb:i??void 0}}fb(t,e,i){this._p.m((()=>this.pb(t,e,i)))}vb(t,e,i){this.up.m((()=>this.pb(t,e,i)))}jm(t,e,i){this.gc.m((()=>this.pb(t,e,i)))}Ym(){const t=this.cn.timeScale.visible?"":"none";this.Hm.Wv().style.display=t}nb(){return this.Rm[0].Xv().S_().W().visible}sb(){return this.Rm[0].Xv().k_().W().visible}$m(){return"ResizeObserver"in window&&(this.Im=new ResizeObserver((t=>{const e=t.find((i=>i.target===this.Em));e&&this.Um(e.contentRect.width,e.contentRect.height)})),this.Im.observe(this.Em,{box:"border-box"}),!0)}Zm(){this.Im!==null&&this.Im.disconnect(),this.Im=null}}function cr(s){return!!(s.handleScroll.mouseWheel||s.handleScale.mouseWheel)}function gu(s,t){var e={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&t.indexOf(i)<0&&(e[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(i=Object.getOwnPropertySymbols(s);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(s,i[n])&&(e[i[n]]=s[i[n]])}return e}function fa(s,t,e,i){const n=e.value,r={se:t,ut:s,Vt:[n,n,n,n],mb:i};return e.color!==void 0&&(r.O=e.color),r}function Bb(s,t,e,i){const n=e.value,r={se:t,ut:s,Vt:[n,n,n,n],mb:i};return e.lineColor!==void 0&&(r._t=e.lineColor),e.topColor!==void 0&&(r.Ts=e.topColor),e.bottomColor!==void 0&&(r.Ps=e.bottomColor),r}function $b(s,t,e,i){const n=e.value,r={se:t,ut:s,Vt:[n,n,n,n],mb:i};return e.topLineColor!==void 0&&(r.Pe=e.topLineColor),e.bottomLineColor!==void 0&&(r.Re=e.bottomLineColor),e.topFillColor1!==void 0&&(r.Se=e.topFillColor1),e.topFillColor2!==void 0&&(r.ke=e.topFillColor2),e.bottomFillColor1!==void 0&&(r.ye=e.bottomFillColor1),e.bottomFillColor2!==void 0&&(r.Ce=e.bottomFillColor2),r}function Vb(s,t,e,i){const n={se:t,ut:s,Vt:[e.open,e.high,e.low,e.close],mb:i};return e.color!==void 0&&(n.O=e.color),n}function Fb(s,t,e,i){const n={se:t,ut:s,Vt:[e.open,e.high,e.low,e.close],mb:i};return e.color!==void 0&&(n.O=e.color),e.borderColor!==void 0&&(n.Bt=e.borderColor),e.wickColor!==void 0&&(n.$h=e.wickColor),n}function zb(s,t,e,i,n){const r=Wt(n)(e),o=Math.max(...r),l=Math.min(...r),a=r[r.length-1],h=[a,o,l,a],u=e,{time:c,color:d}=u;return{se:t,ut:s,Vt:h,mb:i,He:gu(u,["time","color"]),O:d}}function qi(s){return s.Vt!==void 0}function da(s,t){return t.customValues!==void 0&&(s.Sb=t.customValues),s}function os(s){return(t,e,i,n,r,o)=>(function(l,a){return a?a(l):(h=l).open===void 0&&h.value===void 0;var h})(i,o)?da({ut:t,se:e,mb:n},i):da(s(t,e,i,n,r),i)}function pa(s){return{Candlestick:os(Fb),Bar:os(Vb),Area:os(Bb),Baseline:os($b),Histogram:os(fa),Line:os(fa),Custom:os(zb)}[s]}function ma(s){return{se:0,kb:new Map,ia:s}}function va(s,t){if(s!==void 0&&s.length!==0)return{yb:t.key(s[0].ut),Cb:t.key(s[s.length-1].ut)}}function ga(s){let t;return s.forEach((e=>{t===void 0&&(t=e.mb)})),Wt(t)}class Wb{constructor(t){this.Tb=new Map,this.Pb=new Map,this.Rb=new Map,this.Db=[],this.N_=t}S(){this.Tb.clear(),this.Pb.clear(),this.Rb.clear(),this.Db=[]}Ob(t,e){let i=this.Tb.size!==0,n=!1;const r=this.Pb.get(t);if(r!==void 0)if(this.Pb.size===1)i=!1,n=!0,this.Tb.clear();else for(const a of this.Db)a.pointData.kb.delete(t)&&(n=!0);let o=[];if(e.length!==0){const a=e.map((p=>p.time)),h=this.N_.createConverterToInternalObj(e),u=pa(t.Xh()),c=t.ga(),d=t.Ma();o=e.map(((p,m)=>{const g=h(p.time),S=this.N_.key(g);let _=this.Tb.get(S);_===void 0&&(_=ma(g),this.Tb.set(S,_),n=!0);const y=u(g,_.se,p,a[m],c,d);return _.kb.set(t,y),y}))}i&&this.Ab(),this.Vb(t,o);let l=-1;if(n){const a=[];this.Tb.forEach((h=>{a.push({timeWeight:0,time:h.ia,pointData:h,originalTime:ga(h.kb)})})),a.sort(((h,u)=>this.N_.key(h.time)-this.N_.key(u.time))),l=this.Bb(a)}return this.Ib(t,l,(function(a,h,u){const c=va(a,u),d=va(h,u);if(c!==void 0&&d!==void 0)return{Xl:c.Cb>=d.Cb&&c.yb>=d.yb}})(this.Pb.get(t),r,this.N_))}rd(t){return this.Ob(t,[])}zb(t,e){const i=e;(function(g){g.mb===void 0&&(g.mb=g.time)})(i),this.N_.preprocessData(e);const n=this.N_.createConverterToInternalObj([e])(e.time),r=this.Rb.get(t);if(r!==void 0&&this.N_.key(n)<this.N_.key(r))throw new Error(`Cannot update oldest data, last time=${r}, new time=${n}`);let o=this.Tb.get(this.N_.key(n));const l=o===void 0;o===void 0&&(o=ma(n),this.Tb.set(this.N_.key(n),o));const a=pa(t.Xh()),h=t.ga(),u=t.Ma(),c=a(n,o.se,e,i.mb,h,u);o.kb.set(t,c),this.Eb(t,c);const d={Xl:qi(c)};if(!l)return this.Ib(t,-1,d);const p={timeWeight:0,time:o.ia,pointData:o,originalTime:ga(o.kb)},m=Ai(this.Db,this.N_.key(p.time),((g,S)=>this.N_.key(g.time)<S));this.Db.splice(m,0,p);for(let g=m;g<this.Db.length;++g)fr(this.Db[g].pointData,g);return this.N_.fillWeightsForPoints(this.Db,m),this.Ib(t,m,d)}Eb(t,e){let i=this.Pb.get(t);i===void 0&&(i=[],this.Pb.set(t,i));const n=i.length!==0?i[i.length-1]:null;n===null||this.N_.key(e.ut)>this.N_.key(n.ut)?qi(e)&&i.push(e):qi(e)?i[i.length-1]=e:i.splice(-1,1),this.Rb.set(t,e.ut)}Vb(t,e){e.length!==0?(this.Pb.set(t,e.filter(qi)),this.Rb.set(t,e[e.length-1].ut)):(this.Pb.delete(t),this.Rb.delete(t))}Ab(){for(const t of this.Db)t.pointData.kb.size===0&&this.Tb.delete(this.N_.key(t.time))}Bb(t){let e=-1;for(let i=0;i<this.Db.length&&i<t.length;++i){const n=this.Db[i],r=t[i];if(this.N_.key(n.time)!==this.N_.key(r.time)){e=i;break}r.timeWeight=n.timeWeight,fr(r.pointData,i)}if(e===-1&&this.Db.length!==t.length&&(e=Math.min(this.Db.length,t.length)),e===-1)return-1;for(let i=e;i<t.length;++i)fr(t[i].pointData,i);return this.N_.fillWeightsForPoints(t,e),this.Db=t,e}Lb(){if(this.Pb.size===0)return null;let t=0;return this.Pb.forEach((e=>{e.length!==0&&(t=Math.max(t,e[e.length-1].se))})),t}Ib(t,e,i){const n={Nb:new Map,yt:{Ou:this.Lb()}};if(e!==-1)this.Pb.forEach(((r,o)=>{n.Nb.set(o,{He:r,Fb:o===t?i:void 0})})),this.Pb.has(t)||n.Nb.set(t,{He:[],Fb:i}),n.yt.Wb=this.Db,n.yt.jb=e;else{const r=this.Pb.get(t);n.Nb.set(t,{He:r||[],Fb:i})}return n}}function fr(s,t){s.se=t,s.kb.forEach((e=>{e.se=t}))}function Oo(s){const t={value:s.Vt[3],time:s.mb};return s.Sb!==void 0&&(t.customValues=s.Sb),t}function ba(s){const t=Oo(s);return s.O!==void 0&&(t.color=s.O),t}function Ub(s){const t=Oo(s);return s._t!==void 0&&(t.lineColor=s._t),s.Ts!==void 0&&(t.topColor=s.Ts),s.Ps!==void 0&&(t.bottomColor=s.Ps),t}function qb(s){const t=Oo(s);return s.Pe!==void 0&&(t.topLineColor=s.Pe),s.Re!==void 0&&(t.bottomLineColor=s.Re),s.Se!==void 0&&(t.topFillColor1=s.Se),s.ke!==void 0&&(t.topFillColor2=s.ke),s.ye!==void 0&&(t.bottomFillColor1=s.ye),s.Ce!==void 0&&(t.bottomFillColor2=s.Ce),t}function bu(s){const t={open:s.Vt[0],high:s.Vt[1],low:s.Vt[2],close:s.Vt[3],time:s.mb};return s.Sb!==void 0&&(t.customValues=s.Sb),t}function Hb(s){const t=bu(s);return s.O!==void 0&&(t.color=s.O),t}function jb(s){const t=bu(s),{O:e,Bt:i,$h:n}=s;return e!==void 0&&(t.color=e),i!==void 0&&(t.borderColor=i),n!==void 0&&(t.wickColor=n),t}function zr(s){return{Area:Ub,Line:ba,Baseline:qb,Histogram:ba,Bar:Hb,Candlestick:jb,Custom:Kb}[s]}function Kb(s){const t=s.mb;return Object.assign(Object.assign({},s.He),{time:t})}const Gb={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},Jb={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},Xb={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:vo},dr={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},Yb={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0},Qb={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:vo,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function ya(){return{width:0,height:0,autoSize:!1,layout:Xb,crosshair:Gb,grid:Jb,overlayPriceScales:Object.assign({},dr),leftPriceScale:Object.assign(Object.assign({},dr),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},dr),{visible:!0}),timeScale:Yb,watermark:Qb,localization:{locale:Fs?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class Zb{constructor(t,e){this.Hb=t,this.$b=e}applyOptions(t){this.Hb.qt().Ic(this.$b,t)}options(){return this.Li().W()}width(){return Ln(this.$b)?this.Hb.ib(this.$b):0}Li(){return N(this.Hb.qt().zc(this.$b)).At}}function _a(s,t,e){const i=gu(s,["time","originalTime"]),n=Object.assign({time:t},i);return e!==void 0&&(n.originalTime=e),n}const t0={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class e0{constructor(t){this.Bh=t}applyOptions(t){this.Bh.Nh(t)}options(){return this.Bh.W()}Ub(){return this.Bh}}class s0{constructor(t,e,i,n,r){this.qb=new St,this.Es=t,this.Yb=e,this.Xb=i,this.N_=r,this.Kb=n}S(){this.qb.S()}priceFormatter(){return this.Es.ca()}priceToCoordinate(t){const e=this.Es.Pt();return e===null?null:this.Es.At().Ot(t,e.Vt)}coordinateToPrice(t){const e=this.Es.Pt();return e===null?null:this.Es.At().pn(t,e.Vt)}barsInLogicalRange(t){if(t===null)return null;const e=new Rs(new hi(t.from,t.to)).iu(),i=this.Es.In();if(i.Fi())return null;const n=i.nl(e.Os(),1),r=i.nl(e.di(),-1),o=N(i.Qh()),l=N(i.Bn());if(n!==null&&r!==null&&n.se>r.se)return{barsBefore:t.from-o,barsAfter:l-t.to};const a={barsBefore:n===null||n.se===o?t.from-o:n.se-o,barsAfter:r===null||r.se===l?l-t.to:l-r.se};return n!==null&&r!==null&&(a.from=n.mb,a.to=r.mb),a}setData(t){this.N_,this.Es.Xh(),this.Yb.Zb(this.Es,t),this.Gb("full")}update(t){this.Es.Xh(),this.Yb.Jb(this.Es,t),this.Gb("update")}dataByIndex(t,e){const i=this.Es.In().nl(t,e);return i===null?null:zr(this.seriesType())(i)}data(){const t=zr(this.seriesType());return this.Es.In().ie().map((e=>t(e)))}subscribeDataChanged(t){this.qb.l(t)}unsubscribeDataChanged(t){this.qb.v(t)}setMarkers(t){this.N_;const e=t.map((i=>_a(i,this.N_.convertHorzItemToInternal(i.time),i.time)));this.Es.Zl(e)}markers(){return this.Es.Gl().map((t=>_a(t,t.originalTime,void 0)))}applyOptions(t){this.Es.Nh(t)}options(){return De(this.Es.W())}priceScale(){return this.Xb.priceScale(this.Es.At().xa())}createPriceLine(t){const e=ve(De(t0),t),i=this.Es.Jl(e);return new e0(i)}removePriceLine(t){this.Es.Ql(t.Ub())}seriesType(){return this.Es.Xh()}attachPrimitive(t){this.Es.ba(t),t.attached&&t.attached({chart:this.Kb,series:this,requestUpdate:()=>this.Es.qt().$l()})}detachPrimitive(t){this.Es.wa(t),t.detached&&t.detached()}Gb(t){this.qb.M()&&this.qb.m(t)}}class i0{constructor(t,e,i){this.Qb=new St,this.uu=new St,this.om=new St,this.Ui=t,this.wl=t.yt(),this.Hm=e,this.wl.Xu().l(this.tw.bind(this)),this.wl.Ku().l(this.iw.bind(this)),this.Hm.wm().l(this.nw.bind(this)),this.N_=i}S(){this.wl.Xu().p(this),this.wl.Ku().p(this),this.Hm.wm().p(this),this.Qb.S(),this.uu.S(),this.om.S()}scrollPosition(){return this.wl.zu()}scrollToPosition(t,e){e?this.wl.Uu(t,1e3):this.Ui.Jn(t)}scrollToRealTime(){this.wl.$u()}getVisibleRange(){const t=this.wl.yu();return t===null?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){const e={from:this.N_.convertHorzItemToInternal(t.from),to:this.N_.convertHorzItemToInternal(t.to)},i=this.wl.Pu(e);this.Ui.hd(i)}getVisibleLogicalRange(){const t=this.wl.ku();return t===null?null:{from:t.Os(),to:t.di()}}setVisibleLogicalRange(t){es(t.from<=t.to,"The from index cannot be after the to index."),this.Ui.hd(t)}resetTimeScale(){this.Ui.Zn()}fitContent(){this.Ui.Ju()}logicalToCoordinate(t){const e=this.Ui.yt();return e.Fi()?null:e.Et(t)}coordinateToLogical(t){return this.wl.Fi()?null:this.wl.Au(t)}timeToCoordinate(t){const e=this.N_.convertHorzItemToInternal(t),i=this.wl.ya(e,!1);return i===null?null:this.wl.Et(i)}coordinateToTime(t){const e=this.Ui.yt(),i=e.Au(t),n=e.qi(i);return n===null?null:n.originalTime}width(){return this.Hm.Hp().width}height(){return this.Hm.Hp().height}subscribeVisibleTimeRangeChange(t){this.Qb.l(t)}unsubscribeVisibleTimeRangeChange(t){this.Qb.v(t)}subscribeVisibleLogicalRangeChange(t){this.uu.l(t)}unsubscribeVisibleLogicalRangeChange(t){this.uu.v(t)}subscribeSizeChange(t){this.om.l(t)}unsubscribeSizeChange(t){this.om.v(t)}applyOptions(t){this.wl.Nh(t)}options(){return Object.assign(Object.assign({},De(this.wl.W())),{barSpacing:this.wl.he()})}tw(){this.Qb.M()&&this.Qb.m(this.getVisibleRange())}iw(){this.uu.M()&&this.uu.m(this.getVisibleLogicalRange())}nw(t){this.om.m(t.width,t.height)}}function n0(s){if(s===void 0||s.type==="custom")return;const t=s;t.minMove!==void 0&&t.precision===void 0&&(t.precision=(function(e){if(e>=1)return 0;let i=0;for(;i<8;i++){const n=Math.round(e);if(Math.abs(n-e)<1e-8)return i;e*=10}return i})(t.minMove))}function wa(s){return(function(t){if(Ii(t.handleScale)){const i=t.handleScale;t.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(t.handleScale!==void 0){const{axisPressedMouseMove:i,axisDoubleClickReset:n}=t.handleScale;Ii(i)&&(t.handleScale.axisPressedMouseMove={time:i,price:i}),Ii(n)&&(t.handleScale.axisDoubleClickReset={time:n,price:n})}const e=t.handleScroll;Ii(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})})(s),s}class r0{constructor(t,e,i){this.sw=new Map,this.ew=new Map,this.rw=new St,this.hw=new St,this.lw=new St,this.aw=new Wb(e);const n=i===void 0?De(ya()):ve(De(ya()),wa(i));this.N_=e,this.Hb=new Db(t,n,e),this.Hb.Np().l((o=>{this.rw.M()&&this.rw.m(this.ow(o()))}),this),this.Hb.Fp().l((o=>{this.hw.M()&&this.hw.m(this.ow(o()))}),this),this.Hb.Fc().l((o=>{this.lw.M()&&this.lw.m(this.ow(o()))}),this);const r=this.Hb.qt();this._w=new i0(r,this.Hb.Km(),this.N_)}remove(){this.Hb.Np().p(this),this.Hb.Fp().p(this),this.Hb.Fc().p(this),this._w.S(),this.Hb.S(),this.sw.clear(),this.ew.clear(),this.rw.S(),this.hw.S(),this.lw.S(),this.aw.S()}resize(t,e,i){this.autoSizeActive()||this.Hb.Um(t,e,i)}addCustomSeries(t,e){const i=Cs(t),n=Object.assign(Object.assign({},Gh),i.defaultOptions());return this.uw("Custom",n,e,i)}addAreaSeries(t){return this.uw("Area",Hv,t)}addBaselineSeries(t){return this.uw("Baseline",jv,t)}addBarSeries(t){return this.uw("Bar",Uv,t)}addCandlestickSeries(t={}){return(function(e){e.borderColor!==void 0&&(e.borderUpColor=e.borderColor,e.borderDownColor=e.borderColor),e.wickColor!==void 0&&(e.wickUpColor=e.wickColor,e.wickDownColor=e.wickColor)})(t),this.uw("Candlestick",Wv,t)}addHistogramSeries(t){return this.uw("Histogram",Kv,t)}addLineSeries(t){return this.uw("Line",qv,t)}removeSeries(t){const e=Wt(this.sw.get(t)),i=this.aw.rd(e);this.Hb.qt().rd(e),this.cw(i),this.sw.delete(t),this.ew.delete(e)}Zb(t,e){this.cw(this.aw.Ob(t,e))}Jb(t,e){this.cw(this.aw.zb(t,e))}subscribeClick(t){this.rw.l(t)}unsubscribeClick(t){this.rw.v(t)}subscribeCrosshairMove(t){this.lw.l(t)}unsubscribeCrosshairMove(t){this.lw.v(t)}subscribeDblClick(t){this.hw.l(t)}unsubscribeDblClick(t){this.hw.v(t)}priceScale(t){return new Zb(this.Hb,t)}timeScale(){return this._w}applyOptions(t){this.Hb.Nh(wa(t))}options(){return this.Hb.W()}takeScreenshot(){return this.Hb.Qm()}autoSizeActive(){return this.Hb.eb()}chartElement(){return this.Hb.rb()}paneSize(){const t=this.Hb.lb();return{height:t.height,width:t.width}}setCrosshairPosition(t,e,i){const n=this.sw.get(i);if(n===void 0)return;const r=this.Hb.qt().cr(n);r!==null&&this.Hb.qt().Jc(t,e,r)}clearCrosshairPosition(){this.Hb.qt().Qc(!0)}uw(t,e,i={},n){n0(i.priceFormat);const r=ve(De(Jh),De(e),i),o=this.Hb.qt().sd(t,r,n),l=new s0(o,this,this,this,this.N_);return this.sw.set(l,o),this.ew.set(o,l),l}cw(t){const e=this.Hb.qt();e.td(t.yt.Ou,t.yt.Wb,t.yt.jb),t.Nb.forEach(((i,n)=>n.it(i.He,i.Fb))),e.Bu()}dw(t){return Wt(this.ew.get(t))}ow(t){const e=new Map;t.gb.forEach(((n,r)=>{const o=r.Xh(),l=zr(o)(n);if(o!=="Custom")es((function(a){return a.open!==void 0||a.value!==void 0})(l));else{const a=r.Ma();es(!a||a(l)===!1)}e.set(this.dw(r),l)}));const i=t.wb===void 0?void 0:this.dw(t.wb);return{time:t.mb,logical:t.se,point:t.bb,hoveredSeries:i,hoveredObjectId:t.Mb,seriesData:e,sourceEvent:t.xb}}}function o0(s,t,e){let i;if(Li(s)){const r=document.getElementById(s);es(r!==null,`Cannot find element in DOM with id=${s}`),i=r}else i=s;const n=new r0(i,t,e);return t.setOptions(n.options()),n}function l0(s,t){return o0(s,new la,la.Cd(t))}Object.assign(Object.assign({},Jh),Gh);const yu=(s,t)=>{const e=s.__vccOpts||s;for(const[i,n]of t)e[i]=n;return e},a0={class:"chart"},h0={__name:"ChartView",props:{data:{type:Object,default:null},title:{type:String,default:""},height:{type:Number,default:420}},setup(s){const t=s,e=z(null);let i=null,n=null,r=null;function o(){i&&(i.remove(),i=null,n=null,r=null)}function l(){if(!t.data?.overlays||!n)return;const u=[];for(const c of t.data.overlays)try{if(c.type==="horizontal_line"&&c.price&&n.createPriceLine({price:c.price,color:c.color||"rgba(0, 122, 255, 0.8)",lineWidth:c.width||2,lineStyle:2,axisLabelVisible:!0,title:c.text||""}),(c.type==="marker"||c.type==="label")&&c.start){const d=t.data.bars?.[c.start.barIndex];if(!d)continue;u.push({time:d.time,position:c.position==="below"?"belowBar":"aboveBar",color:c.color||"rgba(0, 122, 255, 0.9)",shape:c.shape||"circle",text:c.text||""})}}catch{}u.length&&n.setMarkers(u)}function a(){if(!e.value||!t.data?.bars?.length)return;const u=e.value.clientWidth;i=l0(e.value,{width:u,height:t.height,layout:{background:{color:"rgba(0, 0, 0, 0.85)"},textColor:"rgba(255, 255, 255, 0.75)"},grid:{vertLines:{color:"rgba(255, 255, 255, 0.06)"},horzLines:{color:"rgba(255, 255, 255, 0.06)"}},crosshair:{mode:Nr.Normal},rightPriceScale:{borderColor:"rgba(255, 255, 255, 0.12)",mode:Dr.Normal},timeScale:{borderColor:"rgba(255, 255, 255, 0.12)",timeVisible:!0,secondsVisible:!1},watermark:{visible:!0,text:t.title||t.data?.symbol||"Chart",fontSize:28,color:"rgba(255, 255, 255, 0.06)"}}),n=i.addCandlestickSeries({upColor:"rgba(38, 166, 154, 1)",downColor:"rgba(239, 83, 80, 1)",borderUpColor:"rgba(38, 166, 154, 1)",borderDownColor:"rgba(239, 83, 80, 1)",wickUpColor:"rgba(38, 166, 154, 1)",wickDownColor:"rgba(239, 83, 80, 1)"}),r=i.addHistogramSeries({priceFormat:{type:"volume"},priceScaleId:"",scaleMargins:{top:.82,bottom:0}});const c=t.data.bars.map(p=>({time:p.time,open:p.open,high:p.high,low:p.low,close:p.close})),d=t.data.bars.map(p=>({time:p.time,value:p.volume,color:p.close>=p.open?"rgba(38, 166, 154, 0.45)":"rgba(239, 83, 80, 0.45)"}));n.setData(c),r.setData(d),l(),i.timeScale().fitContent()}function h(){!i||!e.value||i.applyOptions({width:e.value.clientWidth})}return fe(()=>{Ns(a),window.addEventListener("resize",h)}),Mi(()=>{window.removeEventListener("resize",h),o()}),fs(()=>t.data,async()=>{o(),await Ns(),a()},{deep:!0}),(u,c)=>(C(),A("div",a0,[f("div",{ref_key:"chartContainer",ref:e,class:"chart-canvas"},null,512)]))}},pr=yu(h0,[["__scopeId","data-v-e357f0a7"]]),u0={key:0,class:"terminal-empty"},c0={class:"terminal-time"},f0={__name:"LogTerminal",props:{logs:{type:Array,default:()=>[]}},setup(s){const t=s,e=z(null);function i(r){try{return new Date(r).toLocaleTimeString("zh-CN")}catch{return""}}function n(r){return r==="stderr"?"terminal-stderr":r==="error"?"terminal-error":"terminal-stdout"}return fs(()=>t.logs.length,async()=>{await Ns(),e.value&&(e.value.scrollTop=e.value.scrollHeight)}),(r,o)=>(C(),A("div",{ref_key:"container",ref:e,class:"terminal"},[s.logs.length===0?(C(),A("div",u0,"...")):U("",!0),(C(!0),A(_t,null,ke(s.logs,(l,a)=>(C(),A("div",{key:a,class:"terminal-line"},[f("span",c0,"["+O(i(l.timestamp))+"]",1),f("span",{class:Ei(n(l.type))},O(l.data),3)]))),128))],512))}},d0={key:0,class:"iv-card"},p0={class:"iv-header"},m0={class:"iv-title"},v0={class:"iv-title-text"},g0={class:"iv-body"},b0={class:"iv-row-top"},y0={class:"iv-left"},_0={key:0,class:"iv-note"},w0={__name:"IndicatorViewsCard",props:{views:{type:Object,default:null},title:{type:String,default:""}},setup(s){const t=s;function e(a){const h=String(a||"").trim().toLowerCase();return["bullish","long","buy","","","",""].includes(h)?"bullish":["bearish","short","sell","","","",""].includes(h)?"bearish":["neutral","none","wait","hold","",""].includes(h)?"neutral":h||"neutral"}function i(a){const h=String(a||"").trim().toLowerCase();return["above_average","above","strong","high","","",""].includes(h)?"above_average":["below_average","below","weak","low","","",""].includes(h)?"below_average":["average","mid","normal","","",""].includes(h)?"average":h||"average"}function n(a){const h=e(a);return h==="bullish"?"":h==="bearish"?"":h==="neutral"?"":h}function r(a){const h=i(a);return h==="above_average"?"":h==="below_average"?"":h==="average"?"":h}function o(a){const h=e(a);return h==="bullish"?"iv-badge iv-badge--bullish":h==="bearish"?"iv-badge iv-badge--bearish":"iv-badge iv-badge--neutral"}const l=dt(()=>{const a=t.views||{},h=e(a?.bollinger?.bias),u=e(a?.macd?.bias),c=i(a?.trend_strength?.level),d=e(a?.trend_strength?.bias),p=(h==="bullish"?1:h==="bearish"?-1:0)+(u==="bullish"?1:u==="bearish"?-1:0)+(d==="bullish"?1:d==="bearish"?-1:0),m=p>=2?"bullish":p<=-2?"bearish":"neutral";return[{key:"macd",name:"MACD",right:n(u),badgeClass:o(u),note:a?.macd?.note||""},{key:"boll",name:"",right:n(h),badgeClass:o(h),note:a?.bollinger?.note||""},{key:"trend",name:"",right:`${r(c)}  ${n(d)}`,badgeClass:"iv-badge iv-badge--purple",note:a?.trend_strength?.note||""},{key:"overall",name:"",right:n(m),badgeClass:o(m),note:""}]});return(a,h)=>s.views?(C(),A("div",d0,[f("div",p0,[f("div",m0,[f("span",v0,O(s.title),1)]),h[0]||(h[0]=f("span",{class:"iv-subtitle"},"AI ",-1))]),f("div",g0,[(C(!0),A(_t,null,ke(l.value,u=>(C(),A("div",{key:u.key,class:"iv-row"},[f("div",b0,[f("span",y0,O(u.name),1),f("span",{class:Ei(u.badgeClass)},O(u.right),3)]),u.note?(C(),A("div",_0,O(u.note),1)):U("",!0)]))),128))])])):U("",!0)}},S0=yu(w0,[["__scopeId","data-v-5ac50a0d"]]),Le=Object.create(null);Le.open="0";Le.close="1";Le.ping="2";Le.pong="3";Le.message="4";Le.upgrade="5";Le.noop="6";const Zi=Object.create(null);Object.keys(Le).forEach(s=>{Zi[Le[s]]=s});const Wr={type:"error",data:"parser error"},_u=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",wu=typeof ArrayBuffer=="function",Su=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,ko=({type:s,data:t},e,i)=>_u&&t instanceof Blob?e?i(t):Sa(t,i):wu&&(t instanceof ArrayBuffer||Su(t))?e?i(t):Sa(new Blob([t]),i):i(Le[s]+(t||"")),Sa=(s,t)=>{const e=new FileReader;return e.onload=function(){const i=e.result.split(",")[1];t("b"+(i||""))},e.readAsDataURL(s)};function xa(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let mr;function x0(s,t){if(_u&&s.data instanceof Blob)return s.data.arrayBuffer().then(xa).then(t);if(wu&&(s.data instanceof ArrayBuffer||Su(s.data)))return t(xa(s.data));ko(s,!1,e=>{mr||(mr=new TextEncoder),t(mr.encode(e))})}const Ea="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<Ea.length;s++)Qs[Ea.charCodeAt(s)]=s;const E0=s=>{let t=s.length*.75,e=s.length,i,n=0,r,o,l,a;s[s.length-1]==="="&&(t--,s[s.length-2]==="="&&t--);const h=new ArrayBuffer(t),u=new Uint8Array(h);for(i=0;i<e;i+=4)r=Qs[s.charCodeAt(i)],o=Qs[s.charCodeAt(i+1)],l=Qs[s.charCodeAt(i+2)],a=Qs[s.charCodeAt(i+3)],u[n++]=r<<2|o>>4,u[n++]=(o&15)<<4|l>>2,u[n++]=(l&3)<<6|a&63;return h},C0=typeof ArrayBuffer=="function",Lo=(s,t)=>{if(typeof s!="string")return{type:"message",data:xu(s,t)};const e=s.charAt(0);return e==="b"?{type:"message",data:T0(s.substring(1),t)}:Zi[e]?s.length>1?{type:Zi[e],data:s.substring(1)}:{type:Zi[e]}:Wr},T0=(s,t)=>{if(C0){const e=E0(s);return xu(e,t)}else return{base64:!0,data:s}},xu=(s,t)=>t==="blob"?s instanceof Blob?s:new Blob([s]):s instanceof ArrayBuffer?s:s.buffer,Eu="",M0=(s,t)=>{const e=s.length,i=new Array(e);let n=0;s.forEach((r,o)=>{ko(r,!1,l=>{i[o]=l,++n===e&&t(i.join(Eu))})})},O0=(s,t)=>{const e=s.split(Eu),i=[];for(let n=0;n<e.length;n++){const r=Lo(e[n],t);if(i.push(r),r.type==="error")break}return i};function k0(){return new TransformStream({transform(s,t){x0(s,e=>{const i=e.length;let n;if(i<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,i);else if(i<65536){n=new Uint8Array(3);const r=new DataView(n.buffer);r.setUint8(0,126),r.setUint16(1,i)}else{n=new Uint8Array(9);const r=new DataView(n.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(i))}s.data&&typeof s.data!="string"&&(n[0]|=128),t.enqueue(n),t.enqueue(e)})}})}let vr;function Hi(s){return s.reduce((t,e)=>t+e.length,0)}function ji(s,t){if(s[0].length===t)return s.shift();const e=new Uint8Array(t);let i=0;for(let n=0;n<t;n++)e[n]=s[0][i++],i===s[0].length&&(s.shift(),i=0);return s.length&&i<s[0].length&&(s[0]=s[0].slice(i)),e}function L0(s,t){vr||(vr=new TextDecoder);const e=[];let i=0,n=-1,r=!1;return new TransformStream({transform(o,l){for(e.push(o);;){if(i===0){if(Hi(e)<1)break;const a=ji(e,1);r=(a[0]&128)===128,n=a[0]&127,n<126?i=3:n===126?i=1:i=2}else if(i===1){if(Hi(e)<2)break;const a=ji(e,2);n=new DataView(a.buffer,a.byteOffset,a.length).getUint16(0),i=3}else if(i===2){if(Hi(e)<8)break;const a=ji(e,8),h=new DataView(a.buffer,a.byteOffset,a.length),u=h.getUint32(0);if(u>Math.pow(2,21)-1){l.enqueue(Wr);break}n=u*Math.pow(2,32)+h.getUint32(4),i=3}else{if(Hi(e)<n)break;const a=ji(e,n);l.enqueue(Lo(r?a:vr.decode(a),t)),i=0}if(n===0||n>s){l.enqueue(Wr);break}}}})}const Cu=4;function xt(s){if(s)return A0(s)}function A0(s){for(var t in xt.prototype)s[t]=xt.prototype[t];return s}xt.prototype.on=xt.prototype.addEventListener=function(s,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(t),this};xt.prototype.once=function(s,t){function e(){this.off(s,e),t.apply(this,arguments)}return e.fn=t,this.on(s,e),this};xt.prototype.off=xt.prototype.removeListener=xt.prototype.removeAllListeners=xt.prototype.removeEventListener=function(s,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+s];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var i,n=0;n<e.length;n++)if(i=e[n],i===t||i.fn===t){e.splice(n,1);break}return e.length===0&&delete this._callbacks["$"+s],this};xt.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+s],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(e){e=e.slice(0);for(var i=0,n=e.length;i<n;++i)e[i].apply(this,t)}return this};xt.prototype.emitReserved=xt.prototype.emit;xt.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};xt.prototype.hasListeners=function(s){return!!this.listeners(s).length};const Pn=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),oe=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),R0="arraybuffer";function Tu(s,...t){return t.reduce((e,i)=>(s.hasOwnProperty(i)&&(e[i]=s[i]),e),{})}const P0=oe.setTimeout,N0=oe.clearTimeout;function Nn(s,t){t.useNativeTimers?(s.setTimeoutFn=P0.bind(oe),s.clearTimeoutFn=N0.bind(oe)):(s.setTimeoutFn=oe.setTimeout.bind(oe),s.clearTimeoutFn=oe.clearTimeout.bind(oe))}const I0=1.33;function D0(s){return typeof s=="string"?B0(s):Math.ceil((s.byteLength||s.size)*I0)}function B0(s){let t=0,e=0;for(let i=0,n=s.length;i<n;i++)t=s.charCodeAt(i),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(i++,e+=4);return e}function Mu(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function $0(s){let t="";for(let e in s)s.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(s[e]));return t}function V0(s){let t={},e=s.split("&");for(let i=0,n=e.length;i<n;i++){let r=e[i].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}class F0 extends Error{constructor(t,e,i){super(t),this.description=e,this.context=i,this.type="TransportError"}}class Ao extends xt{constructor(t){super(),this.writable=!1,Nn(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,i){return super.emitReserved("error",new F0(t,e,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=Lo(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const e=$0(t);return e.length?"?"+e:""}}class z0 extends Ao{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||e()})),this.writable||(i++,this.once("drain",function(){--i||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const e=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};O0(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,M0(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=Mu()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}}let Ou=!1;try{Ou=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const W0=Ou;function U0(){}class q0 extends z0{constructor(t){if(super(t),typeof location<"u"){const e=location.protocol==="https:";let i=location.port;i||(i=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port}}doWrite(t,e){const i=this.request({method:"POST",data:t});i.on("success",e),i.on("error",(n,r)=>{this.onError("xhr post error",n,r)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,i)=>{this.onError("xhr poll error",e,i)}),this.pollXhr=t}}class Me extends xt{constructor(t,e,i){super(),this.createRequest=t,Nn(this,i),this._opts=i,this._method=i.method||"GET",this._uri=e,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var t;const e=Tu(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(e);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&i.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var n;i.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=Me.requestsCount++,Me.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=U0,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Me.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Me.requestsCount=0;Me.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ca);else if(typeof addEventListener=="function"){const s="onpagehide"in oe?"pagehide":"unload";addEventListener(s,Ca,!1)}}function Ca(){for(let s in Me.requests)Me.requests.hasOwnProperty(s)&&Me.requests[s].abort()}const H0=(function(){const s=ku({xdomain:!1});return s&&s.responseType!==null})();class j0 extends q0{constructor(t){super(t);const e=t&&t.forceBase64;this.supportsBinary=H0&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Me(ku,this.uri(),t)}}function ku(s){const t=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||W0))return new XMLHttpRequest}catch{}if(!t)try{return new oe[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Lu=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class K0 extends Ao{get name(){return"websocket"}doOpen(){const t=this.uri(),e=this.opts.protocols,i=Lu?{}:Tu(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,i)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const i=t[e],n=e===t.length-1;ko(i,this.supportsBinary,r=>{try{this.doWrite(i,r)}catch{}n&&Pn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=Mu()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}}const gr=oe.WebSocket||oe.MozWebSocket;class G0 extends K0{createSocket(t,e,i){return Lu?new gr(t,e,i):e?new gr(t,e):new gr(t)}doWrite(t,e){this.ws.send(e)}}class J0 extends Ao{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const e=L0(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(e).getReader(),n=k0();n.readable.pipeTo(t.writable),this._writer=n.writable.getWriter();const r=()=>{i.read().then(({done:l,value:a})=>{l||(this.onPacket(a),r())}).catch(l=>{})};r();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const i=t[e],n=e===t.length-1;this._writer.write(i).then(()=>{n&&Pn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const X0={websocket:G0,webtransport:J0,polling:j0},Y0=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Q0=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ur(s){if(s.length>8e3)throw"URI too long";const t=s,e=s.indexOf("["),i=s.indexOf("]");e!=-1&&i!=-1&&(s=s.substring(0,e)+s.substring(e,i).replace(/:/g,";")+s.substring(i,s.length));let n=Y0.exec(s||""),r={},o=14;for(;o--;)r[Q0[o]]=n[o]||"";return e!=-1&&i!=-1&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=Z0(r,r.path),r.queryKey=ty(r,r.query),r}function Z0(s,t){const e=/\/{2,9}/g,i=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function ty(s,t){const e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,n,r){n&&(e[n]=r)}),e}const qr=typeof addEventListener=="function"&&typeof removeEventListener=="function",tn=[];qr&&addEventListener("offline",()=>{tn.forEach(s=>s())},!1);class Ze extends xt{constructor(t,e){if(super(),this.binaryType=R0,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(e=t,t=null),t){const i=Ur(t);e.hostname=i.host,e.secure=i.protocol==="https"||i.protocol==="wss",e.port=i.port,i.query&&(e.query=i.query)}else e.host&&(e.hostname=Ur(e.host).host);Nn(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(i=>{const n=i.prototype.name;this.transports.push(n),this._transportsByName[n]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=V0(this.opts.query)),qr&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},tn.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=Cu,e.transport=t,this.id&&(e.sid=this.id);const i=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Ze.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const e=this.createTransport(t);e.open(),this.setTransport(e)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",Ze.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const e=new Error("server error");e.code=t.data,this._onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let i=0;i<this.writeBuffer.length;i++){const n=this.writeBuffer[i].data;if(n&&(e+=D0(n)),i>0&&e>this._maxPayload)return this.writeBuffer.slice(0,i);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Pn(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,e,i){return this._sendPacket("message",t,e,i),this}send(t,e,i){return this._sendPacket("message",t,e,i),this}_sendPacket(t,e,i,n){if(typeof e=="function"&&(n=e,e=void 0),typeof i=="function"&&(n=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const r={type:t,data:e,options:i};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},i=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}_onError(t){if(Ze.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),qr&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=tn.indexOf(this._offlineEventListener);i!==-1&&tn.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this._prevBufferLen=0}}}Ze.protocol=Cu;class ey extends Ze{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let e=this.createTransport(t),i=!1;Ze.priorWebsocketSuccess=!1;const n=()=>{i||(e.send([{type:"ping",data:"probe"}]),e.once("packet",c=>{if(!i)if(c.type==="pong"&&c.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;Ze.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(u(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=e.name,this.emitReserved("upgradeError",d)}}))};function r(){i||(i=!0,u(),e.close(),e=null)}const o=c=>{const d=new Error("probe error: "+c);d.transport=e.name,r(),this.emitReserved("upgradeError",d)};function l(){o("transport closed")}function a(){o("socket closed")}function h(c){e&&c.name!==e.name&&r()}const u=()=>{e.removeListener("open",n),e.removeListener("error",o),e.removeListener("close",l),this.off("close",a),this.off("upgrading",h)};e.once("open",n),e.once("error",o),e.once("close",l),this.once("close",a),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{i||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const e=[];for(let i=0;i<t.length;i++)~this.transports.indexOf(t[i])&&e.push(t[i]);return e}}let sy=class extends ey{constructor(t,e={}){const i=typeof t=="object"?t:e;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(n=>X0[n]).filter(n=>!!n)),super(t,i)}};function iy(s,t="",e){let i=s;e=e||typeof location<"u"&&location,s==null&&(s=e.protocol+"//"+e.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=e.protocol+s:s=e.host+s),/^(https?|wss?):\/\//.test(s)||(typeof e<"u"?s=e.protocol+"//"+s:s="https://"+s),i=Ur(s)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const r=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+t,i.href=i.protocol+"://"+r+(e&&e.port===i.port?"":":"+i.port),i}const ny=typeof ArrayBuffer=="function",ry=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,Au=Object.prototype.toString,oy=typeof Blob=="function"||typeof Blob<"u"&&Au.call(Blob)==="[object BlobConstructor]",ly=typeof File=="function"||typeof File<"u"&&Au.call(File)==="[object FileConstructor]";function Ro(s){return ny&&(s instanceof ArrayBuffer||ry(s))||oy&&s instanceof Blob||ly&&s instanceof File}function en(s,t){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let e=0,i=s.length;e<i;e++)if(en(s[e]))return!0;return!1}if(Ro(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return en(s.toJSON(),!0);for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e)&&en(s[e]))return!0;return!1}function ay(s){const t=[],e=s.data,i=s;return i.data=Hr(e,t),i.attachments=t.length,{packet:i,buffers:t}}function Hr(s,t){if(!s)return s;if(Ro(s)){const e={_placeholder:!0,num:t.length};return t.push(s),e}else if(Array.isArray(s)){const e=new Array(s.length);for(let i=0;i<s.length;i++)e[i]=Hr(s[i],t);return e}else if(typeof s=="object"&&!(s instanceof Date)){const e={};for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=Hr(s[i],t));return e}return s}function hy(s,t){return s.data=jr(s.data,t),delete s.attachments,s}function jr(s,t){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<t.length)return t[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let e=0;e<s.length;e++)s[e]=jr(s[e],t);else if(typeof s=="object")for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&(s[e]=jr(s[e],t));return s}const uy=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],cy=5;var tt;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(tt||(tt={}));class fy{constructor(t){this.replacer=t}encode(t){return(t.type===tt.EVENT||t.type===tt.ACK)&&en(t)?this.encodeAsBinary({type:t.type===tt.EVENT?tt.BINARY_EVENT:tt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===tt.BINARY_EVENT||t.type===tt.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=ay(t),i=this.encodeAsString(e.packet),n=e.buffers;return n.unshift(i),n}}function Ta(s){return Object.prototype.toString.call(s)==="[object Object]"}class Po extends xt{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const i=e.type===tt.BINARY_EVENT;i||e.type===tt.BINARY_ACK?(e.type=i?tt.EVENT:tt.ACK,this.reconstructor=new dy(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(Ro(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0;const i={type:Number(t.charAt(0))};if(tt[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===tt.BINARY_EVENT||i.type===tt.BINARY_ACK){const r=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);const o=t.substring(r,e);if(o!=Number(o)||t.charAt(e)!=="-")throw new Error("Illegal attachments");i.attachments=Number(o)}if(t.charAt(e+1)==="/"){const r=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););i.nsp=t.substring(r,e)}else i.nsp="/";const n=t.charAt(e+1);if(n!==""&&Number(n)==n){const r=e+1;for(;++e;){const o=t.charAt(e);if(o==null||Number(o)!=o){--e;break}if(e===t.length)break}i.id=Number(t.substring(r,e+1))}if(t.charAt(++e)){const r=this.tryParse(t.substr(e));if(Po.isPayloadValid(i.type,r))i.data=r;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case tt.CONNECT:return Ta(e);case tt.DISCONNECT:return e===void 0;case tt.CONNECT_ERROR:return typeof e=="string"||Ta(e);case tt.EVENT:case tt.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&uy.indexOf(e[0])===-1);case tt.ACK:case tt.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class dy{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const e=hy(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const py=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Po,Encoder:fy,get PacketType(){return tt},protocol:cy},Symbol.toStringTag,{value:"Module"}));function he(s,t,e){return s.on(t,e),function(){s.off(t,e)}}const my=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ru extends xt{constructor(t,e,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[he(t,"open",this.onopen.bind(this)),he(t,"packet",this.onpacket.bind(this)),he(t,"error",this.onerror.bind(this)),he(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var i,n,r;if(my.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const o={type:tt.EVENT,data:e};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const u=this.ids++,c=e.pop();this._registerAckCallback(u,c),o.id=u}const l=(n=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||n===void 0?void 0:n.writable,a=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!l||(a?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,e){var i;const n=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(n===void 0){this.acks[t]=e;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);e.call(this,new Error("operation has timed out"))},n),o=(...l)=>{this.io.clearTimeoutFn(r),e.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...e){return new Promise((i,n)=>{const r=(o,l)=>o?n(o):i(l);r.withError=!0,e.push(r),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...r)=>i!==this._queue[0]?void 0:(n!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(n)):(this._queue.shift(),e&&e(null,...r)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:tt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(i=>String(i.id)===t)){const i=this.acks[t];delete this.acks[t],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case tt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case tt.EVENT:case tt.BINARY_EVENT:this.onevent(t);break;case tt.ACK:case tt.BINARY_ACK:this.onack(t);break;case tt.DISCONNECT:this.ondisconnect();break;case tt.CONNECT_ERROR:this.destroy();const i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i);break}}onevent(t){const e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const i of e)i.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let i=!1;return function(...n){i||(i=!0,e.packet({type:tt.ACK,id:t,data:n}))}}onack(t){const e=this.acks[t.id];typeof e=="function"&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:tt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const i of e)i.apply(this,t.data)}}}function qs(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}qs.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*s);s=(Math.floor(t*10)&1)==0?s-e:s+e}return Math.min(s,this.max)|0};qs.prototype.reset=function(){this.attempts=0};qs.prototype.setMin=function(s){this.ms=s};qs.prototype.setMax=function(s){this.max=s};qs.prototype.setJitter=function(s){this.jitter=s};class Kr extends xt{constructor(t,e){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,Nn(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((i=e.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new qs({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;const n=e.parser||py;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new sy(this.uri,this.opts);const e=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const n=he(e,"open",function(){i.onopen(),t&&t()}),r=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=he(e,"error",r);if(this._timeout!==!1){const l=this._timeout,a=this.setTimeoutFn(()=>{n(),r(new Error("timeout")),e.close()},l);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}return this.subs.push(n),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(he(t,"ping",this.onping.bind(this)),he(t,"data",this.ondata.bind(this)),he(t,"error",this.onerror.bind(this)),he(t,"close",this.onclose.bind(this)),he(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){Pn(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new Ru(this,t,e),this.nsps[t]=i),i}_destroy(t){const e=Object.keys(this.nsps);for(const i of e)if(this.nsps[i].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let i=0;i<e.length;i++)this.engine.write(e[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},e);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Xs={};function sn(s,t){typeof s=="object"&&(t=s,s=void 0),t=t||{};const e=iy(s,t.path||"/socket.io"),i=e.source,n=e.id,r=e.path,o=Xs[n]&&r in Xs[n].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let a;return l?a=new Kr(i,t):(Xs[n]||(Xs[n]=new Kr(i,t)),a=Xs[n]),e.query&&!t.query&&(t.query=e.queryKey),a.socket(e.path,t)}Object.assign(sn,{Manager:Kr,Socket:Ru,io:sn,connect:sn});let ls=null;function vy(){const s=ss(),t=dt(()=>s.token.value);function e(){t.value&&(ls&&ls.connected||(ls=sn("/saas",{transports:["websocket","polling"],auth:{token:t.value}})))}function i(){ls&&(ls.disconnect(),ls=null)}return fs(t,n=>{if(!n)return i();i(),e()}),e(),Mi(i),{socket:()=>ls}}const gy={key:0,class:"card"},by={key:1,class:"card"},yy={class:"card-content"},_y={class:"input-with-button"},wy=["disabled"],Sy={key:0,class:"form-error"},xy={key:1,class:"form-success"},Ey={key:2,class:"grid grid-2"},Cy={class:"card",style:{"grid-column":"1 / -1"}},Ty={class:"card-content"},My={class:"grid grid-3"},Oy={class:"stat-row"},ky={class:"stat-value"},Ly={class:"stat-row"},Ay={class:"stat-value"},Ry={class:"stat-row"},Py={class:"stat-value"},Ny={key:0},Iy={key:1,class:"text-muted"},Dy={key:0,class:"form-error"},By={key:1,class:"form-error"},$y={class:"card"},Vy={class:"card-content"},Fy={class:"form-group"},zy=["disabled"],Wy={class:"form-group"},Uy=["disabled"],qy=["value"],Hy={class:"form-group"},jy=["disabled"],Ky={class:"form-group"},Gy={class:"input-with-button"},Jy={class:"text-muted",style:{display:"flex","align-items":"center",gap:"0.5rem"}},Xy=["disabled"],Yy={key:0,class:"form-group"},Qy=["disabled"],Zy=["value"],t_={class:"input-with-button"},e_=["disabled"],s_=["disabled"],i_={key:1,class:"form-error"},n_={class:"card"},r_={class:"card-content"},o_={key:0,class:"grid grid-2",style:{gap:"0.75rem"}},l_={class:"stat-row"},a_={class:"stat-value"},h_={class:"stat-row"},u_={class:"stat-value"},c_={key:0,class:"stat-row"},f_={class:"stat-value"},d_={key:1,class:"stat-row"},p_={class:"stat-value"},m_={key:2,class:"stat-row"},v_={class:"stat-value"},g_={key:3,class:"stat-row"},b_={class:"stat-value"},y_={key:1,class:"text-muted"},__={key:2,class:"mt-16"},w_={class:"stat-row"},S_={class:"stat-value",style:{"text-align":"right","max-width":"70%"}},x_={key:3,class:"mt-16"},E_={class:"card",style:{"grid-column":"1 / -1"}},C_={class:"card",style:{"grid-column":"1 / -1"}},T_={class:"card-content"},M_={key:0,class:"grid grid-2"},O_={key:0},k_={key:1,style:{"grid-column":"1 / -1"}},L_={key:1,class:"text-muted"},A_={__name:"AIStrategyPage",setup(s){const t=["1m","5m","15m","30m","1h","4h","1d"],e=z(!0),i=z(""),n=z(!1),r=z(""),o=z(""),l=zt({subscription:null,subscriptionActive:!1,credit:null,providers:{selectedId:null,items:[]}}),a=zt({symbol:"BTCUSDT",timeframe:"1h",bars:200,enable4x:!1,auxTimeframe:""}),h=z(!1),u=z(null),c=z(""),d=z([]),p=z(""),m=z(null),g=zt({base:null,aux:null,vlm:null}),S=dt(()=>l.providers.items.find(W=>W.id===l.providers.selectedId)||null),_=dt(()=>!!S.value&&!!S.value.hasKey);function y(W,k,q){q&&c.value&&q!==c.value||d.value.push({type:W,data:k,timestamp:Date.now()})}function x(){return`sess_${Date.now()}_${Math.random().toString(36).slice(2,10)}`}function P(W){if(W==null||W===0)return"-";if(W==="market")return"";const k=Number(W);return Number.isFinite(k)?k.toFixed(6):"-"}function J(W){if(!W)return"-";try{return new Date(W).toISOString().slice(0,10)}catch{return String(W)}}async function it(){const W=await nt.request("/api/saas/ai/state");l.subscription=W.subscription||null,l.subscriptionActive=!!W.subscriptionActive,l.credit=W.credit||null,l.providers=W.providers||{selectedId:null,items:[]}}async function Q(){r.value="",o.value="",n.value=!0;try{const W=await nt.request("/api/billing/redeem-activation-code",{method:"POST",body:{code:i.value}});l.subscription=W.subscription||null,l.subscriptionActive=!0,o.value="",i.value="",await it()}catch(W){r.value=W?.message||""}finally{n.value=!1}}async function ht(){p.value="",d.value=[],m.value=null,g.base=null,g.aux=null,g.vlm=null,c.value=x(),h.value=!0;const W=["--symbol",a.symbol,"--timeframe",a.timeframe,"--bars",String(a.bars),"--wait","1000","--session-id",c.value];a.enable4x&&(W.push("--enable-4x-chart"),a.auxTimeframe&&W.push("--aux-timeframe",a.auxTimeframe));try{const k=await nt.request("/api/saas/run-script",{method:"POST",body:{script:"main",args:W,sessionId:c.value}});if(u.value=k.pid||null,!u.value)throw new Error("");k.charged?.remainingCredits!==void 0&&l.credit&&(l.credit.remainingCredits=Number(k.charged.remainingCredits),l.credit.periodEnd=k.charged.nextResetAt||l.credit.periodEnd)}catch(k){p.value=k?.message||"",h.value=!1}}function Ct(){u.value&&Mt().emit("kill-process",u.value)}async function Tt(){if(!c.value)return;const W=await nt.request(`/api/saas/chart-data/${encodeURIComponent(c.value)}`);g.base=W.base||null,g.aux=W.aux||null,g.vlm=W.vlm||null,m.value=W.decision||null}const{socket:Mt}=vy();function ee(W){y(W.type,W.data,W.sessionId)}async function Lt(W){if(!(W.sessionId&&W.sessionId!==c.value)&&(y("stdout",`Process exited with code ${W.code}`,W.sessionId),h.value=!1,u.value=null,W.code===0))try{await Tt()}catch(k){y("error",`: ${k?.message||String(k)}`,W.sessionId)}}function se(W){W===u.value&&(y("stderr","Process terminated.",c.value),h.value=!1,u.value=null)}return fe(async()=>{try{await it()}finally{e.value=!1}Mt().on("log",ee),Mt().on("process-exit",Lt),Mt().on("process-killed",se)}),Mi(()=>{Mt()?.off?.("log",ee),Mt()?.off?.("process-exit",Lt),Mt()?.off?.("process-killed",se)}),(W,k)=>(C(),ae(Us,{title:"AI ",subtitle:"SaaS credit "},{default:Pt(()=>[e.value?(C(),A("div",gy,[...k[6]||(k[6]=[f("p",{class:"text-muted"},"...",-1)])])):l.subscriptionActive?(C(),A("div",Ey,[f("div",Cy,[f("div",Ty,[f("div",My,[f("div",Oy,[k[9]||(k[9]=f("span",{class:"stat-label"},"credit ",-1)),f("span",ky,[f("code",null,O((l.credit?.remainingCredits??0).toFixed(2)),1)])]),f("div",Ly,[k[10]||(k[10]=f("span",{class:"stat-label"},"",-1)),f("span",Ay,O(J(l.credit?.periodEnd)),1)]),f("div",Ry,[k[11]||(k[11]=f("span",{class:"stat-label"},"Provider",-1)),f("span",Py,[S.value?(C(),A("code",Ny,O(S.value.display_name),1)):(C(),A("span",Iy,""))])])]),S.value?S.value.hasKey?U("",!0):(C(),A("p",By," Provider  apiKey")):(C(),A("p",Dy,"AI Provider apiKey"))])]),f("div",$y,[k[19]||(k[19]=f("h2",{class:"card-title"},"",-1)),f("div",Vy,[f("div",Fy,[k[12]||(k[12]=f("label",{class:"form-label"},"symbol",-1)),rt(f("input",{"onUpdate:modelValue":k[1]||(k[1]=q=>a.symbol=q),class:"form-input",placeholder:"BTCUSDT",disabled:h.value},null,8,zy),[[gt,a.symbol]])]),f("div",Wy,[k[13]||(k[13]=f("label",{class:"form-label"},"timeframe",-1)),rt(f("select",{"onUpdate:modelValue":k[2]||(k[2]=q=>a.timeframe=q),class:"form-input",disabled:h.value},[(C(),A(_t,null,ke(t,q=>f("option",{key:q,value:q},O(q),9,qy)),64))],8,Uy),[[vi,a.timeframe]])]),f("div",Hy,[k[14]||(k[14]=f("label",{class:"form-label"},"bars",-1)),rt(f("input",{"onUpdate:modelValue":k[3]||(k[3]=q=>a.bars=q),class:"form-input",type:"number",min:"50",max:"2000",disabled:h.value},null,8,jy),[[gt,a.bars,void 0,{number:!0}]])]),f("div",Ky,[k[16]||(k[16]=f("label",{class:"form-label"},"4x ",-1)),f("div",Gy,[f("label",Jy,[rt(f("input",{"onUpdate:modelValue":k[4]||(k[4]=q=>a.enable4x=q),type:"checkbox",disabled:h.value},null,8,Xy),[[Jf,a.enable4x]]),k[15]||(k[15]=Zt("  ",-1))])])]),a.enable4x?(C(),A("div",Yy,[k[18]||(k[18]=f("label",{class:"form-label"},"aux timeframe",-1)),rt(f("select",{"onUpdate:modelValue":k[5]||(k[5]=q=>a.auxTimeframe=q),class:"form-input",disabled:h.value},[k[17]||(k[17]=f("option",{value:""},"Auto",-1)),(C(),A(_t,null,ke(t,q=>f("option",{key:q,value:q},O(q),9,Zy)),64))],8,Qy),[[vi,a.auxTimeframe]])])):U("",!0),f("div",t_,[f("button",{class:"btn btn-primary",type:"button",disabled:h.value||!_.value,onClick:ht},O(h.value?"...":""),9,e_),f("button",{class:"btn btn-danger",type:"button",disabled:!u.value,onClick:Ct},"",8,s_)]),p.value?(C(),A("p",i_,O(p.value),1)):U("",!0)])]),f("div",n_,[k[27]||(k[27]=f("h2",{class:"card-title"},"",-1)),f("div",r_,[m.value?(C(),A("div",o_,[f("div",l_,[k[20]||(k[20]=f("span",{class:"stat-label"},"enter",-1)),f("span",a_,O(m.value.enter?"ENTER":"WAIT"),1)]),f("div",h_,[k[21]||(k[21]=f("span",{class:"stat-label"},"confidence",-1)),f("span",u_,O(Math.round((m.value.confidence||0)*100))+"%",1)]),m.value.enter?(C(),A("div",c_,[k[22]||(k[22]=f("span",{class:"stat-label"},"direction",-1)),f("span",f_,O(String(m.value.direction||"").toUpperCase()),1)])):U("",!0),m.value.enter?(C(),A("div",d_,[k[23]||(k[23]=f("span",{class:"stat-label"},"entry",-1)),f("span",p_,[f("code",null,O(P(m.value.entry_price)),1)])])):U("",!0),m.value.enter?(C(),A("div",m_,[k[24]||(k[24]=f("span",{class:"stat-label"},"stop",-1)),f("span",v_,[f("code",null,O(P(m.value.stop_loss_price)),1)])])):U("",!0),m.value.enter?(C(),A("div",g_,[k[25]||(k[25]=f("span",{class:"stat-label"},"take",-1)),f("span",b_,[f("code",null,O(P(m.value.take_profit_price)),1)])])):U("",!0)])):(C(),A("p",y_,"")),m.value?.reason?(C(),A("div",__,[f("div",w_,[k[26]||(k[26]=f("span",{class:"stat-label"},"reason",-1)),f("span",S_,O(m.value.reason),1)])])):U("",!0),m.value?.indicator_views?(C(),A("div",x_,[ft(S0,{views:m.value.indicator_views},null,8,["views"])])):U("",!0)])]),f("div",E_,[k[28]||(k[28]=f("h2",{class:"card-title"},"",-1)),ft(f0,{logs:d.value},null,8,["logs"])]),f("div",C_,[k[32]||(k[32]=f("h2",{class:"card-title"},"",-1)),f("div",T_,[g.base?(C(),A("div",M_,[f("div",null,[k[29]||(k[29]=f("p",{class:"text-muted",style:{"margin-bottom":"0.5rem"}},"Base",-1)),ft(pr,{data:g.base,title:`${g.base.symbol} ${g.base.timeframe}`,height:420},null,8,["data","title"])]),g.aux?(C(),A("div",O_,[k[30]||(k[30]=f("p",{class:"text-muted",style:{"margin-bottom":"0.5rem"}},"Aux",-1)),ft(pr,{data:g.aux,title:`${g.aux.symbol} ${g.aux.timeframe}`,height:420},null,8,["data","title"])])):U("",!0),g.vlm?(C(),A("div",k_,[k[31]||(k[31]=f("p",{class:"text-muted",style:{"margin-bottom":"0.5rem"}},"VLM Overlays",-1)),ft(pr,{data:g.vlm,title:`VLM ${g.vlm.symbol} ${g.vlm.timeframe}`,height:460},null,8,["data","title"])])):U("",!0)])):(C(),A("p",L_,""))])])])):(C(),A("div",by,[k[8]||(k[8]=f("h2",{class:"card-title"},"",-1)),f("div",yy,[k[7]||(k[7]=f("p",{class:"text-muted"},"",-1)),f("div",_y,[rt(f("input",{"onUpdate:modelValue":k[0]||(k[0]=q=>i.value=q),class:"form-input",placeholder:""},null,512),[[gt,i.value]]),f("button",{class:"btn btn-primary",type:"button",disabled:n.value,onClick:Q},O(n.value?"...":""),9,wy)]),r.value?(C(),A("p",Sy,O(r.value),1)):U("",!0),o.value?(C(),A("p",xy,O(o.value),1)):U("",!0)])]))]),_:1}))}},R_={key:0,class:"card"},P_={key:1,class:"grid grid-2"},N_={class:"card"},I_={class:"card-content"},D_={class:"stat-row"},B_={class:"stat-value"},$_={key:0,class:"stat-row"},V_={class:"stat-value"},F_={key:1,class:"stat-row"},z_={class:"stat-value"},W_={key:2,class:"stat-row"},U_={class:"stat-value"},q_={key:3,class:"stat-row"},H_={class:"stat-value"},j_={key:4,class:"stat-row"},K_={class:"stat-value"},G_={key:5,class:"text-muted"},J_={class:"card"},X_={class:"card-content"},Y_={key:0,class:"text-muted"},Q_={key:1},Z_={class:"stat-row"},tw={class:"stat-value"},ew={class:"stat-row"},sw={class:"stat-value"},iw={class:"stat-row"},nw={class:"stat-value"},rw={key:0,class:"form-error"},ow={key:1,class:"text-muted"},lw={class:"card",style:{"grid-column":"1 / -1"}},aw={class:"card-content"},hw={key:0,class:"form-error"},uw={class:"data-table"},cw={key:0},fw={key:0},dw={key:0,class:"form-success"},pw={key:1,class:"text-muted"},mw=["disabled","onClick"],vw={key:1,class:"mt-16"},gw={class:"grid grid-2"},bw={class:"form-group"},yw=["value"],_w={class:"form-group"},ww={key:0,class:"form-error"},Sw={key:1,class:"form-success"},xw=["disabled"],Ew={key:2,class:"text-muted mt-16"},Cw={__name:"AIProvidersPage",setup(s){const t=z(!0),e=z(""),i=zt({subscription:null,subscriptionActive:!1,credit:null,providers:{selectedId:null,items:[]}}),n=z(""),r=zt({providerId:"",apiKey:""}),o=z(!1),l=z(""),a=z(""),h=ss(),u=dt(()=>h.isAdmin.value),c=dt(()=>i.providers.items.find(S=>S.id===i.providers.selectedId)||null);function d(S){if(!S)return"-";try{return new Date(S).toISOString().slice(0,10)}catch{return String(S)}}async function p(){e.value="";const S=await nt.request("/api/saas/ai/state");i.subscription=S.subscription||null,i.subscriptionActive=!!S.subscriptionActive,i.credit=S.credit||null,i.providers=S.providers||{selectedId:null,items:[]}}async function m(S){n.value=S;try{await nt.request("/api/saas/ai/providers/select",{method:"POST",body:{providerId:S}}),await p()}catch(_){e.value=_?.message||""}finally{n.value=""}}async function g(){l.value="",a.value="",o.value=!0;try{if(!r.providerId)throw new Error(" Provider");if(!r.apiKey.trim())throw new Error(" apiKey");await nt.request("/api/saas/ai/providers/set-key",{method:"POST",body:{providerId:r.providerId,apiKey:r.apiKey.trim()}}),a.value="",r.apiKey="",await p()}catch(S){l.value=S?.message||""}finally{o.value=!1}}return fe(async()=>{try{await p()}catch(S){e.value=S?.message||""}finally{t.value=!1}}),(S,_)=>(C(),ae(Us,{title:"AI Provider",subtitle:" credit"},{default:Pt(()=>[t.value?(C(),A("div",R_,[..._[2]||(_[2]=[f("p",{class:"text-muted"},"...",-1)])])):(C(),A("div",P_,[f("div",N_,[_[9]||(_[9]=f("h2",{class:"card-title"},"Credit",-1)),f("div",I_,[f("div",D_,[_[3]||(_[3]=f("span",{class:"stat-label"},"",-1)),f("span",B_,O(i.subscriptionActive?"":""),1)]),i.subscription?(C(),A("div",$_,[_[4]||(_[4]=f("span",{class:"stat-label"},"plan",-1)),f("span",V_,O(i.subscription.plan_code),1)])):U("",!0),i.credit?(C(),A("div",F_,[_[5]||(_[5]=f("span",{class:"stat-label"},"",-1)),f("span",z_,[f("code",null,O(i.credit.allowanceCredits.toFixed(2)),1)])])):U("",!0),i.credit?(C(),A("div",W_,[_[6]||(_[6]=f("span",{class:"stat-label"},"",-1)),f("span",U_,[f("code",null,O(i.credit.usedCredits.toFixed(2)),1)])])):U("",!0),i.credit?(C(),A("div",q_,[_[7]||(_[7]=f("span",{class:"stat-label"},"",-1)),f("span",H_,[f("code",null,O(i.credit.remainingCredits.toFixed(2)),1)])])):U("",!0),i.credit?(C(),A("div",j_,[_[8]||(_[8]=f("span",{class:"stat-label"},"",-1)),f("span",K_,O(d(i.credit.periodEnd)),1)])):U("",!0),i.subscriptionActive?U("",!0):(C(),A("p",G_,"  Provider "))])]),f("div",J_,[_[13]||(_[13]=f("h2",{class:"card-title"},"",-1)),f("div",X_,[c.value?(C(),A("div",Q_,[f("div",Z_,[_[10]||(_[10]=f("span",{class:"stat-label"},"name",-1)),f("span",tw,O(c.value.display_name),1)]),f("div",ew,[_[11]||(_[11]=f("span",{class:"stat-label"},"model",-1)),f("span",sw,[f("code",null,O(c.value.model_name),1)])]),f("div",iw,[_[12]||(_[12]=f("span",{class:"stat-label"},"",-1)),f("span",nw,[f("code",null,O((c.value.multiplier_x100/100).toFixed(2)),1)])]),!c.value.hasKey&&u.value?(C(),A("p",rw," Provider  apiKey")):c.value.hasKey?U("",!0):(C(),A("p",ow," Provider "))])):(C(),A("p",Y_," Provider"))])]),f("div",lw,[_[22]||(_[22]=f("h2",{class:"card-title"},"Provider ",-1)),f("div",aw,[e.value?(C(),A("p",hw,O(e.value),1)):U("",!0),f("table",uw,[f("thead",null,[f("tr",null,[_[14]||(_[14]=f("th",null,"name",-1)),_[15]||(_[15]=f("th",null,"model",-1)),_[16]||(_[16]=f("th",null,"multiplier",-1)),u.value?(C(),A("th",cw,"key")):U("",!0),_[17]||(_[17]=f("th",null,"select",-1))])]),f("tbody",null,[(C(!0),A(_t,null,ke(i.providers.items,y=>(C(),A("tr",{key:y.id},[f("td",null,O(y.display_name),1),f("td",null,[f("code",null,O(y.model_name),1)]),f("td",null,[f("code",null,O((y.multiplier_x100/100).toFixed(2)),1)]),u.value?(C(),A("td",fw,[y.hasKey?(C(),A("span",dw,"")):(C(),A("span",pw,""))])):U("",!0),f("td",null,[f("button",{class:"btn btn-secondary btn-sm",type:"button",disabled:n.value===y.id,onClick:x=>m(y.id)},O(i.providers.selectedId===y.id?"":n.value===y.id?"...":""),9,mw)])]))),128))])]),u.value?(C(),A("div",vw,[_[21]||(_[21]=f("h3",{class:"card-title",style:{"margin-bottom":"0.75rem"}}," apiKey",-1)),f("div",gw,[f("div",bw,[_[19]||(_[19]=f("label",{class:"form-label"},"Provider",-1)),rt(f("select",{"onUpdate:modelValue":_[0]||(_[0]=y=>r.providerId=y),class:"form-input"},[_[18]||(_[18]=f("option",{value:""},"",-1)),(C(!0),A(_t,null,ke(i.providers.items,y=>(C(),A("option",{key:y.id,value:y.id},O(y.display_name)+" ("+O(y.model_name)+") ",9,yw))),128))],512),[[vi,r.providerId]])]),f("div",_w,[_[20]||(_[20]=f("label",{class:"form-label"},"apiKey",-1)),rt(f("input",{"onUpdate:modelValue":_[1]||(_[1]=y=>r.apiKey=y),class:"form-input",placeholder:"sk-..."},null,512),[[gt,r.apiKey]]),l.value?(C(),A("p",ww,O(l.value),1)):U("",!0),a.value?(C(),A("p",Sw,O(a.value),1)):U("",!0)])]),f("button",{class:"btn btn-primary",type:"button",disabled:o.value,onClick:g},O(o.value?"...":""),9,xw)])):(C(),A("p",Ew,"apiKey  Provider"))])])]))]),_:1}))}},Tw={class:"card"},Mw={class:"grid grid-3"},Ow={class:"form-group"},kw={class:"form-group"},Lw={class:"form-group"},Aw={class:"grid grid-3"},Rw={class:"form-group"},Pw={class:"form-group"},Nw={class:"form-group"},Iw=["disabled"],Dw={key:0,class:"form-error"},Bw={class:"card"},$w={class:"card-content"},Vw=["disabled"],Fw={key:0,class:"form-error"},zw={class:"mt-16"},Ww={class:"data-table"},Uw=["onClick"],qw={key:0,class:"card"},Hw={class:"grid grid-3"},jw={class:"form-group"},Kw={class:"form-group"},Gw={class:"form-group"},Jw={class:"grid grid-3"},Xw={class:"form-group"},Yw={class:"form-group"},Qw={class:"input-with-button"},Zw=["disabled"],t1={key:0,class:"form-error"},e1={__name:"AdminAIProvidersPage",setup(s){const t=Ws(),e=z([]),i=z(!1),n=z(""),r=zt({code:"",displayName:"",modelName:"",baseUrl:"",multiplier:1,isActive:!0}),o=z(!1),l=z(""),a=z(null),h=zt({id:"",displayName:"",modelName:"",baseUrl:"",multiplier:1,isActive:!0}),u=z(!1),c=z("");async function d(){n.value="",i.value=!0;try{const _=await nt.request("/api/admin/ai-providers?limit=200&offset=0");e.value=_.items||[]}catch(_){if(_?.status===403)return t.push("/app");n.value=_?.message||""}finally{i.value=!1}}async function p(){l.value="",o.value=!0;try{const _={code:r.code.trim(),displayName:r.displayName.trim(),modelName:r.modelName.trim(),baseUrl:r.baseUrl.trim()||void 0,multiplier:Number(r.multiplier||1),isActive:!!r.isActive};await nt.request("/api/admin/ai-providers",{method:"POST",body:_}),r.code="",r.displayName="",r.modelName="",r.baseUrl="",r.multiplier=1,r.isActive=!0,await d()}catch(_){if(_?.status===403)return t.push("/app");l.value=_?.message||""}finally{o.value=!1}}function m(_){a.value=_,h.id=_.id,h.displayName=_.display_name,h.modelName=_.model_name,h.baseUrl=_.base_url||"",h.multiplier=Number(_.multiplier_x100||100)/100,h.isActive=!!_.is_active,c.value=""}function g(){a.value=null}async function S(){c.value="",u.value=!0;try{const _={displayName:h.displayName.trim(),modelName:h.modelName.trim(),baseUrl:h.baseUrl.trim()||null,multiplier:Number(h.multiplier||1),isActive:!!h.isActive};await nt.request(`/api/admin/ai-providers/${encodeURIComponent(h.id)}`,{method:"PUT",body:_}),a.value=null,await d()}catch(_){if(_?.status===403)return t.push("/app");c.value=_?.message||""}finally{u.value=!1}}return fe(d),(_,y)=>(C(),ae(Us,{title:"Provider ",subtitle:" Provider "},{default:Pt(()=>[f("div",Tw,[y[18]||(y[18]=f("h2",{class:"card-title"}," Provider",-1)),f("form",{class:"card-content",onSubmit:ps(p,["prevent"])},[f("div",Mw,[f("div",Ow,[y[11]||(y[11]=f("label",{class:"form-label"},"code",-1)),rt(f("input",{"onUpdate:modelValue":y[0]||(y[0]=x=>r.code=x),class:"form-input",placeholder:"openai_gpt4o",required:""},null,512),[[gt,r.code]])]),f("div",kw,[y[12]||(y[12]=f("label",{class:"form-label"},"displayName",-1)),rt(f("input",{"onUpdate:modelValue":y[1]||(y[1]=x=>r.displayName=x),class:"form-input",placeholder:"OpenAI GPT-4o",required:""},null,512),[[gt,r.displayName]])]),f("div",Lw,[y[13]||(y[13]=f("label",{class:"form-label"},"modelName",-1)),rt(f("input",{"onUpdate:modelValue":y[2]||(y[2]=x=>r.modelName=x),class:"form-input",placeholder:"gpt-4o-mini",required:""},null,512),[[gt,r.modelName]])])]),f("div",Aw,[f("div",Rw,[y[14]||(y[14]=f("label",{class:"form-label"},"baseUrl",-1)),rt(f("input",{"onUpdate:modelValue":y[3]||(y[3]=x=>r.baseUrl=x),class:"form-input",placeholder:"https://api.openai.com/v1"},null,512),[[gt,r.baseUrl]])]),f("div",Pw,[y[15]||(y[15]=f("label",{class:"form-label"}," multiplier",-1)),rt(f("input",{"onUpdate:modelValue":y[4]||(y[4]=x=>r.multiplier=x),class:"form-input",type:"number",min:"0.01",step:"0.01"},null,512),[[gt,r.multiplier,void 0,{number:!0}]])]),f("div",Nw,[y[17]||(y[17]=f("label",{class:"form-label"},"isActive",-1)),rt(f("select",{"onUpdate:modelValue":y[5]||(y[5]=x=>r.isActive=x),class:"form-input"},[...y[16]||(y[16]=[f("option",{value:!0},"true",-1),f("option",{value:!1},"false",-1)])],512),[[vi,r.isActive]])])]),f("button",{class:"btn btn-primary",type:"submit",disabled:o.value},O(o.value?"...":""),9,Iw),l.value?(C(),A("p",Dw,O(l.value),1)):U("",!0)],32)]),f("div",Bw,[y[20]||(y[20]=f("h2",{class:"card-title"},"",-1)),f("div",$w,[f("button",{class:"btn btn-secondary",type:"button",onClick:d,disabled:i.value},O(i.value?"...":""),9,Vw),n.value?(C(),A("p",Fw,O(n.value),1)):U("",!0),f("div",zw,[f("table",Ww,[y[19]||(y[19]=f("thead",null,[f("tr",null,[f("th",null,"code"),f("th",null,"name"),f("th",null,"model"),f("th",null,"multiplier"),f("th",null,"active"),f("th",null,"op")])],-1)),f("tbody",null,[(C(!0),A(_t,null,ke(e.value,x=>(C(),A("tr",{key:x.id},[f("td",null,[f("code",null,O(x.code),1)]),f("td",null,O(x.display_name),1),f("td",null,[f("code",null,O(x.model_name),1)]),f("td",null,[f("code",null,O((x.multiplier_x100/100).toFixed(2)),1)]),f("td",null,O(x.is_active?"":""),1),f("td",null,[f("button",{class:"btn btn-secondary btn-sm",type:"button",onClick:P=>m(x)},"",8,Uw)])]))),128))])])])])]),a.value?(C(),A("div",qw,[y[27]||(y[27]=f("h2",{class:"card-title"}," Provider",-1)),f("form",{class:"card-content",onSubmit:ps(S,["prevent"])},[f("div",Hw,[f("div",jw,[y[21]||(y[21]=f("label",{class:"form-label"},"displayName",-1)),rt(f("input",{"onUpdate:modelValue":y[6]||(y[6]=x=>h.displayName=x),class:"form-input",required:""},null,512),[[gt,h.displayName]])]),f("div",Kw,[y[22]||(y[22]=f("label",{class:"form-label"},"modelName",-1)),rt(f("input",{"onUpdate:modelValue":y[7]||(y[7]=x=>h.modelName=x),class:"form-input",required:""},null,512),[[gt,h.modelName]])]),f("div",Gw,[y[23]||(y[23]=f("label",{class:"form-label"},"baseUrl",-1)),rt(f("input",{"onUpdate:modelValue":y[8]||(y[8]=x=>h.baseUrl=x),class:"form-input"},null,512),[[gt,h.baseUrl]])])]),f("div",Jw,[f("div",Xw,[y[24]||(y[24]=f("label",{class:"form-label"},"multiplier",-1)),rt(f("input",{"onUpdate:modelValue":y[9]||(y[9]=x=>h.multiplier=x),class:"form-input",type:"number",min:"0.01",step:"0.01"},null,512),[[gt,h.multiplier,void 0,{number:!0}]])]),f("div",Yw,[y[26]||(y[26]=f("label",{class:"form-label"},"isActive",-1)),rt(f("select",{"onUpdate:modelValue":y[10]||(y[10]=x=>h.isActive=x),class:"form-input"},[...y[25]||(y[25]=[f("option",{value:!0},"true",-1),f("option",{value:!1},"false",-1)])],512),[[vi,h.isActive]])])]),f("div",Qw,[f("button",{class:"btn btn-primary",type:"submit",disabled:u.value},O(u.value?"...":""),9,Zw),f("button",{class:"btn btn-secondary",type:"button",onClick:g},"")]),c.value?(C(),A("p",t1,O(c.value),1)):U("",!0)],32)])):U("",!0)]),_:1}))}},s1=[{path:"/",redirect:"/app"},{path:"/login",component:xp,meta:{guestOnly:!0}},{path:"/register",component:Pp,meta:{guestOnly:!0}},{path:"/verify-email",component:Hp},{path:"/app",component:Fm,meta:{requiresAuth:!0}},{path:"/app/ai",component:A_,meta:{requiresAuth:!0}},{path:"/app/providers",component:Cw,meta:{requiresAuth:!0}},{path:"/app/subscription",component:fv,meta:{requiresAuth:!0}},{path:"/app/admin/codes",component:Nv,meta:{requiresAuth:!0}},{path:"/app/admin/providers",component:e1,meta:{requiresAuth:!0}}],Pu=op({history:Fd(),routes:s1});Pu.beforeEach(async s=>{const t=ss();return t.initialized.value||await t.init(),s.meta.requiresAuth&&!t.user.value?"/login":s.meta.guestOnly&&t.user.value?"/app":!0});const Nu=td(lp),i1=ss();await i1.init();Nu.use(Pu);Nu.mount("#app");
