(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();function eo(s){const t=Object.create(null);for(const e of s.split(","))t[e]=1;return e=>e in t}const St={},Rs=[],Le=()=>{},Na=()=>!1,_n=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),so=s=>s.startsWith("onUpdate:"),zt=Object.assign,io=(s,t)=>{const e=s.indexOf(t);e>-1&&s.splice(e,1)},Wh=Object.prototype.hasOwnProperty,_t=(s,t)=>Wh.call(s,t),et=Array.isArray,Ns=s=>Ti(s)==="[object Map]",Ks=s=>Ti(s)==="[object Set]",Wo=s=>Ti(s)==="[object Date]",at=s=>typeof s=="function",Rt=s=>typeof s=="string",ve=s=>typeof s=="symbol",xt=s=>s!==null&&typeof s=="object",$a=s=>(xt(s)||at(s))&&at(s.then)&&at(s.catch),Da=Object.prototype.toString,Ti=s=>Da.call(s),Hh=s=>Ti(s).slice(8,-1),Ia=s=>Ti(s)==="[object Object]",no=s=>Rt(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,ni=eo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),wn=s=>{const t=Object.create(null);return(e=>t[e]||(t[e]=s(e)))},Kh=/-\w/g,os=wn(s=>s.replace(Kh,t=>t.slice(1).toUpperCase())),jh=/\B([A-Z])/g,as=wn(s=>s.replace(jh,"-$1").toLowerCase()),Ba=wn(s=>s.charAt(0).toUpperCase()+s.slice(1)),Un=wn(s=>s?`on${Ba(s)}`:""),is=(s,t)=>!Object.is(s,t),Zi=(s,...t)=>{for(let e=0;e<s.length;e++)s[e](...t)},Va=(s,t,e,i=!1)=>{Object.defineProperty(s,t,{configurable:!0,enumerable:!1,writable:i,value:e})},Sn=s=>{const t=parseFloat(s);return isNaN(t)?s:t};let Ho;const xn=()=>Ho||(Ho=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Mi(s){if(et(s)){const t={};for(let e=0;e<s.length;e++){const i=s[e],n=Rt(i)?Yh(i):Mi(i);if(n)for(const r in n)t[r]=n[r]}return t}else if(Rt(s)||xt(s))return s}const Gh=/;(?![^(]*\))/g,Jh=/:([^]+)/,Xh=/\/\*[^]*?\*\//g;function Yh(s){const t={};return s.replace(Xh,"").split(Gh).forEach(e=>{if(e){const i=e.split(Jh);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function ue(s){let t="";if(Rt(s))t=s;else if(et(s))for(let e=0;e<s.length;e++){const i=ue(s[e]);i&&(t+=i+" ")}else if(xt(s))for(const e in s)s[e]&&(t+=e+" ");return t.trim()}const Qh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Zh=eo(Qh);function Fa(s){return!!s||s===""}function tc(s,t){if(s.length!==t.length)return!1;let e=!0;for(let i=0;e&&i<s.length;i++)e=Ai(s[i],t[i]);return e}function Ai(s,t){if(s===t)return!0;let e=Wo(s),i=Wo(t);if(e||i)return e&&i?s.getTime()===t.getTime():!1;if(e=ve(s),i=ve(t),e||i)return s===t;if(e=et(s),i=et(t),e||i)return e&&i?tc(s,t):!1;if(e=xt(s),i=xt(t),e||i){if(!e||!i)return!1;const n=Object.keys(s).length,r=Object.keys(t).length;if(n!==r)return!1;for(const o in s){const l=s.hasOwnProperty(o),a=t.hasOwnProperty(o);if(l&&!a||!l&&a||!Ai(s[o],t[o]))return!1}}return String(s)===String(t)}function ro(s,t){return s.findIndex(e=>Ai(e,t))}const Ua=s=>!!(s&&s.__v_isRef===!0),x=s=>Rt(s)?s:s==null?"":et(s)||xt(s)&&(s.toString===Da||!at(s.toString))?Ua(s)?x(s.value):JSON.stringify(s,za,2):String(s),za=(s,t)=>Ua(t)?za(s,t.value):Ns(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[i,n],r)=>(e[zn(i,r)+" =>"]=n,e),{})}:Ks(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>zn(e))}:ve(t)?zn(t):xt(t)&&!et(t)&&!Ia(t)?String(t):t,zn=(s,t="")=>{var e;return ve(s)?`Symbol(${(e=s.description)!=null?e:t})`:s};let se;class ec{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=se,!t&&se&&(this.index=(se.scopes||(se.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=se;try{return se=this,t()}finally{se=e}}}on(){++this._on===1&&(this.prevScope=se,se=this)}off(){this._on>0&&--this._on===0&&(se=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let e,i;for(e=0,i=this.effects.length;e<i;e++)this.effects[e].stop();for(this.effects.length=0,e=0,i=this.cleanups.length;e<i;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function sc(){return se}let Et;const qn=new WeakSet;class qa{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,se&&se.active&&se.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,qn.has(this)&&(qn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ha(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ko(this),Ka(this);const t=Et,e=pe;Et=this,pe=!0;try{return this.fn()}finally{ja(this),Et=t,pe=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ao(t);this.deps=this.depsTail=void 0,Ko(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?qn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Cr(this)&&this.run()}get dirty(){return Cr(this)}}let Wa=0,ri,oi;function Ha(s,t=!1){if(s.flags|=8,t){s.next=oi,oi=s;return}s.next=ri,ri=s}function oo(){Wa++}function lo(){if(--Wa>0)return;if(oi){let t=oi;for(oi=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let s;for(;ri;){let t=ri;for(ri=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){s||(s=i)}t=e}}if(s)throw s}function Ka(s){for(let t=s.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function ja(s){let t,e=s.depsTail,i=e;for(;i;){const n=i.prevDep;i.version===-1?(i===e&&(e=n),ao(i),ic(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}s.deps=t,s.depsTail=e}function Cr(s){for(let t=s.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Ga(t.dep.computed)||t.dep.version!==t.version))return!0;return!!s._dirty}function Ga(s){if(s.flags&4&&!(s.flags&16)||(s.flags&=-17,s.globalVersion===mi)||(s.globalVersion=mi,!s.isSSR&&s.flags&128&&(!s.deps&&!s._dirty||!Cr(s))))return;s.flags|=2;const t=s.dep,e=Et,i=pe;Et=s,pe=!0;try{Ka(s);const n=s.fn(s._value);(t.version===0||is(n,s._value))&&(s.flags|=128,s._value=n,t.version++)}catch(n){throw t.version++,n}finally{Et=e,pe=i,ja(s),s.flags&=-3}}function ao(s,t=!1){const{dep:e,prevSub:i,nextSub:n}=s;if(i&&(i.nextSub=n,s.prevSub=void 0),n&&(n.prevSub=i,s.nextSub=void 0),e.subs===s&&(e.subs=i,!i&&e.computed)){e.computed.flags&=-5;for(let r=e.computed.deps;r;r=r.nextDep)ao(r,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function ic(s){const{prevDep:t,nextDep:e}=s;t&&(t.nextDep=e,s.prevDep=void 0),e&&(e.prevDep=t,s.nextDep=void 0)}let pe=!0;const Ja=[];function We(){Ja.push(pe),pe=!1}function He(){const s=Ja.pop();pe=s===void 0?!0:s}function Ko(s){const{cleanup:t}=s;if(s.cleanup=void 0,t){const e=Et;Et=void 0;try{t()}finally{Et=e}}}let mi=0;class nc{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class uo{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Et||!pe||Et===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==Et)e=this.activeLink=new nc(Et,this),Et.deps?(e.prevDep=Et.depsTail,Et.depsTail.nextDep=e,Et.depsTail=e):Et.deps=Et.depsTail=e,Xa(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const i=e.nextDep;i.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=i),e.prevDep=Et.depsTail,e.nextDep=void 0,Et.depsTail.nextDep=e,Et.depsTail=e,Et.deps===e&&(Et.deps=i)}return e}trigger(t){this.version++,mi++,this.notify(t)}notify(t){oo();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{lo()}}}function Xa(s){if(s.dep.sc++,s.sub.flags&4){const t=s.dep.computed;if(t&&!s.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)Xa(i)}const e=s.dep.subs;e!==s&&(s.prevSub=e,e&&(e.nextSub=s)),s.dep.subs=s}}const Er=new WeakMap,gs=Symbol(""),kr=Symbol(""),vi=Symbol("");function Bt(s,t,e){if(pe&&Et){let i=Er.get(s);i||Er.set(s,i=new Map);let n=i.get(e);n||(i.set(e,n=new uo),n.map=i,n.key=e),n.track()}}function Ve(s,t,e,i,n,r){const o=Er.get(s);if(!o){mi++;return}const l=a=>{a&&a.trigger()};if(oo(),t==="clear")o.forEach(l);else{const a=et(s),h=a&&no(e);if(a&&e==="length"){const c=Number(i);o.forEach((d,f)=>{(f==="length"||f===vi||!ve(f)&&f>=c)&&l(d)})}else switch((e!==void 0||o.has(void 0))&&l(o.get(e)),h&&l(o.get(vi)),t){case"add":a?h&&l(o.get("length")):(l(o.get(gs)),Ns(s)&&l(o.get(kr)));break;case"delete":a||(l(o.get(gs)),Ns(s)&&l(o.get(kr)));break;case"set":Ns(s)&&l(o.get(gs));break}}lo()}function Ts(s){const t=yt(s);return t===s?t:(Bt(t,"iterate",vi),de(s)?t:t.map(ge))}function Cn(s){return Bt(s=yt(s),"iterate",vi),s}function Qe(s,t){return Ke(s)?bs(s)?Vs(ge(t)):Vs(t):ge(t)}const rc={__proto__:null,[Symbol.iterator](){return Wn(this,Symbol.iterator,s=>Qe(this,s))},concat(...s){return Ts(this).concat(...s.map(t=>et(t)?Ts(t):t))},entries(){return Wn(this,"entries",s=>(s[1]=Qe(this,s[1]),s))},every(s,t){return De(this,"every",s,t,void 0,arguments)},filter(s,t){return De(this,"filter",s,t,e=>e.map(i=>Qe(this,i)),arguments)},find(s,t){return De(this,"find",s,t,e=>Qe(this,e),arguments)},findIndex(s,t){return De(this,"findIndex",s,t,void 0,arguments)},findLast(s,t){return De(this,"findLast",s,t,e=>Qe(this,e),arguments)},findLastIndex(s,t){return De(this,"findLastIndex",s,t,void 0,arguments)},forEach(s,t){return De(this,"forEach",s,t,void 0,arguments)},includes(...s){return Hn(this,"includes",s)},indexOf(...s){return Hn(this,"indexOf",s)},join(s){return Ts(this).join(s)},lastIndexOf(...s){return Hn(this,"lastIndexOf",s)},map(s,t){return De(this,"map",s,t,void 0,arguments)},pop(){return Ys(this,"pop")},push(...s){return Ys(this,"push",s)},reduce(s,...t){return jo(this,"reduce",s,t)},reduceRight(s,...t){return jo(this,"reduceRight",s,t)},shift(){return Ys(this,"shift")},some(s,t){return De(this,"some",s,t,void 0,arguments)},splice(...s){return Ys(this,"splice",s)},toReversed(){return Ts(this).toReversed()},toSorted(s){return Ts(this).toSorted(s)},toSpliced(...s){return Ts(this).toSpliced(...s)},unshift(...s){return Ys(this,"unshift",s)},values(){return Wn(this,"values",s=>Qe(this,s))}};function Wn(s,t,e){const i=Cn(s),n=i[t]();return i!==s&&!de(s)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.done||(r.value=e(r.value)),r}),n}const oc=Array.prototype;function De(s,t,e,i,n,r){const o=Cn(s),l=o!==s&&!de(s),a=o[t];if(a!==oc[t]){const d=a.apply(s,r);return l?ge(d):d}let h=e;o!==s&&(l?h=function(d,f){return e.call(this,Qe(s,d),f,s)}:e.length>2&&(h=function(d,f){return e.call(this,d,f,s)}));const c=a.call(o,h,i);return l&&n?n(c):c}function jo(s,t,e,i){const n=Cn(s);let r=e;return n!==s&&(de(s)?e.length>3&&(r=function(o,l,a){return e.call(this,o,l,a,s)}):r=function(o,l,a){return e.call(this,o,Qe(s,l),a,s)}),n[t](r,...i)}function Hn(s,t,e){const i=yt(s);Bt(i,"iterate",vi);const n=i[t](...e);return(n===-1||n===!1)&&fo(e[0])?(e[0]=yt(e[0]),i[t](...e)):n}function Ys(s,t,e=[]){We(),oo();const i=yt(s)[t].apply(s,e);return lo(),He(),i}const lc=eo("__proto__,__v_isRef,__isVue"),Ya=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(ve));function ac(s){ve(s)||(s=String(s));const t=yt(this);return Bt(t,"has",s),t.hasOwnProperty(s)}class Qa{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,i){if(e==="__v_skip")return t.__v_skip;const n=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!n;if(e==="__v_isReadonly")return n;if(e==="__v_isShallow")return r;if(e==="__v_raw")return i===(n?r?bc:su:r?eu:tu).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const o=et(t);if(!n){let a;if(o&&(a=rc[e]))return a;if(e==="hasOwnProperty")return ac}const l=Reflect.get(t,e,Ut(t)?t:i);if((ve(e)?Ya.has(e):lc(e))||(n||Bt(t,"get",e),r))return l;if(Ut(l)){const a=o&&no(e)?l:l.value;return n&&xt(a)?Mr(a):a}return xt(l)?n?Mr(l):Vt(l):l}}class Za extends Qa{constructor(t=!1){super(!1,t)}set(t,e,i,n){let r=t[e];const o=et(t)&&no(e);if(!this._isShallow){const h=Ke(r);if(!de(i)&&!Ke(i)&&(r=yt(r),i=yt(i)),!o&&Ut(r)&&!Ut(i))return h||(r.value=i),!0}const l=o?Number(e)<t.length:_t(t,e),a=Reflect.set(t,e,i,Ut(t)?t:n);return t===yt(n)&&(l?is(i,r)&&Ve(t,"set",e,i):Ve(t,"add",e,i)),a}deleteProperty(t,e){const i=_t(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&i&&Ve(t,"delete",e,void 0),n}has(t,e){const i=Reflect.has(t,e);return(!ve(e)||!Ya.has(e))&&Bt(t,"has",e),i}ownKeys(t){return Bt(t,"iterate",et(t)?"length":gs),Reflect.ownKeys(t)}}class uc extends Qa{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const hc=new Za,cc=new uc,dc=new Za(!0);const Tr=s=>s,$i=s=>Reflect.getPrototypeOf(s);function fc(s,t,e){return function(...i){const n=this.__v_raw,r=yt(n),o=Ns(r),l=s==="entries"||s===Symbol.iterator&&o,a=s==="keys"&&o,h=n[s](...i),c=e?Tr:t?Vs:ge;return!t&&Bt(r,"iterate",a?kr:gs),{next(){const{value:d,done:f}=h.next();return f?{value:d,done:f}:{value:l?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function Di(s){return function(...t){return s==="delete"?!1:s==="clear"?void 0:this}}function pc(s,t){const e={get(n){const r=this.__v_raw,o=yt(r),l=yt(n);s||(is(n,l)&&Bt(o,"get",n),Bt(o,"get",l));const{has:a}=$i(o),h=t?Tr:s?Vs:ge;if(a.call(o,n))return h(r.get(n));if(a.call(o,l))return h(r.get(l));r!==o&&r.get(n)},get size(){const n=this.__v_raw;return!s&&Bt(yt(n),"iterate",gs),n.size},has(n){const r=this.__v_raw,o=yt(r),l=yt(n);return s||(is(n,l)&&Bt(o,"has",n),Bt(o,"has",l)),n===l?r.has(n):r.has(n)||r.has(l)},forEach(n,r){const o=this,l=o.__v_raw,a=yt(l),h=t?Tr:s?Vs:ge;return!s&&Bt(a,"iterate",gs),l.forEach((c,d)=>n.call(r,h(c),h(d),o))}};return zt(e,s?{add:Di("add"),set:Di("set"),delete:Di("delete"),clear:Di("clear")}:{add(n){!t&&!de(n)&&!Ke(n)&&(n=yt(n));const r=yt(this);return $i(r).has.call(r,n)||(r.add(n),Ve(r,"add",n,n)),this},set(n,r){!t&&!de(r)&&!Ke(r)&&(r=yt(r));const o=yt(this),{has:l,get:a}=$i(o);let h=l.call(o,n);h||(n=yt(n),h=l.call(o,n));const c=a.call(o,n);return o.set(n,r),h?is(r,c)&&Ve(o,"set",n,r):Ve(o,"add",n,r),this},delete(n){const r=yt(this),{has:o,get:l}=$i(r);let a=o.call(r,n);a||(n=yt(n),a=o.call(r,n)),l&&l.call(r,n);const h=r.delete(n);return a&&Ve(r,"delete",n,void 0),h},clear(){const n=yt(this),r=n.size!==0,o=n.clear();return r&&Ve(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{e[n]=fc(n,s,t)}),e}function ho(s,t){const e=pc(s,t);return(i,n,r)=>n==="__v_isReactive"?!s:n==="__v_isReadonly"?s:n==="__v_raw"?i:Reflect.get(_t(e,n)&&n in i?e:i,n,r)}const mc={get:ho(!1,!1)},vc={get:ho(!1,!0)},gc={get:ho(!0,!1)};const tu=new WeakMap,eu=new WeakMap,su=new WeakMap,bc=new WeakMap;function yc(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function _c(s){return s.__v_skip||!Object.isExtensible(s)?0:yc(Hh(s))}function Vt(s){return Ke(s)?s:co(s,!1,hc,mc,tu)}function iu(s){return co(s,!1,dc,vc,eu)}function Mr(s){return co(s,!0,cc,gc,su)}function co(s,t,e,i,n){if(!xt(s)||s.__v_raw&&!(t&&s.__v_isReactive))return s;const r=_c(s);if(r===0)return s;const o=n.get(s);if(o)return o;const l=new Proxy(s,r===2?i:e);return n.set(s,l),l}function bs(s){return Ke(s)?bs(s.__v_raw):!!(s&&s.__v_isReactive)}function Ke(s){return!!(s&&s.__v_isReadonly)}function de(s){return!!(s&&s.__v_isShallow)}function fo(s){return s?!!s.__v_raw:!1}function yt(s){const t=s&&s.__v_raw;return t?yt(t):s}function wc(s){return!_t(s,"__v_skip")&&Object.isExtensible(s)&&Va(s,"__v_skip",!0),s}const ge=s=>xt(s)?Vt(s):s,Vs=s=>xt(s)?Mr(s):s;function Ut(s){return s?s.__v_isRef===!0:!1}function $(s){return nu(s,!1)}function Sc(s){return nu(s,!0)}function nu(s,t){return Ut(s)?s:new xc(s,t)}class xc{constructor(t,e){this.dep=new uo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:yt(t),this._value=e?t:ge(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,i=this.__v_isShallow||de(t)||Ke(t);t=i?t:yt(t),is(t,e)&&(this._rawValue=t,this._value=i?t:ge(t),this.dep.trigger())}}function lt(s){return Ut(s)?s.value:s}const Cc={get:(s,t,e)=>t==="__v_raw"?s:lt(Reflect.get(s,t,e)),set:(s,t,e,i)=>{const n=s[t];return Ut(n)&&!Ut(e)?(n.value=e,!0):Reflect.set(s,t,e,i)}};function ru(s){return bs(s)?s:new Proxy(s,Cc)}class Ec{constructor(t,e,i){this.fn=t,this.setter=e,this._value=void 0,this.dep=new uo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=mi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Et!==this)return Ha(this,!0),!0}get value(){const t=this.dep.track();return Ga(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function kc(s,t,e=!1){let i,n;return at(s)?i=s:(i=s.get,n=s.set),new Ec(i,n,e)}const Ii={},hn=new WeakMap;let ms;function Tc(s,t=!1,e=ms){if(e){let i=hn.get(e);i||hn.set(e,i=[]),i.push(s)}}function Mc(s,t,e=St){const{immediate:i,deep:n,once:r,scheduler:o,augmentJob:l,call:a}=e,h=I=>n?I:de(I)||n===!1||n===0?Fe(I,1):Fe(I);let c,d,f,p,m=!1,g=!1;if(Ut(s)?(d=()=>s.value,m=de(s)):bs(s)?(d=()=>h(s),m=!0):et(s)?(g=!0,m=s.some(I=>bs(I)||de(I)),d=()=>s.map(I=>{if(Ut(I))return I.value;if(bs(I))return h(I);if(at(I))return a?a(I,2):I()})):at(s)?t?d=a?()=>a(s,2):s:d=()=>{if(f){We();try{f()}finally{He()}}const I=ms;ms=c;try{return a?a(s,3,[p]):s(p)}finally{ms=I}}:d=Le,t&&n){const I=d,X=n===!0?1/0:n;d=()=>Fe(I(),X)}const y=sc(),_=()=>{c.stop(),y&&y.active&&io(y.effects,c)};if(r&&t){const I=t;t=(...X)=>{I(...X),_()}}let E=g?new Array(s.length).fill(Ii):Ii;const F=I=>{if(!(!(c.flags&1)||!c.dirty&&!I))if(t){const X=c.run();if(n||m||(g?X.some((rt,tt)=>is(rt,E[tt])):is(X,E))){f&&f();const rt=ms;ms=c;try{const tt=[X,E===Ii?void 0:g&&E[0]===Ii?[]:E,p];E=X,a?a(t,3,tt):t(...tt)}finally{ms=rt}}}else c.run()};return l&&l(F),c=new qa(d),c.scheduler=o?()=>o(F,!1):F,p=I=>Tc(I,!1,c),f=c.onStop=()=>{const I=hn.get(c);if(I){if(a)a(I,4);else for(const X of I)X();hn.delete(c)}},t?i?F(!0):E=c.run():o?o(F.bind(null,!0),!0):c.run(),_.pause=c.pause.bind(c),_.resume=c.resume.bind(c),_.stop=_,_}function Fe(s,t=1/0,e){if(t<=0||!xt(s)||s.__v_skip||(e=e||new Map,(e.get(s)||0)>=t))return s;if(e.set(s,t),t--,Ut(s))Fe(s.value,t,e);else if(et(s))for(let i=0;i<s.length;i++)Fe(s[i],t,e);else if(Ks(s)||Ns(s))s.forEach(i=>{Fe(i,t,e)});else if(Ia(s)){for(const i in s)Fe(s[i],t,e);for(const i of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,i)&&Fe(s[i],t,e)}return s}function Oi(s,t,e,i){try{return i?s(...i):s()}catch(n){En(n,t,e)}}function Ne(s,t,e,i){if(at(s)){const n=Oi(s,t,e,i);return n&&$a(n)&&n.catch(r=>{En(r,t,e)}),n}if(et(s)){const n=[];for(let r=0;r<s.length;r++)n.push(Ne(s[r],t,e,i));return n}}function En(s,t,e,i=!0){const n=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||St;if(t){let l=t.parent;const a=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${e}`;for(;l;){const c=l.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](s,a,h)===!1)return}l=l.parent}if(r){We(),Oi(r,null,10,[s,a,h]),He();return}}Ac(s,e,n,i,o)}function Ac(s,t,e,i=!0,n=!1){if(n)throw s;console.error(s)}const Gt=[];let Me=-1;const $s=[];let Ze=null,As=0;const ou=Promise.resolve();let cn=null;function _s(s){const t=cn||ou;return s?t.then(this?s.bind(this):s):t}function Oc(s){let t=Me+1,e=Gt.length;for(;t<e;){const i=t+e>>>1,n=Gt[i],r=gi(n);r<s||r===s&&n.flags&2?t=i+1:e=i}return t}function po(s){if(!(s.flags&1)){const t=gi(s),e=Gt[Gt.length-1];!e||!(s.flags&2)&&t>=gi(e)?Gt.push(s):Gt.splice(Oc(t),0,s),s.flags|=1,lu()}}function lu(){cn||(cn=ou.then(uu))}function Lc(s){et(s)?$s.push(...s):Ze&&s.id===-1?Ze.splice(As+1,0,s):s.flags&1||($s.push(s),s.flags|=1),lu()}function Go(s,t,e=Me+1){for(;e<Gt.length;e++){const i=Gt[e];if(i&&i.flags&2){if(s&&i.id!==s.uid)continue;Gt.splice(e,1),e--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function au(s){if($s.length){const t=[...new Set($s)].sort((e,i)=>gi(e)-gi(i));if($s.length=0,Ze){Ze.push(...t);return}for(Ze=t,As=0;As<Ze.length;As++){const e=Ze[As];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}Ze=null,As=0}}const gi=s=>s.id==null?s.flags&2?-1:1/0:s.id;function uu(s){try{for(Me=0;Me<Gt.length;Me++){const t=Gt[Me];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Oi(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Me<Gt.length;Me++){const t=Gt[Me];t&&(t.flags&=-2)}Me=-1,Gt.length=0,au(),cn=null,(Gt.length||$s.length)&&uu()}}let Ft=null,hu=null;function dn(s){const t=Ft;return Ft=s,hu=s&&s.type.__scopeId||null,t}function it(s,t=Ft,e){if(!t||s._n)return s;const i=(...n)=>{i._d&&mn(-1);const r=dn(t);let o;try{o=s(...n)}finally{dn(r),i._d&&mn(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function st(s,t){if(Ft===null)return s;const e=An(Ft),i=s.dirs||(s.dirs=[]);for(let n=0;n<t.length;n++){let[r,o,l,a=St]=t[n];r&&(at(r)&&(r={mounted:r,updated:r}),r.deep&&Fe(o),i.push({dir:r,instance:e,value:o,oldValue:void 0,arg:l,modifiers:a}))}return s}function cs(s,t,e,i){const n=s.dirs,r=t&&t.dirs;for(let o=0;o<n.length;o++){const l=n[o];r&&(l.oldValue=r[o].value);let a=l.dir[i];a&&(We(),Ne(a,e,8,[s.el,l,s,t]),He())}}function tn(s,t){if(Jt){let e=Jt.provides;const i=Jt.parent&&Jt.parent.provides;i===e&&(e=Jt.provides=Object.create(i)),e[s]=t}}function me(s,t,e=!1){const i=Md();if(i||Is){let n=Is?Is._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&s in n)return n[s];if(arguments.length>1)return e&&at(t)?t.call(i&&i.proxy):t}}const Pc=Symbol.for("v-scx"),Rc=()=>me(Pc);function ns(s,t,e){return cu(s,t,e)}function cu(s,t,e=St){const{immediate:i,deep:n,flush:r,once:o}=e,l=zt({},e),a=t&&i||!t&&r!=="post";let h;if(_i){if(r==="sync"){const p=Rc();h=p.__watcherHandles||(p.__watcherHandles=[])}else if(!a){const p=()=>{};return p.stop=Le,p.resume=Le,p.pause=Le,p}}const c=Jt;l.call=(p,m,g)=>Ne(p,c,m,g);let d=!1;r==="post"?l.scheduler=p=>{le(p,c&&c.suspense)}:r!=="sync"&&(d=!0,l.scheduler=(p,m)=>{m?p():po(p)}),l.augmentJob=p=>{t&&(p.flags|=4),d&&(p.flags|=2,c&&(p.id=c.uid,p.i=c))};const f=Mc(s,t,l);return _i&&(h?h.push(f):a&&f()),f}function Nc(s,t,e){const i=this.proxy,n=Rt(s)?s.includes(".")?du(i,s):()=>i[s]:s.bind(i,i);let r;at(t)?r=t:(r=t.handler,e=t);const o=Li(this),l=cu(n,r.bind(i),e);return o(),l}function du(s,t){const e=t.split(".");return()=>{let i=s;for(let n=0;n<e.length&&i;n++)i=i[e[n]];return i}}const $c=Symbol("_vte"),Dc=s=>s.__isTeleport,Ic=Symbol("_leaveCb");function mo(s,t){s.shapeFlag&6&&s.component?(s.transition=t,mo(s.component.subTree,t)):s.shapeFlag&128?(s.ssContent.transition=t.clone(s.ssContent),s.ssFallback.transition=t.clone(s.ssFallback)):s.transition=t}function fu(s,t){return at(s)?zt({name:s.name},t,{setup:s}):s}function pu(s){s.ids=[s.ids[0]+s.ids[2]+++"-",0,0]}const fn=new WeakMap;function li(s,t,e,i,n=!1){if(et(s)){s.forEach((m,g)=>li(m,t&&(et(t)?t[g]:t),e,i,n));return}if(Ds(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&li(s,t,e,i.component.subTree);return}const r=i.shapeFlag&4?An(i.component):i.el,o=n?null:r,{i:l,r:a}=s,h=t&&t.r,c=l.refs===St?l.refs={}:l.refs,d=l.setupState,f=yt(d),p=d===St?Na:m=>_t(f,m);if(h!=null&&h!==a){if(Jo(t),Rt(h))c[h]=null,p(h)&&(d[h]=null);else if(Ut(h)){h.value=null;const m=t;m.k&&(c[m.k]=null)}}if(at(a))Oi(a,l,12,[o,c]);else{const m=Rt(a),g=Ut(a);if(m||g){const y=()=>{if(s.f){const _=m?p(a)?d[a]:c[a]:a.value;if(n)et(_)&&io(_,r);else if(et(_))_.includes(r)||_.push(r);else if(m)c[a]=[r],p(a)&&(d[a]=c[a]);else{const E=[r];a.value=E,s.k&&(c[s.k]=E)}}else m?(c[a]=o,p(a)&&(d[a]=o)):g&&(a.value=o,s.k&&(c[s.k]=o))};if(o){const _=()=>{y(),fn.delete(s)};_.id=-1,fn.set(s,_),le(_,e)}else Jo(s),y()}}}function Jo(s){const t=fn.get(s);t&&(t.flags|=8,fn.delete(s))}xn().requestIdleCallback;xn().cancelIdleCallback;const Ds=s=>!!s.type.__asyncLoader,mu=s=>s.type.__isKeepAlive;function Bc(s,t){vu(s,"a",t)}function Vc(s,t){vu(s,"da",t)}function vu(s,t,e=Jt){const i=s.__wdc||(s.__wdc=()=>{let n=e;for(;n;){if(n.isDeactivated)return;n=n.parent}return s()});if(kn(t,i,e),e){let n=e.parent;for(;n&&n.parent;)mu(n.parent.vnode)&&Fc(i,t,e,n),n=n.parent}}function Fc(s,t,e,i){const n=kn(t,s,i,!0);js(()=>{io(i[t],n)},e)}function kn(s,t,e=Jt,i=!1){if(e){const n=e[s]||(e[s]=[]),r=t.__weh||(t.__weh=(...o)=>{We();const l=Li(e),a=Ne(t,e,s,o);return l(),He(),a});return i?n.unshift(r):n.push(r),r}}const Ge=s=>(t,e=Jt)=>{(!_i||s==="sp")&&kn(s,(...i)=>t(...i),e)},Uc=Ge("bm"),re=Ge("m"),zc=Ge("bu"),qc=Ge("u"),gu=Ge("bum"),js=Ge("um"),Wc=Ge("sp"),Hc=Ge("rtg"),Kc=Ge("rtc");function jc(s,t=Jt){kn("ec",s,t)}const Gc=Symbol.for("v-ndc");function Xt(s,t,e,i){let n;const r=e,o=et(s);if(o||Rt(s)){const l=o&&bs(s);let a=!1,h=!1;l&&(a=!de(s),h=Ke(s),s=Cn(s)),n=new Array(s.length);for(let c=0,d=s.length;c<d;c++)n[c]=t(a?h?Vs(ge(s[c])):ge(s[c]):s[c],c,void 0,r)}else if(typeof s=="number"){n=new Array(s);for(let l=0;l<s;l++)n[l]=t(l+1,l,void 0,r)}else if(xt(s))if(s[Symbol.iterator])n=Array.from(s,(l,a)=>t(l,a,void 0,r));else{const l=Object.keys(s);n=new Array(l.length);for(let a=0,h=l.length;a<h;a++){const c=l[a];n[a]=t(s[c],c,a,r)}}else n=[];return n}function bu(s,t,e={},i,n){if(Ft.ce||Ft.parent&&Ds(Ft.parent)&&Ft.parent.ce){const h=Object.keys(e).length>0;return C(),qt(mt,null,[Y("slot",e,i)],h?-2:64)}let r=s[t];r&&r._c&&(r._d=!1),C();const o=r&&yu(r(e)),l=e.key||o&&o.key,a=qt(mt,{key:(l&&!ve(l)?l:`_${t}`)+(!o&&i?"_fb":"")},o||[],o&&s._===1?64:-2);return r&&r._c&&(r._d=!0),a}function yu(s){return s.some(t=>yi(t)?!(t.type===je||t.type===mt&&!yu(t.children)):!0)?s:null}const Ar=s=>s?Bu(s)?An(s):Ar(s.parent):null,ai=zt(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>Ar(s.parent),$root:s=>Ar(s.root),$host:s=>s.ce,$emit:s=>s.emit,$options:s=>wu(s),$forceUpdate:s=>s.f||(s.f=()=>{po(s.update)}),$nextTick:s=>s.n||(s.n=_s.bind(s.proxy)),$watch:s=>Nc.bind(s)}),Kn=(s,t)=>s!==St&&!s.__isScriptSetup&&_t(s,t),Jc={get({_:s},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:i,data:n,props:r,accessCache:o,type:l,appContext:a}=s;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return i[t];case 2:return n[t];case 4:return e[t];case 3:return r[t]}else{if(Kn(i,t))return o[t]=1,i[t];if(n!==St&&_t(n,t))return o[t]=2,n[t];if(_t(r,t))return o[t]=3,r[t];if(e!==St&&_t(e,t))return o[t]=4,e[t];Or&&(o[t]=0)}}const h=ai[t];let c,d;if(h)return t==="$attrs"&&Bt(s.attrs,"get",""),h(s);if((c=l.__cssModules)&&(c=c[t]))return c;if(e!==St&&_t(e,t))return o[t]=4,e[t];if(d=a.config.globalProperties,_t(d,t))return d[t]},set({_:s},t,e){const{data:i,setupState:n,ctx:r}=s;return Kn(n,t)?(n[t]=e,!0):i!==St&&_t(i,t)?(i[t]=e,!0):_t(s.props,t)||t[0]==="$"&&t.slice(1)in s?!1:(r[t]=e,!0)},has({_:{data:s,setupState:t,accessCache:e,ctx:i,appContext:n,props:r,type:o}},l){let a;return!!(e[l]||s!==St&&l[0]!=="$"&&_t(s,l)||Kn(t,l)||_t(r,l)||_t(i,l)||_t(ai,l)||_t(n.config.globalProperties,l)||(a=o.__cssModules)&&a[l])},defineProperty(s,t,e){return e.get!=null?s._.accessCache[t]=0:_t(e,"value")&&this.set(s,t,e.value,null),Reflect.defineProperty(s,t,e)}};function Xo(s){return et(s)?s.reduce((t,e)=>(t[e]=null,t),{}):s}let Or=!0;function Xc(s){const t=wu(s),e=s.proxy,i=s.ctx;Or=!1,t.beforeCreate&&Yo(t.beforeCreate,s,"bc");const{data:n,computed:r,methods:o,watch:l,provide:a,inject:h,created:c,beforeMount:d,mounted:f,beforeUpdate:p,updated:m,activated:g,deactivated:y,beforeDestroy:_,beforeUnmount:E,destroyed:F,unmounted:I,render:X,renderTracked:rt,renderTriggered:tt,errorCaptured:B,serverPrefetch:T,expose:w,inheritAttrs:H,components:At,directives:Tt,filters:Qt}=t;if(h&&Yc(h,i,null),o)for(const U in o){const P=o[U];at(P)&&(i[U]=P.bind(e))}if(n){const U=n.call(e,e);xt(U)&&(s.data=Vt(U))}if(Or=!0,r)for(const U in r){const P=r[U],ht=at(P)?P.bind(e,e):at(P.get)?P.get.bind(e,e):Le,Ht=!at(P)&&at(P.set)?P.set.bind(e):Le,Nt=vt({get:ht,set:Ht});Object.defineProperty(i,U,{enumerable:!0,configurable:!0,get:()=>Nt.value,set:It=>Nt.value=It})}if(l)for(const U in l)_u(l[U],i,e,U);if(a){const U=at(a)?a.call(e):a;Reflect.ownKeys(U).forEach(P=>{tn(P,U[P])})}c&&Yo(c,s,"c");function gt(U,P){et(P)?P.forEach(ht=>U(ht.bind(e))):P&&U(P.bind(e))}if(gt(Uc,d),gt(re,f),gt(zc,p),gt(qc,m),gt(Bc,g),gt(Vc,y),gt(jc,B),gt(Kc,rt),gt(Hc,tt),gt(gu,E),gt(js,I),gt(Wc,T),et(w))if(w.length){const U=s.exposed||(s.exposed={});w.forEach(P=>{Object.defineProperty(U,P,{get:()=>e[P],set:ht=>e[P]=ht,enumerable:!0})})}else s.exposed||(s.exposed={});X&&s.render===Le&&(s.render=X),H!=null&&(s.inheritAttrs=H),At&&(s.components=At),Tt&&(s.directives=Tt),T&&pu(s)}function Yc(s,t,e=Le){et(s)&&(s=Lr(s));for(const i in s){const n=s[i];let r;xt(n)?"default"in n?r=me(n.from||i,n.default,!0):r=me(n.from||i):r=me(n),Ut(r)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[i]=r}}function Yo(s,t,e){Ne(et(s)?s.map(i=>i.bind(t.proxy)):s.bind(t.proxy),t,e)}function _u(s,t,e,i){let n=i.includes(".")?du(e,i):()=>e[i];if(Rt(s)){const r=t[s];at(r)&&ns(n,r)}else if(at(s))ns(n,s.bind(e));else if(xt(s))if(et(s))s.forEach(r=>_u(r,t,e,i));else{const r=at(s.handler)?s.handler.bind(e):t[s.handler];at(r)&&ns(n,r,s)}}function wu(s){const t=s.type,{mixins:e,extends:i}=t,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=s.appContext,l=r.get(t);let a;return l?a=l:!n.length&&!e&&!i?a=t:(a={},n.length&&n.forEach(h=>pn(a,h,o,!0)),pn(a,t,o)),xt(t)&&r.set(t,a),a}function pn(s,t,e,i=!1){const{mixins:n,extends:r}=t;r&&pn(s,r,e,!0),n&&n.forEach(o=>pn(s,o,e,!0));for(const o in t)if(!(i&&o==="expose")){const l=Qc[o]||e&&e[o];s[o]=l?l(s[o],t[o]):t[o]}return s}const Qc={data:Qo,props:Zo,emits:Zo,methods:si,computed:si,beforeCreate:Kt,created:Kt,beforeMount:Kt,mounted:Kt,beforeUpdate:Kt,updated:Kt,beforeDestroy:Kt,beforeUnmount:Kt,destroyed:Kt,unmounted:Kt,activated:Kt,deactivated:Kt,errorCaptured:Kt,serverPrefetch:Kt,components:si,directives:si,watch:td,provide:Qo,inject:Zc};function Qo(s,t){return t?s?function(){return zt(at(s)?s.call(this,this):s,at(t)?t.call(this,this):t)}:t:s}function Zc(s,t){return si(Lr(s),Lr(t))}function Lr(s){if(et(s)){const t={};for(let e=0;e<s.length;e++)t[s[e]]=s[e];return t}return s}function Kt(s,t){return s?[...new Set([].concat(s,t))]:t}function si(s,t){return s?zt(Object.create(null),s,t):t}function Zo(s,t){return s?et(s)&&et(t)?[...new Set([...s,...t])]:zt(Object.create(null),Xo(s),Xo(t??{})):t}function td(s,t){if(!s)return t;if(!t)return s;const e=zt(Object.create(null),s);for(const i in t)e[i]=Kt(s[i],t[i]);return e}function Su(){return{app:null,config:{isNativeTag:Na,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ed=0;function sd(s,t){return function(i,n=null){at(i)||(i=zt({},i)),n!=null&&!xt(n)&&(n=null);const r=Su(),o=new WeakSet,l=[];let a=!1;const h=r.app={_uid:ed++,_component:i,_props:n,_container:null,_context:r,_instance:null,version:Nd,get config(){return r.config},set config(c){},use(c,...d){return o.has(c)||(c&&at(c.install)?(o.add(c),c.install(h,...d)):at(c)&&(o.add(c),c(h,...d))),h},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),h},component(c,d){return d?(r.components[c]=d,h):r.components[c]},directive(c,d){return d?(r.directives[c]=d,h):r.directives[c]},mount(c,d,f){if(!a){const p=h._ceVNode||Y(i,n);return p.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),s(p,c,f),a=!0,h._container=c,c.__vue_app__=h,An(p.component)}},onUnmount(c){l.push(c)},unmount(){a&&(Ne(l,h._instance,16),s(null,h._container),delete h._container.__vue_app__)},provide(c,d){return r.provides[c]=d,h},runWithContext(c){const d=Is;Is=h;try{return c()}finally{Is=d}}};return h}}let Is=null;const id=(s,t)=>t==="modelValue"||t==="model-value"?s.modelModifiers:s[`${t}Modifiers`]||s[`${os(t)}Modifiers`]||s[`${as(t)}Modifiers`];function nd(s,t,...e){if(s.isUnmounted)return;const i=s.vnode.props||St;let n=e;const r=t.startsWith("update:"),o=r&&id(i,t.slice(7));o&&(o.trim&&(n=e.map(c=>Rt(c)?c.trim():c)),o.number&&(n=e.map(Sn)));let l,a=i[l=Un(t)]||i[l=Un(os(t))];!a&&r&&(a=i[l=Un(as(t))]),a&&Ne(a,s,6,n);const h=i[l+"Once"];if(h){if(!s.emitted)s.emitted={};else if(s.emitted[l])return;s.emitted[l]=!0,Ne(h,s,6,n)}}const rd=new WeakMap;function xu(s,t,e=!1){const i=e?rd:t.emitsCache,n=i.get(s);if(n!==void 0)return n;const r=s.emits;let o={},l=!1;if(!at(s)){const a=h=>{const c=xu(h,t,!0);c&&(l=!0,zt(o,c))};!e&&t.mixins.length&&t.mixins.forEach(a),s.extends&&a(s.extends),s.mixins&&s.mixins.forEach(a)}return!r&&!l?(xt(s)&&i.set(s,null),null):(et(r)?r.forEach(a=>o[a]=null):zt(o,r),xt(s)&&i.set(s,o),o)}function Tn(s,t){return!s||!_n(t)?!1:(t=t.slice(2).replace(/Once$/,""),_t(s,t[0].toLowerCase()+t.slice(1))||_t(s,as(t))||_t(s,t))}function tl(s){const{type:t,vnode:e,proxy:i,withProxy:n,propsOptions:[r],slots:o,attrs:l,emit:a,render:h,renderCache:c,props:d,data:f,setupState:p,ctx:m,inheritAttrs:g}=s,y=dn(s);let _,E;try{if(e.shapeFlag&4){const I=n||i,X=I;_=Ae(h.call(X,I,c,d,p,f,m)),E=l}else{const I=t;_=Ae(I.length>1?I(d,{attrs:l,slots:o,emit:a}):I(d,null)),E=t.props?l:od(l)}}catch(I){ui.length=0,En(I,s,1),_=Y(je)}let F=_;if(E&&g!==!1){const I=Object.keys(E),{shapeFlag:X}=F;I.length&&X&7&&(r&&I.some(so)&&(E=ld(E,r)),F=Fs(F,E,!1,!0))}return e.dirs&&(F=Fs(F,null,!1,!0),F.dirs=F.dirs?F.dirs.concat(e.dirs):e.dirs),e.transition&&mo(F,e.transition),_=F,dn(y),_}const od=s=>{let t;for(const e in s)(e==="class"||e==="style"||_n(e))&&((t||(t={}))[e]=s[e]);return t},ld=(s,t)=>{const e={};for(const i in s)(!so(i)||!(i.slice(9)in t))&&(e[i]=s[i]);return e};function ad(s,t,e){const{props:i,children:n,component:r}=s,{props:o,children:l,patchFlag:a}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&a>=0){if(a&1024)return!0;if(a&16)return i?el(i,o,h):!!o;if(a&8){const c=t.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(o[f]!==i[f]&&!Tn(h,f))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:i===o?!1:i?o?el(i,o,h):!0:!!o;return!1}function el(s,t,e){const i=Object.keys(t);if(i.length!==Object.keys(s).length)return!0;for(let n=0;n<i.length;n++){const r=i[n];if(t[r]!==s[r]&&!Tn(e,r))return!0}return!1}function ud({vnode:s,parent:t},e){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===s&&(i.el=s.el),i===s)(s=t.vnode).el=e,t=t.parent;else break}}const Cu={},Eu=()=>Object.create(Cu),ku=s=>Object.getPrototypeOf(s)===Cu;function hd(s,t,e,i=!1){const n={},r=Eu();s.propsDefaults=Object.create(null),Tu(s,t,n,r);for(const o in s.propsOptions[0])o in n||(n[o]=void 0);e?s.props=i?n:iu(n):s.type.props?s.props=n:s.props=r,s.attrs=r}function cd(s,t,e,i){const{props:n,attrs:r,vnode:{patchFlag:o}}=s,l=yt(n),[a]=s.propsOptions;let h=!1;if((i||o>0)&&!(o&16)){if(o&8){const c=s.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(Tn(s.emitsOptions,f))continue;const p=t[f];if(a)if(_t(r,f))p!==r[f]&&(r[f]=p,h=!0);else{const m=os(f);n[m]=Pr(a,l,m,p,s,!1)}else p!==r[f]&&(r[f]=p,h=!0)}}}else{Tu(s,t,n,r)&&(h=!0);let c;for(const d in l)(!t||!_t(t,d)&&((c=as(d))===d||!_t(t,c)))&&(a?e&&(e[d]!==void 0||e[c]!==void 0)&&(n[d]=Pr(a,l,d,void 0,s,!0)):delete n[d]);if(r!==l)for(const d in r)(!t||!_t(t,d))&&(delete r[d],h=!0)}h&&Ve(s.attrs,"set","")}function Tu(s,t,e,i){const[n,r]=s.propsOptions;let o=!1,l;if(t)for(let a in t){if(ni(a))continue;const h=t[a];let c;n&&_t(n,c=os(a))?!r||!r.includes(c)?e[c]=h:(l||(l={}))[c]=h:Tn(s.emitsOptions,a)||(!(a in i)||h!==i[a])&&(i[a]=h,o=!0)}if(r){const a=yt(e),h=l||St;for(let c=0;c<r.length;c++){const d=r[c];e[d]=Pr(n,a,d,h[d],s,!_t(h,d))}}return o}function Pr(s,t,e,i,n,r){const o=s[e];if(o!=null){const l=_t(o,"default");if(l&&i===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&at(a)){const{propsDefaults:h}=n;if(e in h)i=h[e];else{const c=Li(n);i=h[e]=a.call(null,t),c()}}else i=a;n.ce&&n.ce._setProp(e,i)}o[0]&&(r&&!l?i=!1:o[1]&&(i===""||i===as(e))&&(i=!0))}return i}const dd=new WeakMap;function Mu(s,t,e=!1){const i=e?dd:t.propsCache,n=i.get(s);if(n)return n;const r=s.props,o={},l=[];let a=!1;if(!at(s)){const c=d=>{a=!0;const[f,p]=Mu(d,t,!0);zt(o,f),p&&l.push(...p)};!e&&t.mixins.length&&t.mixins.forEach(c),s.extends&&c(s.extends),s.mixins&&s.mixins.forEach(c)}if(!r&&!a)return xt(s)&&i.set(s,Rs),Rs;if(et(r))for(let c=0;c<r.length;c++){const d=os(r[c]);sl(d)&&(o[d]=St)}else if(r)for(const c in r){const d=os(c);if(sl(d)){const f=r[c],p=o[d]=et(f)||at(f)?{type:f}:zt({},f),m=p.type;let g=!1,y=!0;if(et(m))for(let _=0;_<m.length;++_){const E=m[_],F=at(E)&&E.name;if(F==="Boolean"){g=!0;break}else F==="String"&&(y=!1)}else g=at(m)&&m.name==="Boolean";p[0]=g,p[1]=y,(g||_t(p,"default"))&&l.push(d)}}const h=[o,l];return xt(s)&&i.set(s,h),h}function sl(s){return s[0]!=="$"&&!ni(s)}const vo=s=>s==="_"||s==="_ctx"||s==="$stable",go=s=>et(s)?s.map(Ae):[Ae(s)],fd=(s,t,e)=>{if(t._n)return t;const i=it((...n)=>go(t(...n)),e);return i._c=!1,i},Au=(s,t,e)=>{const i=s._ctx;for(const n in s){if(vo(n))continue;const r=s[n];if(at(r))t[n]=fd(n,r,i);else if(r!=null){const o=go(r);t[n]=()=>o}}},Ou=(s,t)=>{const e=go(t);s.slots.default=()=>e},Lu=(s,t,e)=>{for(const i in t)(e||!vo(i))&&(s[i]=t[i])},pd=(s,t,e)=>{const i=s.slots=Eu();if(s.vnode.shapeFlag&32){const n=t._;n?(Lu(i,t,e),e&&Va(i,"_",n,!0)):Au(t,i)}else t&&Ou(s,t)},md=(s,t,e)=>{const{vnode:i,slots:n}=s;let r=!0,o=St;if(i.shapeFlag&32){const l=t._;l?e&&l===1?r=!1:Lu(n,t,e):(r=!t.$stable,Au(t,n)),o=t}else t&&(Ou(s,t),o={default:1});if(r)for(const l in n)!vo(l)&&o[l]==null&&delete n[l]},le=_d;function vd(s){return gd(s)}function gd(s,t){const e=xn();e.__VUE__=!0;const{insert:i,remove:n,patchProp:r,createElement:o,createText:l,createComment:a,setText:h,setElementText:c,parentNode:d,nextSibling:f,setScopeId:p=Le,insertStaticContent:m}=s,g=(v,b,S,L=null,R=null,O=null,W=void 0,q=null,z=!!b.dynamicChildren)=>{if(v===b)return;v&&!Qs(v,b)&&(L=N(v),It(v,R,O,!0),v=null),b.patchFlag===-2&&(z=!1,b.dynamicChildren=null);const{type:D,ref:Q,shapeFlag:G}=b;switch(D){case Mn:y(v,b,S,L);break;case je:_(v,b,S,L);break;case en:v==null&&E(b,S,L,W);break;case mt:At(v,b,S,L,R,O,W,q,z);break;default:G&1?X(v,b,S,L,R,O,W,q,z):G&6?Tt(v,b,S,L,R,O,W,q,z):(G&64||G&128)&&D.process(v,b,S,L,R,O,W,q,z,A)}Q!=null&&R?li(Q,v&&v.ref,O,b||v,!b):Q==null&&v&&v.ref!=null&&li(v.ref,null,O,v,!0)},y=(v,b,S,L)=>{if(v==null)i(b.el=l(b.children),S,L);else{const R=b.el=v.el;b.children!==v.children&&h(R,b.children)}},_=(v,b,S,L)=>{v==null?i(b.el=a(b.children||""),S,L):b.el=v.el},E=(v,b,S,L)=>{[v.el,v.anchor]=m(v.children,b,S,L,v.el,v.anchor)},F=({el:v,anchor:b},S,L)=>{let R;for(;v&&v!==b;)R=f(v),i(v,S,L),v=R;i(b,S,L)},I=({el:v,anchor:b})=>{let S;for(;v&&v!==b;)S=f(v),n(v),v=S;n(b)},X=(v,b,S,L,R,O,W,q,z)=>{if(b.type==="svg"?W="svg":b.type==="math"&&(W="mathml"),v==null)rt(b,S,L,R,O,W,q,z);else{const D=v.el&&v.el._isVueCE?v.el:null;try{D&&D._beginPatch(),T(v,b,R,O,W,q,z)}finally{D&&D._endPatch()}}},rt=(v,b,S,L,R,O,W,q)=>{let z,D;const{props:Q,shapeFlag:G,transition:Z,dirs:ot}=v;if(z=v.el=o(v.type,O,Q&&Q.is,Q),G&8?c(z,v.children):G&16&&B(v.children,z,null,L,R,jn(v,O),W,q),ot&&cs(v,null,L,"created"),tt(z,v,v.scopeId,W,L),Q){for(const Ct in Q)Ct!=="value"&&!ni(Ct)&&r(z,Ct,null,Q[Ct],O,L);"value"in Q&&r(z,"value",null,Q.value,O),(D=Q.onVnodeBeforeMount)&&ke(D,L,v)}ot&&cs(v,null,L,"beforeMount");const pt=bd(R,Z);pt&&Z.beforeEnter(z),i(z,b,S),((D=Q&&Q.onVnodeMounted)||pt||ot)&&le(()=>{D&&ke(D,L,v),pt&&Z.enter(z),ot&&cs(v,null,L,"mounted")},R)},tt=(v,b,S,L,R)=>{if(S&&p(v,S),L)for(let O=0;O<L.length;O++)p(v,L[O]);if(R){let O=R.subTree;if(b===O||$u(O.type)&&(O.ssContent===b||O.ssFallback===b)){const W=R.vnode;tt(v,W,W.scopeId,W.slotScopeIds,R.parent)}}},B=(v,b,S,L,R,O,W,q,z=0)=>{for(let D=z;D<v.length;D++){const Q=v[D]=q?ts(v[D]):Ae(v[D]);g(null,Q,b,S,L,R,O,W,q)}},T=(v,b,S,L,R,O,W)=>{const q=b.el=v.el;let{patchFlag:z,dynamicChildren:D,dirs:Q}=b;z|=v.patchFlag&16;const G=v.props||St,Z=b.props||St;let ot;if(S&&ds(S,!1),(ot=Z.onVnodeBeforeUpdate)&&ke(ot,S,b,v),Q&&cs(b,v,S,"beforeUpdate"),S&&ds(S,!0),(G.innerHTML&&Z.innerHTML==null||G.textContent&&Z.textContent==null)&&c(q,""),D?w(v.dynamicChildren,D,q,S,L,jn(b,R),O):W||P(v,b,q,null,S,L,jn(b,R),O,!1),z>0){if(z&16)H(q,G,Z,S,R);else if(z&2&&G.class!==Z.class&&r(q,"class",null,Z.class,R),z&4&&r(q,"style",G.style,Z.style,R),z&8){const pt=b.dynamicProps;for(let Ct=0;Ct<pt.length;Ct++){const wt=pt[Ct],te=G[wt],ee=Z[wt];(ee!==te||wt==="value")&&r(q,wt,te,ee,R,S)}}z&1&&v.children!==b.children&&c(q,b.children)}else!W&&D==null&&H(q,G,Z,S,R);((ot=Z.onVnodeUpdated)||Q)&&le(()=>{ot&&ke(ot,S,b,v),Q&&cs(b,v,S,"updated")},L)},w=(v,b,S,L,R,O,W)=>{for(let q=0;q<b.length;q++){const z=v[q],D=b[q],Q=z.el&&(z.type===mt||!Qs(z,D)||z.shapeFlag&198)?d(z.el):S;g(z,D,Q,null,L,R,O,W,!0)}},H=(v,b,S,L,R)=>{if(b!==S){if(b!==St)for(const O in b)!ni(O)&&!(O in S)&&r(v,O,b[O],null,R,L);for(const O in S){if(ni(O))continue;const W=S[O],q=b[O];W!==q&&O!=="value"&&r(v,O,q,W,R,L)}"value"in S&&r(v,"value",b.value,S.value,R)}},At=(v,b,S,L,R,O,W,q,z)=>{const D=b.el=v?v.el:l(""),Q=b.anchor=v?v.anchor:l("");let{patchFlag:G,dynamicChildren:Z,slotScopeIds:ot}=b;ot&&(q=q?q.concat(ot):ot),v==null?(i(D,S,L),i(Q,S,L),B(b.children||[],S,Q,R,O,W,q,z)):G>0&&G&64&&Z&&v.dynamicChildren&&v.dynamicChildren.length===Z.length?(w(v.dynamicChildren,Z,S,R,O,W,q),(b.key!=null||R&&b===R.subTree)&&Pu(v,b,!0)):P(v,b,S,Q,R,O,W,q,z)},Tt=(v,b,S,L,R,O,W,q,z)=>{b.slotScopeIds=q,v==null?b.shapeFlag&512?R.ctx.activate(b,S,L,W,z):Qt(b,S,L,R,O,W,z):Wt(v,b,z)},Qt=(v,b,S,L,R,O,W)=>{const q=v.component=Td(v,L,R);if(mu(v)&&(q.ctx.renderer=A),Ad(q,!1,W),q.asyncDep){if(R&&R.registerDep(q,gt,W),!v.el){const z=q.subTree=Y(je);_(null,z,b,S),v.placeholder=z.el}}else gt(q,v,b,S,R,O,W)},Wt=(v,b,S)=>{const L=b.component=v.component;if(ad(v,b,S))if(L.asyncDep&&!L.asyncResolved){U(L,b,S);return}else L.next=b,L.update();else b.el=v.el,L.vnode=b},gt=(v,b,S,L,R,O,W)=>{const q=()=>{if(v.isMounted){let{next:G,bu:Z,u:ot,parent:pt,vnode:Ct}=v;{const Ce=Ru(v);if(Ce){G&&(G.el=Ct.el,U(v,G,W)),Ce.asyncDep.then(()=>{v.isUnmounted||q()});return}}let wt=G,te;ds(v,!1),G?(G.el=Ct.el,U(v,G,W)):G=Ct,Z&&Zi(Z),(te=G.props&&G.props.onVnodeBeforeUpdate)&&ke(te,pt,G,Ct),ds(v,!0);const ee=tl(v),xe=v.subTree;v.subTree=ee,g(xe,ee,d(xe.el),N(xe),v,R,O),G.el=ee.el,wt===null&&ud(v,ee.el),ot&&le(ot,R),(te=G.props&&G.props.onVnodeUpdated)&&le(()=>ke(te,pt,G,Ct),R)}else{let G;const{el:Z,props:ot}=b,{bm:pt,m:Ct,parent:wt,root:te,type:ee}=v,xe=Ds(b);ds(v,!1),pt&&Zi(pt),!xe&&(G=ot&&ot.onVnodeBeforeMount)&&ke(G,wt,b),ds(v,!0);{te.ce&&te.ce._def.shadowRoot!==!1&&te.ce._injectChildStyle(ee);const Ce=v.subTree=tl(v);g(null,Ce,S,L,v,R,O),b.el=Ce.el}if(Ct&&le(Ct,R),!xe&&(G=ot&&ot.onVnodeMounted)){const Ce=b;le(()=>ke(G,wt,Ce),R)}(b.shapeFlag&256||wt&&Ds(wt.vnode)&&wt.vnode.shapeFlag&256)&&v.a&&le(v.a,R),v.isMounted=!0,b=S=L=null}};v.scope.on();const z=v.effect=new qa(q);v.scope.off();const D=v.update=z.run.bind(z),Q=v.job=z.runIfDirty.bind(z);Q.i=v,Q.id=v.uid,z.scheduler=()=>po(Q),ds(v,!0),D()},U=(v,b,S)=>{b.component=v;const L=v.vnode.props;v.vnode=b,v.next=null,cd(v,b.props,L,S),md(v,b.children,S),We(),Go(v),He()},P=(v,b,S,L,R,O,W,q,z=!1)=>{const D=v&&v.children,Q=v?v.shapeFlag:0,G=b.children,{patchFlag:Z,shapeFlag:ot}=b;if(Z>0){if(Z&128){Ht(D,G,S,L,R,O,W,q,z);return}else if(Z&256){ht(D,G,S,L,R,O,W,q,z);return}}ot&8?(Q&16&&Zt(D,R,O),G!==D&&c(S,G)):Q&16?ot&16?Ht(D,G,S,L,R,O,W,q,z):Zt(D,R,O,!0):(Q&8&&c(S,""),ot&16&&B(G,S,L,R,O,W,q,z))},ht=(v,b,S,L,R,O,W,q,z)=>{v=v||Rs,b=b||Rs;const D=v.length,Q=b.length,G=Math.min(D,Q);let Z;for(Z=0;Z<G;Z++){const ot=b[Z]=z?ts(b[Z]):Ae(b[Z]);g(v[Z],ot,S,null,R,O,W,q,z)}D>Q?Zt(v,R,O,!0,!1,G):B(b,S,L,R,O,W,q,z,G)},Ht=(v,b,S,L,R,O,W,q,z)=>{let D=0;const Q=b.length;let G=v.length-1,Z=Q-1;for(;D<=G&&D<=Z;){const ot=v[D],pt=b[D]=z?ts(b[D]):Ae(b[D]);if(Qs(ot,pt))g(ot,pt,S,null,R,O,W,q,z);else break;D++}for(;D<=G&&D<=Z;){const ot=v[G],pt=b[Z]=z?ts(b[Z]):Ae(b[Z]);if(Qs(ot,pt))g(ot,pt,S,null,R,O,W,q,z);else break;G--,Z--}if(D>G){if(D<=Z){const ot=Z+1,pt=ot<Q?b[ot].el:L;for(;D<=Z;)g(null,b[D]=z?ts(b[D]):Ae(b[D]),S,pt,R,O,W,q,z),D++}}else if(D>Z)for(;D<=G;)It(v[D],R,O,!0),D++;else{const ot=D,pt=D,Ct=new Map;for(D=pt;D<=Z;D++){const oe=b[D]=z?ts(b[D]):Ae(b[D]);oe.key!=null&&Ct.set(oe.key,D)}let wt,te=0;const ee=Z-pt+1;let xe=!1,Ce=0;const Xs=new Array(ee);for(D=0;D<ee;D++)Xs[D]=0;for(D=ot;D<=G;D++){const oe=v[D];if(te>=ee){It(oe,R,O,!0);continue}let Ee;if(oe.key!=null)Ee=Ct.get(oe.key);else for(wt=pt;wt<=Z;wt++)if(Xs[wt-pt]===0&&Qs(oe,b[wt])){Ee=wt;break}Ee===void 0?It(oe,R,O,!0):(Xs[Ee-pt]=D+1,Ee>=Ce?Ce=Ee:xe=!0,g(oe,b[Ee],S,null,R,O,W,q,z),te++)}const Uo=xe?yd(Xs):Rs;for(wt=Uo.length-1,D=ee-1;D>=0;D--){const oe=pt+D,Ee=b[oe],zo=b[oe+1],qo=oe+1<Q?zo.el||Nu(zo):L;Xs[D]===0?g(null,Ee,S,qo,R,O,W,q,z):xe&&(wt<0||D!==Uo[wt]?Nt(Ee,S,qo,2):wt--)}}},Nt=(v,b,S,L,R=null)=>{const{el:O,type:W,transition:q,children:z,shapeFlag:D}=v;if(D&6){Nt(v.component.subTree,b,S,L);return}if(D&128){v.suspense.move(b,S,L);return}if(D&64){W.move(v,b,S,A);return}if(W===mt){i(O,b,S);for(let G=0;G<z.length;G++)Nt(z[G],b,S,L);i(v.anchor,b,S);return}if(W===en){F(v,b,S);return}if(L!==2&&D&1&&q)if(L===0)q.beforeEnter(O),i(O,b,S),le(()=>q.enter(O),R);else{const{leave:G,delayLeave:Z,afterLeave:ot}=q,pt=()=>{v.ctx.isUnmounted?n(O):i(O,b,S)},Ct=()=>{O._isLeaving&&O[Ic](!0),G(O,()=>{pt(),ot&&ot()})};Z?Z(O,pt,Ct):Ct()}else i(O,b,S)},It=(v,b,S,L=!1,R=!1)=>{const{type:O,props:W,ref:q,children:z,dynamicChildren:D,shapeFlag:Q,patchFlag:G,dirs:Z,cacheIndex:ot}=v;if(G===-2&&(R=!1),q!=null&&(We(),li(q,null,S,v,!0),He()),ot!=null&&(b.renderCache[ot]=void 0),Q&256){b.ctx.deactivate(v);return}const pt=Q&1&&Z,Ct=!Ds(v);let wt;if(Ct&&(wt=W&&W.onVnodeBeforeUnmount)&&ke(wt,b,v),Q&6)Se(v.component,S,L);else{if(Q&128){v.suspense.unmount(S,L);return}pt&&cs(v,null,b,"beforeUnmount"),Q&64?v.type.remove(v,b,S,A,L):D&&!D.hasOnce&&(O!==mt||G>0&&G&64)?Zt(D,b,S,!1,!0):(O===mt&&G&384||!R&&Q&16)&&Zt(z,b,S),L&&_e(v)}(Ct&&(wt=W&&W.onVnodeUnmounted)||pt)&&le(()=>{wt&&ke(wt,b,v),pt&&cs(v,null,b,"unmounted")},S)},_e=v=>{const{type:b,el:S,anchor:L,transition:R}=v;if(b===mt){we(S,L);return}if(b===en){I(v);return}const O=()=>{n(S),R&&!R.persisted&&R.afterLeave&&R.afterLeave()};if(v.shapeFlag&1&&R&&!R.persisted){const{leave:W,delayLeave:q}=R,z=()=>W(S,O);q?q(v.el,O,z):z()}else O()},we=(v,b)=>{let S;for(;v!==b;)S=f(v),n(v),v=S;n(b)},Se=(v,b,S)=>{const{bum:L,scope:R,job:O,subTree:W,um:q,m:z,a:D}=v;il(z),il(D),L&&Zi(L),R.stop(),O&&(O.flags|=8,It(W,v,b,S)),q&&le(q,b),le(()=>{v.isUnmounted=!0},b)},Zt=(v,b,S,L=!1,R=!1,O=0)=>{for(let W=O;W<v.length;W++)It(v[W],b,S,L,R)},N=v=>{if(v.shapeFlag&6)return N(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const b=f(v.anchor||v.el),S=b&&b[$c];return S?f(S):b};let J=!1;const k=(v,b,S)=>{let L;v==null?b._vnode&&(It(b._vnode,null,null,!0),L=b._vnode.component):g(b._vnode||null,v,b,null,null,null,S),b._vnode=v,J||(J=!0,Go(L),au(),J=!1)},A={p:g,um:It,m:Nt,r:_e,mt:Qt,mc:B,pc:P,pbc:w,n:N,o:s};return{render:k,hydrate:void 0,createApp:sd(k)}}function jn({type:s,props:t},e){return e==="svg"&&s==="foreignObject"||e==="mathml"&&s==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function ds({effect:s,job:t},e){e?(s.flags|=32,t.flags|=4):(s.flags&=-33,t.flags&=-5)}function bd(s,t){return(!s||s&&!s.pendingBranch)&&t&&!t.persisted}function Pu(s,t,e=!1){const i=s.children,n=t.children;if(et(i)&&et(n))for(let r=0;r<i.length;r++){const o=i[r];let l=n[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[r]=ts(n[r]),l.el=o.el),!e&&l.patchFlag!==-2&&Pu(o,l)),l.type===Mn&&(l.patchFlag!==-1?l.el=o.el:l.__elIndex=r+(s.type===mt?1:0)),l.type===je&&!l.el&&(l.el=o.el)}}function yd(s){const t=s.slice(),e=[0];let i,n,r,o,l;const a=s.length;for(i=0;i<a;i++){const h=s[i];if(h!==0){if(n=e[e.length-1],s[n]<h){t[i]=n,e.push(i);continue}for(r=0,o=e.length-1;r<o;)l=r+o>>1,s[e[l]]<h?r=l+1:o=l;h<s[e[r]]&&(r>0&&(t[i]=e[r-1]),e[r]=i)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=t[o];return e}function Ru(s){const t=s.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Ru(t)}function il(s){if(s)for(let t=0;t<s.length;t++)s[t].flags|=8}function Nu(s){if(s.placeholder)return s.placeholder;const t=s.component;return t?Nu(t.subTree):null}const $u=s=>s.__isSuspense;function _d(s,t){t&&t.pendingBranch?et(s)?t.effects.push(...s):t.effects.push(s):Lc(s)}const mt=Symbol.for("v-fgt"),Mn=Symbol.for("v-txt"),je=Symbol.for("v-cmt"),en=Symbol.for("v-stc"),ui=[];let ae=null;function C(s=!1){ui.push(ae=s?null:[])}function wd(){ui.pop(),ae=ui[ui.length-1]||null}let bi=1;function mn(s,t=!1){bi+=s,s<0&&ae&&t&&(ae.hasOnce=!0)}function Du(s){return s.dynamicChildren=bi>0?ae||Rs:null,wd(),bi>0&&ae&&ae.push(s),s}function M(s,t,e,i,n,r){return Du(u(s,t,e,i,n,r,!0))}function qt(s,t,e,i,n){return Du(Y(s,t,e,i,n,!0))}function yi(s){return s?s.__v_isVNode===!0:!1}function Qs(s,t){return s.type===t.type&&s.key===t.key}const Iu=({key:s})=>s??null,sn=({ref:s,ref_key:t,ref_for:e})=>(typeof s=="number"&&(s=""+s),s!=null?Rt(s)||Ut(s)||at(s)?{i:Ft,r:s,k:t,f:!!e}:s:null);function u(s,t=null,e=null,i=0,n=null,r=s===mt?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:s,props:t,key:t&&Iu(t),ref:t&&sn(t),scopeId:hu,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Ft};return l?(yo(a,e),r&128&&s.normalize(a)):e&&(a.shapeFlag|=Rt(e)?8:16),bi>0&&!o&&ae&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&ae.push(a),a}const Y=Sd;function Sd(s,t=null,e=null,i=0,n=null,r=!1){if((!s||s===Gc)&&(s=je),yi(s)){const l=Fs(s,t,!0);return e&&yo(l,e),bi>0&&!r&&ae&&(l.shapeFlag&6?ae[ae.indexOf(s)]=l:ae.push(l)),l.patchFlag=-2,l}if(Rd(s)&&(s=s.__vccOpts),t){t=xd(t);let{class:l,style:a}=t;l&&!Rt(l)&&(t.class=ue(l)),xt(a)&&(fo(a)&&!et(a)&&(a=zt({},a)),t.style=Mi(a))}const o=Rt(s)?1:$u(s)?128:Dc(s)?64:xt(s)?4:at(s)?2:0;return u(s,t,e,i,n,o,r,!0)}function xd(s){return s?fo(s)||ku(s)?zt({},s):s:null}function Fs(s,t,e=!1,i=!1){const{props:n,ref:r,patchFlag:o,children:l,transition:a}=s,h=t?Cd(n||{},t):n,c={__v_isVNode:!0,__v_skip:!0,type:s.type,props:h,key:h&&Iu(h),ref:t&&t.ref?e&&r?et(r)?r.concat(sn(t)):[r,sn(t)]:sn(t):r,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:l,target:s.target,targetStart:s.targetStart,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:t&&s.type!==mt?o===-1?16:o|16:o,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:a,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&Fs(s.ssContent),ssFallback:s.ssFallback&&Fs(s.ssFallback),placeholder:s.placeholder,el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return a&&i&&mo(c,a.clone(c)),c}function ut(s=" ",t=0){return Y(Mn,null,s,t)}function bo(s,t){const e=Y(en,null,s);return e.staticCount=t,e}function j(s="",t=!1){return t?(C(),qt(je,null,s)):Y(je,null,s)}function Ae(s){return s==null||typeof s=="boolean"?Y(je):et(s)?Y(mt,null,s.slice()):yi(s)?ts(s):Y(Mn,null,String(s))}function ts(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:Fs(s)}function yo(s,t){let e=0;const{shapeFlag:i}=s;if(t==null)t=null;else if(et(t))e=16;else if(typeof t=="object")if(i&65){const n=t.default;n&&(n._c&&(n._d=!1),yo(s,n()),n._c&&(n._d=!0));return}else{e=32;const n=t._;!n&&!ku(t)?t._ctx=Ft:n===3&&Ft&&(Ft.slots._===1?t._=1:(t._=2,s.patchFlag|=1024))}else at(t)?(t={default:t,_ctx:Ft},e=32):(t=String(t),i&64?(e=16,t=[ut(t)]):e=8);s.children=t,s.shapeFlag|=e}function Cd(...s){const t={};for(let e=0;e<s.length;e++){const i=s[e];for(const n in i)if(n==="class")t.class!==i.class&&(t.class=ue([t.class,i.class]));else if(n==="style")t.style=Mi([t.style,i.style]);else if(_n(n)){const r=t[n],o=i[n];o&&r!==o&&!(et(r)&&r.includes(o))&&(t[n]=r?[].concat(r,o):o)}else n!==""&&(t[n]=i[n])}return t}function ke(s,t,e,i=null){Ne(s,t,7,[e,i])}const Ed=Su();let kd=0;function Td(s,t,e){const i=s.type,n=(t?t.appContext:s.appContext)||Ed,r={uid:kd++,vnode:s,type:i,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ec(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Mu(i,n),emitsOptions:xu(i,n),emit:null,emitted:null,propsDefaults:St,inheritAttrs:i.inheritAttrs,ctx:St,data:St,props:St,attrs:St,slots:St,refs:St,setupState:St,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=nd.bind(null,r),s.ce&&s.ce(r),r}let Jt=null;const Md=()=>Jt||Ft;let vn,Rr;{const s=xn(),t=(e,i)=>{let n;return(n=s[e])||(n=s[e]=[]),n.push(i),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};vn=t("__VUE_INSTANCE_SETTERS__",e=>Jt=e),Rr=t("__VUE_SSR_SETTERS__",e=>_i=e)}const Li=s=>{const t=Jt;return vn(s),s.scope.on(),()=>{s.scope.off(),vn(t)}},nl=()=>{Jt&&Jt.scope.off(),vn(null)};function Bu(s){return s.vnode.shapeFlag&4}let _i=!1;function Ad(s,t=!1,e=!1){t&&Rr(t);const{props:i,children:n}=s.vnode,r=Bu(s);hd(s,i,r,t),pd(s,n,e||t);const o=r?Od(s,t):void 0;return t&&Rr(!1),o}function Od(s,t){const e=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,Jc);const{setup:i}=e;if(i){We();const n=s.setupContext=i.length>1?Pd(s):null,r=Li(s),o=Oi(i,s,0,[s.props,n]),l=$a(o);if(He(),r(),(l||s.sp)&&!Ds(s)&&pu(s),l){if(o.then(nl,nl),t)return o.then(a=>{rl(s,a)}).catch(a=>{En(a,s,0)});s.asyncDep=o}else rl(s,o)}else Vu(s)}function rl(s,t,e){at(t)?s.type.__ssrInlineRender?s.ssrRender=t:s.render=t:xt(t)&&(s.setupState=ru(t)),Vu(s)}function Vu(s,t,e){const i=s.type;s.render||(s.render=i.render||Le);{const n=Li(s);We();try{Xc(s)}finally{He(),n()}}}const Ld={get(s,t){return Bt(s,"get",""),s[t]}};function Pd(s){const t=e=>{s.exposed=e||{}};return{attrs:new Proxy(s.attrs,Ld),slots:s.slots,emit:s.emit,expose:t}}function An(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(ru(wc(s.exposed)),{get(t,e){if(e in t)return t[e];if(e in ai)return ai[e](s)},has(t,e){return e in t||e in ai}})):s.proxy}function Rd(s){return at(s)&&"__vccOpts"in s}const vt=(s,t)=>kc(s,t,_i);function Fu(s,t,e){try{mn(-1);const i=arguments.length;return i===2?xt(t)&&!et(t)?yi(t)?Y(s,null,[t]):Y(s,t):Y(s,null,t):(i>3?e=Array.prototype.slice.call(arguments,2):i===3&&yi(e)&&(e=[e]),Y(s,t,e))}finally{mn(1)}}const Nd="3.5.26";let Nr;const ol=typeof window<"u"&&window.trustedTypes;if(ol)try{Nr=ol.createPolicy("vue",{createHTML:s=>s})}catch{}const Uu=Nr?s=>Nr.createHTML(s):s=>s,$d="http://www.w3.org/2000/svg",Dd="http://www.w3.org/1998/Math/MathML",Be=typeof document<"u"?document:null,ll=Be&&Be.createElement("template"),Id={insert:(s,t,e)=>{t.insertBefore(s,e||null)},remove:s=>{const t=s.parentNode;t&&t.removeChild(s)},createElement:(s,t,e,i)=>{const n=t==="svg"?Be.createElementNS($d,s):t==="mathml"?Be.createElementNS(Dd,s):e?Be.createElement(s,{is:e}):Be.createElement(s);return s==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:s=>Be.createTextNode(s),createComment:s=>Be.createComment(s),setText:(s,t)=>{s.nodeValue=t},setElementText:(s,t)=>{s.textContent=t},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>Be.querySelector(s),setScopeId(s,t){s.setAttribute(t,"")},insertStaticContent(s,t,e,i,n,r){const o=e?e.previousSibling:t.lastChild;if(n&&(n===r||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),e),!(n===r||!(n=n.nextSibling)););else{ll.innerHTML=Uu(i==="svg"?`<svg>${s}</svg>`:i==="mathml"?`<math>${s}</math>`:s);const l=ll.content;if(i==="svg"||i==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}t.insertBefore(l,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},Bd=Symbol("_vtc");function Vd(s,t,e){const i=s[Bd];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?s.removeAttribute("class"):e?s.setAttribute("class",t):s.className=t}const al=Symbol("_vod"),Fd=Symbol("_vsh"),Ud=Symbol(""),zd=/(?:^|;)\s*display\s*:/;function qd(s,t,e){const i=s.style,n=Rt(e);let r=!1;if(e&&!n){if(t)if(Rt(t))for(const o of t.split(";")){const l=o.slice(0,o.indexOf(":")).trim();e[l]==null&&nn(i,l,"")}else for(const o in t)e[o]==null&&nn(i,o,"");for(const o in e)o==="display"&&(r=!0),nn(i,o,e[o])}else if(n){if(t!==e){const o=i[Ud];o&&(e+=";"+o),i.cssText=e,r=zd.test(e)}}else t&&s.removeAttribute("style");al in s&&(s[al]=r?i.display:"",s[Fd]&&(i.display="none"))}const ul=/\s*!important$/;function nn(s,t,e){if(et(e))e.forEach(i=>nn(s,t,i));else if(e==null&&(e=""),t.startsWith("--"))s.setProperty(t,e);else{const i=Wd(s,t);ul.test(e)?s.setProperty(as(i),e.replace(ul,""),"important"):s[i]=e}}const hl=["Webkit","Moz","ms"],Gn={};function Wd(s,t){const e=Gn[t];if(e)return e;let i=os(t);if(i!=="filter"&&i in s)return Gn[t]=i;i=Ba(i);for(let n=0;n<hl.length;n++){const r=hl[n]+i;if(r in s)return Gn[t]=r}return t}const cl="http://www.w3.org/1999/xlink";function dl(s,t,e,i,n,r=Zh(t)){i&&t.startsWith("xlink:")?e==null?s.removeAttributeNS(cl,t.slice(6,t.length)):s.setAttributeNS(cl,t,e):e==null||r&&!Fa(e)?s.removeAttribute(t):s.setAttribute(t,r?"":ve(e)?String(e):e)}function fl(s,t,e,i,n){if(t==="innerHTML"||t==="textContent"){e!=null&&(s[t]=t==="innerHTML"?Uu(e):e);return}const r=s.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?s.getAttribute("value")||"":s.value,a=e==null?s.type==="checkbox"?"on":"":String(e);(l!==a||!("_value"in s))&&(s.value=a),e==null&&s.removeAttribute(t),s._value=e;return}let o=!1;if(e===""||e==null){const l=typeof s[t];l==="boolean"?e=Fa(e):e==null&&l==="string"?(e="",o=!0):l==="number"&&(e=0,o=!0)}try{s[t]=e}catch{}o&&s.removeAttribute(n||t)}function ss(s,t,e,i){s.addEventListener(t,e,i)}function Hd(s,t,e,i){s.removeEventListener(t,e,i)}const pl=Symbol("_vei");function Kd(s,t,e,i,n=null){const r=s[pl]||(s[pl]={}),o=r[t];if(i&&o)o.value=i;else{const[l,a]=jd(t);if(i){const h=r[t]=Xd(i,n);ss(s,l,h,a)}else o&&(Hd(s,l,o,a),r[t]=void 0)}}const ml=/(?:Once|Passive|Capture)$/;function jd(s){let t;if(ml.test(s)){t={};let i;for(;i=s.match(ml);)s=s.slice(0,s.length-i[0].length),t[i[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):as(s.slice(2)),t]}let Jn=0;const Gd=Promise.resolve(),Jd=()=>Jn||(Gd.then(()=>Jn=0),Jn=Date.now());function Xd(s,t){const e=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=e.attached)return;Ne(Yd(i,e.value),t,5,[i])};return e.value=s,e.attached=Jd(),e}function Yd(s,t){if(et(t)){const e=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{e.call(s),s._stopped=!0},t.map(i=>n=>!n._stopped&&i&&i(n))}else return t}const vl=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,Qd=(s,t,e,i,n,r)=>{const o=n==="svg";t==="class"?Vd(s,i,o):t==="style"?qd(s,e,i):_n(t)?so(t)||Kd(s,t,e,i,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Zd(s,t,i,o))?(fl(s,t,i),!s.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&dl(s,t,i,o,r,t!=="value")):s._isVueCE&&(/[A-Z]/.test(t)||!Rt(i))?fl(s,os(t),i,r,t):(t==="true-value"?s._trueValue=i:t==="false-value"&&(s._falseValue=i),dl(s,t,i,o))};function Zd(s,t,e,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in s&&vl(t)&&at(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&s.tagName==="IFRAME"||t==="form"||t==="list"&&s.tagName==="INPUT"||t==="type"&&s.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=s.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return vl(t)&&Rt(e)?!1:t in s}const Us=s=>{const t=s.props["onUpdate:modelValue"]||!1;return et(t)?e=>Zi(t,e):t};function tf(s){s.target.composing=!0}function gl(s){const t=s.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const qe=Symbol("_assign");function bl(s,t,e){return t&&(s=s.trim()),e&&(s=Sn(s)),s}const dt={created(s,{modifiers:{lazy:t,trim:e,number:i}},n){s[qe]=Us(n);const r=i||n.props&&n.props.type==="number";ss(s,t?"change":"input",o=>{o.target.composing||s[qe](bl(s.value,e,r))}),(e||r)&&ss(s,"change",()=>{s.value=bl(s.value,e,r)}),t||(ss(s,"compositionstart",tf),ss(s,"compositionend",gl),ss(s,"change",gl))},mounted(s,{value:t}){s.value=t??""},beforeUpdate(s,{value:t,oldValue:e,modifiers:{lazy:i,trim:n,number:r}},o){if(s[qe]=Us(o),s.composing)return;const l=(r||s.type==="number")&&!/^0\d/.test(s.value)?Sn(s.value):s.value,a=t??"";l!==a&&(document.activeElement===s&&s.type!=="range"&&(i&&t===e||n&&s.value.trim()===a)||(s.value=a))}},ef={deep:!0,created(s,t,e){s[qe]=Us(e),ss(s,"change",()=>{const i=s._modelValue,n=wi(s),r=s.checked,o=s[qe];if(et(i)){const l=ro(i,n),a=l!==-1;if(r&&!a)o(i.concat(n));else if(!r&&a){const h=[...i];h.splice(l,1),o(h)}}else if(Ks(i)){const l=new Set(i);r?l.add(n):l.delete(n),o(l)}else o(zu(s,r))})},mounted:yl,beforeUpdate(s,t,e){s[qe]=Us(e),yl(s,t,e)}};function yl(s,{value:t,oldValue:e},i){s._modelValue=t;let n;if(et(t))n=ro(t,i.props.value)>-1;else if(Ks(t))n=t.has(i.props.value);else{if(t===e)return;n=Ai(t,zu(s,!0))}s.checked!==n&&(s.checked=n)}const Pe={deep:!0,created(s,{value:t,modifiers:{number:e}},i){const n=Ks(t);ss(s,"change",()=>{const r=Array.prototype.filter.call(s.options,o=>o.selected).map(o=>e?Sn(wi(o)):wi(o));s[qe](s.multiple?n?new Set(r):r:r[0]),s._assigning=!0,_s(()=>{s._assigning=!1})}),s[qe]=Us(i)},mounted(s,{value:t}){_l(s,t)},beforeUpdate(s,t,e){s[qe]=Us(e)},updated(s,{value:t}){s._assigning||_l(s,t)}};function _l(s,t){const e=s.multiple,i=et(t);if(!(e&&!i&&!Ks(t))){for(let n=0,r=s.options.length;n<r;n++){const o=s.options[n],l=wi(o);if(e)if(i){const a=typeof l;a==="string"||a==="number"?o.selected=t.some(h=>String(h)===String(l)):o.selected=ro(t,l)>-1}else o.selected=t.has(l);else if(Ai(wi(o),t)){s.selectedIndex!==n&&(s.selectedIndex=n);return}}!e&&s.selectedIndex!==-1&&(s.selectedIndex=-1)}}function wi(s){return"_value"in s?s._value:s.value}function zu(s,t){const e=t?"_trueValue":"_falseValue";return e in s?s[e]:t}const sf=["ctrl","shift","alt","meta"],nf={stop:s=>s.stopPropagation(),prevent:s=>s.preventDefault(),self:s=>s.target!==s.currentTarget,ctrl:s=>!s.ctrlKey,shift:s=>!s.shiftKey,alt:s=>!s.altKey,meta:s=>!s.metaKey,left:s=>"button"in s&&s.button!==0,middle:s=>"button"in s&&s.button!==1,right:s=>"button"in s&&s.button!==2,exact:(s,t)=>sf.some(e=>s[`${e}Key`]&&!t.includes(e))},ws=(s,t)=>{const e=s._withMods||(s._withMods={}),i=t.join(".");return e[i]||(e[i]=((n,...r)=>{for(let o=0;o<t.length;o++){const l=nf[t[o]];if(l&&l(n,t))return}return s(n,...r)}))},rf={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},_o=(s,t)=>{const e=s._withKeys||(s._withKeys={}),i=t.join(".");return e[i]||(e[i]=(n=>{if(!("key"in n))return;const r=as(n.key);if(t.some(o=>o===r||rf[o]===r))return s(n)}))},of=zt({patchProp:Qd},Id);let wl;function lf(){return wl||(wl=vd(of))}const af=((...s)=>{const t=lf().createApp(...s),{mount:e}=t;return t.mount=i=>{const n=hf(i);if(!n)return;const r=t._component;!at(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=e(n,!1,uf(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t});function uf(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function hf(s){return Rt(s)?document.querySelector(s):s}const Os=typeof document<"u";function qu(s){return typeof s=="object"||"displayName"in s||"props"in s||"__vccOpts"in s}function cf(s){return s.__esModule||s[Symbol.toStringTag]==="Module"||s.default&&qu(s.default)}const bt=Object.assign;function Xn(s,t){const e={};for(const i in t){const n=t[i];e[i]=be(n)?n.map(s):s(n)}return e}const hi=()=>{},be=Array.isArray;function Sl(s,t){const e={};for(const i in s)e[i]=i in t?t[i]:s[i];return e}const Wu=/#/g,df=/&/g,ff=/\//g,pf=/=/g,mf=/\?/g,Hu=/\+/g,vf=/%5B/g,gf=/%5D/g,Ku=/%5E/g,bf=/%60/g,ju=/%7B/g,yf=/%7C/g,Gu=/%7D/g,_f=/%20/g;function wo(s){return s==null?"":encodeURI(""+s).replace(yf,"|").replace(vf,"[").replace(gf,"]")}function wf(s){return wo(s).replace(ju,"{").replace(Gu,"}").replace(Ku,"^")}function $r(s){return wo(s).replace(Hu,"%2B").replace(_f,"+").replace(Wu,"%23").replace(df,"%26").replace(bf,"`").replace(ju,"{").replace(Gu,"}").replace(Ku,"^")}function Sf(s){return $r(s).replace(pf,"%3D")}function xf(s){return wo(s).replace(Wu,"%23").replace(mf,"%3F")}function Cf(s){return xf(s).replace(ff,"%2F")}function Si(s){if(s==null)return null;try{return decodeURIComponent(""+s)}catch{}return""+s}const Ef=/\/$/,kf=s=>s.replace(Ef,"");function Yn(s,t,e="/"){let i,n={},r="",o="";const l=t.indexOf("#");let a=t.indexOf("?");return a=l>=0&&a>l?-1:a,a>=0&&(i=t.slice(0,a),r=t.slice(a,l>0?l:t.length),n=s(r.slice(1))),l>=0&&(i=i||t.slice(0,l),o=t.slice(l,t.length)),i=Of(i??t,e),{fullPath:i+r+o,path:i,query:n,hash:Si(o)}}function Tf(s,t){const e=t.query?s(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function xl(s,t){return!t||!s.toLowerCase().startsWith(t.toLowerCase())?s:s.slice(t.length)||"/"}function Mf(s,t,e){const i=t.matched.length-1,n=e.matched.length-1;return i>-1&&i===n&&zs(t.matched[i],e.matched[n])&&Ju(t.params,e.params)&&s(t.query)===s(e.query)&&t.hash===e.hash}function zs(s,t){return(s.aliasOf||s)===(t.aliasOf||t)}function Ju(s,t){if(Object.keys(s).length!==Object.keys(t).length)return!1;for(var e in s)if(!Af(s[e],t[e]))return!1;return!0}function Af(s,t){return be(s)?Cl(s,t):be(t)?Cl(t,s):s?.valueOf()===t?.valueOf()}function Cl(s,t){return be(t)?s.length===t.length&&s.every((e,i)=>e===t[i]):s.length===1&&s[0]===t}function Of(s,t){if(s.startsWith("/"))return s;if(!s)return t;const e=t.split("/"),i=s.split("/"),n=i[i.length-1];(n===".."||n===".")&&i.push("");let r=e.length-1,o,l;for(o=0;o<i.length;o++)if(l=i[o],l!==".")if(l==="..")r>1&&r--;else break;return e.slice(0,r).join("/")+"/"+i.slice(o).join("/")}const Xe={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Dr=(function(s){return s.pop="pop",s.push="push",s})({}),Qn=(function(s){return s.back="back",s.forward="forward",s.unknown="",s})({});function Lf(s){if(!s)if(Os){const t=document.querySelector("base");s=t&&t.getAttribute("href")||"/",s=s.replace(/^\w+:\/\/[^\/]+/,"")}else s="/";return s[0]!=="/"&&s[0]!=="#"&&(s="/"+s),kf(s)}const Pf=/^[^#]+#/;function Rf(s,t){return s.replace(Pf,"#")+t}function Nf(s,t){const e=document.documentElement.getBoundingClientRect(),i=s.getBoundingClientRect();return{behavior:t.behavior,left:i.left-e.left-(t.left||0),top:i.top-e.top-(t.top||0)}}const On=()=>({left:window.scrollX,top:window.scrollY});function $f(s){let t;if("el"in s){const e=s.el,i=typeof e=="string"&&e.startsWith("#"),n=typeof e=="string"?i?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!n)return;t=Nf(n,s)}else t=s;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function El(s,t){return(history.state?history.state.position-t:-1)+s}const Ir=new Map;function Df(s,t){Ir.set(s,t)}function If(s){const t=Ir.get(s);return Ir.delete(s),t}function Bf(s){return typeof s=="string"||s&&typeof s=="object"}function Xu(s){return typeof s=="string"||typeof s=="symbol"}let Ot=(function(s){return s[s.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",s[s.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",s[s.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",s[s.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",s[s.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",s})({});const Yu=Symbol("");Ot.MATCHER_NOT_FOUND+"",Ot.NAVIGATION_GUARD_REDIRECT+"",Ot.NAVIGATION_ABORTED+"",Ot.NAVIGATION_CANCELLED+"",Ot.NAVIGATION_DUPLICATED+"";function qs(s,t){return bt(new Error,{type:s,[Yu]:!0},t)}function Ie(s,t){return s instanceof Error&&Yu in s&&(t==null||!!(s.type&t))}const Vf=["params","query","hash"];function Ff(s){if(typeof s=="string")return s;if(s.path!=null)return s.path;const t={};for(const e of Vf)e in s&&(t[e]=s[e]);return JSON.stringify(t,null,2)}function Uf(s){const t={};if(s===""||s==="?")return t;const e=(s[0]==="?"?s.slice(1):s).split("&");for(let i=0;i<e.length;++i){const n=e[i].replace(Hu," "),r=n.indexOf("="),o=Si(r<0?n:n.slice(0,r)),l=r<0?null:Si(n.slice(r+1));if(o in t){let a=t[o];be(a)||(a=t[o]=[a]),a.push(l)}else t[o]=l}return t}function kl(s){let t="";for(let e in s){const i=s[e];if(e=Sf(e),i==null){i!==void 0&&(t+=(t.length?"&":"")+e);continue}(be(i)?i.map(n=>n&&$r(n)):[i&&$r(i)]).forEach(n=>{n!==void 0&&(t+=(t.length?"&":"")+e,n!=null&&(t+="="+n))})}return t}function zf(s){const t={};for(const e in s){const i=s[e];i!==void 0&&(t[e]=be(i)?i.map(n=>n==null?null:""+n):i==null?i:""+i)}return t}const qf=Symbol(""),Tl=Symbol(""),Ln=Symbol(""),So=Symbol(""),Br=Symbol("");function Zs(){let s=[];function t(i){return s.push(i),()=>{const n=s.indexOf(i);n>-1&&s.splice(n,1)}}function e(){s=[]}return{add:t,list:()=>s.slice(),reset:e}}function es(s,t,e,i,n,r=o=>o()){const o=i&&(i.enterCallbacks[n]=i.enterCallbacks[n]||[]);return()=>new Promise((l,a)=>{const h=f=>{f===!1?a(qs(Ot.NAVIGATION_ABORTED,{from:e,to:t})):f instanceof Error?a(f):Bf(f)?a(qs(Ot.NAVIGATION_GUARD_REDIRECT,{from:t,to:f})):(o&&i.enterCallbacks[n]===o&&typeof f=="function"&&o.push(f),l())},c=r(()=>s.call(i&&i.instances[n],t,e,h));let d=Promise.resolve(c);s.length<3&&(d=d.then(h)),d.catch(f=>a(f))})}function Zn(s,t,e,i,n=r=>r()){const r=[];for(const o of s)for(const l in o.components){let a=o.components[l];if(!(t!=="beforeRouteEnter"&&!o.instances[l]))if(qu(a)){const h=(a.__vccOpts||a)[t];h&&r.push(es(h,e,i,o,l,n))}else{let h=a();r.push(()=>h.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const d=cf(c)?c.default:c;o.mods[l]=c,o.components[l]=d;const f=(d.__vccOpts||d)[t];return f&&es(f,e,i,o,l,n)()}))}}return r}function Wf(s,t){const e=[],i=[],n=[],r=Math.max(t.matched.length,s.matched.length);for(let o=0;o<r;o++){const l=t.matched[o];l&&(s.matched.find(h=>zs(h,l))?i.push(l):e.push(l));const a=s.matched[o];a&&(t.matched.find(h=>zs(h,a))||n.push(a))}return[e,i,n]}let Hf=()=>location.protocol+"//"+location.host;function Qu(s,t){const{pathname:e,search:i,hash:n}=t,r=s.indexOf("#");if(r>-1){let o=n.includes(s.slice(r))?s.slice(r).length:1,l=n.slice(o);return l[0]!=="/"&&(l="/"+l),xl(l,"")}return xl(e,s)+i+n}function Kf(s,t,e,i){let n=[],r=[],o=null;const l=({state:f})=>{const p=Qu(s,location),m=e.value,g=t.value;let y=0;if(f){if(e.value=p,t.value=f,o&&o===m){o=null;return}y=g?f.position-g.position:0}else i(p);n.forEach(_=>{_(e.value,m,{delta:y,type:Dr.pop,direction:y?y>0?Qn.forward:Qn.back:Qn.unknown})})};function a(){o=e.value}function h(f){n.push(f);const p=()=>{const m=n.indexOf(f);m>-1&&n.splice(m,1)};return r.push(p),p}function c(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(bt({},f.state,{scroll:On()}),"")}}function d(){for(const f of r)f();r=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",c),document.removeEventListener("visibilitychange",c)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",c),document.addEventListener("visibilitychange",c),{pauseListeners:a,listen:h,destroy:d}}function Ml(s,t,e,i=!1,n=!1){return{back:s,current:t,forward:e,replaced:i,position:window.history.length,scroll:n?On():null}}function jf(s){const{history:t,location:e}=window,i={value:Qu(s,e)},n={value:t.state};n.value||r(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(a,h,c){const d=s.indexOf("#"),f=d>-1?(e.host&&document.querySelector("base")?s:s.slice(d))+a:Hf()+s+a;try{t[c?"replaceState":"pushState"](h,"",f),n.value=h}catch(p){console.error(p),e[c?"replace":"assign"](f)}}function o(a,h){r(a,bt({},t.state,Ml(n.value.back,a,n.value.forward,!0),h,{position:n.value.position}),!0),i.value=a}function l(a,h){const c=bt({},n.value,t.state,{forward:a,scroll:On()});r(c.current,c,!0),r(a,bt({},Ml(i.value,a,null),{position:c.position+1},h),!1),i.value=a}return{location:i,state:n,push:l,replace:o}}function Gf(s){s=Lf(s);const t=jf(s),e=Kf(s,t.state,t.location,t.replace);function i(r,o=!0){o||e.pauseListeners(),history.go(r)}const n=bt({location:"",base:s,go:i,createHref:Rf.bind(null,s)},t,e);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}let vs=(function(s){return s[s.Static=0]="Static",s[s.Param=1]="Param",s[s.Group=2]="Group",s})({});var $t=(function(s){return s[s.Static=0]="Static",s[s.Param=1]="Param",s[s.ParamRegExp=2]="ParamRegExp",s[s.ParamRegExpEnd=3]="ParamRegExpEnd",s[s.EscapeNext=4]="EscapeNext",s})($t||{});const Jf={type:vs.Static,value:""},Xf=/[a-zA-Z0-9_]/;function Yf(s){if(!s)return[[]];if(s==="/")return[[Jf]];if(!s.startsWith("/"))throw new Error(`Invalid path "${s}"`);function t(p){throw new Error(`ERR (${e})/"${h}": ${p}`)}let e=$t.Static,i=e;const n=[];let r;function o(){r&&n.push(r),r=[]}let l=0,a,h="",c="";function d(){h&&(e===$t.Static?r.push({type:vs.Static,value:h}):e===$t.Param||e===$t.ParamRegExp||e===$t.ParamRegExpEnd?(r.length>1&&(a==="*"||a==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),r.push({type:vs.Param,value:h,regexp:c,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):t("Invalid state to consume buffer"),h="")}function f(){h+=a}for(;l<s.length;){if(a=s[l++],a==="\\"&&e!==$t.ParamRegExp){i=e,e=$t.EscapeNext;continue}switch(e){case $t.Static:a==="/"?(h&&d(),o()):a===":"?(d(),e=$t.Param):f();break;case $t.EscapeNext:f(),e=i;break;case $t.Param:a==="("?e=$t.ParamRegExp:Xf.test(a)?f():(d(),e=$t.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case $t.ParamRegExp:a===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+a:e=$t.ParamRegExpEnd:c+=a;break;case $t.ParamRegExpEnd:d(),e=$t.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--,c="";break;default:t("Unknown state");break}}return e===$t.ParamRegExp&&t(`Unfinished custom RegExp for param "${h}"`),d(),o(),n}const Al="[^/]+?",Qf={sensitive:!1,strict:!1,start:!0,end:!0};var jt=(function(s){return s[s._multiplier=10]="_multiplier",s[s.Root=90]="Root",s[s.Segment=40]="Segment",s[s.SubSegment=30]="SubSegment",s[s.Static=40]="Static",s[s.Dynamic=20]="Dynamic",s[s.BonusCustomRegExp=10]="BonusCustomRegExp",s[s.BonusWildcard=-50]="BonusWildcard",s[s.BonusRepeatable=-20]="BonusRepeatable",s[s.BonusOptional=-8]="BonusOptional",s[s.BonusStrict=.7000000000000001]="BonusStrict",s[s.BonusCaseSensitive=.25]="BonusCaseSensitive",s})(jt||{});const Zf=/[.+*?^${}()[\]/\\]/g;function tp(s,t){const e=bt({},Qf,t),i=[];let n=e.start?"^":"";const r=[];for(const h of s){const c=h.length?[]:[jt.Root];e.strict&&!h.length&&(n+="/");for(let d=0;d<h.length;d++){const f=h[d];let p=jt.Segment+(e.sensitive?jt.BonusCaseSensitive:0);if(f.type===vs.Static)d||(n+="/"),n+=f.value.replace(Zf,"\\$&"),p+=jt.Static;else if(f.type===vs.Param){const{value:m,repeatable:g,optional:y,regexp:_}=f;r.push({name:m,repeatable:g,optional:y});const E=_||Al;if(E!==Al){p+=jt.BonusCustomRegExp;try{`${E}`}catch(I){throw new Error(`Invalid custom RegExp for param "${m}" (${E}): `+I.message)}}let F=g?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;d||(F=y&&h.length<2?`(?:/${F})`:"/"+F),y&&(F+="?"),n+=F,p+=jt.Dynamic,y&&(p+=jt.BonusOptional),g&&(p+=jt.BonusRepeatable),E===".*"&&(p+=jt.BonusWildcard)}c.push(p)}i.push(c)}if(e.strict&&e.end){const h=i.length-1;i[h][i[h].length-1]+=jt.BonusStrict}e.strict||(n+="/?"),e.end?n+="$":e.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,e.sensitive?"":"i");function l(h){const c=h.match(o),d={};if(!c)return null;for(let f=1;f<c.length;f++){const p=c[f]||"",m=r[f-1];d[m.name]=p&&m.repeatable?p.split("/"):p}return d}function a(h){let c="",d=!1;for(const f of s){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const p of f)if(p.type===vs.Static)c+=p.value;else if(p.type===vs.Param){const{value:m,repeatable:g,optional:y}=p,_=m in h?h[m]:"";if(be(_)&&!g)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const E=be(_)?_.join("/"):_;if(!E)if(y)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);c+=E}}return c||"/"}return{re:o,score:i,keys:r,parse:l,stringify:a}}function ep(s,t){let e=0;for(;e<s.length&&e<t.length;){const i=t[e]-s[e];if(i)return i;e++}return s.length<t.length?s.length===1&&s[0]===jt.Static+jt.Segment?-1:1:s.length>t.length?t.length===1&&t[0]===jt.Static+jt.Segment?1:-1:0}function Zu(s,t){let e=0;const i=s.score,n=t.score;for(;e<i.length&&e<n.length;){const r=ep(i[e],n[e]);if(r)return r;e++}if(Math.abs(n.length-i.length)===1){if(Ol(i))return 1;if(Ol(n))return-1}return n.length-i.length}function Ol(s){const t=s[s.length-1];return s.length>0&&t[t.length-1]<0}const sp={strict:!1,end:!0,sensitive:!1};function ip(s,t,e){const i=tp(Yf(s.path),e),n=bt(i,{record:s,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function np(s,t){const e=[],i=new Map;t=Sl(sp,t);function n(d){return i.get(d)}function r(d,f,p){const m=!p,g=Pl(d);g.aliasOf=p&&p.record;const y=Sl(t,d),_=[g];if("alias"in d){const I=typeof d.alias=="string"?[d.alias]:d.alias;for(const X of I)_.push(Pl(bt({},g,{components:p?p.record.components:g.components,path:X,aliasOf:p?p.record:g})))}let E,F;for(const I of _){const{path:X}=I;if(f&&X[0]!=="/"){const rt=f.record.path,tt=rt[rt.length-1]==="/"?"":"/";I.path=f.record.path+(X&&tt+X)}if(E=ip(I,f,y),p?p.alias.push(E):(F=F||E,F!==E&&F.alias.push(E),m&&d.name&&!Rl(E)&&o(d.name)),th(E)&&a(E),g.children){const rt=g.children;for(let tt=0;tt<rt.length;tt++)r(rt[tt],E,p&&p.children[tt])}p=p||E}return F?()=>{o(F)}:hi}function o(d){if(Xu(d)){const f=i.get(d);f&&(i.delete(d),e.splice(e.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=e.indexOf(d);f>-1&&(e.splice(f,1),d.record.name&&i.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function l(){return e}function a(d){const f=lp(d,e);e.splice(f,0,d),d.record.name&&!Rl(d)&&i.set(d.record.name,d)}function h(d,f){let p,m={},g,y;if("name"in d&&d.name){if(p=i.get(d.name),!p)throw qs(Ot.MATCHER_NOT_FOUND,{location:d});y=p.record.name,m=bt(Ll(f.params,p.keys.filter(F=>!F.optional).concat(p.parent?p.parent.keys.filter(F=>F.optional):[]).map(F=>F.name)),d.params&&Ll(d.params,p.keys.map(F=>F.name))),g=p.stringify(m)}else if(d.path!=null)g=d.path,p=e.find(F=>F.re.test(g)),p&&(m=p.parse(g),y=p.record.name);else{if(p=f.name?i.get(f.name):e.find(F=>F.re.test(f.path)),!p)throw qs(Ot.MATCHER_NOT_FOUND,{location:d,currentLocation:f});y=p.record.name,m=bt({},f.params,d.params),g=p.stringify(m)}const _=[];let E=p;for(;E;)_.unshift(E.record),E=E.parent;return{name:y,path:g,params:m,matched:_,meta:op(_)}}s.forEach(d=>r(d));function c(){e.length=0,i.clear()}return{addRoute:r,resolve:h,removeRoute:o,clearRoutes:c,getRoutes:l,getRecordMatcher:n}}function Ll(s,t){const e={};for(const i of t)i in s&&(e[i]=s[i]);return e}function Pl(s){const t={path:s.path,redirect:s.redirect,name:s.name,meta:s.meta||{},aliasOf:s.aliasOf,beforeEnter:s.beforeEnter,props:rp(s),children:s.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in s?s.components||null:s.component&&{default:s.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function rp(s){const t={},e=s.props||!1;if("component"in s)t.default=e;else for(const i in s.components)t[i]=typeof e=="object"?e[i]:e;return t}function Rl(s){for(;s;){if(s.record.aliasOf)return!0;s=s.parent}return!1}function op(s){return s.reduce((t,e)=>bt(t,e.meta),{})}function lp(s,t){let e=0,i=t.length;for(;e!==i;){const r=e+i>>1;Zu(s,t[r])<0?i=r:e=r+1}const n=ap(s);return n&&(i=t.lastIndexOf(n,i-1)),i}function ap(s){let t=s;for(;t=t.parent;)if(th(t)&&Zu(s,t)===0)return t}function th({record:s}){return!!(s.name||s.components&&Object.keys(s.components).length||s.redirect)}function Nl(s){const t=me(Ln),e=me(So),i=vt(()=>{const a=lt(s.to);return t.resolve(a)}),n=vt(()=>{const{matched:a}=i.value,{length:h}=a,c=a[h-1],d=e.matched;if(!c||!d.length)return-1;const f=d.findIndex(zs.bind(null,c));if(f>-1)return f;const p=$l(a[h-2]);return h>1&&$l(c)===p&&d[d.length-1].path!==p?d.findIndex(zs.bind(null,a[h-2])):f}),r=vt(()=>n.value>-1&&dp(e.params,i.value.params)),o=vt(()=>n.value>-1&&n.value===e.matched.length-1&&Ju(e.params,i.value.params));function l(a={}){if(cp(a)){const h=t[lt(s.replace)?"replace":"push"](lt(s.to)).catch(hi);return s.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:i,href:vt(()=>i.value.href),isActive:r,isExactActive:o,navigate:l}}function up(s){return s.length===1?s[0]:s}const hp=fu({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Nl,setup(s,{slots:t}){const e=Vt(Nl(s)),{options:i}=me(Ln),n=vt(()=>({[Dl(s.activeClass,i.linkActiveClass,"router-link-active")]:e.isActive,[Dl(s.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const r=t.default&&up(t.default(e));return s.custom?r:Fu("a",{"aria-current":e.isExactActive?s.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:n.value},r)}}}),ct=hp;function cp(s){if(!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)&&!s.defaultPrevented&&!(s.button!==void 0&&s.button!==0)){if(s.currentTarget&&s.currentTarget.getAttribute){const t=s.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return s.preventDefault&&s.preventDefault(),!0}}function dp(s,t){for(const e in t){const i=t[e],n=s[e];if(typeof i=="string"){if(i!==n)return!1}else if(!be(n)||n.length!==i.length||i.some((r,o)=>r.valueOf()!==n[o].valueOf()))return!1}return!0}function $l(s){return s?s.aliasOf?s.aliasOf.path:s.path:""}const Dl=(s,t,e)=>s??t??e,fp=fu({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(s,{attrs:t,slots:e}){const i=me(Br),n=vt(()=>s.route||i.value),r=me(Tl,0),o=vt(()=>{let h=lt(r);const{matched:c}=n.value;let d;for(;(d=c[h])&&!d.components;)h++;return h}),l=vt(()=>n.value.matched[o.value]);tn(Tl,vt(()=>o.value+1)),tn(qf,l),tn(Br,n);const a=$();return ns(()=>[a.value,l.value,s.name],([h,c,d],[f,p,m])=>{c&&(c.instances[d]=h,p&&p!==c&&h&&h===f&&(c.leaveGuards.size||(c.leaveGuards=p.leaveGuards),c.updateGuards.size||(c.updateGuards=p.updateGuards))),h&&c&&(!p||!zs(c,p)||!f)&&(c.enterCallbacks[d]||[]).forEach(g=>g(h))},{flush:"post"}),()=>{const h=n.value,c=s.name,d=l.value,f=d&&d.components[c];if(!f)return Il(e.default,{Component:f,route:h});const p=d.props[c],m=p?p===!0?h.params:typeof p=="function"?p(h):p:null,y=Fu(f,bt({},m,t,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(d.instances[c]=null)},ref:a}));return Il(e.default,{Component:y,route:h})||y}}});function Il(s,t){if(!s)return null;const e=s(t);return e.length===1?e[0]:e}const eh=fp;function pp(s){const t=np(s.routes,s),e=s.parseQuery||Uf,i=s.stringifyQuery||kl,n=s.history,r=Zs(),o=Zs(),l=Zs(),a=Sc(Xe);let h=Xe;Os&&s.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Xn.bind(null,N=>""+N),d=Xn.bind(null,Cf),f=Xn.bind(null,Si);function p(N,J){let k,A;return Xu(N)?(k=t.getRecordMatcher(N),A=J):A=N,t.addRoute(A,k)}function m(N){const J=t.getRecordMatcher(N);J&&t.removeRoute(J)}function g(){return t.getRoutes().map(N=>N.record)}function y(N){return!!t.getRecordMatcher(N)}function _(N,J){if(J=bt({},J||a.value),typeof N=="string"){const S=Yn(e,N,J.path),L=t.resolve({path:S.path},J),R=n.createHref(S.fullPath);return bt(S,L,{params:f(L.params),hash:Si(S.hash),redirectedFrom:void 0,href:R})}let k;if(N.path!=null)k=bt({},N,{path:Yn(e,N.path,J.path).path});else{const S=bt({},N.params);for(const L in S)S[L]==null&&delete S[L];k=bt({},N,{params:d(S)}),J.params=d(J.params)}const A=t.resolve(k,J),K=N.hash||"";A.params=c(f(A.params));const v=Tf(i,bt({},N,{hash:wf(K),path:A.path})),b=n.createHref(v);return bt({fullPath:v,hash:K,query:i===kl?zf(N.query):N.query||{}},A,{redirectedFrom:void 0,href:b})}function E(N){return typeof N=="string"?Yn(e,N,a.value.path):bt({},N)}function F(N,J){if(h!==N)return qs(Ot.NAVIGATION_CANCELLED,{from:J,to:N})}function I(N){return tt(N)}function X(N){return I(bt(E(N),{replace:!0}))}function rt(N,J){const k=N.matched[N.matched.length-1];if(k&&k.redirect){const{redirect:A}=k;let K=typeof A=="function"?A(N,J):A;return typeof K=="string"&&(K=K.includes("?")||K.includes("#")?K=E(K):{path:K},K.params={}),bt({query:N.query,hash:N.hash,params:K.path!=null?{}:N.params},K)}}function tt(N,J){const k=h=_(N),A=a.value,K=N.state,v=N.force,b=N.replace===!0,S=rt(k,A);if(S)return tt(bt(E(S),{state:typeof S=="object"?bt({},K,S.state):K,force:v,replace:b}),J||k);const L=k;L.redirectedFrom=J;let R;return!v&&Mf(i,A,k)&&(R=qs(Ot.NAVIGATION_DUPLICATED,{to:L,from:A}),Nt(A,A,!0,!1)),(R?Promise.resolve(R):w(L,A)).catch(O=>Ie(O)?Ie(O,Ot.NAVIGATION_GUARD_REDIRECT)?O:Ht(O):P(O,L,A)).then(O=>{if(O){if(Ie(O,Ot.NAVIGATION_GUARD_REDIRECT))return tt(bt({replace:b},E(O.to),{state:typeof O.to=="object"?bt({},K,O.to.state):K,force:v}),J||L)}else O=At(L,A,!0,b,K);return H(L,A,O),O})}function B(N,J){const k=F(N,J);return k?Promise.reject(k):Promise.resolve()}function T(N){const J=we.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(N):N()}function w(N,J){let k;const[A,K,v]=Wf(N,J);k=Zn(A.reverse(),"beforeRouteLeave",N,J);for(const S of A)S.leaveGuards.forEach(L=>{k.push(es(L,N,J))});const b=B.bind(null,N,J);return k.push(b),Zt(k).then(()=>{k=[];for(const S of r.list())k.push(es(S,N,J));return k.push(b),Zt(k)}).then(()=>{k=Zn(K,"beforeRouteUpdate",N,J);for(const S of K)S.updateGuards.forEach(L=>{k.push(es(L,N,J))});return k.push(b),Zt(k)}).then(()=>{k=[];for(const S of v)if(S.beforeEnter)if(be(S.beforeEnter))for(const L of S.beforeEnter)k.push(es(L,N,J));else k.push(es(S.beforeEnter,N,J));return k.push(b),Zt(k)}).then(()=>(N.matched.forEach(S=>S.enterCallbacks={}),k=Zn(v,"beforeRouteEnter",N,J,T),k.push(b),Zt(k))).then(()=>{k=[];for(const S of o.list())k.push(es(S,N,J));return k.push(b),Zt(k)}).catch(S=>Ie(S,Ot.NAVIGATION_CANCELLED)?S:Promise.reject(S))}function H(N,J,k){l.list().forEach(A=>T(()=>A(N,J,k)))}function At(N,J,k,A,K){const v=F(N,J);if(v)return v;const b=J===Xe,S=Os?history.state:{};k&&(A||b?n.replace(N.fullPath,bt({scroll:b&&S&&S.scroll},K)):n.push(N.fullPath,K)),a.value=N,Nt(N,J,k,b),Ht()}let Tt;function Qt(){Tt||(Tt=n.listen((N,J,k)=>{if(!Se.listening)return;const A=_(N),K=rt(A,Se.currentRoute.value);if(K){tt(bt(K,{replace:!0,force:!0}),A).catch(hi);return}h=A;const v=a.value;Os&&Df(El(v.fullPath,k.delta),On()),w(A,v).catch(b=>Ie(b,Ot.NAVIGATION_ABORTED|Ot.NAVIGATION_CANCELLED)?b:Ie(b,Ot.NAVIGATION_GUARD_REDIRECT)?(tt(bt(E(b.to),{force:!0}),A).then(S=>{Ie(S,Ot.NAVIGATION_ABORTED|Ot.NAVIGATION_DUPLICATED)&&!k.delta&&k.type===Dr.pop&&n.go(-1,!1)}).catch(hi),Promise.reject()):(k.delta&&n.go(-k.delta,!1),P(b,A,v))).then(b=>{b=b||At(A,v,!1),b&&(k.delta&&!Ie(b,Ot.NAVIGATION_CANCELLED)?n.go(-k.delta,!1):k.type===Dr.pop&&Ie(b,Ot.NAVIGATION_ABORTED|Ot.NAVIGATION_DUPLICATED)&&n.go(-1,!1)),H(A,v,b)}).catch(hi)}))}let Wt=Zs(),gt=Zs(),U;function P(N,J,k){Ht(N);const A=gt.list();return A.length?A.forEach(K=>K(N,J,k)):console.error(N),Promise.reject(N)}function ht(){return U&&a.value!==Xe?Promise.resolve():new Promise((N,J)=>{Wt.add([N,J])})}function Ht(N){return U||(U=!N,Qt(),Wt.list().forEach(([J,k])=>N?k(N):J()),Wt.reset()),N}function Nt(N,J,k,A){const{scrollBehavior:K}=s;if(!Os||!K)return Promise.resolve();const v=!k&&If(El(N.fullPath,0))||(A||!k)&&history.state&&history.state.scroll||null;return _s().then(()=>K(N,J,v)).then(b=>b&&$f(b)).catch(b=>P(b,N,J))}const It=N=>n.go(N);let _e;const we=new Set,Se={currentRoute:a,listening:!0,addRoute:p,removeRoute:m,clearRoutes:t.clearRoutes,hasRoute:y,getRoutes:g,resolve:_,options:s,push:I,replace:X,go:It,back:()=>It(-1),forward:()=>It(1),beforeEach:r.add,beforeResolve:o.add,afterEach:l.add,onError:gt.add,isReady:ht,install(N){N.component("RouterLink",ct),N.component("RouterView",eh),N.config.globalProperties.$router=Se,Object.defineProperty(N.config.globalProperties,"$route",{enumerable:!0,get:()=>lt(a)}),Os&&!_e&&a.value===Xe&&(_e=!0,I(n.location).catch(A=>{}));const J={};for(const A in Xe)Object.defineProperty(J,A,{get:()=>a.value[A],enumerable:!0});N.provide(Ln,Se),N.provide(So,iu(J)),N.provide(Br,a);const k=N.unmount;we.add(N),N.unmount=function(){we.delete(N),we.size<1&&(h=Xe,Tt&&Tt(),Tt=null,a.value=Xe,_e=!1,U=!1),k()}}};function Zt(N){return N.reduce((J,k)=>J.then(()=>T(k)),Promise.resolve())}return Se}function ks(){return me(Ln)}function sh(s){return me(So)}const mp={__name:"App",setup(s){return(t,e)=>(C(),qt(lt(eh)))}},vp={"Content-Type":"application/json"};class gp{#t=null;setToken(t){this.#t=t?String(t):null}async request(t,{method:e="GET",body:i=void 0,headers:n={}}={}){const r={...vp,...n};this.#t&&(r.Authorization=`Bearer ${this.#t}`);const o=await fetch(t,{method:e,headers:r,body:i===void 0?void 0:JSON.stringify(i)}),l=await o.json().catch(()=>null);if(o.ok)return l;const a=l&&typeof l=="object"&&l.error?String(l.error):`: ${o.status}`,h=new Error(a);throw h.status=o.status,h.payload=l,h}}const nt=new gp,Vr="arkilo_session_token",kt=Vt({token:sessionStorage.getItem(Vr)||null,user:null,isAdmin:!1,initialized:!1});nt.setToken(kt.token);function Pi(s){kt.token=s,nt.setToken(s),s?sessionStorage.setItem(Vr,s):sessionStorage.removeItem(Vr)}async function bp(){if(!kt.initialized){if(!kt.token){kt.initialized=!0;return}try{const s=await nt.request("/api/auth/me");kt.user=s.user||null;try{await nt.request("/api/admin/activation-codes?limit=1&offset=0"),kt.isAdmin=!0}catch{kt.isAdmin=!1}}catch{Pi(null)}finally{kt.initialized=!0}}}async function yp(){if(!kt.token)return kt.user=null,kt.isAdmin=!1,null;const s=await nt.request("/api/auth/me");return kt.user=s.user||null,kt.user}async function _p({email:s,password:t}){const e=await nt.request("/api/auth/login",{method:"POST",body:{email:s,password:t}});Pi(e.token),kt.user=e.user;try{await nt.request("/api/admin/activation-codes?limit=1&offset=0"),kt.isAdmin=!0}catch{kt.isAdmin=!1}return e.user}async function wp({email:s,password:t,displayName:e}){const i=await nt.request("/api/auth/register",{method:"POST",body:{email:s,password:t,displayName:e||void 0}});Pi(i.token),kt.user=i.user;try{await nt.request("/api/admin/activation-codes?limit=1&offset=0"),kt.isAdmin=!0}catch{kt.isAdmin=!1}return i.user}async function Sp(){try{await nt.request("/api/auth/logout",{method:"POST"})}finally{kt.user=null,kt.isAdmin=!1,Pi(null)}}function us(){return{token:vt(()=>kt.token),user:vt(()=>kt.user),isAdmin:vt(()=>kt.isAdmin),initialized:vt(()=>kt.initialized),init:bp,refreshUser:yp,login:_p,register:wp,logout:Sp,setToken:Pi}}const Ss="/logo.png",xp={class:"auth-page"},Cp={class:"auth-container"},Ep={class:"auth-card"},kp={class:"form-group"},Tp={class:"form-group"},Mp={key:0,class:"form-error"},Ap=["disabled"],Op={class:"auth-footer"},Lp={__name:"LoginPage",setup(s){const t=us(),e=ks(),i=$(""),n=$(""),r=$(""),o=$(!1);async function l(){r.value="",o.value=!0;try{await t.login({email:i.value.trim(),password:n.value}),await e.push("/app")}catch(a){r.value=a?.message||""}finally{o.value=!1}}return(a,h)=>(C(),M("div",xp,[u("div",Cp,[u("div",Ep,[h[6]||(h[6]=bo('<div class="auth-header"><div class="auth-logo"><img src="'+Ss+'" alt="Arkilo"><span>Arkilo</span></div><h1 class="auth-title"></h1><p class="auth-subtitle"> SaaS </p></div>',1)),u("form",{onSubmit:ws(l,["prevent"])},[u("div",kp,[h[2]||(h[2]=u("label",{class:"form-label",for:"email"},"",-1)),st(u("input",{id:"email","onUpdate:modelValue":h[0]||(h[0]=c=>i.value=c),class:"form-input",type:"email",autocomplete:"email",required:""},null,512),[[dt,i.value]])]),u("div",Tp,[h[3]||(h[3]=u("label",{class:"form-label",for:"password"},"",-1)),st(u("input",{id:"password","onUpdate:modelValue":h[1]||(h[1]=c=>n.value=c),class:"form-input",type:"password",autocomplete:"current-password",required:""},null,512),[[dt,n.value]]),r.value?(C(),M("p",Mp,x(r.value),1)):j("",!0)]),u("button",{class:"btn btn-primary btn-full",type:"submit",disabled:o.value},x(o.value?"...":""),9,Ap)],32),u("div",Op,[u("p",null,[h[5]||(h[5]=ut("  ",-1)),Y(lt(ct),{class:"link",to:"/register"},{default:it(()=>[...h[4]||(h[4]=[ut("",-1)])]),_:1})])])])])]))}},Pp={class:"auth-page"},Rp={class:"auth-container"},Np={class:"auth-card"},$p={class:"form-group"},Dp={class:"form-group"},Ip={class:"form-group"},Bp={key:0,class:"form-error"},Vp=["disabled"],Fp={class:"auth-footer"},Up={__name:"RegisterPage",setup(s){const t=us(),e=ks(),i=$(""),n=$(""),r=$(""),o=$(""),l=$(!1);async function a(){o.value="",l.value=!0;try{await t.register({email:n.value.trim(),password:r.value,displayName:i.value.trim()}),await e.push("/app")}catch(h){o.value=h?.message||""}finally{l.value=!1}}return(h,c)=>(C(),M("div",Pp,[u("div",Rp,[u("div",Np,[c[8]||(c[8]=bo('<div class="auth-header"><div class="auth-logo"><img src="'+Ss+'" alt="Arkilo"><span>Arkilo</span></div><h1 class="auth-title"></h1><p class="auth-subtitle"></p></div>',1)),u("form",{onSubmit:ws(a,["prevent"])},[u("div",$p,[c[3]||(c[3]=u("label",{class:"form-label",for:"displayName"},"",-1)),st(u("input",{id:"displayName","onUpdate:modelValue":c[0]||(c[0]=d=>i.value=d),class:"form-input",type:"text",maxlength:"80"},null,512),[[dt,i.value]])]),u("div",Dp,[c[4]||(c[4]=u("label",{class:"form-label",for:"email"},"",-1)),st(u("input",{id:"email","onUpdate:modelValue":c[1]||(c[1]=d=>n.value=d),class:"form-input",type:"email",autocomplete:"email",required:""},null,512),[[dt,n.value]])]),u("div",Ip,[c[5]||(c[5]=u("label",{class:"form-label",for:"password"},"",-1)),st(u("input",{id:"password","onUpdate:modelValue":c[2]||(c[2]=d=>r.value=d),class:"form-input",type:"password",autocomplete:"new-password",required:""},null,512),[[dt,r.value]]),o.value?(C(),M("p",Bp,x(o.value),1)):j("",!0)]),u("button",{class:"btn btn-primary btn-full",type:"submit",disabled:l.value},x(l.value?"...":""),9,Vp)],32),u("div",Fp,[u("p",null,[c[7]||(c[7]=ut("  ",-1)),Y(lt(ct),{class:"link",to:"/login"},{default:it(()=>[...c[6]||(c[6]=[ut("",-1)])]),_:1})])])])])]))}},zp={class:"auth-page"},qp={class:"auth-container"},Wp={class:"auth-card"},Hp={class:"card-content"},Kp={key:0,class:"text-muted"},jp={key:1,class:"text-muted"},Gp={key:2,class:"form-success"},Jp={key:3,class:"form-error"},Xp={key:4,class:"input-with-button"},Yp={class:"auth-footer"},Qp={__name:"VerifyEmailPage",setup(s){const t=sh(),e=ks(),i=us(),n=vt(()=>String(t.query.token||"").trim()),r=$("idle"),o=$("");async function l(){if(o.value="",!n.value){r.value="error",o.value=" token";return}r.value="verifying";try{await nt.request("/api/auth/email-verifications/verify",{method:"POST",body:{token:n.value}}),r.value="success",await i.refreshUser().catch(()=>null),i.user.value&&await e.push("/app")}catch(a){r.value="error",o.value=a?.message||""}}return re(l),(a,h)=>(C(),M("div",zp,[u("div",qp,[u("div",Wp,[h[1]||(h[1]=bo('<div class="auth-header"><div class="auth-logo"><img src="'+Ss+'" alt="Arkilo"><span>Arkilo</span></div><h1 class="auth-title"></h1><p class="auth-subtitle"> AI </p></div>',1)),u("div",Hp,[r.value==="idle"?(C(),M("p",Kp,"...")):j("",!0),r.value==="verifying"?(C(),M("p",jp,"...")):j("",!0),r.value==="success"?(C(),M("p",Gp,"")):j("",!0),r.value==="error"?(C(),M("p",Jp,x(o.value),1)):j("",!0),r.value==="error"?(C(),M("div",Xp,[u("button",{class:"btn btn-primary btn-full",type:"button",onClick:l},"  ")])):j("",!0),u("div",Yp,[Y(lt(ct),{class:"link",to:"/login"},{default:it(()=>[...h[0]||(h[0]=[ut("",-1)])]),_:1})])])])])]))}},Zp=3e4,ie=Vt({value:null,fetchedAt:0,pending:null});function tm(){return ie.value&&Date.now()-ie.fetchedAt<Zp}async function em(){const s=await nt.request("/api/console/overview");return ie.value=s,ie.fetchedAt=Date.now(),s}function ih(){async function s({force:e=!1}={}){return!e&&tm()?ie.value:(ie.pending||(ie.pending=em().finally(()=>{ie.pending=null})),ie.pending)}function t(){ie.value=null,ie.fetchedAt=0,ie.pending=null}return{state:ie,get:s,invalidate:t}}const hs=(s,t)=>{const e=s.__vccOpts||s;for(const[i,n]of t)e[i]=n;return e},sm={class:"app-layout"},im={class:"floating-navbar"},nm={class:"nav-container"},rm={class:"nav-links"},om={class:"nav-user"},lm={class:"user-name"},am={class:"drawer-header"},um={class:"drawer-nav"},hm={class:"drawer-footer"},cm={class:"drawer-user"},dm={class:"main-content"},fm={class:"topbar"},pm={class:"topbar-title"},mm={key:0},vm={class:"content-wrapper"},gm={key:0,class:"card card-warn"},bm={class:"card-content banner-row"},ym={key:0,class:"banner-msg"},_m=["disabled"],wm={key:0,class:"card-content"},Sm=["href"],xm={__name:"AppShell",props:{title:{type:String,required:!0},subtitle:{type:String,default:""}},setup(s){const t=us(),e=ih(),i=ks(),n=vt(()=>t.user.value?.display_name||t.user.value?.email||""),r=vt(()=>t.isAdmin.value),o=vt(()=>!!t.user.value&&!t.user.value?.email_verified_at),l=$(null),a=vt(()=>{if(!l.value||l.value.status!=="active")return!1;const _=new Date(l.value.current_period_end).getTime();return Number.isFinite(_)&&_>Date.now()}),h=$(!1),c=$(""),d=$(""),f=$(!1);function p(){f.value=!f.value}function m(){f.value=!1}async function g(){m(),await t.logout(),await i.push("/login")}async function y(){c.value="",d.value="",h.value=!0;try{const _=await nt.request("/api/auth/email-verifications/send",{method:"POST"});c.value=_?.alreadyVerified?"":"",d.value=_?.debugLink||"",await t.refreshUser().catch(()=>null)}catch(_){c.value=_?.message||""}finally{h.value=!1}}return re(async()=>{try{const _=await e.get();l.value=_?.subscription||null}catch{l.value=null}}),(_,E)=>(C(),M("div",sm,[u("nav",im,[u("div",nm,[u("button",{class:"menu-toggle",type:"button",onClick:p},[...E[0]||(E[0]=[u("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[u("path",{d:"M3 12h18M3 6h18M3 18h18"})],-1)])]),Y(lt(ct),{to:"/app",class:"logo"},{default:it(()=>[...E[1]||(E[1]=[u("img",{src:Ss,alt:"Arkilo"},null,-1),u("span",null,"Arkilo",-1)])]),_:1}),u("div",rm,[Y(lt(ct),{class:"nav-link",to:"/app"},{default:it(()=>[...E[2]||(E[2]=[ut("",-1)])]),_:1}),a.value?(C(),M(mt,{key:0},[Y(lt(ct),{class:"nav-link",to:"/app/ai"},{default:it(()=>[...E[3]||(E[3]=[ut("AI ",-1)])]),_:1}),Y(lt(ct),{class:"nav-link",to:"/app/providers"},{default:it(()=>[...E[4]||(E[4]=[ut("",-1)])]),_:1}),Y(lt(ct),{class:"nav-link",to:"/app/subscription"},{default:it(()=>[...E[5]||(E[5]=[ut("",-1)])]),_:1})],64)):(C(),M(mt,{key:1},[Y(lt(ct),{class:"nav-link nav-link-highlight",to:"/app/subscription"},{default:it(()=>[...E[6]||(E[6]=[ut("",-1)])]),_:1}),Y(lt(ct),{class:"nav-link",to:"/app/ai"},{default:it(()=>[...E[7]||(E[7]=[ut("AI ",-1)])]),_:1}),Y(lt(ct),{class:"nav-link",to:"/app/providers"},{default:it(()=>[...E[8]||(E[8]=[ut("",-1)])]),_:1})],64)),r.value?(C(),qt(lt(ct),{key:2,class:"nav-link",to:"/admin"},{default:it(()=>[...E[9]||(E[9]=[ut("",-1)])]),_:1})):j("",!0)]),u("div",om,[u("span",lm,x(n.value),1),u("button",{class:"btn btn-sm btn-secondary",type:"button",onClick:g},"")])])]),u("div",{class:ue(["drawer-overlay",{active:f.value}]),onClick:m},null,2),u("aside",{class:ue(["drawer",{open:f.value}])},[u("div",am,[Y(lt(ct),{to:"/app",class:"logo",onClick:m},{default:it(()=>[...E[10]||(E[10]=[u("img",{src:Ss,alt:"Arkilo"},null,-1),u("span",null,"Arkilo",-1)])]),_:1}),u("button",{class:"drawer-close",type:"button",onClick:m},[...E[11]||(E[11]=[u("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[u("path",{d:"M18 6L6 18M6 6l12 12"})],-1)])])]),u("nav",um,[Y(lt(ct),{class:"drawer-link",to:"/app",onClick:m},{default:it(()=>[...E[12]||(E[12]=[ut("",-1)])]),_:1}),a.value?(C(),M(mt,{key:0},[Y(lt(ct),{class:"drawer-link",to:"/app/ai",onClick:m},{default:it(()=>[...E[13]||(E[13]=[ut("AI ",-1)])]),_:1}),Y(lt(ct),{class:"drawer-link",to:"/app/providers",onClick:m},{default:it(()=>[...E[14]||(E[14]=[ut("",-1)])]),_:1}),Y(lt(ct),{class:"drawer-link",to:"/app/subscription",onClick:m},{default:it(()=>[...E[15]||(E[15]=[ut("",-1)])]),_:1})],64)):(C(),M(mt,{key:1},[Y(lt(ct),{class:"drawer-link drawer-link-highlight",to:"/app/subscription",onClick:m},{default:it(()=>[...E[16]||(E[16]=[u("span",null,"",-1),u("span",{class:"drawer-badge"},"",-1)])]),_:1}),Y(lt(ct),{class:"drawer-link",to:"/app/ai",onClick:m},{default:it(()=>[...E[17]||(E[17]=[ut("AI ",-1)])]),_:1}),Y(lt(ct),{class:"drawer-link",to:"/app/providers",onClick:m},{default:it(()=>[...E[18]||(E[18]=[ut("",-1)])]),_:1})],64)),r.value?(C(),qt(lt(ct),{key:2,class:"drawer-link",to:"/admin",onClick:m},{default:it(()=>[...E[19]||(E[19]=[ut("",-1)])]),_:1})):j("",!0)]),u("div",hm,[u("div",cm,x(n.value),1),u("button",{class:"btn btn-secondary btn-full",type:"button",onClick:g},"")])],2),u("main",dm,[u("header",fm,[u("div",pm,[u("h1",null,x(s.title),1),s.subtitle?(C(),M("p",mm,x(s.subtitle),1)):j("",!0)])]),u("div",vm,[o.value?(C(),M("div",gm,[u("div",bm,[u("div",null,[E[20]||(E[20]=u("div",{class:"banner-title"},"",-1)),E[21]||(E[21]=u("div",{class:"text-muted"},"",-1)),c.value?(C(),M("div",ym,x(c.value),1)):j("",!0)]),u("button",{class:"btn btn-primary",type:"button",disabled:h.value,onClick:y},x(h.value?"...":""),9,_m)]),d.value?(C(),M("div",wm,[E[22]||(E[22]=u("div",{class:"text-muted"}," SMTP",-1)),u("a",{class:"link",href:d.value},x(d.value),9,Sm)])):j("",!0)])):j("",!0),bu(_.$slots,"default",{},void 0)])])]))}},Pn=hs(xm,[["__scopeId","data-v-6607907e"]]),Cm={class:"card balance-card"},Em={class:"balance-header"},km={class:"card-content"},Tm={class:"balance-row"},Mm={class:"balance-value"},Am={class:"progress-bar"},Om={class:"grid grid-2"},Lm={class:"card"},Pm={key:0,class:"card-content"},Rm={class:"stat-row"},Nm={class:"stat-value"},$m={class:"stat-row"},Dm={class:"stat-value"},Im={key:1,class:"text-muted"},Bm={class:"card"},Vm={key:0,class:"card-content"},Fm={class:"stat-row"},Um={class:"stat-value"},zm={class:"stat-row"},qm={class:"stat-value"},Wm={key:1,class:"text-muted"},Hm={class:"card"},Km={class:"input-with-button"},jm=["disabled"],Gm={key:0,class:"form-error"},Jm={key:1,class:"form-success"},Xm={__name:"DashboardPage",setup(s){const t=Vt({user:null,subscription:null}),e=$(null),i=$(""),n=$(""),r=$(""),o=$(!1),l=$(!1),a=ih(),h=vt(()=>{if(!e.value)return 0;const{allowanceCredits:y,remainingCredits:_}=e.value;return!y||y<=0?0:Math.min(100,Math.max(0,_/y*100))});function c(y){if(!y)return"-";try{return new Date(y).toISOString().slice(0,10)}catch{return String(y)}}function d(y){return{monthly:"",quarterly:"",yearly:"",free:""}[y]||y}function f(y){return y==null?"0.00":Number(y).toFixed(2)}async function p({force:y=!1}={}){l.value=!0;try{const _=await a.get({force:y});t.user=_.user,t.subscription=_.subscription}finally{l.value=!1}}async function m(){try{const y=await nt.request("/api/saas/ai/state");e.value=y.credit||null}catch{e.value=null}}async function g(){n.value="",r.value="",o.value=!0;try{const y=await nt.request("/api/billing/redeem-activation-code",{method:"POST",body:{code:i.value}});a.invalidate(),await p({force:!0}),await m(),t.subscription=y.subscription,r.value="",i.value=""}catch(y){n.value=y?.message||""}finally{o.value=!1}}return re(()=>{p({force:!1}),m()}),(y,_)=>(C(),qt(Pn,{title:"",subtitle:""},{default:it(()=>[u("div",Cm,[u("div",Em,[_[2]||(_[2]=u("h2",{class:"card-title"},"",-1)),Y(lt(ct),{class:"btn btn-primary btn-sm",to:"/app/subscription"},{default:it(()=>[..._[1]||(_[1]=[ut("",-1)])]),_:1})]),u("div",km,[u("div",Tm,[_[3]||(_[3]=u("div",{class:"balance-info"},[u("span",{class:"balance-label"},""),u("span",{class:"balance-hint"},"")],-1)),u("span",Mm,x(f(e.value?.remainingCredits)),1)]),u("div",Am,[u("div",{class:"progress-fill",style:Mi({width:h.value+"%"})},null,4)])])]),u("div",Om,[u("div",Lm,[_[6]||(_[6]=u("h2",{class:"card-title"},"",-1)),t.user?(C(),M("div",Pm,[u("div",Rm,[_[4]||(_[4]=u("span",{class:"stat-label"},"",-1)),u("span",Nm,x(t.user.email),1)]),u("div",$m,[_[5]||(_[5]=u("span",{class:"stat-label"},"",-1)),u("span",Dm,x(t.user.display_name||"-"),1)])])):(C(),M("p",Im,"..."))]),u("div",Bm,[_[9]||(_[9]=u("h2",{class:"card-title"},"",-1)),t.subscription?(C(),M("div",Vm,[u("div",Fm,[_[7]||(_[7]=u("span",{class:"stat-label"},"",-1)),u("span",Um,x(d(t.subscription.plan_code)),1)]),u("div",zm,[_[8]||(_[8]=u("span",{class:"stat-label"},"",-1)),u("span",qm,x(c(t.subscription.current_period_end)),1)])])):(C(),M("p",Wm,""))])]),u("div",Hm,[_[10]||(_[10]=u("h2",{class:"card-title"},"",-1)),u("form",{class:"card-content",onSubmit:ws(g,["prevent"])},[u("div",Km,[st(u("input",{"onUpdate:modelValue":_[0]||(_[0]=E=>i.value=E),class:"form-input",placeholder:"",required:""},null,512),[[dt,i.value]]),u("button",{class:"btn btn-primary",type:"submit",disabled:o.value},x(o.value?"...":""),9,jm)]),n.value?(C(),M("p",Gm,x(n.value),1)):j("",!0),r.value?(C(),M("p",Jm,x(r.value),1)):j("",!0)],32)])]),_:1}))}},Ym={key:0,class:"promo-banner"},Qm={key:1,class:"card subscription-status-card"},Zm={class:"subscription-header"},tv=["disabled"],ev={class:"subscription-details"},sv={class:"subscription-plan"},iv={class:"plan-name"},nv={class:"plan-expiry"},rv={class:"pricing-section"},ov={class:"section-header"},lv={key:0},av={key:1},uv={key:0,class:"form-error",style:{"margin-bottom":"1rem"}},hv={key:1,class:"form-success",style:{"margin-bottom":"1rem"}},cv={key:2,class:"pricing-grid"},dv={key:0,class:"pricing-badge"},fv={key:1,class:"pricing-badge pricing-badge-save"},pv={class:"pricing-header"},mv={class:"pricing-name"},vv={class:"pricing-price"},gv={class:"pricing-amount pricing-discount"},bv={class:"pricing-amount"},yv={class:"pricing-period"},_v={class:"pricing-billing"},wv={key:0,class:"upgrade-info"},Sv={class:"upgrade-price"},xv={class:"original-price"},Cv={class:"upgrade-value"},Ev={key:1,class:"upgrade-hint"},kv={key:2,class:"upgrade-hint upgrade-hint-warn"},Tv={class:"pricing-body"},Mv={class:"pricing-desc"},Av={class:"pricing-features"},Ov=["disabled","onClick"],Lv={key:3,class:"loading-placeholder"},Pv={class:"card activation-card"},Rv={class:"input-with-button"},Nv=["disabled"],$v={key:0,class:"form-error"},Dv={key:1,class:"form-success"},Iv={__name:"SubscriptionPage",setup(s){const t=$(null),e=$(""),i=$(""),n=$(""),r=$(!1),o=$(null),l=$(""),a=$(""),h=$(!1),c=$({}),d=$(!1),f=$(0),p=sh(),m=vt(()=>String(t.value?.plan_code||"").trim()),g=vt(()=>t.value?.provider==="stripe"),y=vt(()=>{if(!t.value||t.value.status!=="active"||!t.value.current_period_end)return!1;const k=new Date(t.value.current_period_end).getTime();return Number.isFinite(k)&&k>Date.now()}),_=vt(()=>H());function E(k){if(!k)return"-";try{return new Date(k).toISOString().slice(0,10)}catch{return String(k)}}function F(k){return{monthly:"",quarterly:"",yearly:"",free:""}[k]||k}function I(k){return{active:"",canceled:"",expired:"",trialing:""}[k]||k}function X(k){const A=k?.price||null,K=Number(A?.unitAmount),v=String(A?.interval||"").trim(),b=Number(A?.intervalCount);if(Number.isFinite(K)&&K>=0&&v){const R=K/100;if(v==="month"){const O=Number.isFinite(b)&&b>0?b:1,W=R/O;return{amount:`$${rt(W)}`,period:"/"}}if(v==="year"){const O=R/12;return{amount:`$${rt(O)}`,period:"/"}}return v==="week"?{amount:`$${rt(R)}`,period:"/"}:{amount:`$${rt(R)}`,period:`/${v}`}}const L=Number({monthly:10,quarterly:8,yearly:7,free:0}[k.code])||0;return L<=0?{amount:"",period:""}:{amount:`$${L}`,period:"/"}}function rt(k){const A=Number(k);return Number.isFinite(A)?Math.abs(A-Math.round(A))<1e-9?String(Math.round(A)):A.toFixed(2).replace(/\.?0+$/,""):"0"}function tt(k){const A=Number(k);return Number.isFinite(A)?`$${rt(A)}`:null}function B(k){const A=String(k?.interval||"").trim(),K=Number(k?.intervalCount),v=Number.isFinite(K)&&K>0?K:1;return A==="month"?v:A==="year"?12*v:null}function T(k){const A=Number(k?.unitAmount);return!Number.isFinite(A)||A<0?null:A/100}function w(k){const A=String(k||"").trim();return(o.value?.plans||[]).find(v=>v.code===A)||null}function H(){if(!g.value)return{};if(!y.value)return{};if(!o.value?.plans?.length)return{};const k=new Date(t.value?.current_period_start||"").getTime(),A=new Date(t.value?.current_period_end||"").getTime();if(!Number.isFinite(k)||!Number.isFinite(A)||A<=k)return{};const K=Date.now(),v=(A-k)/1e3,b=Math.max(0,(A-K)/1e3);if(!Number.isFinite(v)||v<=0)return{};const S=Math.min(1,Math.max(0,b/v)),L=w(m.value),R=T(L?.price);if(!Number.isFinite(R)||R<=0)return{};const O={};for(const W of o.value.plans){if(!gt(W.code))continue;const q=T(W?.price),z=B(W?.price);if(!Number.isFinite(q)||q<=0||!Number.isFinite(z)||z<=0)continue;const D=R*S,Q=Math.max(0,q-D),G=Q/z;O[W.code]={months:z,perMonthDisplay:tt(G),payableTotalDisplay:tt(Q),originalTotalDisplay:tt(q),remainingValueDisplay:tt(D),remainingPercent:rt(S*100)}}return O}function At(k){const A=k?.price||null,K=Number(A?.unitAmount),v=String(A?.currency||"").toUpperCase(),b=String(A?.interval||"").trim(),S=Number(A?.intervalCount);if(Number.isFinite(K)&&K>=0&&b){const L=(K/100).toFixed(2),R=v==="USD"||!v?"US$":`${v} `;if(b==="month"){const O=Number.isFinite(S)&&S>0?S:1;return`${R}${L} / ${O} `}if(b==="year"){const O=Number.isFinite(S)&&S>0?S:1;return O===1?`${R}${L} / `:`${R}${L} / ${O} `}if(b==="week"){const O=Number.isFinite(S)&&S>0?S:1;return O===1?`${R}${L} / `:`${R}${L} / ${O} `}return`${R}${L} / ${b}`}return k.code==="monthly"?"10 USD / 1 ":k.code==="quarterly"?"24 USD / 3 ":k.code==="yearly"?"84 USD / 12 ":""}function Tt(k){return{monthly:"10 USD/ 300 ",quarterly:"24 USD/ 8 USD/ 400 ",yearly:"84 USD/ 7 USD/ 500 ",free:" 10 "}[k]||" AI "}function Qt(k){return{monthly:[" 300  300  AI ","Sonnet 4.5 / GPT-5.2 / Gemini 3 Pro / Qwen3-VL-Plus / GLM-4.7"," Provider ",""],quarterly:[" 400 ","GPT-5.2 Extra Thinking / o3 / Opus 4.5","","24 USD/"],yearly:[" 500 ","GPT-5.2 Extra Thinking / o3 / Opus 4.5","","84 USD/"],free:[" 10 ","",""]}[k]||[" AI ",""]}const Wt={free:0,monthly:1,quarterly:2,yearly:3};function gt(k){if(!t.value||!y.value)return!1;const A=Wt[m.value]||0;return(Wt[String(k||"").trim()]||0)>A}function U(k){return t.value?t.value.plan_code===k&&t.value.status==="active":!1}function P(k,A){return k.available?A?"...":U(k.code)?"":gt(k.code)?"":"":""}function ht(k,A){return U(k.code)?"btn-secondary":A===1?"btn-primary":A===2?"btn-accent":"btn-secondary"}async function Ht(){const k=await nt.request("/api/billing/subscription");t.value=k.subscription||null}async function Nt(){d.value=!0,l.value="";try{await nt.request("/api/stripe/subscriptions/sync",{method:"POST"}),await Ht(),await Se(),await we()}catch(k){l.value=k?.message||""}finally{d.value=!1}}function It(){return!(d.value||t.value?.provider!=="stripe"||Date.now()-f.value<15e3)}async function _e(k){if(It()){f.value=Date.now();try{await Nt()}catch{}}}async function we(){if(c.value={},!!g.value&&y.value&&o.value?.plans?.length){for(const k of o.value.plans)if(gt(k.code)){c.value[k.code]={loading:!0,error:!1,amountDueDisplay:null};try{const A=await nt.request("/api/stripe/subscriptions/upgrade/preview",{method:"POST",body:{targetPlanCode:k.code}});c.value[k.code]={...A,loading:!1,error:!1}}catch{c.value[k.code]={loading:!1,error:!0,amountDueDisplay:null}}}}}async function Se(){l.value="";try{o.value=await nt.request("/api/stripe/config")}catch(k){o.value=null,l.value=k?.message||"Stripe "}}async function Zt(k){l.value="",a.value="",h.value=!0;try{const A=await nt.request("/api/stripe/checkout/create",{method:"POST",body:{planCode:k}});if(!A?.url)throw new Error("");window.location.assign(A.url)}catch(A){l.value=A?.message||""}finally{h.value=!1}}async function N(){const k=String(p.query.stripe||"").trim(),A=String(p.query.session_id||"").trim();if(k==="cancel"){a.value="";return}if(k==="portal_return"){a.value="...",await Nt().catch(()=>null),a.value="";return}if(k==="success"&&A){a.value="...";try{await nt.request("/api/stripe/checkout/complete",{method:"POST",body:{sessionId:A}})}catch{}await Nt().catch(()=>null),a.value=""}}async function J(){i.value="",n.value="",r.value=!0;try{const k=await nt.request("/api/billing/redeem-activation-code",{method:"POST",body:{code:e.value}});t.value=k.subscription||null,n.value="",e.value=""}catch(k){i.value=k?.message||""}finally{r.value=!1}}return ns([t,o],()=>{we()}),re(async()=>{await Ht(),await Se(),await we(),await N(),await _e();const k=()=>{_e()},A=()=>{document.visibilityState==="visible"&&_e()};window.addEventListener("focus",k),document.addEventListener("visibilitychange",A),js(()=>{window.removeEventListener("focus",k),document.removeEventListener("visibilitychange",A)})}),(k,A)=>(C(),qt(Pn,{title:"",subtitle:" AI "},{default:it(()=>[t.value?j("",!0):(C(),M("div",Ym,[...A[1]||(A[1]=[u("div",{class:"promo-content"},[u("div",{class:"promo-icon"},[u("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[u("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})])]),u("div",{class:"promo-text"},[u("h3",null," AI "),u("p",null," VLM  K /")])],-1)])])),t.value?(C(),M("div",Qm,[u("div",Zm,[A[2]||(A[2]=u("div",{class:"subscription-badge"},[u("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})]),ut("  ")],-1)),t.value?.provider==="stripe"?(C(),M("button",{key:0,class:"btn btn-secondary btn-sm",type:"button",disabled:d.value,onClick:Nt},x(d.value?"...":""),9,tv)):j("",!0)]),u("div",ev,[u("div",sv,[u("span",iv,x(F(t.value.plan_code)),1),u("span",{class:ue(["plan-status",t.value.status])},x(I(t.value.status)),3)]),u("div",nv,[A[3]||(A[3]=ut("  ",-1)),u("strong",null,x(E(t.value.current_period_end)),1)])])])):j("",!0),u("div",rv,[u("div",ov,[A[4]||(A[4]=u("h2",null,"",-1)),t.value?(C(),M("p",av,"")):(C(),M("p",lv,""))]),l.value?(C(),M("div",uv,x(l.value),1)):j("",!0),a.value?(C(),M("p",hv,x(a.value),1)):j("",!0),o.value?(C(),M("div",cv,[(C(!0),M(mt,null,Xt(o.value.plans,(K,v)=>(C(),M("div",{key:K.code,class:ue(["pricing-card",{featured:v===1,current:U(K.code)}])},[v===1?(C(),M("span",dv,"")):v===2?(C(),M("span",fv,"")):j("",!0),u("div",pv,[u("div",mv,x(K.displayName),1),u("div",vv,[_.value[K.code]?(C(),M(mt,{key:0},[u("span",gv,x(_.value[K.code].perMonthDisplay),1),A[5]||(A[5]=u("span",{class:"pricing-period"},"/",-1))],64)):(C(),M(mt,{key:1},[u("span",bv,x(X(K).amount),1),u("span",yv,x(X(K).period),1)],64))]),u("div",_v,x(At(K)),1),_.value[K.code]?(C(),M("div",wv,[u("div",Sv,[ut(" "+x(_.value[K.code].payableTotalDisplay)+" ",1),u("span",xv,x(_.value[K.code].originalTotalDisplay),1)]),u("div",Cv,"  "+x(_.value[K.code].remainingValueDisplay)+""+x(_.value[K.code].remainingPercent)+"% ",1)])):gt(K.code)&&y.value&&g.value&&c.value[K.code]?.loading?(C(),M("div",Ev," ... ")):gt(K.code)&&y.value&&!g.value?(C(),M("div",kv,"  ")):j("",!0)]),u("div",Tv,[u("p",Mv,x(Tt(K.code)),1),u("ul",Av,[(C(!0),M(mt,null,Xt(Qt(K.code),b=>(C(),M("li",{key:b},x(b),1))),128))])]),u("button",{class:ue(["btn pricing-btn",ht(K,v)]),type:"button",disabled:h.value||!K.available||U(K.code),onClick:b=>Zt(K.code)},x(P(K,h.value)),11,Ov)],2))),128))])):(C(),M("div",Lv,[...A[6]||(A[6]=[u("div",{class:"loading-spinner"},null,-1),u("p",null,"...",-1)])]))]),u("div",Pv,[A[7]||(A[7]=u("div",{class:"activation-header"},[u("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[u("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),u("circle",{cx:"12",cy:"16",r:"1"}),u("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]),u("h3",null,"")],-1)),A[8]||(A[8]=u("p",{class:"text-muted"},"",-1)),u("form",{class:"activation-form",onSubmit:ws(J,["prevent"])},[u("div",Rv,[st(u("input",{"onUpdate:modelValue":A[0]||(A[0]=K=>e.value=K),class:"form-input",placeholder:"",required:""},null,512),[[dt,e.value]]),u("button",{class:"btn btn-primary",type:"submit",disabled:r.value},x(r.value?"...":""),9,Nv)]),i.value?(C(),M("p",$v,x(i.value),1)):j("",!0),n.value?(C(),M("p",Dv,x(n.value),1)):j("",!0)],32)])]),_:1}))}},Bv=hs(Iv,[["__scopeId","data-v-93467507"]]);function Mt(s){var t=s.width,e=s.height;if(t<0)throw new Error("Negative width is not allowed for Size");if(e<0)throw new Error("Negative height is not allowed for Size");return{width:t,height:e}}function ys(s,t){return s.width===t.width&&s.height===t.height}var Vv=(function(){function s(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return s.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(s.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),s.prototype.subscribe=function(t){var e=this,i={next:t};return this._observers.push(i),{unsubscribe:function(){e._observers=e._observers.filter(function(n){return n!==i})}}},s.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},s.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},s.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},s.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(e){return e.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},s})();function Fv(s){return new Vv(s)}var Uv=(function(){function s(t,e,i){var n;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=Mt({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=e??(function(r){return r}),this._allowResizeObserver=(n=i?.allowResizeObserver)!==null&&n!==void 0?n:!0,this._chooseAndInitObserver()}return s.prototype.dispose=function(){var t,e;if(this._canvasElement===null)throw new Error("Object is disposed");(t=this._canvasElementResizeObserver)===null||t===void 0||t.disconnect(),this._canvasElementResizeObserver=null,(e=this._devicePixelRatioObservable)===null||e===void 0||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(s.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"bitmapSize",{get:function(){return Mt({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),s.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=Mt(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},s.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},s.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(e){return e!==t})},Object.defineProperty(s.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),s.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},s.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(e){return e!==t})},s.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},s.prototype._resizeBitmap=function(t){var e=this.bitmapSize;ys(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},s.prototype._emitBitmapSizeChanged=function(t,e){var i=this;this._bitmapSizeChangedListeners.forEach(function(n){return n.call(i,t,e)})},s.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,i=Mt(this._transformBitmapSize(t,this._canvasElementClientSize)),n=ys(this.bitmapSize,i)?null:i;e===null&&n===null||e!==null&&n!==null&&ys(e,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(e,n))},s.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(n){return n.call(i,t,e)})},s.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}qv().then(function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})},s.prototype._initDevicePixelRatioObservable=function(){var t=this;if(this._canvasElement!==null){var e=Bl(this._canvasElement);if(e===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=Fv(e),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},s.prototype._invalidateBitmapSize=function(){var t,e;if(this._canvasElement!==null){var i=Bl(this._canvasElement);if(i!==null){var n=(e=(t=this._devicePixelRatioObservable)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:i.devicePixelRatio,r=this._canvasElement.getClientRects(),o=r[0]!==void 0?Wv(r[0],n):Mt({width:this._canvasElementClientSize.width*n,height:this._canvasElementClientSize.height*n});this._suggestNewBitmapSize(o)}}},s.prototype._initResizeObserver=function(){var t=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(e){var i=e.find(function(o){return o.target===t._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var n=i.devicePixelContentBoxSize[0],r=Mt({width:n.inlineSize,height:n.blockSize});t._suggestNewBitmapSize(r)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},s})();function zv(s,t){return new Uv(s,t.transform,t.options)}function Bl(s){return s.ownerDocument.defaultView}function qv(){return new Promise(function(s){var t=new ResizeObserver(function(e){s(e.every(function(i){return"devicePixelContentBoxSize"in i})),t.disconnect()});t.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function Wv(s,t){return Mt({width:Math.round(s.left*t+s.width*t)-Math.round(s.left*t),height:Math.round(s.top*t+s.height*t)-Math.round(s.top*t)})}var Hv=(function(){function s(t,e,i){if(e.width===0||e.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=t}return s.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},s.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(s.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),s})();function xs(s,t){var e=s.canvasElementClientSize;if(e.width===0||e.height===0)return null;var i=s.bitmapSize;if(i.width===0||i.height===0)return null;var n=s.canvasElement.getContext("2d",t);return n===null?null:new Hv(n,e,i)}const Kv={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},jv={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},Gv={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Jv={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Xv={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Yv={color:"#26a69a",base:0},nh={color:"#2196f3"},rh={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var Vl,Fl;function Cs(s,t){const e={0:[],1:[s.lineWidth,s.lineWidth],2:[2*s.lineWidth,2*s.lineWidth],3:[6*s.lineWidth,6*s.lineWidth],4:[s.lineWidth,4*s.lineWidth]}[t];s.setLineDash(e)}function oh(s,t,e,i){s.beginPath();const n=s.lineWidth%2?.5:0;s.moveTo(e,t+n),s.lineTo(i,t+n),s.stroke()}function ls(s,t){if(!s)throw new Error("Assertion failed"+(t?": "+t:""))}function Yt(s){if(s===void 0)throw new Error("Value is undefined");return s}function V(s){if(s===null)throw new Error("Value is null");return s}function Ls(s){return V(Yt(s))}(function(s){s[s.Simple=0]="Simple",s[s.WithSteps=1]="WithSteps",s[s.Curved=2]="Curved"})(Vl||(Vl={})),(function(s){s[s.Solid=0]="Solid",s[s.Dotted=1]="Dotted",s[s.Dashed=2]="Dashed",s[s.LargeDashed=3]="LargeDashed",s[s.SparseDotted=4]="SparseDotted"})(Fl||(Fl={}));const Ul={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function he(s){return s<0?0:s>255?255:Math.round(s)||0}function lh(s){return s<=0||s>0?s<0?0:s>1?1:Math.round(1e4*s)/1e4:0}const Qv=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,Zv=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,tg=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,eg=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function gn(s){(s=s.toLowerCase())in Ul&&(s=Ul[s]);{const t=eg.exec(s)||tg.exec(s);if(t)return[he(parseInt(t[1],10)),he(parseInt(t[2],10)),he(parseInt(t[3],10)),lh(t.length<5?1:parseFloat(t[4]))]}{const t=Zv.exec(s);if(t)return[he(parseInt(t[1],16)),he(parseInt(t[2],16)),he(parseInt(t[3],16)),1]}{const t=Qv.exec(s);if(t)return[he(17*parseInt(t[1],16)),he(17*parseInt(t[2],16)),he(17*parseInt(t[3],16)),1]}throw new Error(`Cannot parse color: ${s}`)}function Rn(s){const t=gn(s);return{t:`rgb(${t[0]}, ${t[1]}, ${t[2]})`,i:(e=t,.199*e[0]+.687*e[1]+.114*e[2]>160?"black":"white")};var e}class Lt{constructor(){this.h=[]}l(t,e,i){const n={o:t,_:e,u:i===!0};this.h.push(n)}v(t){const e=this.h.findIndex((i=>t===i.o));e>-1&&this.h.splice(e,1)}p(t){this.h=this.h.filter((e=>e._!==t))}m(t,e,i){const n=[...this.h];this.h=this.h.filter((r=>!r.u)),n.forEach((r=>r.o(t,e,i)))}M(){return this.h.length>0}S(){this.h=[]}}function ye(s,...t){for(const e of t)for(const i in e)e[i]!==void 0&&(typeof e[i]!="object"||s[i]===void 0||Array.isArray(e[i])?s[i]=e[i]:ye(s[i],e[i]));return s}function Oe(s){return typeof s=="number"&&isFinite(s)}function xi(s){return typeof s=="number"&&s%1==0}function Ri(s){return typeof s=="string"}function Bi(s){return typeof s=="boolean"}function Ue(s){const t=s;if(!t||typeof t!="object")return t;let e,i,n;for(i in e=Array.isArray(t)?[]:{},t)t.hasOwnProperty(i)&&(n=t[i],e[i]=n&&typeof n=="object"?Ue(n):n);return e}function sg(s){return s!==null}function Ci(s){return s===null?void 0:s}const xo="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Ws(s,t,e){return t===void 0&&(t=xo),`${e=e!==void 0?`${e} `:""}${s}px ${t}`}class ig{constructor(t){this.k={C:1,T:5,P:NaN,R:"",D:"",O:"",A:"",V:0,B:0,I:0,L:0,N:0},this.F=t}W(){const t=this.k,e=this.j(),i=this.H();return t.P===e&&t.D===i||(t.P=e,t.D=i,t.R=Ws(e,i),t.L=2.5/12*e,t.V=t.L,t.B=e/12*t.T,t.I=e/12*t.T,t.N=0),t.O=this.$(),t.A=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class Co{constructor(){this.Y=[]}X(t){this.Y=t}K(t,e,i){this.Y.forEach((n=>{n.K(t,e,i)}))}}class Eo{K(t,e,i){t.useMediaCoordinateSpace((n=>this.Z(n,e,i)))}G(t,e,i){t.useMediaCoordinateSpace((n=>this.J(n,e,i)))}J(t,e,i){}}class ng extends Eo{constructor(){super(...arguments),this.tt=null}it(t){this.tt=t}Z({context:t}){if(this.tt===null||this.tt.nt===null)return;const e=this.tt.nt,i=this.tt,n=r=>{t.beginPath();for(let o=e.to-1;o>=e.from;--o){const l=i.st[o];t.moveTo(l.et,l.rt),t.arc(l.et,l.rt,r,0,2*Math.PI)}t.fill()};i.ht>0&&(t.fillStyle=i.lt,n(i.ot+i.ht)),t.fillStyle=i._t,n(i.ot)}}function rg(){return{st:[{et:0,rt:0,ut:0,ct:0}],_t:"",lt:"",ot:0,ht:0,nt:null}}const og={from:0,to:1};class lg{constructor(t,e){this.dt=new Co,this.ft=[],this.vt=[],this.bt=!0,this.F=t,this.wt=e,this.dt.X(this.ft)}gt(t){const e=this.F.Mt();e.length!==this.ft.length&&(this.vt=e.map(rg),this.ft=this.vt.map((i=>{const n=new ng;return n.it(i),n})),this.dt.X(this.ft)),this.bt=!0}xt(){return this.bt&&(this.St(),this.bt=!1),this.dt}St(){const t=this.wt.W().mode===2,e=this.F.Mt(),i=this.wt.kt(),n=this.F.yt();e.forEach(((r,o)=>{var l;const a=this.vt[o],h=r.Ct(i);if(t||h===null||!r.Tt())return void(a.nt=null);const c=V(r.Pt());a._t=h.Rt,a.ot=h.ot,a.ht=h.Dt,a.st[0].ct=h.ct,a.st[0].rt=r.At().Ot(h.ct,c.Vt),a.lt=(l=h.Bt)!==null&&l!==void 0?l:this.F.It(a.st[0].rt/r.At().zt()),a.st[0].ut=i,a.st[0].et=n.Et(i),a.nt=og}))}}class Je{K(t,e,i){t.useBitmapCoordinateSpace((n=>this.Z(n,e,i)))}}class ag extends Je{constructor(t){super(),this.Lt=t}Z({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.Lt===null)return;const r=this.Lt.Nt.Tt,o=this.Lt.Ft.Tt;if(!r&&!o)return;const l=Math.round(this.Lt.et*i),a=Math.round(this.Lt.rt*n);t.lineCap="butt",r&&l>=0&&(t.lineWidth=Math.floor(this.Lt.Nt.ht*i),t.strokeStyle=this.Lt.Nt.O,t.fillStyle=this.Lt.Nt.O,Cs(t,this.Lt.Nt.Wt),(function(h,c,d,f){h.beginPath();const p=h.lineWidth%2?.5:0;h.moveTo(c+p,d),h.lineTo(c+p,f),h.stroke()})(t,l,0,e.height)),o&&a>=0&&(t.lineWidth=Math.floor(this.Lt.Ft.ht*n),t.strokeStyle=this.Lt.Ft.O,t.fillStyle=this.Lt.Ft.O,Cs(t,this.Lt.Ft.Wt),oh(t,a,0,e.width))}}class ug{constructor(t){this.bt=!0,this.jt={Nt:{ht:1,Wt:0,O:"",Tt:!1},Ft:{ht:1,Wt:0,O:"",Tt:!1},et:0,rt:0},this.Ht=new ag(this.jt),this.$t=t}gt(){this.bt=!0}xt(){return this.bt&&(this.St(),this.bt=!1),this.Ht}St(){const t=this.$t.Tt(),e=V(this.$t.Ut()),i=e.qt().W().crosshair,n=this.jt;if(i.mode===2)return n.Ft.Tt=!1,void(n.Nt.Tt=!1);n.Ft.Tt=t&&this.$t.Yt(e),n.Nt.Tt=t&&this.$t.Xt(),n.Ft.ht=i.horzLine.width,n.Ft.Wt=i.horzLine.style,n.Ft.O=i.horzLine.color,n.Nt.ht=i.vertLine.width,n.Nt.Wt=i.vertLine.style,n.Nt.O=i.vertLine.color,n.et=this.$t.Kt(),n.rt=this.$t.Zt()}}function hg(s,t,e,i,n,r){s.fillRect(t+r,e,i-2*r,r),s.fillRect(t+r,e+n-r,i-2*r,r),s.fillRect(t,e,r,n),s.fillRect(t+i-r,e,r,n)}function Nn(s,t,e,i,n,r){s.save(),s.globalCompositeOperation="copy",s.fillStyle=r,s.fillRect(t,e,i,n),s.restore()}function zl(s,t){return s.map((e=>e===0?e:e+t))}function tr(s,t,e,i,n,r){s.beginPath(),s.lineTo(t+i-r[1],e),r[1]!==0&&s.arcTo(t+i,e,t+i,e+r[1],r[1]),s.lineTo(t+i,e+n-r[2]),r[2]!==0&&s.arcTo(t+i,e+n,t+i-r[2],e+n,r[2]),s.lineTo(t+r[3],e+n),r[3]!==0&&s.arcTo(t,e+n,t,e+n-r[3],r[3]),s.lineTo(t,e+r[0]),r[0]!==0&&s.arcTo(t,e,t+r[0],e,r[0])}function ql(s,t,e,i,n,r,o=0,l=[0,0,0,0],a=""){if(s.save(),!o||!a||a===r)return tr(s,t,e,i,n,l),s.fillStyle=r,s.fill(),void s.restore();const h=o/2;r!=="transparent"&&(tr(s,t+o,e+o,i-2*o,n-2*o,zl(l,-o)),s.fillStyle=r,s.fill()),a!=="transparent"&&(tr(s,t+h,e+h,i-o,n-o,zl(l,-h)),s.lineWidth=o,s.strokeStyle=a,s.closePath(),s.stroke()),s.restore()}function ah(s,t,e,i,n,r,o){s.save(),s.globalCompositeOperation="copy";const l=s.createLinearGradient(0,0,0,n);l.addColorStop(0,r),l.addColorStop(1,o),s.fillStyle=l,s.fillRect(t,e,i,n),s.restore()}class Wl{constructor(t,e){this.it(t,e)}it(t,e){this.Lt=t,this.Gt=e}zt(t,e){return this.Lt.Tt?t.P+t.L+t.V:0}K(t,e,i,n){if(!this.Lt.Tt||this.Lt.Jt.length===0)return;const r=this.Lt.O,o=this.Gt.t,l=t.useBitmapCoordinateSpace((a=>{const h=a.context;h.font=e.R;const c=this.Qt(a,e,i,n),d=c.ti,f=(p,m)=>{c.ii?ql(h,d.ni,d.si,d.ei,d.ri,p,d.hi,[d.ot,0,0,d.ot],m):ql(h,d.li,d.si,d.ei,d.ri,p,d.hi,[0,d.ot,d.ot,0],m)};return f(o,"transparent"),this.Lt.ai&&(h.fillStyle=r,h.fillRect(d.li,d.oi,d._i-d.li,d.ui)),f("transparent",o),this.Lt.ci&&(h.fillStyle=e.A,h.fillRect(c.ii?d.di-d.hi:0,d.si,d.hi,d.fi-d.si)),c}));t.useMediaCoordinateSpace((({context:a})=>{const h=l.vi;a.font=e.R,a.textAlign=l.ii?"right":"left",a.textBaseline="middle",a.fillStyle=r,a.fillText(this.Lt.Jt,h.pi,(h.si+h.fi)/2+h.mi)}))}Qt(t,e,i,n){var r;const{context:o,bitmapSize:l,mediaSize:a,horizontalPixelRatio:h,verticalPixelRatio:c}=t,d=this.Lt.ai||!this.Lt.bi?e.T:0,f=this.Lt.wi?e.C:0,p=e.L+this.Gt.gi,m=e.V+this.Gt.Mi,g=e.B,y=e.I,_=this.Lt.Jt,E=e.P,F=i.xi(o,_),I=Math.ceil(i.Si(o,_)),X=E+p+m,rt=e.C+g+y+I+d,tt=Math.max(1,Math.floor(c));let B=Math.round(X*c);B%2!=tt%2&&(B+=1);const T=f>0?Math.max(1,Math.floor(f*h)):0,w=Math.round(rt*h),H=Math.round(d*h),At=(r=this.Gt.ki)!==null&&r!==void 0?r:this.Gt.yi,Tt=Math.round(At*c)-Math.floor(.5*c),Qt=Math.floor(Tt+tt/2-B/2),Wt=Qt+B,gt=n==="right",U=gt?a.width-f:f,P=gt?l.width-T:T;let ht,Ht,Nt;return gt?(ht=P-w,Ht=P-H,Nt=U-d-g-f):(ht=P+w,Ht=P+H,Nt=U+d+g),{ii:gt,ti:{si:Qt,oi:Tt,fi:Wt,ei:w,ri:B,ot:2*h,hi:T,ni:ht,li:P,_i:Ht,ui:tt,di:l.width},vi:{si:Qt/c,fi:Wt/c,pi:Nt,mi:F}}}}class $n{constructor(t){this.Ci={yi:0,t:"#000",Mi:0,gi:0},this.Ti={Jt:"",Tt:!1,ai:!0,bi:!1,Bt:"",O:"#FFF",ci:!1,wi:!1},this.Pi={Jt:"",Tt:!1,ai:!1,bi:!0,Bt:"",O:"#FFF",ci:!0,wi:!0},this.bt=!0,this.Ri=new(t||Wl)(this.Ti,this.Ci),this.Di=new(t||Wl)(this.Pi,this.Ci)}Jt(){return this.Oi(),this.Ti.Jt}yi(){return this.Oi(),this.Ci.yi}gt(){this.bt=!0}zt(t,e=!1){return Math.max(this.Ri.zt(t,e),this.Di.zt(t,e))}Ai(){return this.Ci.ki||0}Vi(t){this.Ci.ki=t}Bi(){return this.Oi(),this.Ti.Tt||this.Pi.Tt}Ii(){return this.Oi(),this.Ti.Tt}xt(t){return this.Oi(),this.Ti.ai=this.Ti.ai&&t.W().ticksVisible,this.Pi.ai=this.Pi.ai&&t.W().ticksVisible,this.Ri.it(this.Ti,this.Ci),this.Di.it(this.Pi,this.Ci),this.Ri}zi(){return this.Oi(),this.Ri.it(this.Ti,this.Ci),this.Di.it(this.Pi,this.Ci),this.Di}Oi(){this.bt&&(this.Ti.ai=!0,this.Pi.ai=!1,this.Ei(this.Ti,this.Pi,this.Ci))}}class cg extends $n{constructor(t,e,i){super(),this.$t=t,this.Li=e,this.Ni=i}Ei(t,e,i){if(t.Tt=!1,this.$t.W().mode===2)return;const n=this.$t.W().horzLine;if(!n.labelVisible)return;const r=this.Li.Pt();if(!this.$t.Tt()||this.Li.Fi()||r===null)return;const o=Rn(n.labelBackgroundColor);i.t=o.t,t.O=o.i;const l=2/12*this.Li.P();i.gi=l,i.Mi=l;const a=this.Ni(this.Li);i.yi=a.yi,t.Jt=this.Li.Wi(a.ct,r),t.Tt=!0}}const dg=/[1-9]/g;class uh{constructor(){this.Lt=null}it(t){this.Lt=t}K(t,e){if(this.Lt===null||this.Lt.Tt===!1||this.Lt.Jt.length===0)return;const i=t.useMediaCoordinateSpace((({context:f})=>(f.font=e.R,Math.round(e.ji.Si(f,V(this.Lt).Jt,dg)))));if(i<=0)return;const n=e.Hi,r=i+2*n,o=r/2,l=this.Lt.$i;let a=this.Lt.yi,h=Math.floor(a-o)+.5;h<0?(a+=Math.abs(0-h),h=Math.floor(a-o)+.5):h+r>l&&(a-=Math.abs(l-(h+r)),h=Math.floor(a-o)+.5);const c=h+r,d=Math.ceil(0+e.C+e.T+e.L+e.P+e.V);t.useBitmapCoordinateSpace((({context:f,horizontalPixelRatio:p,verticalPixelRatio:m})=>{const g=V(this.Lt);f.fillStyle=g.t;const y=Math.round(h*p),_=Math.round(0*m),E=Math.round(c*p),F=Math.round(d*m),I=Math.round(2*p);if(f.beginPath(),f.moveTo(y,_),f.lineTo(y,F-I),f.arcTo(y,F,y+I,F,I),f.lineTo(E-I,F),f.arcTo(E,F,E,F-I,I),f.lineTo(E,_),f.fill(),g.ai){const X=Math.round(g.yi*p),rt=_,tt=Math.round((rt+e.T)*m);f.fillStyle=g.O;const B=Math.max(1,Math.floor(p)),T=Math.floor(.5*p);f.fillRect(X-T,rt,B,tt-rt)}})),t.useMediaCoordinateSpace((({context:f})=>{const p=V(this.Lt),m=0+e.C+e.T+e.L+e.P/2;f.font=e.R,f.textAlign="left",f.textBaseline="middle",f.fillStyle=p.O;const g=e.ji.xi(f,"Apr0");f.translate(h+n,m+g),f.fillText(p.Jt,0,0)}))}}class fg{constructor(t,e,i){this.bt=!0,this.Ht=new uh,this.jt={Tt:!1,t:"#4c525e",O:"white",Jt:"",$i:0,yi:NaN,ai:!0},this.wt=t,this.Ui=e,this.Ni=i}gt(){this.bt=!0}xt(){return this.bt&&(this.St(),this.bt=!1),this.Ht.it(this.jt),this.Ht}St(){const t=this.jt;if(t.Tt=!1,this.wt.W().mode===2)return;const e=this.wt.W().vertLine;if(!e.labelVisible)return;const i=this.Ui.yt();if(i.Fi())return;t.$i=i.$i();const n=this.Ni();if(n===null)return;t.yi=n.yi;const r=i.qi(this.wt.kt());t.Jt=i.Yi(V(r)),t.Tt=!0;const o=Rn(e.labelBackgroundColor);t.t=o.t,t.O=o.i,t.ai=i.W().ticksVisible}}class ko{constructor(){this.Xi=null,this.Ki=0}Zi(){return this.Ki}Gi(t){this.Ki=t}At(){return this.Xi}Ji(t){this.Xi=t}Qi(t){return[]}tn(){return[]}Tt(){return!0}}var Fr;(function(s){s[s.Normal=0]="Normal",s[s.Magnet=1]="Magnet",s[s.Hidden=2]="Hidden"})(Fr||(Fr={}));class pg extends ko{constructor(t,e){super(),this.nn=null,this.sn=NaN,this.en=0,this.rn=!0,this.hn=new Map,this.ln=!1,this.an=NaN,this.on=NaN,this._n=NaN,this.un=NaN,this.Ui=t,this.cn=e,this.dn=new lg(t,this),this.fn=((n,r)=>o=>{const l=r(),a=n();if(o===V(this.nn).vn())return{ct:a,yi:l};{const h=V(o.Pt());return{ct:o.pn(l,h),yi:l}}})((()=>this.sn),(()=>this.on));const i=((n,r)=>()=>{const o=this.Ui.yt().mn(n()),l=r();return o&&Number.isFinite(l)?{ut:o,yi:l}:null})((()=>this.en),(()=>this.Kt()));this.bn=new fg(this,t,i),this.wn=new ug(this)}W(){return this.cn}gn(t,e){this._n=t,this.un=e}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(t,e,i){this.ln||(this.ln=!0),this.rn=!0,this.yn(t,e,i)}kt(){return this.en}Kt(){return this.an}Zt(){return this.on}Tt(){return this.rn}Cn(){this.rn=!1,this.Tn(),this.sn=NaN,this.an=NaN,this.on=NaN,this.nn=null,this.Mn()}Pn(t){return this.nn!==null?[this.wn,this.dn]:[]}Yt(t){return t===this.nn&&this.cn.horzLine.visible}Xt(){return this.cn.vertLine.visible}Rn(t,e){this.rn&&this.nn===t||this.hn.clear();const i=[];return this.nn===t&&i.push(this.Dn(this.hn,e,this.fn)),i}tn(){return this.rn?[this.bn]:[]}Ut(){return this.nn}On(){this.wn.gt(),this.hn.forEach((t=>t.gt())),this.bn.gt(),this.dn.gt()}An(t){return t&&!t.vn().Fi()?t.vn():null}yn(t,e,i){this.Vn(t,e,i)&&this.On()}Vn(t,e,i){const n=this.an,r=this.on,o=this.sn,l=this.en,a=this.nn,h=this.An(i);this.en=t,this.an=isNaN(t)?NaN:this.Ui.yt().Et(t),this.nn=i;const c=h!==null?h.Pt():null;return h!==null&&c!==null?(this.sn=e,this.on=h.Ot(e,c)):(this.sn=NaN,this.on=NaN),n!==this.an||r!==this.on||l!==this.en||o!==this.sn||a!==this.nn}Tn(){const t=this.Ui.Mt().map((i=>i.In().Bn())).filter(sg),e=t.length===0?null:Math.max(...t);this.en=e!==null?e:NaN}Dn(t,e,i){let n=t.get(e);return n===void 0&&(n=new cg(this,e,i),t.set(e,n)),n}}function Dn(s){return s==="left"||s==="right"}class Dt{constructor(t){this.zn=new Map,this.En=[],this.Ln=t}Nn(t,e){const i=(function(n,r){return n===void 0?r:{Fn:Math.max(n.Fn,r.Fn),Wn:n.Wn||r.Wn}})(this.zn.get(t),e);this.zn.set(t,i)}jn(){return this.Ln}Hn(t){const e=this.zn.get(t);return e===void 0?{Fn:this.Ln}:{Fn:Math.max(this.Ln,e.Fn),Wn:e.Wn}}$n(){this.Un(),this.En=[{qn:0}]}Yn(t){this.Un(),this.En=[{qn:1,Vt:t}]}Xn(t){this.Kn(),this.En.push({qn:5,Vt:t})}Un(){this.Kn(),this.En.push({qn:6})}Zn(){this.Un(),this.En=[{qn:4}]}Gn(t){this.Un(),this.En.push({qn:2,Vt:t})}Jn(t){this.Un(),this.En.push({qn:3,Vt:t})}Qn(){return this.En}ts(t){for(const e of t.En)this.ns(e);this.Ln=Math.max(this.Ln,t.Ln),t.zn.forEach(((e,i)=>{this.Nn(i,e)}))}static ss(){return new Dt(2)}static es(){return new Dt(3)}ns(t){switch(t.qn){case 0:this.$n();break;case 1:this.Yn(t.Vt);break;case 2:this.Gn(t.Vt);break;case 3:this.Jn(t.Vt);break;case 4:this.Zn();break;case 5:this.Xn(t.Vt);break;case 6:this.Kn()}}Kn(){const t=this.En.findIndex((e=>e.qn===5));t!==-1&&this.En.splice(t,1)}}const Hl=".";function ze(s,t){if(!Oe(s))return"n/a";if(!xi(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return t===0?s.toString():("0000000000000000"+s.toString()).slice(-t)}class In{constructor(t,e){if(e||(e=1),Oe(t)&&xi(t)||(t=100),t<0)throw new TypeError("invalid base");this.Li=t,this.rs=e,this.hs()}format(t){const e=t<0?"":"";return t=Math.abs(t),e+this.ls(t)}hs(){if(this.os=0,this.Li>0&&this.rs>0){let t=this.Li;for(;t>1;)t/=10,this.os++}}ls(t){const e=this.Li/this.rs;let i=Math.floor(t),n="";const r=this.os!==void 0?this.os:NaN;if(e>1){let o=+(Math.round(t*e)-i*e).toFixed(this.os);o>=e&&(o-=e,i+=1),n=Hl+ze(+o.toFixed(this.os)*this.rs,r)}else i=Math.round(i*e)/e,r>0&&(n=Hl+ze(0,r));return i.toFixed(0)+n}}class hh extends In{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class mg{constructor(t){this._s=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.us(t):t<999995?e+this.us(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.us(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.us(t/1e9)+"B")}us(t){let e;const i=Math.pow(10,this._s);return e=(t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this._s).replace(/\.?0+$/,""):String(t),e.replace(/(\.[1-9]*)0+$/,((n,r)=>r))}}function ch(s,t,e,i,n,r,o){if(t.length===0||i.from>=t.length||i.to<=0)return;const{context:l,horizontalPixelRatio:a,verticalPixelRatio:h}=s,c=t[i.from];let d=r(s,c),f=c;if(i.to-i.from<2){const p=n/2;l.beginPath();const m={et:c.et-p,rt:c.rt},g={et:c.et+p,rt:c.rt};l.moveTo(m.et*a,m.rt*h),l.lineTo(g.et*a,g.rt*h),o(s,d,m,g)}else{const p=(g,y)=>{o(s,d,f,y),l.beginPath(),d=g,f=y};let m=f;l.beginPath(),l.moveTo(c.et*a,c.rt*h);for(let g=i.from+1;g<i.to;++g){m=t[g];const y=r(s,m);switch(e){case 0:l.lineTo(m.et*a,m.rt*h);break;case 1:l.lineTo(m.et*a,t[g-1].rt*h),y!==d&&(p(y,m),l.lineTo(m.et*a,t[g-1].rt*h)),l.lineTo(m.et*a,m.rt*h);break;case 2:{const[_,E]=vg(t,g-1,g);l.bezierCurveTo(_.et*a,_.rt*h,E.et*a,E.rt*h,m.et*a,m.rt*h);break}}e!==1&&y!==d&&(p(y,m),l.moveTo(m.et*a,m.rt*h))}(f!==m||f===m&&e===1)&&o(s,d,f,m)}}const Kl=6;function er(s,t){return{et:s.et-t.et,rt:s.rt-t.rt}}function jl(s,t){return{et:s.et/t,rt:s.rt/t}}function vg(s,t,e){const i=Math.max(0,t-1),n=Math.min(s.length-1,e+1);var r,o;return[(r=s[t],o=jl(er(s[e],s[i]),Kl),{et:r.et+o.et,rt:r.rt+o.rt}),er(s[e],jl(er(s[n],s[t]),Kl))]}function gg(s,t,e,i,n){const{context:r,horizontalPixelRatio:o,verticalPixelRatio:l}=t;r.lineTo(n.et*o,s*l),r.lineTo(i.et*o,s*l),r.closePath(),r.fillStyle=e,r.fill()}class dh extends Je{constructor(){super(...arguments),this.tt=null}it(t){this.tt=t}Z(t){var e;if(this.tt===null)return;const{st:i,nt:n,cs:r,ht:o,Wt:l,ds:a}=this.tt,h=(e=this.tt.fs)!==null&&e!==void 0?e:this.tt.vs?0:t.mediaSize.height;if(n===null)return;const c=t.context;c.lineCap="butt",c.lineJoin="round",c.lineWidth=o,Cs(c,l),c.lineWidth=1,ch(t,i,a,n,r,this.ps.bind(this),gg.bind(null,h))}}function Ur(s,t,e){return Math.min(Math.max(s,t),e)}function Vi(s,t,e){return t-s<=e}function fh(s){const t=Math.ceil(s);return t%2==0?t-1:t}class To{bs(t,e){const i=this.ws,{gs:n,Ms:r,xs:o,Ss:l,ks:a,fs:h}=e;if(this.ys===void 0||i===void 0||i.gs!==n||i.Ms!==r||i.xs!==o||i.Ss!==l||i.fs!==h||i.ks!==a){const c=t.context.createLinearGradient(0,0,0,a);if(c.addColorStop(0,n),h!=null){const d=Ur(h*t.verticalPixelRatio/a,0,1);c.addColorStop(d,r),c.addColorStop(d,o)}c.addColorStop(1,l),this.ys=c,this.ws=e}return this.ys}}class bg extends dh{constructor(){super(...arguments),this.Cs=new To}ps(t,e){return this.Cs.bs(t,{gs:e.Ts,Ms:"",xs:"",Ss:e.Ps,ks:t.bitmapSize.height})}}function yg(s,t){const e=s.context;e.strokeStyle=t,e.stroke()}class ph extends Je{constructor(){super(...arguments),this.tt=null}it(t){this.tt=t}Z(t){if(this.tt===null)return;const{st:e,nt:i,cs:n,ds:r,ht:o,Wt:l,Rs:a}=this.tt;if(i===null)return;const h=t.context;h.lineCap="butt",h.lineWidth=o*t.verticalPixelRatio,Cs(h,l),h.lineJoin="round";const c=this.Ds.bind(this);r!==void 0&&ch(t,e,r,i,n,c,yg),a&&(function(d,f,p,m,g){const{horizontalPixelRatio:y,verticalPixelRatio:_,context:E}=d;let F=null;const I=Math.max(1,Math.floor(y))%2/2,X=p*_+I;for(let rt=m.to-1;rt>=m.from;--rt){const tt=f[rt];if(tt){const B=g(d,tt);B!==F&&(E.beginPath(),F!==null&&E.fill(),E.fillStyle=B,F=B);const T=Math.round(tt.et*y)+I,w=tt.rt*_;E.moveTo(T,w),E.arc(T,w,X,0,2*Math.PI)}}E.fill()})(t,e,a,i,c)}}class mh extends ph{Ds(t,e){return e._t}}function vh(s,t,e,i,n=0,r=t.length){let o=r-n;for(;0<o;){const l=o>>1,a=n+l;i(t[a],e)===s?(n=a+1,o-=l+1):o=l}return n}const Ni=vh.bind(null,!0),gh=vh.bind(null,!1);function _g(s,t){return s.ut<t}function wg(s,t){return t<s.ut}function bh(s,t,e){const i=t.Os(),n=t.di(),r=Ni(s,i,_g),o=gh(s,n,wg);if(!e)return{from:r,to:o};let l=r,a=o;return r>0&&r<s.length&&s[r].ut>=i&&(l=r-1),o>0&&o<s.length&&s[o-1].ut<=n&&(a=o+1),{from:l,to:a}}class Mo{constructor(t,e,i){this.As=!0,this.Vs=!0,this.Bs=!0,this.Is=[],this.zs=null,this.Es=t,this.Ls=e,this.Ns=i}gt(t){this.As=!0,t==="data"&&(this.Vs=!0),t==="options"&&(this.Bs=!0)}xt(){return this.Es.Tt()?(this.Fs(),this.zs===null?null:this.Ws):null}js(){this.Is=this.Is.map((t=>Object.assign(Object.assign({},t),this.Es.$s().Hs(t.ut))))}Us(){this.zs=null}Fs(){this.Vs&&(this.qs(),this.Vs=!1),this.Bs&&(this.js(),this.Bs=!1),this.As&&(this.Ys(),this.As=!1)}Ys(){const t=this.Es.At(),e=this.Ls.yt();if(this.Us(),e.Fi()||t.Fi())return;const i=e.Xs();if(i===null||this.Es.In().Ks()===0)return;const n=this.Es.Pt();n!==null&&(this.zs=bh(this.Is,i,this.Ns),this.Zs(t,e,n.Vt),this.Gs())}}class Bn extends Mo{constructor(t,e){super(t,e,!0)}Zs(t,e,i){e.Js(this.Is,Ci(this.zs)),t.Qs(this.Is,i,Ci(this.zs))}te(t,e){return{ut:t,ct:e,et:NaN,rt:NaN}}qs(){const t=this.Es.$s();this.Is=this.Es.In().ie().map((e=>{const i=e.Vt[3];return this.ne(e.se,i,t)}))}}class Sg extends Bn{constructor(t,e){super(t,e),this.Ws=new Co,this.ee=new bg,this.re=new mh,this.Ws.X([this.ee,this.re])}ne(t,e,i){return Object.assign(Object.assign({},this.te(t,e)),i.Hs(t))}Gs(){const t=this.Es.W();this.ee.it({ds:t.lineType,st:this.Is,Wt:t.lineStyle,ht:t.lineWidth,fs:null,vs:t.invertFilledArea,nt:this.zs,cs:this.Ls.yt().he()}),this.re.it({ds:t.lineVisible?t.lineType:void 0,st:this.Is,Wt:t.lineStyle,ht:t.lineWidth,nt:this.zs,cs:this.Ls.yt().he(),Rs:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0})}}class xg extends Je{constructor(){super(...arguments),this.Lt=null,this.le=0,this.ae=0}it(t){this.Lt=t}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(this.Lt===null||this.Lt.In.length===0||this.Lt.nt===null)return;this.le=this.oe(e),this.le>=2&&Math.max(1,Math.floor(e))%2!=this.le%2&&this.le--,this.ae=this.Lt._e?Math.min(this.le,Math.floor(e)):this.le;let n=null;const r=this.ae<=this.le&&this.Lt.he>=Math.floor(1.5*e);for(let o=this.Lt.nt.from;o<this.Lt.nt.to;++o){const l=this.Lt.In[o];n!==l.ue&&(t.fillStyle=l.ue,n=l.ue);const a=Math.floor(.5*this.ae),h=Math.round(l.et*e),c=h-a,d=this.ae,f=c+d-1,p=Math.min(l.ce,l.de),m=Math.max(l.ce,l.de),g=Math.round(p*i)-a,y=Math.round(m*i)+a,_=Math.max(y-g,this.ae);t.fillRect(c,g,d,_);const E=Math.ceil(1.5*this.le);if(r){if(this.Lt.fe){const rt=h-E;let tt=Math.max(g,Math.round(l.ve*i)-a),B=tt+d-1;B>g+_-1&&(B=g+_-1,tt=B-d+1),t.fillRect(rt,tt,c-rt,B-tt+1)}const F=h+E;let I=Math.max(g,Math.round(l.pe*i)-a),X=I+d-1;X>g+_-1&&(X=g+_-1,I=X-d+1),t.fillRect(f+1,I,F-f,X-I+1)}}}oe(t){const e=Math.floor(t);return Math.max(e,Math.floor((function(i,n){return Math.floor(.3*i*n)})(V(this.Lt).he,t)))}}class yh extends Mo{constructor(t,e){super(t,e,!1)}Zs(t,e,i){e.Js(this.Is,Ci(this.zs)),t.me(this.Is,i,Ci(this.zs))}be(t,e,i){return{ut:t,we:e.Vt[0],ge:e.Vt[1],Me:e.Vt[2],xe:e.Vt[3],et:NaN,ve:NaN,ce:NaN,de:NaN,pe:NaN}}qs(){const t=this.Es.$s();this.Is=this.Es.In().ie().map((e=>this.ne(e.se,e,t)))}}class Cg extends yh{constructor(){super(...arguments),this.Ws=new xg}ne(t,e,i){return Object.assign(Object.assign({},this.be(t,e,i)),i.Hs(t))}Gs(){const t=this.Es.W();this.Ws.it({In:this.Is,he:this.Ls.yt().he(),fe:t.openVisible,_e:t.thinBars,nt:this.zs})}}class Eg extends dh{constructor(){super(...arguments),this.Cs=new To}ps(t,e){const i=this.tt;return this.Cs.bs(t,{gs:e.Se,Ms:e.ke,xs:e.ye,Ss:e.Ce,ks:t.bitmapSize.height,fs:i.fs})}}class kg extends ph{constructor(){super(...arguments),this.Te=new To}Ds(t,e){const i=this.tt;return this.Te.bs(t,{gs:e.Pe,Ms:e.Pe,xs:e.Re,Ss:e.Re,ks:t.bitmapSize.height,fs:i.fs})}}class Tg extends Bn{constructor(t,e){super(t,e),this.Ws=new Co,this.De=new Eg,this.Oe=new kg,this.Ws.X([this.De,this.Oe])}ne(t,e,i){return Object.assign(Object.assign({},this.te(t,e)),i.Hs(t))}Gs(){const t=this.Es.Pt();if(t===null)return;const e=this.Es.W(),i=this.Es.At().Ot(e.baseValue.price,t.Vt),n=this.Ls.yt().he();this.De.it({st:this.Is,ht:e.lineWidth,Wt:e.lineStyle,ds:e.lineType,fs:i,vs:!1,nt:this.zs,cs:n}),this.Oe.it({st:this.Is,ht:e.lineWidth,Wt:e.lineStyle,ds:e.lineVisible?e.lineType:void 0,Rs:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,fs:i,nt:this.zs,cs:n})}}class Mg extends Je{constructor(){super(...arguments),this.Lt=null,this.le=0}it(t){this.Lt=t}Z(t){if(this.Lt===null||this.Lt.In.length===0||this.Lt.nt===null)return;const{horizontalPixelRatio:e}=t;this.le=(function(r,o){if(r>=2.5&&r<=4)return Math.floor(3*o);const l=1-.2*Math.atan(Math.max(4,r)-4)/(.5*Math.PI),a=Math.floor(r*l*o),h=Math.floor(r*o),c=Math.min(a,h);return Math.max(Math.floor(o),c)})(this.Lt.he,e),this.le>=2&&Math.floor(e)%2!=this.le%2&&this.le--;const i=this.Lt.In;this.Lt.Ae&&this.Ve(t,i,this.Lt.nt),this.Lt.ci&&this.Be(t,i,this.Lt.nt);const n=this.Ie(e);(!this.Lt.ci||this.le>2*n)&&this.ze(t,i,this.Lt.nt)}Ve(t,e,i){if(this.Lt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:o}=t;let l="",a=Math.min(Math.floor(r),Math.floor(this.Lt.he*r));a=Math.max(Math.floor(r),Math.min(a,this.le));const h=Math.floor(.5*a);let c=null;for(let d=i.from;d<i.to;d++){const f=e[d];f.Ee!==l&&(n.fillStyle=f.Ee,l=f.Ee);const p=Math.round(Math.min(f.ve,f.pe)*o),m=Math.round(Math.max(f.ve,f.pe)*o),g=Math.round(f.ce*o),y=Math.round(f.de*o);let _=Math.round(r*f.et)-h;const E=_+a-1;c!==null&&(_=Math.max(c+1,_),_=Math.min(_,E));const F=E-_+1;n.fillRect(_,g,F,p-g),n.fillRect(_,m+1,F,y-m),c=E}}Ie(t){let e=Math.floor(1*t);this.le<=2*e&&(e=Math.floor(.5*(this.le-1)));const i=Math.max(Math.floor(t),e);return this.le<=2*i?Math.max(Math.floor(t),Math.floor(1*t)):i}Be(t,e,i){if(this.Lt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:o}=t;let l="";const a=this.Ie(r);let h=null;for(let c=i.from;c<i.to;c++){const d=e[c];d.Le!==l&&(n.fillStyle=d.Le,l=d.Le);let f=Math.round(d.et*r)-Math.floor(.5*this.le);const p=f+this.le-1,m=Math.round(Math.min(d.ve,d.pe)*o),g=Math.round(Math.max(d.ve,d.pe)*o);if(h!==null&&(f=Math.max(h+1,f),f=Math.min(f,p)),this.Lt.he*r>2*a)hg(n,f,m,p-f+1,g-m+1,a);else{const y=p-f+1;n.fillRect(f,m,y,g-m+1)}h=p}}ze(t,e,i){if(this.Lt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:o}=t;let l="";const a=this.Ie(r);for(let h=i.from;h<i.to;h++){const c=e[h];let d=Math.round(Math.min(c.ve,c.pe)*o),f=Math.round(Math.max(c.ve,c.pe)*o),p=Math.round(c.et*r)-Math.floor(.5*this.le),m=p+this.le-1;if(c.ue!==l){const g=c.ue;n.fillStyle=g,l=g}this.Lt.ci&&(p+=a,d+=a,m-=a,f-=a),d>f||n.fillRect(p,d,m-p+1,f-d+1)}}}class Ag extends yh{constructor(){super(...arguments),this.Ws=new Mg}ne(t,e,i){return Object.assign(Object.assign({},this.be(t,e,i)),i.Hs(t))}Gs(){const t=this.Es.W();this.Ws.it({In:this.Is,he:this.Ls.yt().he(),Ae:t.wickVisible,ci:t.borderVisible,nt:this.zs})}}class Og{constructor(t,e){this.Ne=t,this.Li=e}K(t,e,i){this.Ne.draw(t,this.Li,e,i)}}class sr extends Mo{constructor(t,e,i){super(t,e,!1),this.wn=i,this.Ws=new Og(this.wn.renderer(),(n=>{const r=t.Pt();return r===null?null:t.At().Ot(n,r.Vt)}))}Fe(t){return this.wn.priceValueBuilder(t)}We(t){return this.wn.isWhitespace(t)}qs(){const t=this.Es.$s();this.Is=this.Es.In().ie().map((e=>Object.assign(Object.assign({ut:e.se,et:NaN},t.Hs(e.se)),{je:e.He})))}Zs(t,e){e.Js(this.Is,Ci(this.zs))}Gs(){this.wn.update({bars:this.Is.map(Lg),barSpacing:this.Ls.yt().he(),visibleRange:this.zs},this.Es.W())}}function Lg(s){return{x:s.et,time:s.ut,originalData:s.je,barColor:s.ue}}class Pg extends Je{constructor(){super(...arguments),this.Lt=null,this.$e=[]}it(t){this.Lt=t,this.$e=[]}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(this.Lt===null||this.Lt.st.length===0||this.Lt.nt===null)return;this.$e.length||this.Ue(e);const n=Math.max(1,Math.floor(i)),r=Math.round(this.Lt.qe*i)-Math.floor(n/2),o=r+n;for(let l=this.Lt.nt.from;l<this.Lt.nt.to;l++){const a=this.Lt.st[l],h=this.$e[l-this.Lt.nt.from],c=Math.round(a.rt*i);let d,f;t.fillStyle=a.ue,c<=r?(d=c,f=o):(d=r,f=c-Math.floor(n/2)+n),t.fillRect(h.Os,d,h.di-h.Os+1,f-d)}}Ue(t){if(this.Lt===null||this.Lt.st.length===0||this.Lt.nt===null)return void(this.$e=[]);const e=Math.ceil(this.Lt.he*t)<=1?0:Math.max(1,Math.floor(t)),i=Math.round(this.Lt.he*t)-e;this.$e=new Array(this.Lt.nt.to-this.Lt.nt.from);for(let r=this.Lt.nt.from;r<this.Lt.nt.to;r++){const o=this.Lt.st[r],l=Math.round(o.et*t);let a,h;if(i%2){const c=(i-1)/2;a=l-c,h=l+c}else{const c=i/2;a=l-c,h=l+c-1}this.$e[r-this.Lt.nt.from]={Os:a,di:h,Ye:l,Xe:o.et*t,ut:o.ut}}for(let r=this.Lt.nt.from+1;r<this.Lt.nt.to;r++){const o=this.$e[r-this.Lt.nt.from],l=this.$e[r-this.Lt.nt.from-1];o.ut===l.ut+1&&o.Os-l.di!==e+1&&(l.Ye>l.Xe?l.di=o.Os-e-1:o.Os=l.di+e+1)}let n=Math.ceil(this.Lt.he*t);for(let r=this.Lt.nt.from;r<this.Lt.nt.to;r++){const o=this.$e[r-this.Lt.nt.from];o.di<o.Os&&(o.di=o.Os);const l=o.di-o.Os+1;n=Math.min(l,n)}if(e>0&&n<4)for(let r=this.Lt.nt.from;r<this.Lt.nt.to;r++){const o=this.$e[r-this.Lt.nt.from];o.di-o.Os+1>n&&(o.Ye>o.Xe?o.di-=1:o.Os+=1)}}}class Rg extends Bn{constructor(){super(...arguments),this.Ws=new Pg}ne(t,e,i){return Object.assign(Object.assign({},this.te(t,e)),i.Hs(t))}Gs(){const t={st:this.Is,he:this.Ls.yt().he(),nt:this.zs,qe:this.Es.At().Ot(this.Es.W().base,V(this.Es.Pt()).Vt)};this.Ws.it(t)}}class Ng extends Bn{constructor(){super(...arguments),this.Ws=new mh}ne(t,e,i){return Object.assign(Object.assign({},this.te(t,e)),i.Hs(t))}Gs(){const t=this.Es.W(),e={st:this.Is,Wt:t.lineStyle,ds:t.lineVisible?t.lineType:void 0,ht:t.lineWidth,Rs:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,nt:this.zs,cs:this.Ls.yt().he()};this.Ws.it(e)}}const $g=/[2-9]/g;class Ei{constructor(t=50){this.Ke=0,this.Ze=1,this.Ge=1,this.Je={},this.Qe=new Map,this.tr=t}ir(){this.Ke=0,this.Qe.clear(),this.Ze=1,this.Ge=1,this.Je={}}Si(t,e,i){return this.nr(t,e,i).width}xi(t,e,i){const n=this.nr(t,e,i);return((n.actualBoundingBoxAscent||0)-(n.actualBoundingBoxDescent||0))/2}nr(t,e,i){const n=i||$g,r=String(e).replace(n,"0");if(this.Qe.has(r))return Yt(this.Qe.get(r)).sr;if(this.Ke===this.tr){const l=this.Je[this.Ge];delete this.Je[this.Ge],this.Qe.delete(l),this.Ge++,this.Ke--}t.save(),t.textBaseline="middle";const o=t.measureText(r);return t.restore(),o.width===0&&e.length||(this.Qe.set(r,{sr:o,er:this.Ze}),this.Je[this.Ze]=r,this.Ke++,this.Ze++),o}}class Dg{constructor(t){this.rr=null,this.k=null,this.hr="right",this.lr=t}ar(t,e,i){this.rr=t,this.k=e,this.hr=i}K(t){this.k!==null&&this.rr!==null&&this.rr.K(t,this.k,this.lr,this.hr)}}class _h{constructor(t,e,i){this._r=t,this.lr=new Ei(50),this.ur=e,this.F=i,this.j=-1,this.Ht=new Dg(this.lr)}xt(){const t=this.F.cr(this.ur);if(t===null)return null;const e=t.dr(this.ur)?t.vr():this.ur.At();if(e===null)return null;const i=t.pr(e);if(i==="overlay")return null;const n=this.F.mr();return n.P!==this.j&&(this.j=n.P,this.lr.ir()),this.Ht.ar(this._r.zi(),n,i),this.Ht}}class Ig extends Je{constructor(){super(...arguments),this.Lt=null}it(t){this.Lt=t}br(t,e){var i;if(!(!((i=this.Lt)===null||i===void 0)&&i.Tt))return null;const{rt:n,ht:r,wr:o}=this.Lt;return e>=n-r-7&&e<=n+r+7?{gr:this.Lt,wr:o}:null}Z({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.Lt===null||this.Lt.Tt===!1)return;const r=Math.round(this.Lt.rt*n);r<0||r>e.height||(t.lineCap="butt",t.strokeStyle=this.Lt.O,t.lineWidth=Math.floor(this.Lt.ht*i),Cs(t,this.Lt.Wt),oh(t,r,0,e.width))}}class Ao{constructor(t){this.Mr={rt:0,O:"rgba(0, 0, 0, 0)",ht:1,Wt:0,Tt:!1},this.Sr=new Ig,this.bt=!0,this.Es=t,this.Ls=t.qt(),this.Sr.it(this.Mr)}gt(){this.bt=!0}xt(){return this.Es.Tt()?(this.bt&&(this.kr(),this.bt=!1),this.Sr):null}}class Bg extends Ao{constructor(t){super(t)}kr(){this.Mr.Tt=!1;const t=this.Es.At(),e=t.yr().yr;if(e!==2&&e!==3)return;const i=this.Es.W();if(!i.baseLineVisible||!this.Es.Tt())return;const n=this.Es.Pt();n!==null&&(this.Mr.Tt=!0,this.Mr.rt=t.Ot(n.Vt,n.Vt),this.Mr.O=i.baseLineColor,this.Mr.ht=i.baseLineWidth,this.Mr.Wt=i.baseLineStyle)}}class Vg extends Je{constructor(){super(...arguments),this.Lt=null}it(t){this.Lt=t}He(){return this.Lt}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){const n=this.Lt;if(n===null)return;const r=Math.max(1,Math.floor(e)),o=r%2/2,l=Math.round(n.Xe.x*e)+o,a=n.Xe.y*i;t.fillStyle=n.Cr,t.beginPath();const h=Math.max(2,1.5*n.Tr)*e;t.arc(l,a,h,0,2*Math.PI,!1),t.fill(),t.fillStyle=n.Pr,t.beginPath(),t.arc(l,a,n.ot*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=r,t.strokeStyle=n.Rr,t.beginPath(),t.arc(l,a,n.ot*e+r/2,0,2*Math.PI,!1),t.stroke()}}const Fg=[{Dr:0,Or:.25,Ar:4,Vr:10,Br:.25,Ir:0,zr:.4,Er:.8},{Dr:.25,Or:.525,Ar:10,Vr:14,Br:0,Ir:0,zr:.8,Er:0},{Dr:.525,Or:1,Ar:14,Vr:14,Br:0,Ir:0,zr:0,Er:0}];function Gl(s,t,e,i){return(function(n,r){if(n==="transparent")return n;const o=gn(n),l=o[3];return`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${r*l})`})(s,e+(i-e)*t)}function Jl(s,t){const e=s%2600/2600;let i;for(const a of Fg)if(e>=a.Dr&&e<=a.Or){i=a;break}ls(i!==void 0,"Last price animation internal logic error");const n=(e-i.Dr)/(i.Or-i.Dr);return{Pr:Gl(t,n,i.Br,i.Ir),Rr:Gl(t,n,i.zr,i.Er),ot:(r=n,o=i.Ar,l=i.Vr,o+(l-o)*r)};var r,o,l}class Ug{constructor(t){this.Ht=new Vg,this.bt=!0,this.Lr=!0,this.Nr=performance.now(),this.Fr=this.Nr-1,this.Wr=t}jr(){this.Fr=this.Nr-1,this.gt()}Hr(){if(this.gt(),this.Wr.W().lastPriceAnimation===2){const t=performance.now(),e=this.Fr-t;if(e>0)return void(e<650&&(this.Fr+=2600));this.Nr=t,this.Fr=t+2600}}gt(){this.bt=!0}$r(){this.Lr=!0}Tt(){return this.Wr.W().lastPriceAnimation!==0}Ur(){switch(this.Wr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Fr}}xt(){return this.bt?(this.St(),this.bt=!1,this.Lr=!1):this.Lr&&(this.qr(),this.Lr=!1),this.Ht}St(){this.Ht.it(null);const t=this.Wr.qt().yt(),e=t.Xs(),i=this.Wr.Pt();if(e===null||i===null)return;const n=this.Wr.Yr(!0);if(n.Xr||!e.Kr(n.se))return;const r={x:t.Et(n.se),y:this.Wr.At().Ot(n.ct,i.Vt)},o=n.O,l=this.Wr.W().lineWidth,a=Jl(this.Zr(),o);this.Ht.it({Cr:o,Tr:l,Pr:a.Pr,Rr:a.Rr,ot:a.ot,Xe:r})}qr(){const t=this.Ht.He();if(t!==null){const e=Jl(this.Zr(),t.Cr);t.Pr=e.Pr,t.Rr=e.Rr,t.ot=e.ot}}Zr(){return this.Ur()?performance.now()-this.Nr:2599}}function ci(s,t){return fh(Math.min(Math.max(s,12),30)*t)}function ki(s,t){switch(s){case"arrowDown":case"arrowUp":return ci(t,1);case"circle":return ci(t,.8);case"square":return ci(t,.7)}}function wh(s){return(function(t){const e=Math.ceil(t);return e%2!=0?e-1:e})(ci(s,1))}function Xl(s){return Math.max(ci(s,.1),3)}function Sh(s,t,e,i,n){const r=ki("square",e),o=(r-1)/2,l=s-o,a=t-o;return i>=l&&i<=l+r&&n>=a&&n<=a+r}function Yl(s,t,e,i,n){const r=(ki("arrowUp",n)-1)/2,o=(fh(n/2)-1)/2;t.beginPath(),s?(t.moveTo(e-r,i),t.lineTo(e,i-r),t.lineTo(e+r,i),t.lineTo(e+o,i),t.lineTo(e+o,i+r),t.lineTo(e-o,i+r),t.lineTo(e-o,i)):(t.moveTo(e-r,i),t.lineTo(e,i+r),t.lineTo(e+r,i),t.lineTo(e+o,i),t.lineTo(e+o,i-r),t.lineTo(e-o,i-r),t.lineTo(e-o,i)),t.fill()}function zg(s,t,e,i,n,r){return Sh(t,e,i,n,r)}class qg extends Eo{constructor(){super(...arguments),this.Lt=null,this.lr=new Ei,this.j=-1,this.H="",this.Gr=""}it(t){this.Lt=t}ar(t,e){this.j===t&&this.H===e||(this.j=t,this.H=e,this.Gr=Ws(t,e),this.lr.ir())}br(t,e){if(this.Lt===null||this.Lt.nt===null)return null;for(let i=this.Lt.nt.from;i<this.Lt.nt.to;i++){const n=this.Lt.st[i];if(Hg(n,t,e))return{gr:n.Jr,wr:n.wr}}return null}Z({context:t},e,i){if(this.Lt!==null&&this.Lt.nt!==null){t.textBaseline="middle",t.font=this.Gr;for(let n=this.Lt.nt.from;n<this.Lt.nt.to;n++){const r=this.Lt.st[n];r.Jt!==void 0&&(r.Jt.$i=this.lr.Si(t,r.Jt.Qr),r.Jt.zt=this.j,r.Jt.et=r.et-r.Jt.$i/2),Wg(r,t)}}}}function Wg(s,t){t.fillStyle=s.O,s.Jt!==void 0&&(function(e,i,n,r){e.fillText(i,n,r)})(t,s.Jt.Qr,s.Jt.et,s.Jt.rt),(function(e,i){if(e.Ks!==0){switch(e.th){case"arrowDown":return void Yl(!1,i,e.et,e.rt,e.Ks);case"arrowUp":return void Yl(!0,i,e.et,e.rt,e.Ks);case"circle":return void(function(n,r,o,l){const a=(ki("circle",l)-1)/2;n.beginPath(),n.arc(r,o,a,0,2*Math.PI,!1),n.fill()})(i,e.et,e.rt,e.Ks);case"square":return void(function(n,r,o,l){const a=ki("square",l),h=(a-1)/2,c=r-h,d=o-h;n.fillRect(c,d,a,a)})(i,e.et,e.rt,e.Ks)}e.th}})(s,t)}function Hg(s,t,e){return!(s.Jt===void 0||!(function(i,n,r,o,l,a){const h=o/2;return l>=i&&l<=i+r&&a>=n-h&&a<=n+h})(s.Jt.et,s.Jt.rt,s.Jt.$i,s.Jt.zt,t,e))||(function(i,n,r){if(i.Ks===0)return!1;switch(i.th){case"arrowDown":case"arrowUp":return zg(0,i.et,i.rt,i.Ks,n,r);case"circle":return(function(o,l,a,h,c){const d=2+ki("circle",a)/2,f=o-h,p=l-c;return Math.sqrt(f*f+p*p)<=d})(i.et,i.rt,i.Ks,n,r);case"square":return Sh(i.et,i.rt,i.Ks,n,r)}})(s,t,e)}function Kg(s,t,e,i,n,r,o,l,a){const h=Oe(e)?e:e.xe,c=Oe(e)?e:e.ge,d=Oe(e)?e:e.Me,f=Oe(t.size)?Math.max(t.size,0):1,p=wh(l.he())*f,m=p/2;switch(s.Ks=p,t.position){case"inBar":return s.rt=o.Ot(h,a),void(s.Jt!==void 0&&(s.Jt.rt=s.rt+m+r+.6*n));case"aboveBar":return s.rt=o.Ot(c,a)-m-i.ih,s.Jt!==void 0&&(s.Jt.rt=s.rt-m-.6*n,i.ih+=1.2*n),void(i.ih+=p+r);case"belowBar":return s.rt=o.Ot(d,a)+m+i.nh,s.Jt!==void 0&&(s.Jt.rt=s.rt+m+r+.6*n,i.nh+=1.2*n),void(i.nh+=p+r)}t.position}class jg{constructor(t,e){this.bt=!0,this.sh=!0,this.eh=!0,this.rh=null,this.Ht=new qg,this.Wr=t,this.Ui=e,this.Lt={st:[],nt:null}}gt(t){this.bt=!0,this.eh=!0,t==="data"&&(this.sh=!0)}xt(t){if(!this.Wr.Tt())return null;this.bt&&this.hh();const e=this.Ui.W().layout;return this.Ht.ar(e.fontSize,e.fontFamily),this.Ht.it(this.Lt),this.Ht}lh(){if(this.eh){if(this.Wr.ah().length>0){const t=this.Ui.yt().he(),e=Xl(t),i=1.5*wh(t)+2*e;this.rh={above:i,below:i}}else this.rh=null;this.eh=!1}return this.rh}hh(){const t=this.Wr.At(),e=this.Ui.yt(),i=this.Wr.ah();this.sh&&(this.Lt.st=i.map((c=>({ut:c.time,et:0,rt:0,Ks:0,th:c.shape,O:c.color,Jr:c.Jr,wr:c.id,Jt:void 0}))),this.sh=!1);const n=this.Ui.W().layout;this.Lt.nt=null;const r=e.Xs();if(r===null)return;const o=this.Wr.Pt();if(o===null||this.Lt.st.length===0)return;let l=NaN;const a=Xl(e.he()),h={ih:a,nh:a};this.Lt.nt=bh(this.Lt.st,r,!0);for(let c=this.Lt.nt.from;c<this.Lt.nt.to;c++){const d=i[c];d.time!==l&&(h.ih=a,h.nh=a,l=d.time);const f=this.Lt.st[c];f.et=e.Et(d.time),d.text!==void 0&&d.text.length>0&&(f.Jt={Qr:d.text,et:0,rt:0,$i:0,zt:0});const p=this.Wr.oh(d.time);p!==null&&Kg(f,d,p,h,n.fontSize,a,t,e,o.Vt)}this.bt=!1}}class Gg extends Ao{constructor(t){super(t)}kr(){const t=this.Mr;t.Tt=!1;const e=this.Es.W();if(!e.priceLineVisible||!this.Es.Tt())return;const i=this.Es.Yr(e.priceLineSource===0);i.Xr||(t.Tt=!0,t.rt=i.yi,t.O=this.Es._h(i.O),t.ht=e.priceLineWidth,t.Wt=e.priceLineStyle)}}class Jg extends $n{constructor(t){super(),this.$t=t}Ei(t,e,i){t.Tt=!1,e.Tt=!1;const n=this.$t;if(!n.Tt())return;const r=n.W(),o=r.lastValueVisible,l=n.uh()!=="",a=r.seriesLastValueMode===0,h=n.Yr(!1);if(h.Xr)return;o&&(t.Jt=this.dh(h,o,a),t.Tt=t.Jt.length!==0),(l||a)&&(e.Jt=this.fh(h,o,l,a),e.Tt=e.Jt.length>0);const c=n._h(h.O),d=Rn(c);i.t=d.t,i.yi=h.yi,e.Bt=n.qt().It(h.yi/n.At().zt()),t.Bt=c,t.O=d.i,e.O=d.i}fh(t,e,i,n){let r="";const o=this.$t.uh();return i&&o.length!==0&&(r+=`${o} `),e&&n&&(r+=this.$t.At().ph()?t.mh:t.bh),r.trim()}dh(t,e,i){return e?i?this.$t.At().ph()?t.bh:t.mh:t.Jt:""}}function Ql(s,t,e,i){const n=Number.isFinite(t),r=Number.isFinite(e);return n&&r?s(t,e):n||r?n?t:e:i}class ne{constructor(t,e){this.wh=t,this.gh=e}Mh(t){return t!==null&&this.wh===t.wh&&this.gh===t.gh}xh(){return new ne(this.wh,this.gh)}Sh(){return this.wh}kh(){return this.gh}yh(){return this.gh-this.wh}Fi(){return this.gh===this.wh||Number.isNaN(this.gh)||Number.isNaN(this.wh)}ts(t){return t===null?this:new ne(Ql(Math.min,this.Sh(),t.Sh(),-1/0),Ql(Math.max,this.kh(),t.kh(),1/0))}Ch(t){if(!Oe(t)||this.gh-this.wh===0)return;const e=.5*(this.gh+this.wh);let i=this.gh-e,n=this.wh-e;i*=t,n*=t,this.gh=e+i,this.wh=e+n}Th(t){Oe(t)&&(this.gh+=t,this.wh+=t)}Ph(){return{minValue:this.wh,maxValue:this.gh}}static Rh(t){return t===null?null:new ne(t.minValue,t.maxValue)}}class bn{constructor(t,e){this.Dh=t,this.Oh=e||null}Ah(){return this.Dh}Vh(){return this.Oh}Ph(){return this.Dh===null?null:{priceRange:this.Dh.Ph(),margins:this.Oh||void 0}}static Rh(t){return t===null?null:new bn(ne.Rh(t.priceRange),t.margins)}}class Xg extends Ao{constructor(t,e){super(t),this.Bh=e}kr(){const t=this.Mr;t.Tt=!1;const e=this.Bh.W();if(!this.Es.Tt()||!e.lineVisible)return;const i=this.Bh.Ih();i!==null&&(t.Tt=!0,t.rt=i,t.O=e.color,t.ht=e.lineWidth,t.Wt=e.lineStyle,t.wr=this.Bh.W().id)}}class Yg extends $n{constructor(t,e){super(),this.Wr=t,this.Bh=e}Ei(t,e,i){t.Tt=!1,e.Tt=!1;const n=this.Bh.W(),r=n.axisLabelVisible,o=n.title!=="",l=this.Wr;if(!r||!l.Tt())return;const a=this.Bh.Ih();if(a===null)return;o&&(e.Jt=n.title,e.Tt=!0),e.Bt=l.qt().It(a/l.At().zt()),t.Jt=this.zh(n.price),t.Tt=!0;const h=Rn(n.axisLabelColor||n.color);i.t=h.t;const c=n.axisLabelTextColor||h.i;t.O=c,e.O=c,i.yi=a}zh(t){const e=this.Wr.Pt();return e===null?"":this.Wr.At().Wi(t,e.Vt)}}class Qg{constructor(t,e){this.Wr=t,this.cn=e,this.Eh=new Xg(t,this),this._r=new Yg(t,this),this.Lh=new _h(this._r,t,t.qt())}Nh(t){ye(this.cn,t),this.gt(),this.Wr.qt().Fh()}W(){return this.cn}Wh(){return this.Eh}jh(){return this.Lh}Hh(){return this._r}gt(){this.Eh.gt(),this._r.gt()}Ih(){const t=this.Wr,e=t.At();if(t.qt().yt().Fi()||e.Fi())return null;const i=t.Pt();return i===null?null:e.Ot(this.cn.price,i.Vt)}}class Zg extends ko{constructor(t){super(),this.Ui=t}qt(){return this.Ui}}const tb={Bar:(s,t,e,i)=>{var n;const r=t.upColor,o=t.downColor,l=V(s(e,i)),a=Ls(l.Vt[0])<=Ls(l.Vt[3]);return{ue:(n=l.O)!==null&&n!==void 0?n:a?r:o}},Candlestick:(s,t,e,i)=>{var n,r,o;const l=t.upColor,a=t.downColor,h=t.borderUpColor,c=t.borderDownColor,d=t.wickUpColor,f=t.wickDownColor,p=V(s(e,i)),m=Ls(p.Vt[0])<=Ls(p.Vt[3]);return{ue:(n=p.O)!==null&&n!==void 0?n:m?l:a,Le:(r=p.Bt)!==null&&r!==void 0?r:m?h:c,Ee:(o=p.$h)!==null&&o!==void 0?o:m?d:f}},Custom:(s,t,e,i)=>{var n;return{ue:(n=V(s(e,i)).O)!==null&&n!==void 0?n:t.color}},Area:(s,t,e,i)=>{var n,r,o,l;const a=V(s(e,i));return{ue:(n=a._t)!==null&&n!==void 0?n:t.lineColor,_t:(r=a._t)!==null&&r!==void 0?r:t.lineColor,Ts:(o=a.Ts)!==null&&o!==void 0?o:t.topColor,Ps:(l=a.Ps)!==null&&l!==void 0?l:t.bottomColor}},Baseline:(s,t,e,i)=>{var n,r,o,l,a,h;const c=V(s(e,i));return{ue:c.Vt[3]>=t.baseValue.price?t.topLineColor:t.bottomLineColor,Pe:(n=c.Pe)!==null&&n!==void 0?n:t.topLineColor,Re:(r=c.Re)!==null&&r!==void 0?r:t.bottomLineColor,Se:(o=c.Se)!==null&&o!==void 0?o:t.topFillColor1,ke:(l=c.ke)!==null&&l!==void 0?l:t.topFillColor2,ye:(a=c.ye)!==null&&a!==void 0?a:t.bottomFillColor1,Ce:(h=c.Ce)!==null&&h!==void 0?h:t.bottomFillColor2}},Line:(s,t,e,i)=>{var n,r;const o=V(s(e,i));return{ue:(n=o.O)!==null&&n!==void 0?n:t.color,_t:(r=o.O)!==null&&r!==void 0?r:t.color}},Histogram:(s,t,e,i)=>{var n;return{ue:(n=V(s(e,i)).O)!==null&&n!==void 0?n:t.color}}};class eb{constructor(t){this.Uh=(e,i)=>i!==void 0?i.Vt:this.Wr.In().qh(e),this.Wr=t,this.Yh=tb[t.Xh()]}Hs(t,e){return this.Yh(this.Uh,this.Wr.W(),t,e)}}var Zl;(function(s){s[s.NearestLeft=-1]="NearestLeft",s[s.None=0]="None",s[s.NearestRight=1]="NearestRight"})(Zl||(Zl={}));const Ye=30;class sb{constructor(){this.Kh=[],this.Zh=new Map,this.Gh=new Map}Jh(){return this.Ks()>0?this.Kh[this.Kh.length-1]:null}Qh(){return this.Ks()>0?this.tl(0):null}Bn(){return this.Ks()>0?this.tl(this.Kh.length-1):null}Ks(){return this.Kh.length}Fi(){return this.Ks()===0}Kr(t){return this.il(t,0)!==null}qh(t){return this.nl(t)}nl(t,e=0){const i=this.il(t,e);return i===null?null:Object.assign(Object.assign({},this.sl(i)),{se:this.tl(i)})}ie(){return this.Kh}el(t,e,i){if(this.Fi())return null;let n=null;for(const r of i)n=Fi(n,this.rl(t,e,r));return n}it(t){this.Gh.clear(),this.Zh.clear(),this.Kh=t}tl(t){return this.Kh[t].se}sl(t){return this.Kh[t]}il(t,e){const i=this.hl(t);if(i===null&&e!==0)switch(e){case-1:return this.ll(t);case 1:return this.al(t);default:throw new TypeError("Unknown search mode")}return i}ll(t){let e=this.ol(t);return e>0&&(e-=1),e!==this.Kh.length&&this.tl(e)<t?e:null}al(t){const e=this._l(t);return e!==this.Kh.length&&t<this.tl(e)?e:null}hl(t){const e=this.ol(t);return e===this.Kh.length||t<this.Kh[e].se?null:e}ol(t){return Ni(this.Kh,t,((e,i)=>e.se<i))}_l(t){return gh(this.Kh,t,((e,i)=>e.se>i))}ul(t,e,i){let n=null;for(let r=t;r<e;r++){const o=this.Kh[r].Vt[i];Number.isNaN(o)||(n===null?n={cl:o,dl:o}:(o<n.cl&&(n.cl=o),o>n.dl&&(n.dl=o)))}return n}rl(t,e,i){if(this.Fi())return null;let n=null;const r=V(this.Qh()),o=V(this.Bn()),l=Math.max(t,r),a=Math.min(e,o),h=Math.ceil(l/Ye)*Ye,c=Math.max(h,Math.floor(a/Ye)*Ye);{const f=this.ol(l),p=this._l(Math.min(a,h,e));n=Fi(n,this.ul(f,p,i))}let d=this.Zh.get(i);d===void 0&&(d=new Map,this.Zh.set(i,d));for(let f=Math.max(h+1,l);f<c;f+=Ye){const p=Math.floor(f/Ye);let m=d.get(p);if(m===void 0){const g=this.ol(p*Ye),y=this._l((p+1)*Ye-1);m=this.ul(g,y,i),d.set(p,m)}n=Fi(n,m)}{const f=this.ol(c),p=this._l(a);n=Fi(n,this.ul(f,p,i))}return n}}function Fi(s,t){return s===null?t:t===null?s:{cl:Math.min(s.cl,t.cl),dl:Math.max(s.dl,t.dl)}}class ib{constructor(t){this.fl=t}K(t,e,i){this.fl.draw(t)}G(t,e,i){var n,r;(r=(n=this.fl).drawBackground)===null||r===void 0||r.call(n,t)}}class ir{constructor(t){this.Qe=null,this.wn=t}xt(){var t;const e=this.wn.renderer();if(e===null)return null;if(((t=this.Qe)===null||t===void 0?void 0:t.vl)===e)return this.Qe.pl;const i=new ib(e);return this.Qe={vl:e,pl:i},i}ml(){var t,e,i;return(i=(e=(t=this.wn).zOrder)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:"normal"}}function xh(s){var t,e,i,n,r;return{Jt:s.text(),yi:s.coordinate(),ki:(t=s.fixedCoordinate)===null||t===void 0?void 0:t.call(s),O:s.textColor(),t:s.backColor(),Tt:(i=(e=s.visible)===null||e===void 0?void 0:e.call(s))===null||i===void 0||i,ai:(r=(n=s.tickVisible)===null||n===void 0?void 0:n.call(s))===null||r===void 0||r}}class nb{constructor(t,e){this.Ht=new uh,this.bl=t,this.wl=e}xt(){return this.Ht.it(Object.assign({$i:this.wl.$i()},xh(this.bl))),this.Ht}}class rb extends $n{constructor(t,e){super(),this.bl=t,this.Li=e}Ei(t,e,i){const n=xh(this.bl);i.t=n.t,t.O=n.O;const r=2/12*this.Li.P();i.gi=r,i.Mi=r,i.yi=n.yi,i.ki=n.ki,t.Jt=n.Jt,t.Tt=n.Tt,t.ai=n.ai}}class ob{constructor(t,e){this.gl=null,this.Ml=null,this.xl=null,this.Sl=null,this.kl=null,this.yl=t,this.Wr=e}Cl(){return this.yl}On(){var t,e;(e=(t=this.yl).updateAllViews)===null||e===void 0||e.call(t)}Pn(){var t,e,i,n;const r=(i=(e=(t=this.yl).paneViews)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:[];if(((n=this.gl)===null||n===void 0?void 0:n.vl)===r)return this.gl.pl;const o=r.map((l=>new ir(l)));return this.gl={vl:r,pl:o},o}tn(){var t,e,i,n;const r=(i=(e=(t=this.yl).timeAxisViews)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:[];if(((n=this.Ml)===null||n===void 0?void 0:n.vl)===r)return this.Ml.pl;const o=this.Wr.qt().yt(),l=r.map((a=>new nb(a,o)));return this.Ml={vl:r,pl:l},l}Rn(){var t,e,i,n;const r=(i=(e=(t=this.yl).priceAxisViews)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:[];if(((n=this.xl)===null||n===void 0?void 0:n.vl)===r)return this.xl.pl;const o=this.Wr.At(),l=r.map((a=>new rb(a,o)));return this.xl={vl:r,pl:l},l}Tl(){var t,e,i,n;const r=(i=(e=(t=this.yl).priceAxisPaneViews)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:[];if(((n=this.Sl)===null||n===void 0?void 0:n.vl)===r)return this.Sl.pl;const o=r.map((l=>new ir(l)));return this.Sl={vl:r,pl:o},o}Pl(){var t,e,i,n;const r=(i=(e=(t=this.yl).timeAxisPaneViews)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:[];if(((n=this.kl)===null||n===void 0?void 0:n.vl)===r)return this.kl.pl;const o=r.map((l=>new ir(l)));return this.kl={vl:r,pl:o},o}Rl(t,e){var i,n,r;return(r=(n=(i=this.yl).autoscaleInfo)===null||n===void 0?void 0:n.call(i,t,e))!==null&&r!==void 0?r:null}br(t,e){var i,n,r;return(r=(n=(i=this.yl).hitTest)===null||n===void 0?void 0:n.call(i,t,e))!==null&&r!==void 0?r:null}}function nr(s,t,e,i){s.forEach((n=>{t(n).forEach((r=>{r.ml()===e&&i.push(r)}))}))}function rr(s){return s.Pn()}function lb(s){return s.Tl()}function ab(s){return s.Pl()}class Oo extends Zg{constructor(t,e,i,n,r){super(t),this.Lt=new sb,this.Eh=new Gg(this),this.Dl=[],this.Ol=new Bg(this),this.Al=null,this.Vl=null,this.Bl=[],this.Il=[],this.zl=null,this.El=[],this.cn=e,this.Ll=i;const o=new Jg(this);this.hn=[o],this.Lh=new _h(o,this,t),i!=="Area"&&i!=="Line"&&i!=="Baseline"||(this.Al=new Ug(this)),this.Nl(),this.Fl(r)}S(){this.zl!==null&&clearTimeout(this.zl)}_h(t){return this.cn.priceLineColor||t}Yr(t){const e={Xr:!0},i=this.At();if(this.qt().yt().Fi()||i.Fi()||this.Lt.Fi())return e;const n=this.qt().yt().Xs(),r=this.Pt();if(n===null||r===null)return e;let o,l;if(t){const d=this.Lt.Jh();if(d===null)return e;o=d,l=d.se}else{const d=this.Lt.nl(n.di(),-1);if(d===null||(o=this.Lt.qh(d.se),o===null))return e;l=d.se}const a=o.Vt[3],h=this.$s().Hs(l,{Vt:o}),c=i.Ot(a,r.Vt);return{Xr:!1,ct:a,Jt:i.Wi(a,r.Vt),mh:i.Wl(a),bh:i.jl(a,r.Vt),O:h.ue,yi:c,se:l}}$s(){return this.Vl!==null||(this.Vl=new eb(this)),this.Vl}W(){return this.cn}Nh(t){const e=t.priceScaleId;e!==void 0&&e!==this.cn.priceScaleId&&this.qt().Hl(this,e),ye(this.cn,t),t.priceFormat!==void 0&&(this.Nl(),this.qt().$l()),this.qt().Ul(this),this.qt().ql(),this.wn.gt("options")}it(t,e){this.Lt.it(t),this.Yl(),this.wn.gt("data"),this.dn.gt("data"),this.Al!==null&&(e&&e.Xl?this.Al.Hr():t.length===0&&this.Al.jr());const i=this.qt().cr(this);this.qt().Kl(i),this.qt().Ul(this),this.qt().ql(),this.qt().Fh()}Zl(t){this.Bl=t,this.Yl();const e=this.qt().cr(this);this.dn.gt("data"),this.qt().Kl(e),this.qt().Ul(this),this.qt().ql(),this.qt().Fh()}Gl(){return this.Bl}ah(){return this.Il}Jl(t){const e=new Qg(this,t);return this.Dl.push(e),this.qt().Ul(this),e}Ql(t){const e=this.Dl.indexOf(t);e!==-1&&this.Dl.splice(e,1),this.qt().Ul(this)}Xh(){return this.Ll}Pt(){const t=this.ta();return t===null?null:{Vt:t.Vt[3],ia:t.ut}}ta(){const t=this.qt().yt().Xs();if(t===null)return null;const e=t.Os();return this.Lt.nl(e,1)}In(){return this.Lt}oh(t){const e=this.Lt.qh(t);return e===null?null:this.Ll==="Bar"||this.Ll==="Candlestick"||this.Ll==="Custom"?{we:e.Vt[0],ge:e.Vt[1],Me:e.Vt[2],xe:e.Vt[3]}:e.Vt[3]}na(t){const e=[];nr(this.El,rr,"top",e);const i=this.Al;return i!==null&&i.Tt()&&(this.zl===null&&i.Ur()&&(this.zl=setTimeout((()=>{this.zl=null,this.qt().sa()}),0)),i.$r(),e.push(i)),e}Pn(){const t=[];this.ea()||t.push(this.Ol),t.push(this.wn,this.Eh,this.dn);const e=this.Dl.map((i=>i.Wh()));return t.push(...e),nr(this.El,rr,"normal",t),t}ra(){return this.ha(rr,"bottom")}la(t){return this.ha(lb,t)}aa(t){return this.ha(ab,t)}oa(t,e){return this.El.map((i=>i.br(t,e))).filter((i=>i!==null))}Qi(t){return[this.Lh,...this.Dl.map((e=>e.jh()))]}Rn(t,e){if(e!==this.Xi&&!this.ea())return[];const i=[...this.hn];for(const n of this.Dl)i.push(n.Hh());return this.El.forEach((n=>{i.push(...n.Rn())})),i}tn(){const t=[];return this.El.forEach((e=>{t.push(...e.tn())})),t}Rl(t,e){if(this.cn.autoscaleInfoProvider!==void 0){const i=this.cn.autoscaleInfoProvider((()=>{const n=this._a(t,e);return n===null?null:n.Ph()}));return bn.Rh(i)}return this._a(t,e)}ua(){return this.cn.priceFormat.minMove}ca(){return this.da}On(){var t;this.wn.gt(),this.dn.gt();for(const e of this.hn)e.gt();for(const e of this.Dl)e.gt();this.Eh.gt(),this.Ol.gt(),(t=this.Al)===null||t===void 0||t.gt(),this.El.forEach((e=>e.On()))}At(){return V(super.At())}Ct(t){if(!((this.Ll==="Line"||this.Ll==="Area"||this.Ll==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const e=this.Lt.qh(t);return e===null?null:{ct:e.Vt[3],ot:this.fa(),Bt:this.va(),Dt:this.pa(),Rt:this.ma(t)}}uh(){return this.cn.title}Tt(){return this.cn.visible}ba(t){this.El.push(new ob(t,this))}wa(t){this.El=this.El.filter((e=>e.Cl()!==t))}ga(){if(this.wn instanceof sr)return t=>this.wn.Fe(t)}Ma(){if(this.wn instanceof sr)return t=>this.wn.We(t)}ea(){return!Dn(this.At().xa())}_a(t,e){if(!xi(t)||!xi(e)||this.Lt.Fi())return null;const i=this.Ll==="Line"||this.Ll==="Area"||this.Ll==="Baseline"||this.Ll==="Histogram"?[3]:[2,1],n=this.Lt.el(t,e,i);let r=n!==null?new ne(n.cl,n.dl):null;if(this.Xh()==="Histogram"){const l=this.cn.base,a=new ne(l,l);r=r!==null?r.ts(a):a}let o=this.dn.lh();return this.El.forEach((l=>{const a=l.Rl(t,e);if(a?.priceRange){const p=new ne(a.priceRange.minValue,a.priceRange.maxValue);r=r!==null?r.ts(p):p}var h,c,d,f;a?.margins&&(h=o,c=a.margins,o={above:Math.max((d=h?.above)!==null&&d!==void 0?d:0,c.above),below:Math.max((f=h?.below)!==null&&f!==void 0?f:0,c.below)})})),new bn(r,o)}fa(){switch(this.Ll){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}va(){switch(this.Ll){case"Line":case"Area":case"Baseline":{const t=this.cn.crosshairMarkerBorderColor;if(t.length!==0)return t}}return null}pa(){switch(this.Ll){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}ma(t){switch(this.Ll){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBackgroundColor;if(e.length!==0)return e}}return this.$s().Hs(t).ue}Nl(){switch(this.cn.priceFormat.type){case"custom":this.da={format:this.cn.priceFormat.formatter};break;case"volume":this.da=new mg(this.cn.priceFormat.precision);break;case"percent":this.da=new hh(this.cn.priceFormat.precision);break;default:{const t=Math.pow(10,this.cn.priceFormat.precision);this.da=new In(t,this.cn.priceFormat.minMove*t)}}this.Xi!==null&&this.Xi.Sa()}Yl(){const t=this.qt().yt();if(!t.ka()||this.Lt.Fi())return void(this.Il=[]);const e=V(this.Lt.Qh());this.Il=this.Bl.map(((i,n)=>{const r=V(t.ya(i.time,!0)),o=r<e?1:-1;return{time:V(this.Lt.nl(r,o)).se,position:i.position,shape:i.shape,color:i.color,id:i.id,Jr:n,text:i.text,size:i.size,originalTime:i.originalTime}}))}Fl(t){switch(this.dn=new jg(this,this.qt()),this.Ll){case"Bar":this.wn=new Cg(this,this.qt());break;case"Candlestick":this.wn=new Ag(this,this.qt());break;case"Line":this.wn=new Ng(this,this.qt());break;case"Custom":this.wn=new sr(this,this.qt(),Yt(t));break;case"Area":this.wn=new Sg(this,this.qt());break;case"Baseline":this.wn=new Tg(this,this.qt());break;case"Histogram":this.wn=new Rg(this,this.qt());break;default:throw Error("Unknown chart style assigned: "+this.Ll)}}ha(t,e){const i=[];return nr(this.El,t,e,i),i}}class ub{constructor(t){this.cn=t}Ca(t,e,i){let n=t;if(this.cn.mode===0)return n;const r=i.vn(),o=r.Pt();if(o===null)return n;const l=r.Ot(t,o),a=i.Ta().filter((c=>c instanceof Oo)).reduce(((c,d)=>{if(i.dr(d)||!d.Tt())return c;const f=d.At(),p=d.In();if(f.Fi()||!p.Kr(e))return c;const m=p.qh(e);if(m===null)return c;const g=Ls(d.Pt());return c.concat([f.Ot(m.Vt[3],g.Vt)])}),[]);if(a.length===0)return n;a.sort(((c,d)=>Math.abs(c-l)-Math.abs(d-l)));const h=a[0];return n=r.pn(h,o),n}}class hb extends Je{constructor(){super(...arguments),this.Lt=null}it(t){this.Lt=t}Z({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.Lt===null)return;const r=Math.max(1,Math.floor(i));t.lineWidth=r,(function(o,l){o.save(),o.lineWidth%2&&o.translate(.5,.5),l(),o.restore()})(t,(()=>{const o=V(this.Lt);if(o.Pa){t.strokeStyle=o.Ra,Cs(t,o.Da),t.beginPath();for(const l of o.Oa){const a=Math.round(l.Aa*i);t.moveTo(a,-r),t.lineTo(a,e.height+r)}t.stroke()}if(o.Va){t.strokeStyle=o.Ba,Cs(t,o.Ia),t.beginPath();for(const l of o.za){const a=Math.round(l.Aa*n);t.moveTo(-r,a),t.lineTo(e.width+r,a)}t.stroke()}}))}}class cb{constructor(t){this.Ht=new hb,this.bt=!0,this.nn=t}gt(){this.bt=!0}xt(){if(this.bt){const t=this.nn.qt().W().grid,e={Va:t.horzLines.visible,Pa:t.vertLines.visible,Ba:t.horzLines.color,Ra:t.vertLines.color,Ia:t.horzLines.style,Da:t.vertLines.style,za:this.nn.vn().Ea(),Oa:(this.nn.qt().yt().Ea()||[]).map((i=>({Aa:i.coord})))};this.Ht.it(e),this.bt=!1}return this.Ht}}class db{constructor(t){this.wn=new cb(t)}Wh(){return this.wn}}const or={La:4,Na:1e-4};function Ps(s,t){const e=100*(s-t)/t;return t<0?-e:e}function fb(s,t){const e=Ps(s.Sh(),t),i=Ps(s.kh(),t);return new ne(e,i)}function di(s,t){const e=100*(s-t)/t+100;return t<0?-e:e}function pb(s,t){const e=di(s.Sh(),t),i=di(s.kh(),t);return new ne(e,i)}function yn(s,t){const e=Math.abs(s);if(e<1e-15)return 0;const i=Math.log10(e+t.Na)+t.La;return s<0?-i:i}function fi(s,t){const e=Math.abs(s);if(e<1e-15)return 0;const i=Math.pow(10,e-t.La)-t.Na;return s<0?-i:i}function ti(s,t){if(s===null)return null;const e=yn(s.Sh(),t),i=yn(s.kh(),t);return new ne(e,i)}function Ui(s,t){if(s===null)return null;const e=fi(s.Sh(),t),i=fi(s.kh(),t);return new ne(e,i)}function lr(s){if(s===null)return or;const t=Math.abs(s.kh()-s.Sh());if(t>=1||t<1e-15)return or;const e=Math.ceil(Math.abs(Math.log10(t))),i=or.La+e;return{La:i,Na:1/Math.pow(10,i)}}class ar{constructor(t,e){if(this.Fa=t,this.Wa=e,(function(i){if(i<0)return!1;for(let n=i;n>1;n/=10)if(n%10!=0)return!1;return!0})(this.Fa))this.ja=[2,2.5,2];else{this.ja=[];for(let i=this.Fa;i!==1;){if(i%2==0)this.ja.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.ja.push(2,2.5),i/=5}if(this.ja.length>100)throw new Error("something wrong with base")}}}Ha(t,e,i){const n=this.Fa===0?0:1/this.Fa;let r=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),o=0,l=this.Wa[0];for(;;){const d=Vi(r,n,1e-14)&&r>n+1e-14,f=Vi(r,i*l,1e-14),p=Vi(r,1,1e-14);if(!(d&&f&&p))break;r/=l,l=this.Wa[++o%this.Wa.length]}if(r<=n+1e-14&&(r=n),r=Math.max(1,r),this.ja.length>0&&(a=r,h=1,c=1e-14,Math.abs(a-h)<c))for(o=0,l=this.ja[0];Vi(r,i*l,1e-14)&&r>n+1e-14;)r/=l,l=this.ja[++o%this.ja.length];var a,h,c;return r}}class ta{constructor(t,e,i,n){this.$a=[],this.Li=t,this.Fa=e,this.Ua=i,this.qa=n}Ha(t,e){if(t<e)throw new Error("high < low");const i=this.Li.zt(),n=(t-e)*this.Ya()/i,r=new ar(this.Fa,[2,2.5,2]),o=new ar(this.Fa,[2,2,2.5]),l=new ar(this.Fa,[2.5,2,2]),a=[];return a.push(r.Ha(t,e,n),o.Ha(t,e,n),l.Ha(t,e,n)),(function(h){if(h.length<1)throw Error("array is empty");let c=h[0];for(let d=1;d<h.length;++d)h[d]<c&&(c=h[d]);return c})(a)}Xa(){const t=this.Li,e=t.Pt();if(e===null)return void(this.$a=[]);const i=t.zt(),n=this.Ua(i-1,e),r=this.Ua(0,e),o=this.Li.W().entireTextOnly?this.Ka()/2:0,l=o,a=i-1-o,h=Math.max(n,r),c=Math.min(n,r);if(h===c)return void(this.$a=[]);let d=this.Ha(h,c),f=h%d;f+=f<0?d:0;const p=h>=c?1:-1;let m=null,g=0;for(let y=h-f;y>c;y-=d){const _=this.qa(y,e,!0);m!==null&&Math.abs(_-m)<this.Ya()||_<l||_>a||(g<this.$a.length?(this.$a[g].Aa=_,this.$a[g].Za=t.Ga(y)):this.$a.push({Aa:_,Za:t.Ga(y)}),g++,m=_,t.Ja()&&(d=this.Ha(y*p,c)))}this.$a.length=g}Ea(){return this.$a}Ka(){return this.Li.P()}Ya(){return Math.ceil(2.5*this.Ka())}}function Ch(s){return s.slice().sort(((t,e)=>V(t.Zi())-V(e.Zi())))}var zr;(function(s){s[s.Normal=0]="Normal",s[s.Logarithmic=1]="Logarithmic",s[s.Percentage=2]="Percentage",s[s.IndexedTo100=3]="IndexedTo100"})(zr||(zr={}));const ea=new hh,sa=new In(100,1);class mb{constructor(t,e,i,n){this.Qa=0,this.io=null,this.Dh=null,this.no=null,this.so={eo:!1,ro:null},this.ho=0,this.lo=0,this.ao=new Lt,this.oo=new Lt,this._o=[],this.uo=null,this.co=null,this.do=null,this.fo=null,this.da=sa,this.vo=lr(null),this.po=t,this.cn=e,this.mo=i,this.bo=n,this.wo=new ta(this,100,this.Mo.bind(this),this.xo.bind(this))}xa(){return this.po}W(){return this.cn}Nh(t){if(ye(this.cn,t),this.Sa(),t.mode!==void 0&&this.So({yr:t.mode}),t.scaleMargins!==void 0){const e=Yt(t.scaleMargins.top),i=Yt(t.scaleMargins.bottom);if(e<0||e>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(i<0||i>1||e+i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(e+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${e+i}`);this.ko(),this.co=null}}yo(){return this.cn.autoScale}Ja(){return this.cn.mode===1}ph(){return this.cn.mode===2}Co(){return this.cn.mode===3}yr(){return{Wn:this.cn.autoScale,To:this.cn.invertScale,yr:this.cn.mode}}So(t){const e=this.yr();let i=null;t.Wn!==void 0&&(this.cn.autoScale=t.Wn),t.yr!==void 0&&(this.cn.mode=t.yr,t.yr!==2&&t.yr!==3||(this.cn.autoScale=!0),this.so.eo=!1),e.yr===1&&t.yr!==e.yr&&((function(r,o){if(r===null)return!1;const l=fi(r.Sh(),o),a=fi(r.kh(),o);return isFinite(l)&&isFinite(a)})(this.Dh,this.vo)?(i=Ui(this.Dh,this.vo),i!==null&&this.Po(i)):this.cn.autoScale=!0),t.yr===1&&t.yr!==e.yr&&(i=ti(this.Dh,this.vo),i!==null&&this.Po(i));const n=e.yr!==this.cn.mode;n&&(e.yr===2||this.ph())&&this.Sa(),n&&(e.yr===3||this.Co())&&this.Sa(),t.To!==void 0&&e.To!==t.To&&(this.cn.invertScale=t.To,this.Ro()),this.oo.m(e,this.yr())}Do(){return this.oo}P(){return this.mo.fontSize}zt(){return this.Qa}Oo(t){this.Qa!==t&&(this.Qa=t,this.ko(),this.co=null)}Ao(){if(this.io)return this.io;const t=this.zt()-this.Vo()-this.Bo();return this.io=t,t}Ah(){return this.Io(),this.Dh}Po(t,e){const i=this.Dh;(e||i===null&&t!==null||i!==null&&!i.Mh(t))&&(this.co=null,this.Dh=t)}Fi(){return this.Io(),this.Qa===0||!this.Dh||this.Dh.Fi()}zo(t){return this.To()?t:this.zt()-1-t}Ot(t,e){return this.ph()?t=Ps(t,e):this.Co()&&(t=di(t,e)),this.xo(t,e)}Qs(t,e,i){this.Io();const n=this.Bo(),r=V(this.Ah()),o=r.Sh(),l=r.kh(),a=this.Ao()-1,h=this.To(),c=a/(l-o),d=i===void 0?0:i.from,f=i===void 0?t.length:i.to,p=this.Eo();for(let m=d;m<f;m++){const g=t[m],y=g.ct;if(isNaN(y))continue;let _=y;p!==null&&(_=p(g.ct,e));const E=n+c*(_-o),F=h?E:this.Qa-1-E;g.rt=F}}me(t,e,i){this.Io();const n=this.Bo(),r=V(this.Ah()),o=r.Sh(),l=r.kh(),a=this.Ao()-1,h=this.To(),c=a/(l-o),d=i===void 0?0:i.from,f=i===void 0?t.length:i.to,p=this.Eo();for(let m=d;m<f;m++){const g=t[m];let y=g.we,_=g.ge,E=g.Me,F=g.xe;p!==null&&(y=p(g.we,e),_=p(g.ge,e),E=p(g.Me,e),F=p(g.xe,e));let I=n+c*(y-o),X=h?I:this.Qa-1-I;g.ve=X,I=n+c*(_-o),X=h?I:this.Qa-1-I,g.ce=X,I=n+c*(E-o),X=h?I:this.Qa-1-I,g.de=X,I=n+c*(F-o),X=h?I:this.Qa-1-I,g.pe=X}}pn(t,e){const i=this.Mo(t,e);return this.Lo(i,e)}Lo(t,e){let i=t;return this.ph()?i=(function(n,r){return r<0&&(n=-n),n/100*r+r})(i,e):this.Co()&&(i=(function(n,r){return n-=100,r<0&&(n=-n),n/100*r+r})(i,e)),i}Ta(){return this._o}No(){if(this.uo)return this.uo;let t=[];for(let e=0;e<this._o.length;e++){const i=this._o[e];i.Zi()===null&&i.Gi(e+1),t.push(i)}return t=Ch(t),this.uo=t,this.uo}Fo(t){this._o.indexOf(t)===-1&&(this._o.push(t),this.Sa(),this.Wo())}jo(t){const e=this._o.indexOf(t);if(e===-1)throw new Error("source is not attached to scale");this._o.splice(e,1),this._o.length===0&&(this.So({Wn:!0}),this.Po(null)),this.Sa(),this.Wo()}Pt(){let t=null;for(const e of this._o){const i=e.Pt();i!==null&&(t===null||i.ia<t.ia)&&(t=i)}return t===null?null:t.Vt}To(){return this.cn.invertScale}Ea(){const t=this.Pt()===null;if(this.co!==null&&(t||this.co.Ho===t))return this.co.Ea;this.wo.Xa();const e=this.wo.Ea();return this.co={Ea:e,Ho:t},this.ao.m(),e}$o(){return this.ao}Uo(t){this.ph()||this.Co()||this.do===null&&this.no===null&&(this.Fi()||(this.do=this.Qa-t,this.no=V(this.Ah()).xh()))}qo(t){if(this.ph()||this.Co()||this.do===null)return;this.So({Wn:!1}),(t=this.Qa-t)<0&&(t=0);let e=(this.do+.2*(this.Qa-1))/(t+.2*(this.Qa-1));const i=V(this.no).xh();e=Math.max(e,.1),i.Ch(e),this.Po(i)}Yo(){this.ph()||this.Co()||(this.do=null,this.no=null)}Xo(t){this.yo()||this.fo===null&&this.no===null&&(this.Fi()||(this.fo=t,this.no=V(this.Ah()).xh()))}Ko(t){if(this.yo()||this.fo===null)return;const e=V(this.Ah()).yh()/(this.Ao()-1);let i=t-this.fo;this.To()&&(i*=-1);const n=i*e,r=V(this.no).xh();r.Th(n),this.Po(r,!0),this.co=null}Zo(){this.yo()||this.fo!==null&&(this.fo=null,this.no=null)}ca(){return this.da||this.Sa(),this.da}Wi(t,e){switch(this.cn.mode){case 2:return this.Go(Ps(t,e));case 3:return this.ca().format(di(t,e));default:return this.zh(t)}}Ga(t){switch(this.cn.mode){case 2:return this.Go(t);case 3:return this.ca().format(t);default:return this.zh(t)}}Wl(t){return this.zh(t,V(this.Jo()).ca())}jl(t,e){return t=Ps(t,e),this.Go(t,ea)}Qo(){return this._o}t_(t){this.so={ro:t,eo:!1}}On(){this._o.forEach((t=>t.On()))}Sa(){this.co=null;const t=this.Jo();let e=100;t!==null&&(e=Math.round(1/t.ua())),this.da=sa,this.ph()?(this.da=ea,e=100):this.Co()?(this.da=new In(100,1),e=100):t!==null&&(this.da=t.ca()),this.wo=new ta(this,e,this.Mo.bind(this),this.xo.bind(this)),this.wo.Xa()}Wo(){this.uo=null}Jo(){return this._o[0]||null}Vo(){return this.To()?this.cn.scaleMargins.bottom*this.zt()+this.lo:this.cn.scaleMargins.top*this.zt()+this.ho}Bo(){return this.To()?this.cn.scaleMargins.top*this.zt()+this.ho:this.cn.scaleMargins.bottom*this.zt()+this.lo}Io(){this.so.eo||(this.so.eo=!0,this.i_())}ko(){this.io=null}xo(t,e){if(this.Io(),this.Fi())return 0;t=this.Ja()&&t?yn(t,this.vo):t;const i=V(this.Ah()),n=this.Bo()+(this.Ao()-1)*(t-i.Sh())/i.yh();return this.zo(n)}Mo(t,e){if(this.Io(),this.Fi())return 0;const i=this.zo(t),n=V(this.Ah()),r=n.Sh()+n.yh()*((i-this.Bo())/(this.Ao()-1));return this.Ja()?fi(r,this.vo):r}Ro(){this.co=null,this.wo.Xa()}i_(){const t=this.so.ro;if(t===null)return;let e=null;const i=this.Qo();let n=0,r=0;for(const a of i){if(!a.Tt())continue;const h=a.Pt();if(h===null)continue;const c=a.Rl(t.Os(),t.di());let d=c&&c.Ah();if(d!==null){switch(this.cn.mode){case 1:d=ti(d,this.vo);break;case 2:d=fb(d,h.Vt);break;case 3:d=pb(d,h.Vt)}if(e=e===null?d:e.ts(V(d)),c!==null){const f=c.Vh();f!==null&&(n=Math.max(n,f.above),r=Math.max(n,f.below))}}}if(n===this.ho&&r===this.lo||(this.ho=n,this.lo=r,this.co=null,this.ko()),e!==null){if(e.Sh()===e.kh()){const a=this.Jo(),h=5*(a===null||this.ph()||this.Co()?1:a.ua());this.Ja()&&(e=Ui(e,this.vo)),e=new ne(e.Sh()-h,e.kh()+h),this.Ja()&&(e=ti(e,this.vo))}if(this.Ja()){const a=Ui(e,this.vo),h=lr(a);if(o=h,l=this.vo,o.La!==l.La||o.Na!==l.Na){const c=this.no!==null?Ui(this.no,this.vo):null;this.vo=h,e=ti(a,h),c!==null&&(this.no=ti(c,h))}}this.Po(e)}else this.Dh===null&&(this.Po(new ne(-.5,.5)),this.vo=lr(null));var o,l;this.so.eo=!0}Eo(){return this.ph()?Ps:this.Co()?di:this.Ja()?t=>yn(t,this.vo):null}n_(t,e,i){return e===void 0?(i===void 0&&(i=this.ca()),i.format(t)):e(t)}zh(t,e){return this.n_(t,this.bo.priceFormatter,e)}Go(t,e){return this.n_(t,this.bo.percentageFormatter,e)}}class vb{constructor(t,e){this._o=[],this.s_=new Map,this.Qa=0,this.e_=0,this.r_=1e3,this.uo=null,this.h_=new Lt,this.wl=t,this.Ui=e,this.l_=new db(this);const i=e.W();this.a_=this.o_("left",i.leftPriceScale),this.__=this.o_("right",i.rightPriceScale),this.a_.Do().l(this.u_.bind(this,this.a_),this),this.__.Do().l(this.u_.bind(this,this.__),this),this.c_(i)}c_(t){if(t.leftPriceScale&&this.a_.Nh(t.leftPriceScale),t.rightPriceScale&&this.__.Nh(t.rightPriceScale),t.localization&&(this.a_.Sa(),this.__.Sa()),t.overlayPriceScales){const e=Array.from(this.s_.values());for(const i of e){const n=V(i[0].At());n.Nh(t.overlayPriceScales),t.localization&&n.Sa()}}}d_(t){switch(t){case"left":return this.a_;case"right":return this.__}return this.s_.has(t)?Yt(this.s_.get(t))[0].At():null}S(){this.qt().f_().p(this),this.a_.Do().p(this),this.__.Do().p(this),this._o.forEach((t=>{t.S&&t.S()})),this.h_.m()}v_(){return this.r_}p_(t){this.r_=t}qt(){return this.Ui}$i(){return this.e_}zt(){return this.Qa}m_(t){this.e_=t,this.b_()}Oo(t){this.Qa=t,this.a_.Oo(t),this.__.Oo(t),this._o.forEach((e=>{if(this.dr(e)){const i=e.At();i!==null&&i.Oo(t)}})),this.b_()}Ta(){return this._o}dr(t){const e=t.At();return e===null||this.a_!==e&&this.__!==e}Fo(t,e,i){const n=i!==void 0?i:this.g_().w_+1;this.M_(t,e,n)}jo(t){const e=this._o.indexOf(t);ls(e!==-1,"removeDataSource: invalid data source"),this._o.splice(e,1);const i=V(t.At()).xa();if(this.s_.has(i)){const r=Yt(this.s_.get(i)),o=r.indexOf(t);o!==-1&&(r.splice(o,1),r.length===0&&this.s_.delete(i))}const n=t.At();n&&n.Ta().indexOf(t)>=0&&n.jo(t),n!==null&&(n.Wo(),this.x_(n)),this.uo=null}pr(t){return t===this.a_?"left":t===this.__?"right":"overlay"}S_(){return this.a_}k_(){return this.__}y_(t,e){t.Uo(e)}C_(t,e){t.qo(e),this.b_()}T_(t){t.Yo()}P_(t,e){t.Xo(e)}R_(t,e){t.Ko(e),this.b_()}D_(t){t.Zo()}b_(){this._o.forEach((t=>{t.On()}))}vn(){let t=null;return this.Ui.W().rightPriceScale.visible&&this.__.Ta().length!==0?t=this.__:this.Ui.W().leftPriceScale.visible&&this.a_.Ta().length!==0?t=this.a_:this._o.length!==0&&(t=this._o[0].At()),t===null&&(t=this.__),t}vr(){let t=null;return this.Ui.W().rightPriceScale.visible?t=this.__:this.Ui.W().leftPriceScale.visible&&(t=this.a_),t}x_(t){t!==null&&t.yo()&&this.O_(t)}A_(t){const e=this.wl.Xs();t.So({Wn:!0}),e!==null&&t.t_(e),this.b_()}V_(){this.O_(this.a_),this.O_(this.__)}B_(){this.x_(this.a_),this.x_(this.__),this._o.forEach((t=>{this.dr(t)&&this.x_(t.At())})),this.b_(),this.Ui.Fh()}No(){return this.uo===null&&(this.uo=Ch(this._o)),this.uo}I_(){return this.h_}z_(){return this.l_}O_(t){const e=t.Qo();if(e&&e.length>0&&!this.wl.Fi()){const i=this.wl.Xs();i!==null&&t.t_(i)}t.On()}g_(){const t=this.No();if(t.length===0)return{E_:0,w_:0};let e=0,i=0;for(let n=0;n<t.length;n++){const r=t[n].Zi();r!==null&&(r<e&&(e=r),r>i&&(i=r))}return{E_:e,w_:i}}M_(t,e,i){let n=this.d_(e);if(n===null&&(n=this.o_(e,this.Ui.W().overlayPriceScales)),this._o.push(t),!Dn(e)){const r=this.s_.get(e)||[];r.push(t),this.s_.set(e,r)}n.Fo(t),t.Ji(n),t.Gi(i),this.x_(n),this.uo=null}u_(t,e,i){e.yr!==i.yr&&this.O_(t)}o_(t,e){const i=Object.assign({visible:!0,autoScale:!0},Ue(e)),n=new mb(t,i,this.Ui.W().layout,this.Ui.W().localization);return n.Oo(this.zt()),n}}class gb{constructor(t,e,i=50){this.Ke=0,this.Ze=1,this.Ge=1,this.Qe=new Map,this.Je=new Map,this.L_=t,this.N_=e,this.tr=i}F_(t){const e=t.time,i=this.N_.cacheKey(e),n=this.Qe.get(i);if(n!==void 0)return n.W_;if(this.Ke===this.tr){const o=this.Je.get(this.Ge);this.Je.delete(this.Ge),this.Qe.delete(Yt(o)),this.Ge++,this.Ke--}const r=this.L_(t);return this.Qe.set(i,{W_:r,er:this.Ze}),this.Je.set(this.Ze,i),this.Ke++,this.Ze++,r}}class pi{constructor(t,e){ls(t<=e,"right should be >= left"),this.j_=t,this.H_=e}Os(){return this.j_}di(){return this.H_}U_(){return this.H_-this.j_+1}Kr(t){return this.j_<=t&&t<=this.H_}Mh(t){return this.j_===t.Os()&&this.H_===t.di()}}function ia(s,t){return s===null||t===null?s===t:s.Mh(t)}class bb{constructor(){this.q_=new Map,this.Qe=null,this.Y_=!1}X_(t){this.Y_=t,this.Qe=null}K_(t,e){this.Z_(e),this.Qe=null;for(let i=e;i<t.length;++i){const n=t[i];let r=this.q_.get(n.timeWeight);r===void 0&&(r=[],this.q_.set(n.timeWeight,r)),r.push({index:i,time:n.time,weight:n.timeWeight,originalTime:n.originalTime})}}G_(t,e){const i=Math.ceil(e/t);return this.Qe!==null&&this.Qe.J_===i||(this.Qe={Ea:this.Q_(i),J_:i}),this.Qe.Ea}Z_(t){if(t===0)return void this.q_.clear();const e=[];this.q_.forEach(((i,n)=>{t<=i[0].index?e.push(n):i.splice(Ni(i,t,(r=>r.index<t)),1/0)}));for(const i of e)this.q_.delete(i)}Q_(t){let e=[];for(const i of Array.from(this.q_.keys()).sort(((n,r)=>r-n))){if(!this.q_.get(i))continue;const n=e;e=[];const r=n.length;let o=0;const l=Yt(this.q_.get(i)),a=l.length;let h=1/0,c=-1/0;for(let d=0;d<a;d++){const f=l[d],p=f.index;for(;o<r;){const m=n[o],g=m.index;if(!(g<p)){h=g;break}o++,e.push(m),c=g,h=1/0}if(h-p>=t&&p-c>=t)e.push(f),c=p;else if(this.Y_)return n}for(;o<r;o++)e.push(n[o])}return e}}class Bs{constructor(t){this.tu=t}iu(){return this.tu===null?null:new pi(Math.floor(this.tu.Os()),Math.ceil(this.tu.di()))}nu(){return this.tu}static su(){return new Bs(null)}}function yb(s,t){return s.weight>t.weight?s:t}class _b{constructor(t,e,i,n){this.e_=0,this.eu=null,this.ru=[],this.fo=null,this.do=null,this.hu=new bb,this.lu=new Map,this.au=Bs.su(),this.ou=!0,this._u=new Lt,this.uu=new Lt,this.cu=new Lt,this.du=null,this.fu=null,this.vu=[],this.cn=e,this.bo=i,this.pu=e.rightOffset,this.mu=e.barSpacing,this.Ui=t,this.N_=n,this.bu(),this.hu.X_(e.uniformDistribution)}W(){return this.cn}wu(t){ye(this.bo,t),this.gu(),this.bu()}Nh(t,e){var i;ye(this.cn,t),this.cn.fixLeftEdge&&this.Mu(),this.cn.fixRightEdge&&this.xu(),t.barSpacing!==void 0&&this.Ui.Gn(t.barSpacing),t.rightOffset!==void 0&&this.Ui.Jn(t.rightOffset),t.minBarSpacing!==void 0&&this.Ui.Gn((i=t.barSpacing)!==null&&i!==void 0?i:this.mu),this.gu(),this.bu(),this.cu.m()}mn(t){var e,i;return(i=(e=this.ru[t])===null||e===void 0?void 0:e.time)!==null&&i!==void 0?i:null}qi(t){var e;return(e=this.ru[t])!==null&&e!==void 0?e:null}ya(t,e){if(this.ru.length<1)return null;if(this.N_.key(t)>this.N_.key(this.ru[this.ru.length-1].time))return e?this.ru.length-1:null;const i=Ni(this.ru,this.N_.key(t),((n,r)=>this.N_.key(n.time)<r));return this.N_.key(t)<this.N_.key(this.ru[i].time)?e?i:null:i}Fi(){return this.e_===0||this.ru.length===0||this.eu===null}ka(){return this.ru.length>0}Xs(){return this.Su(),this.au.iu()}ku(){return this.Su(),this.au.nu()}yu(){const t=this.Xs();if(t===null)return null;const e={from:t.Os(),to:t.di()};return this.Cu(e)}Cu(t){const e=Math.round(t.from),i=Math.round(t.to),n=V(this.Tu()),r=V(this.Bn());return{from:V(this.qi(Math.max(n,e))),to:V(this.qi(Math.min(r,i)))}}Pu(t){return{from:V(this.ya(t.from,!0)),to:V(this.ya(t.to,!0))}}$i(){return this.e_}m_(t){if(!isFinite(t)||t<=0||this.e_===t)return;const e=this.ku(),i=this.e_;if(this.e_=t,this.ou=!0,this.cn.lockVisibleTimeRangeOnResize&&i!==0){const n=this.mu*t/i;this.mu=n}if(this.cn.fixLeftEdge&&e!==null&&e.Os()<=0){const n=i-t;this.pu-=Math.round(n/this.mu)+1,this.ou=!0}this.Ru(),this.Du()}Et(t){if(this.Fi()||!xi(t))return 0;const e=this.Ou()+this.pu-t;return this.e_-(e+.5)*this.mu-1}Js(t,e){const i=this.Ou(),n=e===void 0?0:e.from,r=e===void 0?t.length:e.to;for(let o=n;o<r;o++){const l=t[o].ut,a=i+this.pu-l,h=this.e_-(a+.5)*this.mu-1;t[o].et=h}}Au(t){return Math.ceil(this.Vu(t))}Jn(t){this.ou=!0,this.pu=t,this.Du(),this.Ui.Bu(),this.Ui.Fh()}he(){return this.mu}Gn(t){this.Iu(t),this.Du(),this.Ui.Bu(),this.Ui.Fh()}zu(){return this.pu}Ea(){if(this.Fi())return null;if(this.fu!==null)return this.fu;const t=this.mu,e=5*(this.Ui.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),i=Math.round(e/t),n=V(this.Xs()),r=Math.max(n.Os(),n.Os()-i),o=Math.max(n.di(),n.di()-i),l=this.hu.G_(t,e),a=this.Tu()+i,h=this.Bn()-i,c=this.Eu(),d=this.cn.fixLeftEdge||c,f=this.cn.fixRightEdge||c;let p=0;for(const m of l){if(!(r<=m.index&&m.index<=o))continue;let g;p<this.vu.length?(g=this.vu[p],g.coord=this.Et(m.index),g.label=this.Lu(m),g.weight=m.weight):(g={needAlignCoordinate:!1,coord:this.Et(m.index),label:this.Lu(m),weight:m.weight},this.vu.push(g)),this.mu>e/2&&!c?g.needAlignCoordinate=!1:g.needAlignCoordinate=d&&m.index<=a||f&&m.index>=h,p++}return this.vu.length=p,this.fu=this.vu,this.vu}Nu(){this.ou=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Fu(t){this.ou=!0,this.eu=t,this.Du(),this.Mu()}Wu(t,e){const i=this.Vu(t),n=this.he(),r=n+e*(n/10);this.Gn(r),this.cn.rightBarStaysOnScroll||this.Jn(this.zu()+(i-this.Vu(t)))}Uo(t){this.fo&&this.Zo(),this.do===null&&this.du===null&&(this.Fi()||(this.do=t,this.ju()))}qo(t){if(this.du===null)return;const e=Ur(this.e_-t,0,this.e_),i=Ur(this.e_-V(this.do),0,this.e_);e!==0&&i!==0&&this.Gn(this.du.he*e/i)}Yo(){this.do!==null&&(this.do=null,this.Hu())}Xo(t){this.fo===null&&this.du===null&&(this.Fi()||(this.fo=t,this.ju()))}Ko(t){if(this.fo===null)return;const e=(this.fo-t)/this.he();this.pu=V(this.du).zu+e,this.ou=!0,this.Du()}Zo(){this.fo!==null&&(this.fo=null,this.Hu())}$u(){this.Uu(this.cn.rightOffset)}Uu(t,e=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.pu,n=performance.now();this.Ui.Xn({qu:r=>(r-n)/e>=1,Yu:r=>{const o=(r-n)/e;return o>=1?t:i+(t-i)*o}})}gt(t,e){this.ou=!0,this.ru=t,this.hu.K_(t,e),this.Du()}Xu(){return this._u}Ku(){return this.uu}Zu(){return this.cu}Ou(){return this.eu||0}Gu(t){const e=t.U_();this.Iu(this.e_/e),this.pu=t.di()-this.Ou(),this.Du(),this.ou=!0,this.Ui.Bu(),this.Ui.Fh()}Ju(){const t=this.Tu(),e=this.Bn();t!==null&&e!==null&&this.Gu(new pi(t,e+this.cn.rightOffset))}Qu(t){const e=new pi(t.from,t.to);this.Gu(e)}Yi(t){return this.bo.timeFormatter!==void 0?this.bo.timeFormatter(t.originalTime):this.N_.formatHorzItem(t.time)}Bn(){return this.ru.length===0?null:this.ru.length-1}Eu(){const{handleScroll:t,handleScale:e}=this.Ui.W();return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}Tu(){return this.ru.length===0?null:0}tc(t){return(this.e_-1-t)/this.mu}Vu(t){const e=this.tc(t),i=this.Ou()+this.pu-e;return Math.round(1e6*i)/1e6}Iu(t){const e=this.mu;this.mu=t,this.Ru(),e!==this.mu&&(this.ou=!0,this.ic())}Su(){if(!this.ou)return;if(this.ou=!1,this.Fi())return void this.nc(Bs.su());const t=this.Ou(),e=this.e_/this.mu,i=this.pu+t,n=new pi(i-e+1,i);this.nc(new Bs(n))}Ru(){const t=this.sc();if(this.mu<t&&(this.mu=t,this.ou=!0),this.e_!==0){const e=.5*this.e_;this.mu>e&&(this.mu=e,this.ou=!0)}}sc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.ru.length!==0?this.e_/this.ru.length:this.cn.minBarSpacing}Du(){const t=this.ec();this.pu>t&&(this.pu=t,this.ou=!0);const e=this.rc();e!==null&&this.pu<e&&(this.pu=e,this.ou=!0)}rc(){const t=this.Tu(),e=this.eu;return t===null||e===null?null:t-e-1+(this.cn.fixLeftEdge?this.e_/this.mu:Math.min(2,this.ru.length))}ec(){return this.cn.fixRightEdge?0:this.e_/this.mu-Math.min(2,this.ru.length)}ju(){this.du={he:this.he(),zu:this.zu()}}Hu(){this.du=null}Lu(t){let e=this.lu.get(t.weight);return e===void 0&&(e=new gb((i=>this.hc(i)),this.N_),this.lu.set(t.weight,e)),e.F_(t)}hc(t){return this.N_.formatTickmark(t,this.bo)}nc(t){const e=this.au;this.au=t,ia(e.iu(),this.au.iu())||this._u.m(),ia(e.nu(),this.au.nu())||this.uu.m(),this.ic()}ic(){this.fu=null}gu(){this.ic(),this.lu.clear()}bu(){this.N_.updateFormatter(this.bo)}Mu(){if(!this.cn.fixLeftEdge)return;const t=this.Tu();if(t===null)return;const e=this.Xs();if(e===null)return;const i=e.Os()-t;if(i<0){const n=this.pu-i-1;this.Jn(n)}this.Ru()}xu(){this.Du(),this.Ru()}}class wb extends Eo{constructor(t){super(),this.lc=new Map,this.Lt=t}Z(t){}J(t){if(!this.Lt.Tt)return;const{context:e,mediaSize:i}=t;let n=0;for(const o of this.Lt.ac){if(o.Jt.length===0)continue;e.font=o.R;const l=this.oc(e,o.Jt);l>i.width?o.Wu=i.width/l:o.Wu=1,n+=o._c*o.Wu}let r=0;switch(this.Lt.uc){case"top":r=0;break;case"center":r=Math.max((i.height-n)/2,0);break;case"bottom":r=Math.max(i.height-n,0)}e.fillStyle=this.Lt.O;for(const o of this.Lt.ac){e.save();let l=0;switch(this.Lt.cc){case"left":e.textAlign="left",l=o._c/2;break;case"center":e.textAlign="center",l=i.width/2;break;case"right":e.textAlign="right",l=i.width-1-o._c/2}e.translate(l,r),e.textBaseline="top",e.font=o.R,e.scale(o.Wu,o.Wu),e.fillText(o.Jt,0,o.dc),e.restore(),r+=o._c*o.Wu}}oc(t,e){const i=this.fc(t.font);let n=i.get(e);return n===void 0&&(n=t.measureText(e).width,i.set(e,n)),n}fc(t){let e=this.lc.get(t);return e===void 0&&(e=new Map,this.lc.set(t,e)),e}}class Sb{constructor(t){this.bt=!0,this.jt={Tt:!1,O:"",ac:[],uc:"center",cc:"center"},this.Ht=new wb(this.jt),this.$t=t}gt(){this.bt=!0}xt(){return this.bt&&(this.St(),this.bt=!1),this.Ht}St(){const t=this.$t.W(),e=this.jt;e.Tt=t.visible,e.Tt&&(e.O=t.color,e.cc=t.horzAlign,e.uc=t.vertAlign,e.ac=[{Jt:t.text,R:Ws(t.fontSize,t.fontFamily,t.fontStyle),_c:1.2*t.fontSize,dc:0,Wu:0}])}}class xb extends ko{constructor(t,e){super(),this.cn=e,this.wn=new Sb(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}On(){this.wn.gt()}}var na,ra,oa,la,aa;(function(s){s[s.OnTouchEnd=0]="OnTouchEnd",s[s.OnNextTap=1]="OnNextTap"})(na||(na={}));class Cb{constructor(t,e,i){this.vc=[],this.mc=[],this.e_=0,this.bc=null,this.wc=new Lt,this.gc=new Lt,this.Mc=null,this.xc=t,this.cn=e,this.N_=i,this.Sc=new ig(this),this.wl=new _b(this,e.timeScale,this.cn.localization,i),this.wt=new pg(this,e.crosshair),this.kc=new ub(e.crosshair),this.yc=new xb(this,e.watermark),this.Cc(),this.vc[0].p_(2e3),this.Tc=this.Pc(0),this.Rc=this.Pc(1)}$l(){this.Dc(Dt.es())}Fh(){this.Dc(Dt.ss())}sa(){this.Dc(new Dt(1))}Ul(t){const e=this.Oc(t);this.Dc(e)}Ac(){return this.bc}Vc(t){const e=this.bc;this.bc=t,e!==null&&this.Ul(e.Bc),t!==null&&this.Ul(t.Bc)}W(){return this.cn}Nh(t){ye(this.cn,t),this.vc.forEach((e=>e.c_(t))),t.timeScale!==void 0&&this.wl.Nh(t.timeScale),t.localization!==void 0&&this.wl.wu(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.wc.m(),this.Tc=this.Pc(0),this.Rc=this.Pc(1),this.$l()}Ic(t,e){if(t==="left")return void this.Nh({leftPriceScale:e});if(t==="right")return void this.Nh({rightPriceScale:e});const i=this.zc(t);i!==null&&(i.At.Nh(e),this.wc.m())}zc(t){for(const e of this.vc){const i=e.d_(t);if(i!==null)return{Ut:e,At:i}}return null}yt(){return this.wl}Ec(){return this.vc}Lc(){return this.yc}Nc(){return this.wt}Fc(){return this.gc}Wc(t,e){t.Oo(e),this.Bu()}m_(t){this.e_=t,this.wl.m_(this.e_),this.vc.forEach((e=>e.m_(t))),this.Bu()}Cc(t){const e=new vb(this.wl,this);t!==void 0?this.vc.splice(t,0,e):this.vc.push(e);const i=t===void 0?this.vc.length-1:t,n=Dt.es();return n.Nn(i,{Fn:0,Wn:!0}),this.Dc(n),e}y_(t,e,i){t.y_(e,i)}C_(t,e,i){t.C_(e,i),this.ql(),this.Dc(this.jc(t,2))}T_(t,e){t.T_(e),this.Dc(this.jc(t,2))}P_(t,e,i){e.yo()||t.P_(e,i)}R_(t,e,i){e.yo()||(t.R_(e,i),this.ql(),this.Dc(this.jc(t,2)))}D_(t,e){e.yo()||(t.D_(e),this.Dc(this.jc(t,2)))}A_(t,e){t.A_(e),this.Dc(this.jc(t,2))}Hc(t){this.wl.Uo(t)}$c(t,e){const i=this.yt();if(i.Fi()||e===0)return;const n=i.$i();t=Math.max(1,Math.min(t,n)),i.Wu(t,e),this.Bu()}Uc(t){this.qc(0),this.Yc(t),this.Xc()}Kc(t){this.wl.qo(t),this.Bu()}Zc(){this.wl.Yo(),this.Fh()}qc(t){this.wl.Xo(t)}Yc(t){this.wl.Ko(t),this.Bu()}Xc(){this.wl.Zo(),this.Fh()}Mt(){return this.mc}Gc(t,e,i,n,r){this.wt.gn(t,e);let o=NaN,l=this.wl.Au(t);const a=this.wl.Xs();a!==null&&(l=Math.min(Math.max(a.Os(),l),a.di()));const h=n.vn(),c=h.Pt();c!==null&&(o=h.pn(e,c)),o=this.kc.Ca(o,l,n),this.wt.kn(l,o,n),this.sa(),r||this.gc.m(this.wt.kt(),{x:t,y:e},i)}Jc(t,e,i){const n=i.vn(),r=n.Pt(),o=n.Ot(t,V(r)),l=this.wl.ya(e,!0),a=this.wl.Et(V(l));this.Gc(a,o,null,i,!0)}Qc(t){this.Nc().Cn(),this.sa(),t||this.gc.m(null,null,null)}ql(){const t=this.wt.Ut();if(t!==null){const e=this.wt.xn(),i=this.wt.Sn();this.Gc(e,i,null,t)}this.wt.On()}td(t,e,i){const n=this.wl.mn(0),r=this.wl.Bn();e!==void 0&&i!==void 0&&this.wl.gt(e,i);const o=this.wl.mn(0),l=this.wl.Ou(),a=this.wl.Xs();if(a!==null&&n!==null&&o!==null){const h=a.Kr(l),c=this.N_.key(n)>this.N_.key(o),d=t!==null&&t>l&&!c,f=this.wl.Bn(),p=h&&f!==r&&this.wl.W().shiftVisibleRangeOnNewBar;if(d&&!p){const m=t-l;this.wl.Jn(this.wl.zu()-m)}}this.wl.Fu(t)}Kl(t){t!==null&&t.B_()}cr(t){const e=this.vc.find((i=>i.No().includes(t)));return e===void 0?null:e}Bu(){this.yc.On(),this.vc.forEach((t=>t.B_())),this.ql()}S(){this.vc.forEach((t=>t.S())),this.vc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}nd(){return this.Sc}mr(){return this.Sc.W()}f_(){return this.wc}sd(t,e,i){const n=this.vc[0],r=this.ed(e,t,n,i);return this.mc.push(r),this.mc.length===1?this.$l():this.Fh(),r}rd(t){const e=this.cr(t),i=this.mc.indexOf(t);ls(i!==-1,"Series not found"),this.mc.splice(i,1),V(e).jo(t),t.S&&t.S()}Hl(t,e){const i=V(this.cr(t));i.jo(t);const n=this.zc(e);if(n===null){const r=t.Zi();i.Fo(t,e,r)}else{const r=n.Ut===i?t.Zi():void 0;n.Ut.Fo(t,e,r)}}Ju(){const t=Dt.ss();t.$n(),this.Dc(t)}hd(t){const e=Dt.ss();e.Yn(t),this.Dc(e)}Zn(){const t=Dt.ss();t.Zn(),this.Dc(t)}Gn(t){const e=Dt.ss();e.Gn(t),this.Dc(e)}Jn(t){const e=Dt.ss();e.Jn(t),this.Dc(e)}Xn(t){const e=Dt.ss();e.Xn(t),this.Dc(e)}Un(){const t=Dt.ss();t.Un(),this.Dc(t)}ld(){return this.cn.rightPriceScale.visible?"right":"left"}ad(){return this.Rc}q(){return this.Tc}It(t){const e=this.Rc,i=this.Tc;if(e===i)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),this.Mc===null||this.Mc.Ts!==i||this.Mc.Ps!==e)this.Mc={Ts:i,Ps:e,od:new Map};else{const r=this.Mc.od.get(t);if(r!==void 0)return r}const n=(function(r,o,l){const[a,h,c,d]=gn(r),[f,p,m,g]=gn(o),y=[he(a+l*(f-a)),he(h+l*(p-h)),he(c+l*(m-c)),lh(d+l*(g-d))];return`rgba(${y[0]}, ${y[1]}, ${y[2]}, ${y[3]})`})(i,e,t/100);return this.Mc.od.set(t,n),n}jc(t,e){const i=new Dt(e);if(t!==null){const n=this.vc.indexOf(t);i.Nn(n,{Fn:e})}return i}Oc(t,e){return e===void 0&&(e=2),this.jc(this.cr(t),e)}Dc(t){this.xc&&this.xc(t),this.vc.forEach((e=>e.z_().Wh().gt()))}ed(t,e,i,n){const r=new Oo(this,t,e,i,n),o=t.priceScaleId!==void 0?t.priceScaleId:this.ld();return i.Fo(r,o),Dn(o)||r.Nh(t),r}Pc(t){const e=this.cn.layout;return e.background.type==="gradient"?t===0?e.background.topColor:e.background.bottomColor:e.background.color}}function qr(s){return!Oe(s)&&!Ri(s)}function Eh(s){return Oe(s)}(function(s){s[s.Disabled=0]="Disabled",s[s.Continuous=1]="Continuous",s[s.OnDataUpdate=2]="OnDataUpdate"})(ra||(ra={})),(function(s){s[s.LastBar=0]="LastBar",s[s.LastVisible=1]="LastVisible"})(oa||(oa={})),(function(s){s.Solid="solid",s.VerticalGradient="gradient"})(la||(la={})),(function(s){s[s.Year=0]="Year",s[s.Month=1]="Month",s[s.DayOfMonth=2]="DayOfMonth",s[s.Time=3]="Time",s[s.TimeWithSeconds=4]="TimeWithSeconds"})(aa||(aa={}));const ua=s=>s.getUTCFullYear();function Eb(s,t,e){return t.replace(/yyyy/g,(i=>ze(ua(i),4))(s)).replace(/yy/g,(i=>ze(ua(i)%100,2))(s)).replace(/MMMM/g,((i,n)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(n,{month:"long"}))(s,e)).replace(/MMM/g,((i,n)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(n,{month:"short"}))(s,e)).replace(/MM/g,(i=>ze((n=>n.getUTCMonth()+1)(i),2))(s)).replace(/dd/g,(i=>ze((n=>n.getUTCDate())(i),2))(s))}class kh{constructor(t="yyyy-MM-dd",e="default"){this._d=t,this.ud=e}F_(t){return Eb(t,this._d,this.ud)}}class kb{constructor(t){this.dd=t||"%h:%m:%s"}F_(t){return this.dd.replace("%h",ze(t.getUTCHours(),2)).replace("%m",ze(t.getUTCMinutes(),2)).replace("%s",ze(t.getUTCSeconds(),2))}}const Tb={fd:"yyyy-MM-dd",vd:"%h:%m:%s",pd:" ",md:"default"};class Mb{constructor(t={}){const e=Object.assign(Object.assign({},Tb),t);this.bd=new kh(e.fd,e.md),this.wd=new kb(e.vd),this.gd=e.pd}F_(t){return`${this.bd.F_(t)}${this.gd}${this.wd.F_(t)}`}}function zi(s){return 60*s*60*1e3}function ur(s){return 60*s*1e3}const qi=[{Md:(ha=1,1e3*ha),xd:10},{Md:ur(1),xd:20},{Md:ur(5),xd:21},{Md:ur(30),xd:22},{Md:zi(1),xd:30},{Md:zi(3),xd:31},{Md:zi(6),xd:32},{Md:zi(12),xd:33}];var ha;function ca(s,t){if(s.getUTCFullYear()!==t.getUTCFullYear())return 70;if(s.getUTCMonth()!==t.getUTCMonth())return 60;if(s.getUTCDate()!==t.getUTCDate())return 50;for(let e=qi.length-1;e>=0;--e)if(Math.floor(t.getTime()/qi[e].Md)!==Math.floor(s.getTime()/qi[e].Md))return qi[e].xd;return 0}function hr(s){let t=s;if(Ri(s)&&(t=Lo(s)),!qr(t))throw new Error("time must be of type BusinessDay");const e=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{Sd:Math.round(e.getTime()/1e3),kd:t}}function da(s){if(!Eh(s))throw new Error("time must be of type isUTCTimestamp");return{Sd:s}}function Lo(s){const t=new Date(s);if(isNaN(t.getTime()))throw new Error(`Invalid date string=${s}, expected format=yyyy-mm-dd`);return{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()}}function fa(s){Ri(s.time)&&(s.time=Lo(s.time))}class pa{options(){return this.cn}setOptions(t){this.cn=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?(function(e){e.forEach(fa)})(t):fa(t)}createConverterToInternalObj(t){return V((function(e){return e.length===0?null:qr(e[0].time)||Ri(e[0].time)?hr:da})(t))}key(t){return typeof t=="object"&&"Sd"in t?t.Sd:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){const e=t;return e.kd===void 0?new Date(1e3*e.Sd).getTime():new Date(Date.UTC(e.kd.year,e.kd.month-1,e.kd.day)).getTime()}convertHorzItemToInternal(t){return Eh(e=t)?da(e):qr(e)?hr(e):hr(Lo(e));var e}updateFormatter(t){if(!this.cn)return;const e=t.dateFormat;this.cn.timeScale.timeVisible?this.yd=new Mb({fd:e,vd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",pd:"   ",md:t.locale}):this.yd=new kh(e,t.locale)}formatHorzItem(t){const e=t;return this.yd.F_(new Date(1e3*e.Sd))}formatTickmark(t,e){const i=(function(r,o,l){switch(r){case 0:case 10:return o?l?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}})(t.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),n=this.cn.timeScale;if(n.tickMarkFormatter!==void 0){const r=n.tickMarkFormatter(t.originalTime,i,e.locale);if(r!==null)return r}return(function(r,o,l){const a={};switch(o){case 0:a.year="numeric";break;case 1:a.month="short";break;case 2:a.day="numeric";break;case 3:a.hour12=!1,a.hour="2-digit",a.minute="2-digit";break;case 4:a.hour12=!1,a.hour="2-digit",a.minute="2-digit",a.second="2-digit"}const h=r.kd===void 0?new Date(1e3*r.Sd):new Date(Date.UTC(r.kd.year,r.kd.month-1,r.kd.day));return new Date(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()).toLocaleString(l,a)})(t.time,i,e.locale)}maxTickMarkWeight(t){let e=t.reduce(yb,t[0]).weight;return e>30&&e<50&&(e=30),e}fillWeightsForPoints(t,e){(function(i,n=0){if(i.length===0)return;let r=n===0?null:i[n-1].time.Sd,o=r!==null?new Date(1e3*r):null,l=0;for(let a=n;a<i.length;++a){const h=i[a],c=new Date(1e3*h.time.Sd);o!==null&&(h.timeWeight=ca(c,o)),l+=h.time.Sd-(r||h.time.Sd),r=h.time.Sd,o=c}if(n===0&&i.length>1){const a=Math.ceil(l/(i.length-1)),h=new Date(1e3*(i[0].time.Sd-a));i[0].timeWeight=ca(new Date(1e3*i[0].time.Sd),h)}})(t,e)}static Cd(t){return ye({localization:{dateFormat:"dd MMM 'yy"}},t??{})}}const Hs=typeof window<"u";function ma(){return!!Hs&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function cr(){return!!Hs&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Wr(s){return s+s%2}function dr(s,t){return s.Td-t.Td}function fr(s,t,e){const i=(s.Td-t.Td)/(s.ut-t.ut);return Math.sign(i)*Math.min(Math.abs(i),e)}class Ab{constructor(t,e,i,n){this.Pd=null,this.Rd=null,this.Dd=null,this.Od=null,this.Ad=null,this.Vd=0,this.Bd=0,this.Id=t,this.zd=e,this.Ed=i,this.rs=n}Ld(t,e){if(this.Pd!==null){if(this.Pd.ut===e)return void(this.Pd.Td=t);if(Math.abs(this.Pd.Td-t)<this.rs)return}this.Od=this.Dd,this.Dd=this.Rd,this.Rd=this.Pd,this.Pd={ut:e,Td:t}}Dr(t,e){if(this.Pd===null||this.Rd===null||e-this.Pd.ut>50)return;let i=0;const n=fr(this.Pd,this.Rd,this.zd),r=dr(this.Pd,this.Rd),o=[n],l=[r];if(i+=r,this.Dd!==null){const h=fr(this.Rd,this.Dd,this.zd);if(Math.sign(h)===Math.sign(n)){const c=dr(this.Rd,this.Dd);if(o.push(h),l.push(c),i+=c,this.Od!==null){const d=fr(this.Dd,this.Od,this.zd);if(Math.sign(d)===Math.sign(n)){const f=dr(this.Dd,this.Od);o.push(d),l.push(f),i+=f}}}}let a=0;for(let h=0;h<o.length;++h)a+=l[h]/i*o[h];Math.abs(a)<this.Id||(this.Ad={Td:t,ut:e},this.Bd=a,this.Vd=(function(h,c){const d=Math.log(c);return Math.log(1*d/-h)/d})(Math.abs(a),this.Ed))}Yu(t){const e=V(this.Ad),i=t-e.ut;return e.Td+this.Bd*(Math.pow(this.Ed,i)-1)/Math.log(this.Ed)}qu(t){return this.Ad===null||this.Nd(t)===this.Vd}Nd(t){const e=t-V(this.Ad).ut;return Math.min(e,this.Vd)}}function Es(s,t){const e=V(s.ownerDocument).createElement("canvas");s.appendChild(e);const i=zv(e,{options:{allowResizeObserver:!1},transform:(n,r)=>({width:Math.max(n.width,r.width),height:Math.max(n.height,r.height)})});return i.resizeCanvasElement(t),i}function Hr(s,t,e,i){s.G&&s.G(t,e,i)}function rn(s,t,e,i){s.K(t,e,i)}function Kr(s,t,e,i){const n=s(e,i);for(const r of n){const o=r.xt();o!==null&&t(o)}}function Ob(s){Hs&&window.chrome!==void 0&&s.addEventListener("mousedown",(t=>{if(t.button===1)return t.preventDefault(),!1}))}class Po{constructor(t,e,i){this.Fd=0,this.Wd=null,this.jd={et:Number.NEGATIVE_INFINITY,rt:Number.POSITIVE_INFINITY},this.Hd=0,this.$d=null,this.Ud={et:Number.NEGATIVE_INFINITY,rt:Number.POSITIVE_INFINITY},this.qd=null,this.Yd=!1,this.Xd=null,this.Kd=null,this.Zd=!1,this.Gd=!1,this.Jd=!1,this.Qd=null,this.tf=null,this.if=null,this.nf=null,this.sf=null,this.ef=null,this.rf=null,this.hf=0,this.lf=!1,this.af=!1,this._f=!1,this.uf=0,this.cf=null,this.df=!cr(),this.ff=n=>{this.vf(n)},this.pf=n=>{if(this.mf(n)){const r=this.bf(n);if(++this.Hd,this.$d&&this.Hd>1){const{wf:o}=this.gf(Te(n),this.Ud);o<30&&!this.Jd&&this.Mf(r,this.Sf.xf),this.kf()}}else{const r=this.bf(n);if(++this.Fd,this.Wd&&this.Fd>1){const{wf:o}=this.gf(Te(n),this.jd);o<5&&!this.Gd&&this.yf(r,this.Sf.Cf),this.Tf()}}},this.Pf=t,this.Sf=e,this.cn=i,this.Rf()}S(){this.Qd!==null&&(this.Qd(),this.Qd=null),this.tf!==null&&(this.tf(),this.tf=null),this.nf!==null&&(this.nf(),this.nf=null),this.sf!==null&&(this.sf(),this.sf=null),this.ef!==null&&(this.ef(),this.ef=null),this.if!==null&&(this.if(),this.if=null),this.Df(),this.Tf()}Of(t){this.nf&&this.nf();const e=this.Af.bind(this);if(this.nf=()=>{this.Pf.removeEventListener("mousemove",e)},this.Pf.addEventListener("mousemove",e),this.mf(t))return;const i=this.bf(t);this.yf(i,this.Sf.Vf),this.df=!0}Tf(){this.Wd!==null&&clearTimeout(this.Wd),this.Fd=0,this.Wd=null,this.jd={et:Number.NEGATIVE_INFINITY,rt:Number.POSITIVE_INFINITY}}kf(){this.$d!==null&&clearTimeout(this.$d),this.Hd=0,this.$d=null,this.Ud={et:Number.NEGATIVE_INFINITY,rt:Number.POSITIVE_INFINITY}}Af(t){if(this._f||this.Kd!==null||this.mf(t))return;const e=this.bf(t);this.yf(e,this.Sf.Bf),this.df=!0}If(t){const e=pr(t.changedTouches,V(this.cf));if(e===null||(this.uf=Wi(t),this.rf!==null)||this.af)return;this.lf=!0;const i=this.gf(Te(e),V(this.Kd)),{zf:n,Ef:r,wf:o}=i;if(this.Zd||!(o<5)){if(!this.Zd){const l=.5*n,a=r>=l&&!this.cn.Lf(),h=l>r&&!this.cn.Nf();a||h||(this.af=!0),this.Zd=!0,this.Jd=!0,this.Df(),this.kf()}if(!this.af){const l=this.bf(t,e);this.Mf(l,this.Sf.Ff),Ms(t)}}}Wf(t){if(t.button!==0)return;const e=this.gf(Te(t),V(this.Xd)),{wf:i}=e;if(i>=5&&(this.Gd=!0,this.Tf()),this.Gd){const n=this.bf(t);this.yf(n,this.Sf.jf)}}gf(t,e){const i=Math.abs(e.et-t.et),n=Math.abs(e.rt-t.rt);return{zf:i,Ef:n,wf:i+n}}Hf(t){let e=pr(t.changedTouches,V(this.cf));if(e===null&&t.touches.length===0&&(e=t.changedTouches[0]),e===null)return;this.cf=null,this.uf=Wi(t),this.Df(),this.Kd=null,this.ef&&(this.ef(),this.ef=null);const i=this.bf(t,e);if(this.Mf(i,this.Sf.$f),++this.Hd,this.$d&&this.Hd>1){const{wf:n}=this.gf(Te(e),this.Ud);n<30&&!this.Jd&&this.Mf(i,this.Sf.xf),this.kf()}else this.Jd||(this.Mf(i,this.Sf.Uf),this.Sf.Uf&&Ms(t));this.Hd===0&&Ms(t),t.touches.length===0&&this.Yd&&(this.Yd=!1,Ms(t))}vf(t){if(t.button!==0)return;const e=this.bf(t);if(this.Xd=null,this._f=!1,this.sf&&(this.sf(),this.sf=null),ma()&&this.Pf.ownerDocument.documentElement.removeEventListener("mouseleave",this.ff),!this.mf(t))if(this.yf(e,this.Sf.qf),++this.Fd,this.Wd&&this.Fd>1){const{wf:i}=this.gf(Te(t),this.jd);i<5&&!this.Gd&&this.yf(e,this.Sf.Cf),this.Tf()}else this.Gd||this.yf(e,this.Sf.Yf)}Df(){this.qd!==null&&(clearTimeout(this.qd),this.qd=null)}Xf(t){if(this.cf!==null)return;const e=t.changedTouches[0];this.cf=e.identifier,this.uf=Wi(t);const i=this.Pf.ownerDocument.documentElement;this.Jd=!1,this.Zd=!1,this.af=!1,this.Kd=Te(e),this.ef&&(this.ef(),this.ef=null);{const r=this.If.bind(this),o=this.Hf.bind(this);this.ef=()=>{i.removeEventListener("touchmove",r),i.removeEventListener("touchend",o)},i.addEventListener("touchmove",r,{passive:!1}),i.addEventListener("touchend",o,{passive:!1}),this.Df(),this.qd=setTimeout(this.Kf.bind(this,t),240)}const n=this.bf(t,e);this.Mf(n,this.Sf.Zf),this.$d||(this.Hd=0,this.$d=setTimeout(this.kf.bind(this),500),this.Ud=Te(e))}Gf(t){if(t.button!==0)return;const e=this.Pf.ownerDocument.documentElement;ma()&&e.addEventListener("mouseleave",this.ff),this.Gd=!1,this.Xd=Te(t),this.sf&&(this.sf(),this.sf=null);{const n=this.Wf.bind(this),r=this.vf.bind(this);this.sf=()=>{e.removeEventListener("mousemove",n),e.removeEventListener("mouseup",r)},e.addEventListener("mousemove",n),e.addEventListener("mouseup",r)}if(this._f=!0,this.mf(t))return;const i=this.bf(t);this.yf(i,this.Sf.Jf),this.Wd||(this.Fd=0,this.Wd=setTimeout(this.Tf.bind(this),500),this.jd=Te(t))}Rf(){this.Pf.addEventListener("mouseenter",this.Of.bind(this)),this.Pf.addEventListener("touchcancel",this.Df.bind(this));{const t=this.Pf.ownerDocument,e=i=>{this.Sf.Qf&&(i.composed&&this.Pf.contains(i.composedPath()[0])||i.target&&this.Pf.contains(i.target)||this.Sf.Qf())};this.tf=()=>{t.removeEventListener("touchstart",e)},this.Qd=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}cr()&&(this.if=()=>{this.Pf.removeEventListener("dblclick",this.pf)},this.Pf.addEventListener("dblclick",this.pf)),this.Pf.addEventListener("mouseleave",this.tv.bind(this)),this.Pf.addEventListener("touchstart",this.Xf.bind(this),{passive:!0}),Ob(this.Pf),this.Pf.addEventListener("mousedown",this.Gf.bind(this)),this.iv(),this.Pf.addEventListener("touchmove",(()=>{}),{passive:!1})}iv(){this.Sf.nv===void 0&&this.Sf.sv===void 0&&this.Sf.ev===void 0||(this.Pf.addEventListener("touchstart",(t=>this.rv(t.touches)),{passive:!0}),this.Pf.addEventListener("touchmove",(t=>{if(t.touches.length===2&&this.rf!==null&&this.Sf.sv!==void 0){const e=va(t.touches[0],t.touches[1])/this.hf;this.Sf.sv(this.rf,e),Ms(t)}}),{passive:!1}),this.Pf.addEventListener("touchend",(t=>{this.rv(t.touches)})))}rv(t){t.length===1&&(this.lf=!1),t.length!==2||this.lf||this.Yd?this.hv():this.lv(t)}lv(t){const e=this.Pf.getBoundingClientRect()||{left:0,top:0};this.rf={et:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,rt:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.hf=va(t[0],t[1]),this.Sf.nv!==void 0&&this.Sf.nv(),this.Df()}hv(){this.rf!==null&&(this.rf=null,this.Sf.ev!==void 0&&this.Sf.ev())}tv(t){if(this.nf&&this.nf(),this.mf(t)||!this.df)return;const e=this.bf(t);this.yf(e,this.Sf.av),this.df=!cr()}Kf(t){const e=pr(t.touches,V(this.cf));if(e===null)return;const i=this.bf(t,e);this.Mf(i,this.Sf.ov),this.Jd=!0,this.Yd=!0}mf(t){return t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents!==void 0?t.sourceCapabilities.firesTouchEvents:Wi(t)<this.uf+500}Mf(t,e){e&&e.call(this.Sf,t)}yf(t,e){e&&e.call(this.Sf,t)}bf(t,e){const i=e||t,n=this.Pf.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-n.left,localY:i.clientY-n.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,_v:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click",uv:t.type,cv:i.target,dv:t.view,fv:()=>{t.type!=="touchstart"&&Ms(t)}}}}function va(s,t){const e=s.clientX-t.clientX,i=s.clientY-t.clientY;return Math.sqrt(e*e+i*i)}function Ms(s){s.cancelable&&s.preventDefault()}function Te(s){return{et:s.pageX,rt:s.pageY}}function Wi(s){return s.timeStamp||performance.now()}function pr(s,t){for(let e=0;e<s.length;++e)if(s[e].identifier===t)return s[e];return null}function Hi(s){return{Bc:s.Bc,vv:{wr:s.pv.externalId},mv:s.pv.cursorStyle}}function Lb(s,t,e){for(const i of s){const n=i.xt();if(n!==null&&n.br){const r=n.br(t,e);if(r!==null)return{dv:i,vv:r}}}return null}function mr(s,t){return e=>{var i,n,r,o;return((n=(i=e.At())===null||i===void 0?void 0:i.xa())!==null&&n!==void 0?n:"")!==t?[]:(o=(r=e.la)===null||r===void 0?void 0:r.call(e,s))!==null&&o!==void 0?o:[]}}class ga{constructor(t,e,i,n){this.Li=null,this.bv=null,this.wv=!1,this.gv=new Ei(200),this.Gr=null,this.Mv=0,this.xv=!1,this.Sv=()=>{this.xv||this.nn.kv().qt().Fh()},this.yv=()=>{this.xv||this.nn.kv().qt().Fh()},this.nn=t,this.cn=e,this.mo=e.layout,this.Sc=i,this.Cv=n==="left",this.Tv=mr("normal",n),this.Pv=mr("top",n),this.Rv=mr("bottom",n),this.Dv=document.createElement("div"),this.Dv.style.height="100%",this.Dv.style.overflow="hidden",this.Dv.style.width="25px",this.Dv.style.left="0",this.Dv.style.position="relative",this.Ov=Es(this.Dv,Mt({width:16,height:16})),this.Ov.subscribeSuggestedBitmapSizeChanged(this.Sv);const r=this.Ov.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Av=Es(this.Dv,Mt({width:16,height:16})),this.Av.subscribeSuggestedBitmapSizeChanged(this.yv);const o=this.Av.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const l={Jf:this.Vv.bind(this),Zf:this.Vv.bind(this),jf:this.Bv.bind(this),Ff:this.Bv.bind(this),Qf:this.Iv.bind(this),qf:this.zv.bind(this),$f:this.zv.bind(this),Cf:this.Ev.bind(this),xf:this.Ev.bind(this),Vf:this.Lv.bind(this),av:this.Nv.bind(this)};this.Fv=new Po(this.Av.canvasElement,l,{Lf:()=>!1,Nf:()=>!0})}S(){this.Fv.S(),this.Av.unsubscribeSuggestedBitmapSizeChanged(this.yv),this.Av.dispose(),this.Ov.unsubscribeSuggestedBitmapSizeChanged(this.Sv),this.Ov.dispose(),this.Li!==null&&this.Li.$o().p(this),this.Li=null}Wv(){return this.Dv}P(){return this.mo.fontSize}jv(){const t=this.Sc.W();return this.Gr!==t.R&&(this.gv.ir(),this.Gr=t.R),t}Hv(){if(this.Li===null)return 0;let t=0;const e=this.jv(),i=V(this.Ov.canvasElement.getContext("2d"));i.save();const n=this.Li.Ea();i.font=this.$v(),n.length>0&&(t=Math.max(this.gv.Si(i,n[0].Za),this.gv.Si(i,n[n.length-1].Za)));const r=this.Uv();for(let a=r.length;a--;){const h=this.gv.Si(i,r[a].Jt());h>t&&(t=h)}const o=this.Li.Pt();if(o!==null&&this.bv!==null){const a=this.Li.pn(1,o),h=this.Li.pn(this.bv.height-2,o);t=Math.max(t,this.gv.Si(i,this.Li.Wi(Math.floor(Math.min(a,h))+.11111111111111,o)),this.gv.Si(i,this.Li.Wi(Math.ceil(Math.max(a,h))-.11111111111111,o)))}i.restore();const l=t||34;return Wr(Math.ceil(e.C+e.T+e.B+e.I+5+l))}qv(t){this.bv!==null&&ys(this.bv,t)||(this.bv=t,this.xv=!0,this.Ov.resizeCanvasElement(t),this.Av.resizeCanvasElement(t),this.xv=!1,this.Dv.style.width=`${t.width}px`,this.Dv.style.height=`${t.height}px`)}Yv(){return V(this.bv).width}Ji(t){this.Li!==t&&(this.Li!==null&&this.Li.$o().p(this),this.Li=t,t.$o().l(this.ao.bind(this),this))}At(){return this.Li}ir(){const t=this.nn.Xv();this.nn.kv().qt().A_(t,V(this.At()))}Kv(t){if(this.bv===null)return;if(t!==1){this.Zv(),this.Ov.applySuggestedBitmapSize();const i=xs(this.Ov);i!==null&&(i.useBitmapCoordinateSpace((n=>{this.Gv(n),this.Be(n)})),this.nn.Jv(i,this.Rv),this.Qv(i),this.nn.Jv(i,this.Tv),this.tp(i))}this.Av.applySuggestedBitmapSize();const e=xs(this.Av);e!==null&&(e.useBitmapCoordinateSpace((({context:i,bitmapSize:n})=>{i.clearRect(0,0,n.width,n.height)})),this.ip(e),this.nn.Jv(e,this.Pv))}np(){return this.Ov.bitmapSize}sp(t,e,i){const n=this.np();n.width>0&&n.height>0&&t.drawImage(this.Ov.canvasElement,e,i)}gt(){var t;(t=this.Li)===null||t===void 0||t.Ea()}Vv(t){if(this.Li===null||this.Li.Fi()||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.nn.kv().qt(),i=this.nn.Xv();this.wv=!0,e.y_(i,this.Li,t.localY)}Bv(t){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.nn.kv().qt(),i=this.nn.Xv(),n=this.Li;e.C_(i,n,t.localY)}Iv(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const t=this.nn.kv().qt(),e=this.nn.Xv(),i=this.Li;this.wv&&(this.wv=!1,t.T_(e,i))}zv(t){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.nn.kv().qt(),i=this.nn.Xv();this.wv=!1,e.T_(i,this.Li)}Ev(t){this.cn.handleScale.axisDoubleClickReset.price&&this.ir()}Lv(t){this.Li!==null&&(!this.nn.kv().qt().W().handleScale.axisPressedMouseMove.price||this.Li.ph()||this.Li.Co()||this.ep(1))}Nv(t){this.ep(0)}Uv(){const t=[],e=this.Li===null?void 0:this.Li;return(i=>{for(let n=0;n<i.length;++n){const r=i[n].Rn(this.nn.Xv(),e);for(let o=0;o<r.length;o++)t.push(r[o])}})(this.nn.Xv().No()),t}Gv({context:t,bitmapSize:e}){const{width:i,height:n}=e,r=this.nn.Xv().qt(),o=r.q(),l=r.ad();o===l?Nn(t,0,0,i,n,o):ah(t,0,0,i,n,o,l)}Be({context:t,bitmapSize:e,horizontalPixelRatio:i}){if(this.bv===null||this.Li===null||!this.Li.W().borderVisible)return;t.fillStyle=this.Li.W().borderColor;const n=Math.max(1,Math.floor(this.jv().C*i));let r;r=this.Cv?e.width-n:0,t.fillRect(r,0,n,e.height)}Qv(t){if(this.bv===null||this.Li===null)return;const e=this.Li.Ea(),i=this.Li.W(),n=this.jv(),r=this.Cv?this.bv.width-n.T:0;i.borderVisible&&i.ticksVisible&&t.useBitmapCoordinateSpace((({context:o,horizontalPixelRatio:l,verticalPixelRatio:a})=>{o.fillStyle=i.borderColor;const h=Math.max(1,Math.floor(a)),c=Math.floor(.5*a),d=Math.round(n.T*l);o.beginPath();for(const f of e)o.rect(Math.floor(r*l),Math.round(f.Aa*a)-c,d,h);o.fill()})),t.useMediaCoordinateSpace((({context:o})=>{var l;o.font=this.$v(),o.fillStyle=(l=i.textColor)!==null&&l!==void 0?l:this.mo.textColor,o.textAlign=this.Cv?"right":"left",o.textBaseline="middle";const a=this.Cv?Math.round(r-n.B):Math.round(r+n.T+n.B),h=e.map((c=>this.gv.xi(o,c.Za)));for(let c=e.length;c--;){const d=e[c];o.fillText(d.Za,a,d.Aa+h[c])}}))}Zv(){if(this.bv===null||this.Li===null)return;let t=this.bv.height/2;const e=[],i=this.Li.No().slice(),n=this.nn.Xv(),r=this.jv();this.Li===n.vr()&&this.nn.Xv().No().forEach((a=>{n.dr(a)&&i.push(a)}));const o=this.Li.Ta()[0],l=this.Li;i.forEach((a=>{const h=a.Rn(n,l);h.forEach((c=>{c.Vi(null),c.Bi()&&e.push(c)})),o===a&&h.length>0&&(t=h[0].yi())})),e.forEach((a=>a.Vi(a.yi()))),this.Li.W().alignLabels&&this.rp(e,r,t)}rp(t,e,i){if(this.bv===null)return;const n=t.filter((o=>o.yi()<=i)),r=t.filter((o=>o.yi()>i));n.sort(((o,l)=>l.yi()-o.yi())),n.length&&r.length&&r.push(n[0]),r.sort(((o,l)=>o.yi()-l.yi()));for(const o of t){const l=Math.floor(o.zt(e)/2),a=o.yi();a>-l&&a<l&&o.Vi(l),a>this.bv.height-l&&a<this.bv.height+l&&o.Vi(this.bv.height-l)}for(let o=1;o<n.length;o++){const l=n[o],a=n[o-1],h=a.zt(e,!1),c=l.yi(),d=a.Ai();c>d-h&&l.Vi(d-h)}for(let o=1;o<r.length;o++){const l=r[o],a=r[o-1],h=a.zt(e,!0),c=l.yi(),d=a.Ai();c<d+h&&l.Vi(d+h)}}tp(t){if(this.bv===null)return;const e=this.Uv(),i=this.jv(),n=this.Cv?"right":"left";e.forEach((r=>{r.Ii()&&r.xt(V(this.Li)).K(t,i,this.gv,n)}))}ip(t){if(this.bv===null||this.Li===null)return;const e=this.nn.kv().qt(),i=[],n=this.nn.Xv(),r=e.Nc().Rn(n,this.Li);r.length&&i.push(r);const o=this.jv(),l=this.Cv?"right":"left";i.forEach((a=>{a.forEach((h=>{h.xt(V(this.Li)).K(t,o,this.gv,l)}))}))}ep(t){this.Dv.style.cursor=t===1?"ns-resize":"default"}ao(){const t=this.Hv();this.Mv<t&&this.nn.kv().qt().$l(),this.Mv=t}$v(){return Ws(this.mo.fontSize,this.mo.fontFamily)}}function Pb(s,t){var e,i;return(i=(e=s.ra)===null||e===void 0?void 0:e.call(s,t))!==null&&i!==void 0?i:[]}function Ki(s,t){var e,i;return(i=(e=s.Pn)===null||e===void 0?void 0:e.call(s,t))!==null&&i!==void 0?i:[]}function Rb(s,t){var e,i;return(i=(e=s.Qi)===null||e===void 0?void 0:e.call(s,t))!==null&&i!==void 0?i:[]}function Nb(s,t){var e,i;return(i=(e=s.na)===null||e===void 0?void 0:e.call(s,t))!==null&&i!==void 0?i:[]}class Ro{constructor(t,e){this.bv=Mt({width:0,height:0}),this.hp=null,this.lp=null,this.ap=null,this.op=!1,this._p=new Lt,this.up=new Lt,this.cp=0,this.dp=!1,this.fp=null,this.vp=!1,this.pp=null,this.mp=null,this.xv=!1,this.Sv=()=>{this.xv||this.bp===null||this.Ui().Fh()},this.yv=()=>{this.xv||this.bp===null||this.Ui().Fh()},this.wp=t,this.bp=e,this.bp.I_().l(this.gp.bind(this),this,!0),this.Mp=document.createElement("td"),this.Mp.style.padding="0",this.Mp.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.xp=document.createElement("td"),this.xp.style.padding="0",this.Sp=document.createElement("td"),this.Sp.style.padding="0",this.Mp.appendChild(i),this.Ov=Es(i,Mt({width:16,height:16})),this.Ov.subscribeSuggestedBitmapSizeChanged(this.Sv);const n=this.Ov.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Av=Es(i,Mt({width:16,height:16})),this.Av.subscribeSuggestedBitmapSizeChanged(this.yv);const r=this.Av.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.kp=document.createElement("tr"),this.kp.appendChild(this.xp),this.kp.appendChild(this.Mp),this.kp.appendChild(this.Sp),this.yp(),this.Fv=new Po(this.Av.canvasElement,this,{Lf:()=>this.fp===null&&!this.wp.W().handleScroll.vertTouchDrag,Nf:()=>this.fp===null&&!this.wp.W().handleScroll.horzTouchDrag})}S(){this.hp!==null&&this.hp.S(),this.lp!==null&&this.lp.S(),this.Av.unsubscribeSuggestedBitmapSizeChanged(this.yv),this.Av.dispose(),this.Ov.unsubscribeSuggestedBitmapSizeChanged(this.Sv),this.Ov.dispose(),this.bp!==null&&this.bp.I_().p(this),this.Fv.S()}Xv(){return V(this.bp)}Cp(t){this.bp!==null&&this.bp.I_().p(this),this.bp=t,this.bp!==null&&this.bp.I_().l(Ro.prototype.gp.bind(this),this,!0),this.yp()}kv(){return this.wp}Wv(){return this.kp}yp(){if(this.bp!==null&&(this.Tp(),this.Ui().Mt().length!==0)){if(this.hp!==null){const t=this.bp.S_();this.hp.Ji(V(t))}if(this.lp!==null){const t=this.bp.k_();this.lp.Ji(V(t))}}}Pp(){this.hp!==null&&this.hp.gt(),this.lp!==null&&this.lp.gt()}v_(){return this.bp!==null?this.bp.v_():0}p_(t){this.bp&&this.bp.p_(t)}Vf(t){if(!this.bp)return;this.Rp();const e=t.localX,i=t.localY;this.Dp(e,i,t)}Jf(t){this.Rp(),this.Op(),this.Dp(t.localX,t.localY,t)}Bf(t){var e;if(!this.bp)return;this.Rp();const i=t.localX,n=t.localY;this.Dp(i,n,t);const r=this.br(i,n);this.wp.Ap((e=r?.mv)!==null&&e!==void 0?e:null),this.Ui().Vc(r&&{Bc:r.Bc,vv:r.vv})}Yf(t){this.bp!==null&&(this.Rp(),this.Vp(t))}Cf(t){this.bp!==null&&this.Bp(this.up,t)}xf(t){this.Cf(t)}jf(t){this.Rp(),this.Ip(t),this.Dp(t.localX,t.localY,t)}qf(t){this.bp!==null&&(this.Rp(),this.dp=!1,this.zp(t))}Uf(t){this.bp!==null&&this.Vp(t)}ov(t){if(this.dp=!0,this.fp===null){const e={x:t.localX,y:t.localY};this.Ep(e,e,t)}}av(t){this.bp!==null&&(this.Rp(),this.bp.qt().Vc(null),this.Lp())}Np(){return this._p}Fp(){return this.up}nv(){this.cp=1,this.Ui().Un()}sv(t,e){if(!this.wp.W().handleScale.pinch)return;const i=5*(e-this.cp);this.cp=e,this.Ui().$c(t.et,i)}Zf(t){this.dp=!1,this.vp=this.fp!==null,this.Op();const e=this.Ui().Nc();this.fp!==null&&e.Tt()&&(this.pp={x:e.Kt(),y:e.Zt()},this.fp={x:t.localX,y:t.localY})}Ff(t){if(this.bp===null)return;const e=t.localX,i=t.localY;if(this.fp===null)this.Ip(t);else{this.vp=!1;const n=V(this.pp),r=n.x+(e-this.fp.x),o=n.y+(i-this.fp.y);this.Dp(r,o,t)}}$f(t){this.kv().W().trackingMode.exitMode===0&&(this.vp=!0),this.Wp(),this.zp(t)}br(t,e){const i=this.bp;return i===null?null:(function(n,r,o){const l=n.No(),a=(function(h,c,d){var f,p;let m,g;for(const E of h){const F=(p=(f=E.oa)===null||f===void 0?void 0:f.call(E,c,d))!==null&&p!==void 0?p:[];for(const I of F)y=I.zOrder,(!(_=m?.zOrder)||y==="top"&&_!=="top"||y==="normal"&&_==="bottom")&&(m=I,g=E)}var y,_;return m&&g?{pv:m,Bc:g}:null})(l,r,o);if(a?.pv.zOrder==="top")return Hi(a);for(const h of l){if(a&&a.Bc===h&&a.pv.zOrder!=="bottom"&&!a.pv.isBackground)return Hi(a);const c=Lb(h.Pn(n),r,o);if(c!==null)return{Bc:h,dv:c.dv,vv:c.vv};if(a&&a.Bc===h&&a.pv.zOrder!=="bottom"&&a.pv.isBackground)return Hi(a)}return a?.pv?Hi(a):null})(i,t,e)}jp(t,e){V(e==="left"?this.hp:this.lp).qv(Mt({width:t,height:this.bv.height}))}Hp(){return this.bv}qv(t){ys(this.bv,t)||(this.bv=t,this.xv=!0,this.Ov.resizeCanvasElement(t),this.Av.resizeCanvasElement(t),this.xv=!1,this.Mp.style.width=t.width+"px",this.Mp.style.height=t.height+"px")}$p(){const t=V(this.bp);t.x_(t.S_()),t.x_(t.k_());for(const e of t.Ta())if(t.dr(e)){const i=e.At();i!==null&&t.x_(i),e.On()}}np(){return this.Ov.bitmapSize}sp(t,e,i){const n=this.np();n.width>0&&n.height>0&&t.drawImage(this.Ov.canvasElement,e,i)}Kv(t){if(t===0||this.bp===null)return;if(t>1&&this.$p(),this.hp!==null&&this.hp.Kv(t),this.lp!==null&&this.lp.Kv(t),t!==1){this.Ov.applySuggestedBitmapSize();const i=xs(this.Ov);i!==null&&(i.useBitmapCoordinateSpace((n=>{this.Gv(n)})),this.bp&&(this.Up(i,Pb),this.qp(i),this.Yp(i),this.Up(i,Ki),this.Up(i,Rb)))}this.Av.applySuggestedBitmapSize();const e=xs(this.Av);e!==null&&(e.useBitmapCoordinateSpace((({context:i,bitmapSize:n})=>{i.clearRect(0,0,n.width,n.height)})),this.Xp(e),this.Up(e,Nb))}Kp(){return this.hp}Zp(){return this.lp}Jv(t,e){this.Up(t,e)}gp(){this.bp!==null&&this.bp.I_().p(this),this.bp=null}Vp(t){this.Bp(this._p,t)}Bp(t,e){const i=e.localX,n=e.localY;t.M()&&t.m(this.Ui().yt().Au(i),{x:i,y:n},e)}Gv({context:t,bitmapSize:e}){const{width:i,height:n}=e,r=this.Ui(),o=r.q(),l=r.ad();o===l?Nn(t,0,0,i,n,l):ah(t,0,0,i,n,o,l)}qp(t){const e=V(this.bp).z_().Wh().xt();e!==null&&e.K(t,!1)}Yp(t){const e=this.Ui().Lc();this.Gp(t,Ki,Hr,e),this.Gp(t,Ki,rn,e)}Xp(t){this.Gp(t,Ki,rn,this.Ui().Nc())}Up(t,e){const i=V(this.bp).No();for(const n of i)this.Gp(t,e,Hr,n);for(const n of i)this.Gp(t,e,rn,n)}Gp(t,e,i,n){const r=V(this.bp),o=r.qt().Ac(),l=o!==null&&o.Bc===n,a=o!==null&&l&&o.vv!==void 0?o.vv.gr:void 0;Kr(e,(h=>i(h,t,l,a)),n,r)}Tp(){if(this.bp===null)return;const t=this.wp,e=this.bp.S_().W().visible,i=this.bp.k_().W().visible;e||this.hp===null||(this.xp.removeChild(this.hp.Wv()),this.hp.S(),this.hp=null),i||this.lp===null||(this.Sp.removeChild(this.lp.Wv()),this.lp.S(),this.lp=null);const n=t.qt().nd();e&&this.hp===null&&(this.hp=new ga(this,t.W(),n,"left"),this.xp.appendChild(this.hp.Wv())),i&&this.lp===null&&(this.lp=new ga(this,t.W(),n,"right"),this.Sp.appendChild(this.lp.Wv()))}Jp(t){return t._v&&this.dp||this.fp!==null}Qp(t){return Math.max(0,Math.min(t,this.bv.width-1))}tm(t){return Math.max(0,Math.min(t,this.bv.height-1))}Dp(t,e,i){this.Ui().Gc(this.Qp(t),this.tm(e),i,V(this.bp))}Lp(){this.Ui().Qc()}Wp(){this.vp&&(this.fp=null,this.Lp())}Ep(t,e,i){this.fp=t,this.vp=!1,this.Dp(e.x,e.y,i);const n=this.Ui().Nc();this.pp={x:n.Kt(),y:n.Zt()}}Ui(){return this.wp.qt()}zp(t){if(!this.op)return;const e=this.Ui(),i=this.Xv();if(e.D_(i,i.vn()),this.ap=null,this.op=!1,e.Xc(),this.mp!==null){const n=performance.now(),r=e.yt();this.mp.Dr(r.zu(),n),this.mp.qu(n)||e.Xn(this.mp)}}Rp(){this.fp=null}Op(){if(this.bp){if(this.Ui().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)V(document.activeElement).blur();else{const t=document.getSelection();t!==null&&t.removeAllRanges()}!this.bp.vn().Fi()&&this.Ui().yt().Fi()}}Ip(t){if(this.bp===null)return;const e=this.Ui(),i=e.yt();if(i.Fi())return;const n=this.wp.W(),r=n.handleScroll,o=n.kineticScroll;if((!r.pressedMouseMove||t._v)&&(!r.horzTouchDrag&&!r.vertTouchDrag||!t._v))return;const l=this.bp.vn(),a=performance.now();if(this.ap!==null||this.Jp(t)||(this.ap={x:t.clientX,y:t.clientY,Sd:a,im:t.localX,nm:t.localY}),this.ap!==null&&!this.op&&(this.ap.x!==t.clientX||this.ap.y!==t.clientY)){if(t._v&&o.touch||!t._v&&o.mouse){const h=i.he();this.mp=new Ab(.2/h,7/h,.997,15/h),this.mp.Ld(i.zu(),this.ap.Sd)}else this.mp=null;l.Fi()||e.P_(this.bp,l,t.localY),e.qc(t.localX),this.op=!0}this.op&&(l.Fi()||e.R_(this.bp,l,t.localY),e.Yc(t.localX),this.mp!==null&&this.mp.Ld(i.zu(),a))}}class ba{constructor(t,e,i,n,r){this.bt=!0,this.bv=Mt({width:0,height:0}),this.Sv=()=>this.Kv(3),this.Cv=t==="left",this.Sc=i.nd,this.cn=e,this.sm=n,this.rm=r,this.Dv=document.createElement("div"),this.Dv.style.width="25px",this.Dv.style.height="100%",this.Dv.style.overflow="hidden",this.Ov=Es(this.Dv,Mt({width:16,height:16})),this.Ov.subscribeSuggestedBitmapSizeChanged(this.Sv)}S(){this.Ov.unsubscribeSuggestedBitmapSizeChanged(this.Sv),this.Ov.dispose()}Wv(){return this.Dv}Hp(){return this.bv}qv(t){ys(this.bv,t)||(this.bv=t,this.Ov.resizeCanvasElement(t),this.Dv.style.width=`${t.width}px`,this.Dv.style.height=`${t.height}px`,this.bt=!0)}Kv(t){if(t<3&&!this.bt||this.bv.width===0||this.bv.height===0)return;this.bt=!1,this.Ov.applySuggestedBitmapSize();const e=xs(this.Ov);e!==null&&e.useBitmapCoordinateSpace((i=>{this.Gv(i),this.Be(i)}))}np(){return this.Ov.bitmapSize}sp(t,e,i){const n=this.np();n.width>0&&n.height>0&&t.drawImage(this.Ov.canvasElement,e,i)}Be({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(!this.sm())return;t.fillStyle=this.cn.timeScale.borderColor;const r=Math.floor(this.Sc.W().C*i),o=Math.floor(this.Sc.W().C*n),l=this.Cv?e.width-r:0;t.fillRect(l,0,r,o)}Gv({context:t,bitmapSize:e}){Nn(t,0,0,e.width,e.height,this.rm())}}function No(s){return t=>{var e,i;return(i=(e=t.aa)===null||e===void 0?void 0:e.call(t,s))!==null&&i!==void 0?i:[]}}const $b=No("normal"),Db=No("top"),Ib=No("bottom");class Bb{constructor(t,e){this.hm=null,this.lm=null,this.k=null,this.am=!1,this.bv=Mt({width:0,height:0}),this.om=new Lt,this.gv=new Ei(5),this.xv=!1,this.Sv=()=>{this.xv||this.wp.qt().Fh()},this.yv=()=>{this.xv||this.wp.qt().Fh()},this.wp=t,this.N_=e,this.cn=t.W().layout,this._m=document.createElement("tr"),this.um=document.createElement("td"),this.um.style.padding="0",this.dm=document.createElement("td"),this.dm.style.padding="0",this.Dv=document.createElement("td"),this.Dv.style.height="25px",this.Dv.style.padding="0",this.fm=document.createElement("div"),this.fm.style.width="100%",this.fm.style.height="100%",this.fm.style.position="relative",this.fm.style.overflow="hidden",this.Dv.appendChild(this.fm),this.Ov=Es(this.fm,Mt({width:16,height:16})),this.Ov.subscribeSuggestedBitmapSizeChanged(this.Sv);const i=this.Ov.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Av=Es(this.fm,Mt({width:16,height:16})),this.Av.subscribeSuggestedBitmapSizeChanged(this.yv);const n=this.Av.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this._m.appendChild(this.um),this._m.appendChild(this.Dv),this._m.appendChild(this.dm),this.vm(),this.wp.qt().f_().l(this.vm.bind(this),this),this.Fv=new Po(this.Av.canvasElement,this,{Lf:()=>!0,Nf:()=>!1})}S(){this.Fv.S(),this.hm!==null&&this.hm.S(),this.lm!==null&&this.lm.S(),this.Av.unsubscribeSuggestedBitmapSizeChanged(this.yv),this.Av.dispose(),this.Ov.unsubscribeSuggestedBitmapSizeChanged(this.Sv),this.Ov.dispose()}Wv(){return this._m}pm(){return this.hm}bm(){return this.lm}Jf(t){if(this.am)return;this.am=!0;const e=this.wp.qt();!e.yt().Fi()&&this.wp.W().handleScale.axisPressedMouseMove.time&&e.Hc(t.localX)}Zf(t){this.Jf(t)}Qf(){const t=this.wp.qt();!t.yt().Fi()&&this.am&&(this.am=!1,this.wp.W().handleScale.axisPressedMouseMove.time&&t.Zc())}jf(t){const e=this.wp.qt();!e.yt().Fi()&&this.wp.W().handleScale.axisPressedMouseMove.time&&e.Kc(t.localX)}Ff(t){this.jf(t)}qf(){this.am=!1;const t=this.wp.qt();t.yt().Fi()&&!this.wp.W().handleScale.axisPressedMouseMove.time||t.Zc()}$f(){this.qf()}Cf(){this.wp.W().handleScale.axisDoubleClickReset.time&&this.wp.qt().Zn()}xf(){this.Cf()}Vf(){this.wp.qt().W().handleScale.axisPressedMouseMove.time&&this.ep(1)}av(){this.ep(0)}Hp(){return this.bv}wm(){return this.om}gm(t,e,i){ys(this.bv,t)||(this.bv=t,this.xv=!0,this.Ov.resizeCanvasElement(t),this.Av.resizeCanvasElement(t),this.xv=!1,this.Dv.style.width=`${t.width}px`,this.Dv.style.height=`${t.height}px`,this.om.m(t)),this.hm!==null&&this.hm.qv(Mt({width:e,height:t.height})),this.lm!==null&&this.lm.qv(Mt({width:i,height:t.height}))}Mm(){const t=this.xm();return Math.ceil(t.C+t.T+t.P+t.L+t.V+t.Sm)}gt(){this.wp.qt().yt().Ea()}np(){return this.Ov.bitmapSize}sp(t,e,i){const n=this.np();n.width>0&&n.height>0&&t.drawImage(this.Ov.canvasElement,e,i)}Kv(t){if(t===0)return;if(t!==1){this.Ov.applySuggestedBitmapSize();const i=xs(this.Ov);i!==null&&(i.useBitmapCoordinateSpace((n=>{this.Gv(n),this.Be(n),this.km(i,Ib)})),this.Qv(i),this.km(i,$b)),this.hm!==null&&this.hm.Kv(t),this.lm!==null&&this.lm.Kv(t)}this.Av.applySuggestedBitmapSize();const e=xs(this.Av);e!==null&&(e.useBitmapCoordinateSpace((({context:i,bitmapSize:n})=>{i.clearRect(0,0,n.width,n.height)})),this.ym([...this.wp.qt().Mt(),this.wp.qt().Nc()],e),this.km(e,Db))}km(t,e){const i=this.wp.qt().Mt();for(const n of i)Kr(e,(r=>Hr(r,t,!1,void 0)),n,void 0);for(const n of i)Kr(e,(r=>rn(r,t,!1,void 0)),n,void 0)}Gv({context:t,bitmapSize:e}){Nn(t,0,0,e.width,e.height,this.wp.qt().ad())}Be({context:t,bitmapSize:e,verticalPixelRatio:i}){if(this.wp.W().timeScale.borderVisible){t.fillStyle=this.Cm();const n=Math.max(1,Math.floor(this.xm().C*i));t.fillRect(0,0,e.width,n)}}Qv(t){const e=this.wp.qt().yt(),i=e.Ea();if(!i||i.length===0)return;const n=this.N_.maxTickMarkWeight(i),r=this.xm(),o=e.W();o.borderVisible&&o.ticksVisible&&t.useBitmapCoordinateSpace((({context:l,horizontalPixelRatio:a,verticalPixelRatio:h})=>{l.strokeStyle=this.Cm(),l.fillStyle=this.Cm();const c=Math.max(1,Math.floor(a)),d=Math.floor(.5*a);l.beginPath();const f=Math.round(r.T*h);for(let p=i.length;p--;){const m=Math.round(i[p].coord*a);l.rect(m-d,0,c,f)}l.fill()})),t.useMediaCoordinateSpace((({context:l})=>{const a=r.C+r.T+r.L+r.P/2;l.textAlign="center",l.textBaseline="middle",l.fillStyle=this.$(),l.font=this.$v();for(const h of i)if(h.weight<n){const c=h.needAlignCoordinate?this.Tm(l,h.coord,h.label):h.coord;l.fillText(h.label,c,a)}l.font=this.Pm();for(const h of i)if(h.weight>=n){const c=h.needAlignCoordinate?this.Tm(l,h.coord,h.label):h.coord;l.fillText(h.label,c,a)}}))}Tm(t,e,i){const n=this.gv.Si(t,i),r=n/2,o=Math.floor(e-r)+.5;return o<0?e+=Math.abs(0-o):o+n>this.bv.width&&(e-=Math.abs(this.bv.width-(o+n))),e}ym(t,e){const i=this.xm();for(const n of t)for(const r of n.tn())r.xt().K(e,i)}Cm(){return this.wp.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}$v(){return Ws(this.j(),this.cn.fontFamily)}Pm(){return Ws(this.j(),this.cn.fontFamily,"bold")}xm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,V:NaN,Hi:NaN,T:5,P:NaN,R:"",ji:new Ei,Sm:0});const t=this.k,e=this.$v();if(t.R!==e){const i=this.j();t.P=i,t.R=e,t.L=3*i/12,t.V=3*i/12,t.Hi=9*i/12,t.N=0,t.Sm=4*i/12,t.ji.ir()}return this.k}ep(t){this.Dv.style.cursor=t===1?"ew-resize":"default"}vm(){const t=this.wp.qt(),e=t.W();e.leftPriceScale.visible||this.hm===null||(this.um.removeChild(this.hm.Wv()),this.hm.S(),this.hm=null),e.rightPriceScale.visible||this.lm===null||(this.dm.removeChild(this.lm.Wv()),this.lm.S(),this.lm=null);const i={nd:this.wp.qt().nd()},n=()=>e.leftPriceScale.borderVisible&&t.yt().W().borderVisible,r=()=>t.ad();e.leftPriceScale.visible&&this.hm===null&&(this.hm=new ba("left",e,i,n,r),this.um.appendChild(this.hm.Wv())),e.rightPriceScale.visible&&this.lm===null&&(this.lm=new ba("right",e,i,n,r),this.dm.appendChild(this.lm.Wv()))}}const Vb=!!Hs&&!!navigator.userAgentData&&navigator.userAgentData.brands.some((s=>s.brand.includes("Chromium")))&&!!Hs&&(!((vr=navigator?.userAgentData)===null||vr===void 0)&&vr.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var vr;class Fb{constructor(t,e,i){var n;this.Rm=[],this.Dm=0,this.Qa=0,this.e_=0,this.Om=0,this.Am=0,this.Vm=null,this.Bm=!1,this._p=new Lt,this.up=new Lt,this.gc=new Lt,this.Im=null,this.zm=null,this.Em=t,this.cn=e,this.N_=i,this._m=document.createElement("div"),this._m.classList.add("tv-lightweight-charts"),this._m.style.overflow="hidden",this._m.style.direction="ltr",this._m.style.width="100%",this._m.style.height="100%",(n=this._m).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.Lm=document.createElement("table"),this.Lm.setAttribute("cellspacing","0"),this._m.appendChild(this.Lm),this.Nm=this.Fm.bind(this),gr(this.cn)&&this.Wm(!0),this.Ui=new Cb(this.xc.bind(this),this.cn,i),this.qt().Fc().l(this.jm.bind(this),this),this.Hm=new Bb(this,this.N_),this.Lm.appendChild(this.Hm.Wv());const r=e.autoSize&&this.$m();let o=this.cn.width,l=this.cn.height;if(r||o===0||l===0){const a=t.getBoundingClientRect();o=o||a.width,l=l||a.height}this.Um(o,l),this.qm(),t.appendChild(this._m),this.Ym(),this.Ui.yt().Zu().l(this.Ui.$l.bind(this.Ui),this),this.Ui.f_().l(this.Ui.$l.bind(this.Ui),this)}qt(){return this.Ui}W(){return this.cn}Xm(){return this.Rm}Km(){return this.Hm}S(){this.Wm(!1),this.Dm!==0&&window.cancelAnimationFrame(this.Dm),this.Ui.Fc().p(this),this.Ui.yt().Zu().p(this),this.Ui.f_().p(this),this.Ui.S();for(const t of this.Rm)this.Lm.removeChild(t.Wv()),t.Np().p(this),t.Fp().p(this),t.S();this.Rm=[],V(this.Hm).S(),this._m.parentElement!==null&&this._m.parentElement.removeChild(this._m),this.gc.S(),this._p.S(),this.up.S(),this.Zm()}Um(t,e,i=!1){if(this.Qa===e&&this.e_===t)return;const n=(function(l){const a=Math.floor(l.width),h=Math.floor(l.height);return Mt({width:a-a%2,height:h-h%2})})(Mt({width:t,height:e}));this.Qa=n.height,this.e_=n.width;const r=this.Qa+"px",o=this.e_+"px";V(this._m).style.height=r,V(this._m).style.width=o,this.Lm.style.height=r,this.Lm.style.width=o,i?this.Gm(Dt.es(),performance.now()):this.Ui.$l()}Kv(t){t===void 0&&(t=Dt.es());for(let e=0;e<this.Rm.length;e++)this.Rm[e].Kv(t.Hn(e).Fn);this.cn.timeScale.visible&&this.Hm.Kv(t.jn())}Nh(t){const e=gr(this.cn);this.Ui.Nh(t);const i=gr(this.cn);i!==e&&this.Wm(i),this.Ym(),this.Jm(t)}Np(){return this._p}Fp(){return this.up}Fc(){return this.gc}Qm(){this.Vm!==null&&(this.Gm(this.Vm,performance.now()),this.Vm=null);const t=this.tb(null),e=document.createElement("canvas");e.width=t.width,e.height=t.height;const i=V(e.getContext("2d"));return this.tb(i),e}ib(t){return t==="left"&&!this.nb()||t==="right"&&!this.sb()||this.Rm.length===0?0:V(t==="left"?this.Rm[0].Kp():this.Rm[0].Zp()).Yv()}eb(){return this.cn.autoSize&&this.Im!==null}rb(){return this._m}Ap(t){this.zm=t,this.zm?this.rb().style.setProperty("cursor",t):this.rb().style.removeProperty("cursor")}hb(){return this.zm}lb(){return Yt(this.Rm[0]).Hp()}Jm(t){(t.autoSize!==void 0||!this.Im||t.width===void 0&&t.height===void 0)&&(t.autoSize&&!this.Im&&this.$m(),t.autoSize===!1&&this.Im!==null&&this.Zm(),t.autoSize||t.width===void 0&&t.height===void 0||this.Um(t.width||this.e_,t.height||this.Qa))}tb(t){let e=0,i=0;const n=this.Rm[0],r=(l,a)=>{let h=0;for(let c=0;c<this.Rm.length;c++){const d=this.Rm[c],f=V(l==="left"?d.Kp():d.Zp()),p=f.np();t!==null&&f.sp(t,a,h),h+=p.height}};this.nb()&&(r("left",0),e+=V(n.Kp()).np().width);for(let l=0;l<this.Rm.length;l++){const a=this.Rm[l],h=a.np();t!==null&&a.sp(t,e,i),i+=h.height}e+=n.np().width,this.sb()&&(r("right",e),e+=V(n.Zp()).np().width);const o=(l,a,h)=>{V(l==="left"?this.Hm.pm():this.Hm.bm()).sp(V(t),a,h)};if(this.cn.timeScale.visible){const l=this.Hm.np();if(t!==null){let a=0;this.nb()&&(o("left",a,i),a=V(n.Kp()).np().width),this.Hm.sp(t,a,i),a+=l.width,this.sb()&&o("right",a,i)}i+=l.height}return Mt({width:e,height:i})}ab(){let t=0,e=0,i=0;for(const m of this.Rm)this.nb()&&(e=Math.max(e,V(m.Kp()).Hv(),this.cn.leftPriceScale.minimumWidth)),this.sb()&&(i=Math.max(i,V(m.Zp()).Hv(),this.cn.rightPriceScale.minimumWidth)),t+=m.v_();e=Wr(e),i=Wr(i);const n=this.e_,r=this.Qa,o=Math.max(n-e-i,0),l=this.cn.timeScale.visible;let a=l?Math.max(this.Hm.Mm(),this.cn.timeScale.minimumHeight):0;var h;a=(h=a)+h%2;const c=0+a,d=r<c?0:r-c,f=d/t;let p=0;for(let m=0;m<this.Rm.length;++m){const g=this.Rm[m];g.Cp(this.Ui.Ec()[m]);let y=0,_=0;_=m===this.Rm.length-1?d-p:Math.round(g.v_()*f),y=Math.max(_,2),p+=y,g.qv(Mt({width:o,height:y})),this.nb()&&g.jp(e,"left"),this.sb()&&g.jp(i,"right"),g.Xv()&&this.Ui.Wc(g.Xv(),y)}this.Hm.gm(Mt({width:l?o:0,height:a}),l?e:0,l?i:0),this.Ui.m_(o),this.Om!==e&&(this.Om=e),this.Am!==i&&(this.Am=i)}Wm(t){t?this._m.addEventListener("wheel",this.Nm,{passive:!1}):this._m.removeEventListener("wheel",this.Nm)}ob(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return Vb?1/window.devicePixelRatio:1}Fm(t){if(!(t.deltaX!==0&&this.cn.handleScroll.mouseWheel||t.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const e=this.ob(t),i=e*t.deltaX/100,n=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),n!==0&&this.cn.handleScale.mouseWheel){const r=Math.sign(n)*Math.min(1,Math.abs(n)),o=t.clientX-this._m.getBoundingClientRect().left;this.qt().$c(o,r)}i!==0&&this.cn.handleScroll.mouseWheel&&this.qt().Uc(-80*i)}Gm(t,e){var i;const n=t.jn();n===3&&this._b(),n!==3&&n!==2||(this.ub(t),this.cb(t,e),this.Hm.gt(),this.Rm.forEach((r=>{r.Pp()})),((i=this.Vm)===null||i===void 0?void 0:i.jn())===3&&(this.Vm.ts(t),this._b(),this.ub(this.Vm),this.cb(this.Vm,e),t=this.Vm,this.Vm=null)),this.Kv(t)}cb(t,e){for(const i of t.Qn())this.ns(i,e)}ub(t){const e=this.Ui.Ec();for(let i=0;i<e.length;i++)t.Hn(i).Wn&&e[i].V_()}ns(t,e){const i=this.Ui.yt();switch(t.qn){case 0:i.Ju();break;case 1:i.Qu(t.Vt);break;case 2:i.Gn(t.Vt);break;case 3:i.Jn(t.Vt);break;case 4:i.Nu();break;case 5:t.Vt.qu(e)||i.Jn(t.Vt.Yu(e))}}xc(t){this.Vm!==null?this.Vm.ts(t):this.Vm=t,this.Bm||(this.Bm=!0,this.Dm=window.requestAnimationFrame((e=>{if(this.Bm=!1,this.Dm=0,this.Vm!==null){const i=this.Vm;this.Vm=null,this.Gm(i,e);for(const n of i.Qn())if(n.qn===5&&!n.Vt.qu(e)){this.qt().Xn(n.Vt);break}}})))}_b(){this.qm()}qm(){const t=this.Ui.Ec(),e=t.length,i=this.Rm.length;for(let n=e;n<i;n++){const r=Yt(this.Rm.pop());this.Lm.removeChild(r.Wv()),r.Np().p(this),r.Fp().p(this),r.S()}for(let n=i;n<e;n++){const r=new Ro(this,t[n]);r.Np().l(this.fb.bind(this),this),r.Fp().l(this.vb.bind(this),this),this.Rm.push(r),this.Lm.insertBefore(r.Wv(),this.Hm.Wv())}for(let n=0;n<e;n++){const r=t[n],o=this.Rm[n];o.Xv()!==r?o.Cp(r):o.yp()}this.Ym(),this.ab()}pb(t,e,i){var n;const r=new Map;t!==null&&this.Ui.Mt().forEach((c=>{const d=c.In().nl(t);d!==null&&r.set(c,d)}));let o;if(t!==null){const c=(n=this.Ui.yt().qi(t))===null||n===void 0?void 0:n.originalTime;c!==void 0&&(o=c)}const l=this.qt().Ac(),a=l!==null&&l.Bc instanceof Oo?l.Bc:void 0,h=l!==null&&l.vv!==void 0?l.vv.wr:void 0;return{mb:o,se:t??void 0,bb:e??void 0,wb:a,gb:r,Mb:h,xb:i??void 0}}fb(t,e,i){this._p.m((()=>this.pb(t,e,i)))}vb(t,e,i){this.up.m((()=>this.pb(t,e,i)))}jm(t,e,i){this.gc.m((()=>this.pb(t,e,i)))}Ym(){const t=this.cn.timeScale.visible?"":"none";this.Hm.Wv().style.display=t}nb(){return this.Rm[0].Xv().S_().W().visible}sb(){return this.Rm[0].Xv().k_().W().visible}$m(){return"ResizeObserver"in window&&(this.Im=new ResizeObserver((t=>{const e=t.find((i=>i.target===this.Em));e&&this.Um(e.contentRect.width,e.contentRect.height)})),this.Im.observe(this.Em,{box:"border-box"}),!0)}Zm(){this.Im!==null&&this.Im.disconnect(),this.Im=null}}function gr(s){return!!(s.handleScroll.mouseWheel||s.handleScale.mouseWheel)}function Th(s,t){var e={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&t.indexOf(i)<0&&(e[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(i=Object.getOwnPropertySymbols(s);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(s,i[n])&&(e[i[n]]=s[i[n]])}return e}function ya(s,t,e,i){const n=e.value,r={se:t,ut:s,Vt:[n,n,n,n],mb:i};return e.color!==void 0&&(r.O=e.color),r}function Ub(s,t,e,i){const n=e.value,r={se:t,ut:s,Vt:[n,n,n,n],mb:i};return e.lineColor!==void 0&&(r._t=e.lineColor),e.topColor!==void 0&&(r.Ts=e.topColor),e.bottomColor!==void 0&&(r.Ps=e.bottomColor),r}function zb(s,t,e,i){const n=e.value,r={se:t,ut:s,Vt:[n,n,n,n],mb:i};return e.topLineColor!==void 0&&(r.Pe=e.topLineColor),e.bottomLineColor!==void 0&&(r.Re=e.bottomLineColor),e.topFillColor1!==void 0&&(r.Se=e.topFillColor1),e.topFillColor2!==void 0&&(r.ke=e.topFillColor2),e.bottomFillColor1!==void 0&&(r.ye=e.bottomFillColor1),e.bottomFillColor2!==void 0&&(r.Ce=e.bottomFillColor2),r}function qb(s,t,e,i){const n={se:t,ut:s,Vt:[e.open,e.high,e.low,e.close],mb:i};return e.color!==void 0&&(n.O=e.color),n}function Wb(s,t,e,i){const n={se:t,ut:s,Vt:[e.open,e.high,e.low,e.close],mb:i};return e.color!==void 0&&(n.O=e.color),e.borderColor!==void 0&&(n.Bt=e.borderColor),e.wickColor!==void 0&&(n.$h=e.wickColor),n}function Hb(s,t,e,i,n){const r=Yt(n)(e),o=Math.max(...r),l=Math.min(...r),a=r[r.length-1],h=[a,o,l,a],c=e,{time:d,color:f}=c;return{se:t,ut:s,Vt:h,mb:i,He:Th(c,["time","color"]),O:f}}function ji(s){return s.Vt!==void 0}function _a(s,t){return t.customValues!==void 0&&(s.Sb=t.customValues),s}function fs(s){return(t,e,i,n,r,o)=>(function(l,a){return a?a(l):(h=l).open===void 0&&h.value===void 0;var h})(i,o)?_a({ut:t,se:e,mb:n},i):_a(s(t,e,i,n,r),i)}function wa(s){return{Candlestick:fs(Wb),Bar:fs(qb),Area:fs(Ub),Baseline:fs(zb),Histogram:fs(ya),Line:fs(ya),Custom:fs(Hb)}[s]}function Sa(s){return{se:0,kb:new Map,ia:s}}function xa(s,t){if(s!==void 0&&s.length!==0)return{yb:t.key(s[0].ut),Cb:t.key(s[s.length-1].ut)}}function Ca(s){let t;return s.forEach((e=>{t===void 0&&(t=e.mb)})),Yt(t)}class Kb{constructor(t){this.Tb=new Map,this.Pb=new Map,this.Rb=new Map,this.Db=[],this.N_=t}S(){this.Tb.clear(),this.Pb.clear(),this.Rb.clear(),this.Db=[]}Ob(t,e){let i=this.Tb.size!==0,n=!1;const r=this.Pb.get(t);if(r!==void 0)if(this.Pb.size===1)i=!1,n=!0,this.Tb.clear();else for(const a of this.Db)a.pointData.kb.delete(t)&&(n=!0);let o=[];if(e.length!==0){const a=e.map((p=>p.time)),h=this.N_.createConverterToInternalObj(e),c=wa(t.Xh()),d=t.ga(),f=t.Ma();o=e.map(((p,m)=>{const g=h(p.time),y=this.N_.key(g);let _=this.Tb.get(y);_===void 0&&(_=Sa(g),this.Tb.set(y,_),n=!0);const E=c(g,_.se,p,a[m],d,f);return _.kb.set(t,E),E}))}i&&this.Ab(),this.Vb(t,o);let l=-1;if(n){const a=[];this.Tb.forEach((h=>{a.push({timeWeight:0,time:h.ia,pointData:h,originalTime:Ca(h.kb)})})),a.sort(((h,c)=>this.N_.key(h.time)-this.N_.key(c.time))),l=this.Bb(a)}return this.Ib(t,l,(function(a,h,c){const d=xa(a,c),f=xa(h,c);if(d!==void 0&&f!==void 0)return{Xl:d.Cb>=f.Cb&&d.yb>=f.yb}})(this.Pb.get(t),r,this.N_))}rd(t){return this.Ob(t,[])}zb(t,e){const i=e;(function(g){g.mb===void 0&&(g.mb=g.time)})(i),this.N_.preprocessData(e);const n=this.N_.createConverterToInternalObj([e])(e.time),r=this.Rb.get(t);if(r!==void 0&&this.N_.key(n)<this.N_.key(r))throw new Error(`Cannot update oldest data, last time=${r}, new time=${n}`);let o=this.Tb.get(this.N_.key(n));const l=o===void 0;o===void 0&&(o=Sa(n),this.Tb.set(this.N_.key(n),o));const a=wa(t.Xh()),h=t.ga(),c=t.Ma(),d=a(n,o.se,e,i.mb,h,c);o.kb.set(t,d),this.Eb(t,d);const f={Xl:ji(d)};if(!l)return this.Ib(t,-1,f);const p={timeWeight:0,time:o.ia,pointData:o,originalTime:Ca(o.kb)},m=Ni(this.Db,this.N_.key(p.time),((g,y)=>this.N_.key(g.time)<y));this.Db.splice(m,0,p);for(let g=m;g<this.Db.length;++g)br(this.Db[g].pointData,g);return this.N_.fillWeightsForPoints(this.Db,m),this.Ib(t,m,f)}Eb(t,e){let i=this.Pb.get(t);i===void 0&&(i=[],this.Pb.set(t,i));const n=i.length!==0?i[i.length-1]:null;n===null||this.N_.key(e.ut)>this.N_.key(n.ut)?ji(e)&&i.push(e):ji(e)?i[i.length-1]=e:i.splice(-1,1),this.Rb.set(t,e.ut)}Vb(t,e){e.length!==0?(this.Pb.set(t,e.filter(ji)),this.Rb.set(t,e[e.length-1].ut)):(this.Pb.delete(t),this.Rb.delete(t))}Ab(){for(const t of this.Db)t.pointData.kb.size===0&&this.Tb.delete(this.N_.key(t.time))}Bb(t){let e=-1;for(let i=0;i<this.Db.length&&i<t.length;++i){const n=this.Db[i],r=t[i];if(this.N_.key(n.time)!==this.N_.key(r.time)){e=i;break}r.timeWeight=n.timeWeight,br(r.pointData,i)}if(e===-1&&this.Db.length!==t.length&&(e=Math.min(this.Db.length,t.length)),e===-1)return-1;for(let i=e;i<t.length;++i)br(t[i].pointData,i);return this.N_.fillWeightsForPoints(t,e),this.Db=t,e}Lb(){if(this.Pb.size===0)return null;let t=0;return this.Pb.forEach((e=>{e.length!==0&&(t=Math.max(t,e[e.length-1].se))})),t}Ib(t,e,i){const n={Nb:new Map,yt:{Ou:this.Lb()}};if(e!==-1)this.Pb.forEach(((r,o)=>{n.Nb.set(o,{He:r,Fb:o===t?i:void 0})})),this.Pb.has(t)||n.Nb.set(t,{He:[],Fb:i}),n.yt.Wb=this.Db,n.yt.jb=e;else{const r=this.Pb.get(t);n.Nb.set(t,{He:r||[],Fb:i})}return n}}function br(s,t){s.se=t,s.kb.forEach((e=>{e.se=t}))}function $o(s){const t={value:s.Vt[3],time:s.mb};return s.Sb!==void 0&&(t.customValues=s.Sb),t}function Ea(s){const t=$o(s);return s.O!==void 0&&(t.color=s.O),t}function jb(s){const t=$o(s);return s._t!==void 0&&(t.lineColor=s._t),s.Ts!==void 0&&(t.topColor=s.Ts),s.Ps!==void 0&&(t.bottomColor=s.Ps),t}function Gb(s){const t=$o(s);return s.Pe!==void 0&&(t.topLineColor=s.Pe),s.Re!==void 0&&(t.bottomLineColor=s.Re),s.Se!==void 0&&(t.topFillColor1=s.Se),s.ke!==void 0&&(t.topFillColor2=s.ke),s.ye!==void 0&&(t.bottomFillColor1=s.ye),s.Ce!==void 0&&(t.bottomFillColor2=s.Ce),t}function Mh(s){const t={open:s.Vt[0],high:s.Vt[1],low:s.Vt[2],close:s.Vt[3],time:s.mb};return s.Sb!==void 0&&(t.customValues=s.Sb),t}function Jb(s){const t=Mh(s);return s.O!==void 0&&(t.color=s.O),t}function Xb(s){const t=Mh(s),{O:e,Bt:i,$h:n}=s;return e!==void 0&&(t.color=e),i!==void 0&&(t.borderColor=i),n!==void 0&&(t.wickColor=n),t}function jr(s){return{Area:jb,Line:Ea,Baseline:Gb,Histogram:Ea,Bar:Jb,Candlestick:Xb,Custom:Yb}[s]}function Yb(s){const t=s.mb;return Object.assign(Object.assign({},s.He),{time:t})}const Qb={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},Zb={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},t0={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:xo},yr={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},e0={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0},s0={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:xo,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function ka(){return{width:0,height:0,autoSize:!1,layout:t0,crosshair:Qb,grid:Zb,overlayPriceScales:Object.assign({},yr),leftPriceScale:Object.assign(Object.assign({},yr),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},yr),{visible:!0}),timeScale:e0,watermark:s0,localization:{locale:Hs?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class i0{constructor(t,e){this.Hb=t,this.$b=e}applyOptions(t){this.Hb.qt().Ic(this.$b,t)}options(){return this.Li().W()}width(){return Dn(this.$b)?this.Hb.ib(this.$b):0}Li(){return V(this.Hb.qt().zc(this.$b)).At}}function Ta(s,t,e){const i=Th(s,["time","originalTime"]),n=Object.assign({time:t},i);return e!==void 0&&(n.originalTime=e),n}const n0={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class r0{constructor(t){this.Bh=t}applyOptions(t){this.Bh.Nh(t)}options(){return this.Bh.W()}Ub(){return this.Bh}}class o0{constructor(t,e,i,n,r){this.qb=new Lt,this.Es=t,this.Yb=e,this.Xb=i,this.N_=r,this.Kb=n}S(){this.qb.S()}priceFormatter(){return this.Es.ca()}priceToCoordinate(t){const e=this.Es.Pt();return e===null?null:this.Es.At().Ot(t,e.Vt)}coordinateToPrice(t){const e=this.Es.Pt();return e===null?null:this.Es.At().pn(t,e.Vt)}barsInLogicalRange(t){if(t===null)return null;const e=new Bs(new pi(t.from,t.to)).iu(),i=this.Es.In();if(i.Fi())return null;const n=i.nl(e.Os(),1),r=i.nl(e.di(),-1),o=V(i.Qh()),l=V(i.Bn());if(n!==null&&r!==null&&n.se>r.se)return{barsBefore:t.from-o,barsAfter:l-t.to};const a={barsBefore:n===null||n.se===o?t.from-o:n.se-o,barsAfter:r===null||r.se===l?l-t.to:l-r.se};return n!==null&&r!==null&&(a.from=n.mb,a.to=r.mb),a}setData(t){this.N_,this.Es.Xh(),this.Yb.Zb(this.Es,t),this.Gb("full")}update(t){this.Es.Xh(),this.Yb.Jb(this.Es,t),this.Gb("update")}dataByIndex(t,e){const i=this.Es.In().nl(t,e);return i===null?null:jr(this.seriesType())(i)}data(){const t=jr(this.seriesType());return this.Es.In().ie().map((e=>t(e)))}subscribeDataChanged(t){this.qb.l(t)}unsubscribeDataChanged(t){this.qb.v(t)}setMarkers(t){this.N_;const e=t.map((i=>Ta(i,this.N_.convertHorzItemToInternal(i.time),i.time)));this.Es.Zl(e)}markers(){return this.Es.Gl().map((t=>Ta(t,t.originalTime,void 0)))}applyOptions(t){this.Es.Nh(t)}options(){return Ue(this.Es.W())}priceScale(){return this.Xb.priceScale(this.Es.At().xa())}createPriceLine(t){const e=ye(Ue(n0),t),i=this.Es.Jl(e);return new r0(i)}removePriceLine(t){this.Es.Ql(t.Ub())}seriesType(){return this.Es.Xh()}attachPrimitive(t){this.Es.ba(t),t.attached&&t.attached({chart:this.Kb,series:this,requestUpdate:()=>this.Es.qt().$l()})}detachPrimitive(t){this.Es.wa(t),t.detached&&t.detached()}Gb(t){this.qb.M()&&this.qb.m(t)}}class l0{constructor(t,e,i){this.Qb=new Lt,this.uu=new Lt,this.om=new Lt,this.Ui=t,this.wl=t.yt(),this.Hm=e,this.wl.Xu().l(this.tw.bind(this)),this.wl.Ku().l(this.iw.bind(this)),this.Hm.wm().l(this.nw.bind(this)),this.N_=i}S(){this.wl.Xu().p(this),this.wl.Ku().p(this),this.Hm.wm().p(this),this.Qb.S(),this.uu.S(),this.om.S()}scrollPosition(){return this.wl.zu()}scrollToPosition(t,e){e?this.wl.Uu(t,1e3):this.Ui.Jn(t)}scrollToRealTime(){this.wl.$u()}getVisibleRange(){const t=this.wl.yu();return t===null?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){const e={from:this.N_.convertHorzItemToInternal(t.from),to:this.N_.convertHorzItemToInternal(t.to)},i=this.wl.Pu(e);this.Ui.hd(i)}getVisibleLogicalRange(){const t=this.wl.ku();return t===null?null:{from:t.Os(),to:t.di()}}setVisibleLogicalRange(t){ls(t.from<=t.to,"The from index cannot be after the to index."),this.Ui.hd(t)}resetTimeScale(){this.Ui.Zn()}fitContent(){this.Ui.Ju()}logicalToCoordinate(t){const e=this.Ui.yt();return e.Fi()?null:e.Et(t)}coordinateToLogical(t){return this.wl.Fi()?null:this.wl.Au(t)}timeToCoordinate(t){const e=this.N_.convertHorzItemToInternal(t),i=this.wl.ya(e,!1);return i===null?null:this.wl.Et(i)}coordinateToTime(t){const e=this.Ui.yt(),i=e.Au(t),n=e.qi(i);return n===null?null:n.originalTime}width(){return this.Hm.Hp().width}height(){return this.Hm.Hp().height}subscribeVisibleTimeRangeChange(t){this.Qb.l(t)}unsubscribeVisibleTimeRangeChange(t){this.Qb.v(t)}subscribeVisibleLogicalRangeChange(t){this.uu.l(t)}unsubscribeVisibleLogicalRangeChange(t){this.uu.v(t)}subscribeSizeChange(t){this.om.l(t)}unsubscribeSizeChange(t){this.om.v(t)}applyOptions(t){this.wl.Nh(t)}options(){return Object.assign(Object.assign({},Ue(this.wl.W())),{barSpacing:this.wl.he()})}tw(){this.Qb.M()&&this.Qb.m(this.getVisibleRange())}iw(){this.uu.M()&&this.uu.m(this.getVisibleLogicalRange())}nw(t){this.om.m(t.width,t.height)}}function a0(s){if(s===void 0||s.type==="custom")return;const t=s;t.minMove!==void 0&&t.precision===void 0&&(t.precision=(function(e){if(e>=1)return 0;let i=0;for(;i<8;i++){const n=Math.round(e);if(Math.abs(n-e)<1e-8)return i;e*=10}return i})(t.minMove))}function Ma(s){return(function(t){if(Bi(t.handleScale)){const i=t.handleScale;t.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(t.handleScale!==void 0){const{axisPressedMouseMove:i,axisDoubleClickReset:n}=t.handleScale;Bi(i)&&(t.handleScale.axisPressedMouseMove={time:i,price:i}),Bi(n)&&(t.handleScale.axisDoubleClickReset={time:n,price:n})}const e=t.handleScroll;Bi(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})})(s),s}class u0{constructor(t,e,i){this.sw=new Map,this.ew=new Map,this.rw=new Lt,this.hw=new Lt,this.lw=new Lt,this.aw=new Kb(e);const n=i===void 0?Ue(ka()):ye(Ue(ka()),Ma(i));this.N_=e,this.Hb=new Fb(t,n,e),this.Hb.Np().l((o=>{this.rw.M()&&this.rw.m(this.ow(o()))}),this),this.Hb.Fp().l((o=>{this.hw.M()&&this.hw.m(this.ow(o()))}),this),this.Hb.Fc().l((o=>{this.lw.M()&&this.lw.m(this.ow(o()))}),this);const r=this.Hb.qt();this._w=new l0(r,this.Hb.Km(),this.N_)}remove(){this.Hb.Np().p(this),this.Hb.Fp().p(this),this.Hb.Fc().p(this),this._w.S(),this.Hb.S(),this.sw.clear(),this.ew.clear(),this.rw.S(),this.hw.S(),this.lw.S(),this.aw.S()}resize(t,e,i){this.autoSizeActive()||this.Hb.Um(t,e,i)}addCustomSeries(t,e){const i=Ls(t),n=Object.assign(Object.assign({},nh),i.defaultOptions());return this.uw("Custom",n,e,i)}addAreaSeries(t){return this.uw("Area",Jv,t)}addBaselineSeries(t){return this.uw("Baseline",Xv,t)}addBarSeries(t){return this.uw("Bar",jv,t)}addCandlestickSeries(t={}){return(function(e){e.borderColor!==void 0&&(e.borderUpColor=e.borderColor,e.borderDownColor=e.borderColor),e.wickColor!==void 0&&(e.wickUpColor=e.wickColor,e.wickDownColor=e.wickColor)})(t),this.uw("Candlestick",Kv,t)}addHistogramSeries(t){return this.uw("Histogram",Yv,t)}addLineSeries(t){return this.uw("Line",Gv,t)}removeSeries(t){const e=Yt(this.sw.get(t)),i=this.aw.rd(e);this.Hb.qt().rd(e),this.cw(i),this.sw.delete(t),this.ew.delete(e)}Zb(t,e){this.cw(this.aw.Ob(t,e))}Jb(t,e){this.cw(this.aw.zb(t,e))}subscribeClick(t){this.rw.l(t)}unsubscribeClick(t){this.rw.v(t)}subscribeCrosshairMove(t){this.lw.l(t)}unsubscribeCrosshairMove(t){this.lw.v(t)}subscribeDblClick(t){this.hw.l(t)}unsubscribeDblClick(t){this.hw.v(t)}priceScale(t){return new i0(this.Hb,t)}timeScale(){return this._w}applyOptions(t){this.Hb.Nh(Ma(t))}options(){return this.Hb.W()}takeScreenshot(){return this.Hb.Qm()}autoSizeActive(){return this.Hb.eb()}chartElement(){return this.Hb.rb()}paneSize(){const t=this.Hb.lb();return{height:t.height,width:t.width}}setCrosshairPosition(t,e,i){const n=this.sw.get(i);if(n===void 0)return;const r=this.Hb.qt().cr(n);r!==null&&this.Hb.qt().Jc(t,e,r)}clearCrosshairPosition(){this.Hb.qt().Qc(!0)}uw(t,e,i={},n){a0(i.priceFormat);const r=ye(Ue(rh),Ue(e),i),o=this.Hb.qt().sd(t,r,n),l=new o0(o,this,this,this,this.N_);return this.sw.set(l,o),this.ew.set(o,l),l}cw(t){const e=this.Hb.qt();e.td(t.yt.Ou,t.yt.Wb,t.yt.jb),t.Nb.forEach(((i,n)=>n.it(i.He,i.Fb))),e.Bu()}dw(t){return Yt(this.ew.get(t))}ow(t){const e=new Map;t.gb.forEach(((n,r)=>{const o=r.Xh(),l=jr(o)(n);if(o!=="Custom")ls((function(a){return a.open!==void 0||a.value!==void 0})(l));else{const a=r.Ma();ls(!a||a(l)===!1)}e.set(this.dw(r),l)}));const i=t.wb===void 0?void 0:this.dw(t.wb);return{time:t.mb,logical:t.se,point:t.bb,hoveredSeries:i,hoveredObjectId:t.Mb,seriesData:e,sourceEvent:t.xb}}}function h0(s,t,e){let i;if(Ri(s)){const r=document.getElementById(s);ls(r!==null,`Cannot find element in DOM with id=${s}`),i=r}else i=s;const n=new u0(i,t,e);return t.setOptions(n.options()),n}function Gr(s,t){return h0(s,new pa,pa.Cd(t))}Object.assign(Object.assign({},rh),nh);const c0={class:"chart"},d0={__name:"ChartView",props:{data:{type:Object,default:null},title:{type:String,default:""},height:{type:Number,default:420}},setup(s){const t=s,e=$(null);let i=null,n=null,r=null;function o(){i&&(i.remove(),i=null,n=null,r=null)}function l(){if(!t.data?.overlays||!n)return;const c=[];for(const d of t.data.overlays)try{if(d.type==="horizontal_line"&&d.price&&n.createPriceLine({price:d.price,color:d.color||"rgba(0, 122, 255, 0.8)",lineWidth:d.width||2,lineStyle:2,axisLabelVisible:!0,title:d.text||""}),(d.type==="marker"||d.type==="label")&&d.start){const f=t.data.bars?.[d.start.barIndex];if(!f)continue;c.push({time:f.time,position:d.position==="below"?"belowBar":"aboveBar",color:d.color||"rgba(0, 122, 255, 0.9)",shape:d.shape||"circle",text:d.text||""})}}catch{}c.length&&n.setMarkers(c)}function a(){if(!e.value||!t.data?.bars?.length)return;const c=e.value.clientWidth;i=Gr(e.value,{width:c,height:t.height,layout:{background:{color:"rgba(0, 0, 0, 0.85)"},textColor:"rgba(255, 255, 255, 0.75)"},grid:{vertLines:{color:"rgba(255, 255, 255, 0.06)"},horzLines:{color:"rgba(255, 255, 255, 0.06)"}},crosshair:{mode:Fr.Normal},rightPriceScale:{borderColor:"rgba(255, 255, 255, 0.12)",mode:zr.Normal},timeScale:{borderColor:"rgba(255, 255, 255, 0.12)",timeVisible:!0,secondsVisible:!1},watermark:{visible:!0,text:t.title||t.data?.symbol||"Chart",fontSize:28,color:"rgba(255, 255, 255, 0.06)"}}),n=i.addCandlestickSeries({upColor:"rgba(38, 166, 154, 1)",downColor:"rgba(239, 83, 80, 1)",borderUpColor:"rgba(38, 166, 154, 1)",borderDownColor:"rgba(239, 83, 80, 1)",wickUpColor:"rgba(38, 166, 154, 1)",wickDownColor:"rgba(239, 83, 80, 1)"}),r=i.addHistogramSeries({priceFormat:{type:"volume"},priceScaleId:"",scaleMargins:{top:.82,bottom:0}});const d=t.data.bars.map(p=>({time:p.time,open:p.open,high:p.high,low:p.low,close:p.close})),f=t.data.bars.map(p=>({time:p.time,value:p.volume,color:p.close>=p.open?"rgba(38, 166, 154, 0.45)":"rgba(239, 83, 80, 0.45)"}));n.setData(d),r.setData(f),l(),i.timeScale().fitContent()}function h(){!i||!e.value||i.applyOptions({width:e.value.clientWidth})}return re(()=>{_s(a),window.addEventListener("resize",h)}),js(()=>{window.removeEventListener("resize",h),o()}),ns(()=>t.data,async()=>{o(),await _s(),a()},{deep:!0}),(c,d)=>(C(),M("div",c0,[u("div",{ref_key:"chartContainer",ref:e,class:"chart-canvas"},null,512)]))}},_r=hs(d0,[["__scopeId","data-v-e357f0a7"]]),f0={key:0,class:"terminal-empty"},p0={class:"terminal-time"},m0={__name:"LogTerminal",props:{logs:{type:Array,default:()=>[]}},setup(s){const t=s,e=$(null);function i(r){try{return new Date(r).toLocaleTimeString("zh-CN")}catch{return""}}function n(r){return r==="stderr"?"terminal-stderr":r==="error"?"terminal-error":"terminal-stdout"}return ns(()=>t.logs.length,async()=>{await _s(),e.value&&(e.value.scrollTop=e.value.scrollHeight)}),(r,o)=>(C(),M("div",{ref_key:"container",ref:e,class:"terminal"},[s.logs.length===0?(C(),M("div",f0,"...")):j("",!0),(C(!0),M(mt,null,Xt(s.logs,(l,a)=>(C(),M("div",{key:a,class:"terminal-line"},[u("span",p0,"["+x(i(l.timestamp))+"]",1),u("span",{class:ue(n(l.type))},x(l.data),3)]))),128))],512))}},v0={key:0,class:"iv-card"},g0={class:"iv-header"},b0={class:"iv-title"},y0={class:"iv-title-text"},_0={class:"iv-body"},w0={class:"iv-row-top"},S0={class:"iv-left"},x0={key:0,class:"iv-note"},C0={__name:"IndicatorViewsCard",props:{views:{type:Object,default:null},title:{type:String,default:""}},setup(s){const t=s;function e(a){const h=String(a||"").trim().toLowerCase();return["bullish","long","buy","","","",""].includes(h)?"bullish":["bearish","short","sell","","","",""].includes(h)?"bearish":["neutral","none","wait","hold","",""].includes(h)?"neutral":h||"neutral"}function i(a){const h=String(a||"").trim().toLowerCase();return["above_average","above","strong","high","","",""].includes(h)?"above_average":["below_average","below","weak","low","","",""].includes(h)?"below_average":["average","mid","normal","","",""].includes(h)?"average":h||"average"}function n(a){const h=e(a);return h==="bullish"?"":h==="bearish"?"":h==="neutral"?"":h}function r(a){const h=i(a);return h==="above_average"?"":h==="below_average"?"":h==="average"?"":h}function o(a){const h=e(a);return h==="bullish"?"iv-badge iv-badge--bullish":h==="bearish"?"iv-badge iv-badge--bearish":"iv-badge iv-badge--neutral"}const l=vt(()=>{const a=t.views||{},h=e(a?.bollinger?.bias),c=e(a?.macd?.bias),d=i(a?.trend_strength?.level),f=e(a?.trend_strength?.bias),p=(h==="bullish"?1:h==="bearish"?-1:0)+(c==="bullish"?1:c==="bearish"?-1:0)+(f==="bullish"?1:f==="bearish"?-1:0),m=p>=2?"bullish":p<=-2?"bearish":"neutral";return[{key:"macd",name:"MACD",right:n(c),badgeClass:o(c),note:a?.macd?.note||""},{key:"boll",name:"",right:n(h),badgeClass:o(h),note:a?.bollinger?.note||""},{key:"trend",name:"",right:`${r(d)}  ${n(f)}`,badgeClass:"iv-badge iv-badge--purple",note:a?.trend_strength?.note||""},{key:"overall",name:"",right:n(m),badgeClass:o(m),note:""}]});return(a,h)=>s.views?(C(),M("div",v0,[u("div",g0,[u("div",b0,[u("span",y0,x(s.title),1)]),h[0]||(h[0]=u("span",{class:"iv-subtitle"},"AI ",-1))]),u("div",_0,[(C(!0),M(mt,null,Xt(l.value,c=>(C(),M("div",{key:c.key,class:"iv-row"},[u("div",w0,[u("span",S0,x(c.name),1),u("span",{class:ue(c.badgeClass)},x(c.right),3)]),c.note?(C(),M("div",x0,x(c.note),1)):j("",!0)]))),128))])])):j("",!0)}},E0=hs(C0,[["__scopeId","data-v-5ac50a0d"]]),$e=Object.create(null);$e.open="0";$e.close="1";$e.ping="2";$e.pong="3";$e.message="4";$e.upgrade="5";$e.noop="6";const on=Object.create(null);Object.keys($e).forEach(s=>{on[$e[s]]=s});const Jr={type:"error",data:"parser error"},Ah=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Oh=typeof ArrayBuffer=="function",Lh=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,Do=({type:s,data:t},e,i)=>Ah&&t instanceof Blob?e?i(t):Aa(t,i):Oh&&(t instanceof ArrayBuffer||Lh(t))?e?i(t):Aa(new Blob([t]),i):i($e[s]+(t||"")),Aa=(s,t)=>{const e=new FileReader;return e.onload=function(){const i=e.result.split(",")[1];t("b"+(i||""))},e.readAsDataURL(s)};function Oa(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let wr;function k0(s,t){if(Ah&&s.data instanceof Blob)return s.data.arrayBuffer().then(Oa).then(t);if(Oh&&(s.data instanceof ArrayBuffer||Lh(s.data)))return t(Oa(s.data));Do(s,!1,e=>{wr||(wr=new TextEncoder),t(wr.encode(e))})}const La="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ii=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<La.length;s++)ii[La.charCodeAt(s)]=s;const T0=s=>{let t=s.length*.75,e=s.length,i,n=0,r,o,l,a;s[s.length-1]==="="&&(t--,s[s.length-2]==="="&&t--);const h=new ArrayBuffer(t),c=new Uint8Array(h);for(i=0;i<e;i+=4)r=ii[s.charCodeAt(i)],o=ii[s.charCodeAt(i+1)],l=ii[s.charCodeAt(i+2)],a=ii[s.charCodeAt(i+3)],c[n++]=r<<2|o>>4,c[n++]=(o&15)<<4|l>>2,c[n++]=(l&3)<<6|a&63;return h},M0=typeof ArrayBuffer=="function",Io=(s,t)=>{if(typeof s!="string")return{type:"message",data:Ph(s,t)};const e=s.charAt(0);return e==="b"?{type:"message",data:A0(s.substring(1),t)}:on[e]?s.length>1?{type:on[e],data:s.substring(1)}:{type:on[e]}:Jr},A0=(s,t)=>{if(M0){const e=T0(s);return Ph(e,t)}else return{base64:!0,data:s}},Ph=(s,t)=>t==="blob"?s instanceof Blob?s:new Blob([s]):s instanceof ArrayBuffer?s:s.buffer,Rh="",O0=(s,t)=>{const e=s.length,i=new Array(e);let n=0;s.forEach((r,o)=>{Do(r,!1,l=>{i[o]=l,++n===e&&t(i.join(Rh))})})},L0=(s,t)=>{const e=s.split(Rh),i=[];for(let n=0;n<e.length;n++){const r=Io(e[n],t);if(i.push(r),r.type==="error")break}return i};function P0(){return new TransformStream({transform(s,t){k0(s,e=>{const i=e.length;let n;if(i<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,i);else if(i<65536){n=new Uint8Array(3);const r=new DataView(n.buffer);r.setUint8(0,126),r.setUint16(1,i)}else{n=new Uint8Array(9);const r=new DataView(n.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(i))}s.data&&typeof s.data!="string"&&(n[0]|=128),t.enqueue(n),t.enqueue(e)})}})}let Sr;function Gi(s){return s.reduce((t,e)=>t+e.length,0)}function Ji(s,t){if(s[0].length===t)return s.shift();const e=new Uint8Array(t);let i=0;for(let n=0;n<t;n++)e[n]=s[0][i++],i===s[0].length&&(s.shift(),i=0);return s.length&&i<s[0].length&&(s[0]=s[0].slice(i)),e}function R0(s,t){Sr||(Sr=new TextDecoder);const e=[];let i=0,n=-1,r=!1;return new TransformStream({transform(o,l){for(e.push(o);;){if(i===0){if(Gi(e)<1)break;const a=Ji(e,1);r=(a[0]&128)===128,n=a[0]&127,n<126?i=3:n===126?i=1:i=2}else if(i===1){if(Gi(e)<2)break;const a=Ji(e,2);n=new DataView(a.buffer,a.byteOffset,a.length).getUint16(0),i=3}else if(i===2){if(Gi(e)<8)break;const a=Ji(e,8),h=new DataView(a.buffer,a.byteOffset,a.length),c=h.getUint32(0);if(c>Math.pow(2,21)-1){l.enqueue(Jr);break}n=c*Math.pow(2,32)+h.getUint32(4),i=3}else{if(Gi(e)<n)break;const a=Ji(e,n);l.enqueue(Io(r?a:Sr.decode(a),t)),i=0}if(n===0||n>s){l.enqueue(Jr);break}}}})}const Nh=4;function Pt(s){if(s)return N0(s)}function N0(s){for(var t in Pt.prototype)s[t]=Pt.prototype[t];return s}Pt.prototype.on=Pt.prototype.addEventListener=function(s,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(t),this};Pt.prototype.once=function(s,t){function e(){this.off(s,e),t.apply(this,arguments)}return e.fn=t,this.on(s,e),this};Pt.prototype.off=Pt.prototype.removeListener=Pt.prototype.removeAllListeners=Pt.prototype.removeEventListener=function(s,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+s];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var i,n=0;n<e.length;n++)if(i=e[n],i===t||i.fn===t){e.splice(n,1);break}return e.length===0&&delete this._callbacks["$"+s],this};Pt.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+s],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(e){e=e.slice(0);for(var i=0,n=e.length;i<n;++i)e[i].apply(this,t)}return this};Pt.prototype.emitReserved=Pt.prototype.emit;Pt.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};Pt.prototype.hasListeners=function(s){return!!this.listeners(s).length};const Vn=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),ce=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),$0="arraybuffer";function $h(s,...t){return t.reduce((e,i)=>(s.hasOwnProperty(i)&&(e[i]=s[i]),e),{})}const D0=ce.setTimeout,I0=ce.clearTimeout;function Fn(s,t){t.useNativeTimers?(s.setTimeoutFn=D0.bind(ce),s.clearTimeoutFn=I0.bind(ce)):(s.setTimeoutFn=ce.setTimeout.bind(ce),s.clearTimeoutFn=ce.clearTimeout.bind(ce))}const B0=1.33;function V0(s){return typeof s=="string"?F0(s):Math.ceil((s.byteLength||s.size)*B0)}function F0(s){let t=0,e=0;for(let i=0,n=s.length;i<n;i++)t=s.charCodeAt(i),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(i++,e+=4);return e}function Dh(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function U0(s){let t="";for(let e in s)s.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(s[e]));return t}function z0(s){let t={},e=s.split("&");for(let i=0,n=e.length;i<n;i++){let r=e[i].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}class q0 extends Error{constructor(t,e,i){super(t),this.description=e,this.context=i,this.type="TransportError"}}class Bo extends Pt{constructor(t){super(),this.writable=!1,Fn(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,i){return super.emitReserved("error",new q0(t,e,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=Io(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const e=U0(t);return e.length?"?"+e:""}}class W0 extends Bo{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||e()})),this.writable||(i++,this.once("drain",function(){--i||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const e=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};L0(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,O0(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=Dh()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}}let Ih=!1;try{Ih=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const H0=Ih;function K0(){}class j0 extends W0{constructor(t){if(super(t),typeof location<"u"){const e=location.protocol==="https:";let i=location.port;i||(i=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port}}doWrite(t,e){const i=this.request({method:"POST",data:t});i.on("success",e),i.on("error",(n,r)=>{this.onError("xhr post error",n,r)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,i)=>{this.onError("xhr poll error",e,i)}),this.pollXhr=t}}class Re extends Pt{constructor(t,e,i){super(),this.createRequest=t,Fn(this,i),this._opts=i,this._method=i.method||"GET",this._uri=e,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var t;const e=$h(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(e);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&i.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var n;i.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=Re.requestsCount++,Re.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=K0,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Re.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Re.requestsCount=0;Re.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Pa);else if(typeof addEventListener=="function"){const s="onpagehide"in ce?"pagehide":"unload";addEventListener(s,Pa,!1)}}function Pa(){for(let s in Re.requests)Re.requests.hasOwnProperty(s)&&Re.requests[s].abort()}const G0=(function(){const s=Bh({xdomain:!1});return s&&s.responseType!==null})();class J0 extends j0{constructor(t){super(t);const e=t&&t.forceBase64;this.supportsBinary=G0&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Re(Bh,this.uri(),t)}}function Bh(s){const t=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||H0))return new XMLHttpRequest}catch{}if(!t)try{return new ce[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Vh=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class X0 extends Bo{get name(){return"websocket"}doOpen(){const t=this.uri(),e=this.opts.protocols,i=Vh?{}:$h(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,i)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const i=t[e],n=e===t.length-1;Do(i,this.supportsBinary,r=>{try{this.doWrite(i,r)}catch{}n&&Vn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=Dh()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}}const xr=ce.WebSocket||ce.MozWebSocket;class Y0 extends X0{createSocket(t,e,i){return Vh?new xr(t,e,i):e?new xr(t,e):new xr(t)}doWrite(t,e){this.ws.send(e)}}class Q0 extends Bo{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const e=R0(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(e).getReader(),n=P0();n.readable.pipeTo(t.writable),this._writer=n.writable.getWriter();const r=()=>{i.read().then(({done:l,value:a})=>{l||(this.onPacket(a),r())}).catch(l=>{})};r();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const i=t[e],n=e===t.length-1;this._writer.write(i).then(()=>{n&&Vn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const Z0={websocket:Y0,webtransport:Q0,polling:J0},ty=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ey=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Xr(s){if(s.length>8e3)throw"URI too long";const t=s,e=s.indexOf("["),i=s.indexOf("]");e!=-1&&i!=-1&&(s=s.substring(0,e)+s.substring(e,i).replace(/:/g,";")+s.substring(i,s.length));let n=ty.exec(s||""),r={},o=14;for(;o--;)r[ey[o]]=n[o]||"";return e!=-1&&i!=-1&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=sy(r,r.path),r.queryKey=iy(r,r.query),r}function sy(s,t){const e=/\/{2,9}/g,i=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function iy(s,t){const e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,n,r){n&&(e[n]=r)}),e}const Yr=typeof addEventListener=="function"&&typeof removeEventListener=="function",ln=[];Yr&&addEventListener("offline",()=>{ln.forEach(s=>s())},!1);class rs extends Pt{constructor(t,e){if(super(),this.binaryType=$0,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(e=t,t=null),t){const i=Xr(t);e.hostname=i.host,e.secure=i.protocol==="https"||i.protocol==="wss",e.port=i.port,i.query&&(e.query=i.query)}else e.host&&(e.hostname=Xr(e.host).host);Fn(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(i=>{const n=i.prototype.name;this.transports.push(n),this._transportsByName[n]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=z0(this.opts.query)),Yr&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ln.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=Nh,e.transport=t,this.id&&(e.sid=this.id);const i=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&rs.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const e=this.createTransport(t);e.open(),this.setTransport(e)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",rs.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const e=new Error("server error");e.code=t.data,this._onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let i=0;i<this.writeBuffer.length;i++){const n=this.writeBuffer[i].data;if(n&&(e+=V0(n)),i>0&&e>this._maxPayload)return this.writeBuffer.slice(0,i);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Vn(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,e,i){return this._sendPacket("message",t,e,i),this}send(t,e,i){return this._sendPacket("message",t,e,i),this}_sendPacket(t,e,i,n){if(typeof e=="function"&&(n=e,e=void 0),typeof i=="function"&&(n=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const r={type:t,data:e,options:i};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},i=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}_onError(t){if(rs.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Yr&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=ln.indexOf(this._offlineEventListener);i!==-1&&ln.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this._prevBufferLen=0}}}rs.protocol=Nh;class ny extends rs{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let e=this.createTransport(t),i=!1;rs.priorWebsocketSuccess=!1;const n=()=>{i||(e.send([{type:"ping",data:"probe"}]),e.once("packet",d=>{if(!i)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;rs.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(c(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=e.name,this.emitReserved("upgradeError",f)}}))};function r(){i||(i=!0,c(),e.close(),e=null)}const o=d=>{const f=new Error("probe error: "+d);f.transport=e.name,r(),this.emitReserved("upgradeError",f)};function l(){o("transport closed")}function a(){o("socket closed")}function h(d){e&&d.name!==e.name&&r()}const c=()=>{e.removeListener("open",n),e.removeListener("error",o),e.removeListener("close",l),this.off("close",a),this.off("upgrading",h)};e.once("open",n),e.once("error",o),e.once("close",l),this.once("close",a),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{i||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const e=[];for(let i=0;i<t.length;i++)~this.transports.indexOf(t[i])&&e.push(t[i]);return e}}let ry=class extends ny{constructor(t,e={}){const i=typeof t=="object"?t:e;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(n=>Z0[n]).filter(n=>!!n)),super(t,i)}};function oy(s,t="",e){let i=s;e=e||typeof location<"u"&&location,s==null&&(s=e.protocol+"//"+e.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=e.protocol+s:s=e.host+s),/^(https?|wss?):\/\//.test(s)||(typeof e<"u"?s=e.protocol+"//"+s:s="https://"+s),i=Xr(s)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const r=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+t,i.href=i.protocol+"://"+r+(e&&e.port===i.port?"":":"+i.port),i}const ly=typeof ArrayBuffer=="function",ay=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,Fh=Object.prototype.toString,uy=typeof Blob=="function"||typeof Blob<"u"&&Fh.call(Blob)==="[object BlobConstructor]",hy=typeof File=="function"||typeof File<"u"&&Fh.call(File)==="[object FileConstructor]";function Vo(s){return ly&&(s instanceof ArrayBuffer||ay(s))||uy&&s instanceof Blob||hy&&s instanceof File}function an(s,t){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let e=0,i=s.length;e<i;e++)if(an(s[e]))return!0;return!1}if(Vo(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return an(s.toJSON(),!0);for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e)&&an(s[e]))return!0;return!1}function cy(s){const t=[],e=s.data,i=s;return i.data=Qr(e,t),i.attachments=t.length,{packet:i,buffers:t}}function Qr(s,t){if(!s)return s;if(Vo(s)){const e={_placeholder:!0,num:t.length};return t.push(s),e}else if(Array.isArray(s)){const e=new Array(s.length);for(let i=0;i<s.length;i++)e[i]=Qr(s[i],t);return e}else if(typeof s=="object"&&!(s instanceof Date)){const e={};for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=Qr(s[i],t));return e}return s}function dy(s,t){return s.data=Zr(s.data,t),delete s.attachments,s}function Zr(s,t){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<t.length)return t[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let e=0;e<s.length;e++)s[e]=Zr(s[e],t);else if(typeof s=="object")for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&(s[e]=Zr(s[e],t));return s}const fy=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],py=5;var ft;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(ft||(ft={}));class my{constructor(t){this.replacer=t}encode(t){return(t.type===ft.EVENT||t.type===ft.ACK)&&an(t)?this.encodeAsBinary({type:t.type===ft.EVENT?ft.BINARY_EVENT:ft.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===ft.BINARY_EVENT||t.type===ft.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=cy(t),i=this.encodeAsString(e.packet),n=e.buffers;return n.unshift(i),n}}function Ra(s){return Object.prototype.toString.call(s)==="[object Object]"}class Fo extends Pt{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const i=e.type===ft.BINARY_EVENT;i||e.type===ft.BINARY_ACK?(e.type=i?ft.EVENT:ft.ACK,this.reconstructor=new vy(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(Vo(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0;const i={type:Number(t.charAt(0))};if(ft[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===ft.BINARY_EVENT||i.type===ft.BINARY_ACK){const r=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);const o=t.substring(r,e);if(o!=Number(o)||t.charAt(e)!=="-")throw new Error("Illegal attachments");i.attachments=Number(o)}if(t.charAt(e+1)==="/"){const r=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););i.nsp=t.substring(r,e)}else i.nsp="/";const n=t.charAt(e+1);if(n!==""&&Number(n)==n){const r=e+1;for(;++e;){const o=t.charAt(e);if(o==null||Number(o)!=o){--e;break}if(e===t.length)break}i.id=Number(t.substring(r,e+1))}if(t.charAt(++e)){const r=this.tryParse(t.substr(e));if(Fo.isPayloadValid(i.type,r))i.data=r;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case ft.CONNECT:return Ra(e);case ft.DISCONNECT:return e===void 0;case ft.CONNECT_ERROR:return typeof e=="string"||Ra(e);case ft.EVENT:case ft.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&fy.indexOf(e[0])===-1);case ft.ACK:case ft.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class vy{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const e=dy(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const gy=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Fo,Encoder:my,get PacketType(){return ft},protocol:py},Symbol.toStringTag,{value:"Module"}));function fe(s,t,e){return s.on(t,e),function(){s.off(t,e)}}const by=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Uh extends Pt{constructor(t,e,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[fe(t,"open",this.onopen.bind(this)),fe(t,"packet",this.onpacket.bind(this)),fe(t,"error",this.onerror.bind(this)),fe(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var i,n,r;if(by.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const o={type:ft.EVENT,data:e};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const c=this.ids++,d=e.pop();this._registerAckCallback(c,d),o.id=c}const l=(n=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||n===void 0?void 0:n.writable,a=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!l||(a?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,e){var i;const n=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(n===void 0){this.acks[t]=e;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);e.call(this,new Error("operation has timed out"))},n),o=(...l)=>{this.io.clearTimeoutFn(r),e.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...e){return new Promise((i,n)=>{const r=(o,l)=>o?n(o):i(l);r.withError=!0,e.push(r),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...r)=>i!==this._queue[0]?void 0:(n!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(n)):(this._queue.shift(),e&&e(null,...r)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:ft.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(i=>String(i.id)===t)){const i=this.acks[t];delete this.acks[t],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case ft.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ft.EVENT:case ft.BINARY_EVENT:this.onevent(t);break;case ft.ACK:case ft.BINARY_ACK:this.onack(t);break;case ft.DISCONNECT:this.ondisconnect();break;case ft.CONNECT_ERROR:this.destroy();const i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i);break}}onevent(t){const e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const i of e)i.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let i=!1;return function(...n){i||(i=!0,e.packet({type:ft.ACK,id:t,data:n}))}}onack(t){const e=this.acks[t.id];typeof e=="function"&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ft.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const i of e)i.apply(this,t.data)}}}function Gs(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}Gs.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*s);s=(Math.floor(t*10)&1)==0?s-e:s+e}return Math.min(s,this.max)|0};Gs.prototype.reset=function(){this.attempts=0};Gs.prototype.setMin=function(s){this.ms=s};Gs.prototype.setMax=function(s){this.max=s};Gs.prototype.setJitter=function(s){this.jitter=s};class to extends Pt{constructor(t,e){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,Fn(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((i=e.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new Gs({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;const n=e.parser||gy;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new ry(this.uri,this.opts);const e=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const n=fe(e,"open",function(){i.onopen(),t&&t()}),r=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=fe(e,"error",r);if(this._timeout!==!1){const l=this._timeout,a=this.setTimeoutFn(()=>{n(),r(new Error("timeout")),e.close()},l);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}return this.subs.push(n),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(fe(t,"ping",this.onping.bind(this)),fe(t,"data",this.ondata.bind(this)),fe(t,"error",this.onerror.bind(this)),fe(t,"close",this.onclose.bind(this)),fe(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){Vn(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new Uh(this,t,e),this.nsps[t]=i),i}_destroy(t){const e=Object.keys(this.nsps);for(const i of e)if(this.nsps[i].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let i=0;i<e.length;i++)this.engine.write(e[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},e);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const ei={};function un(s,t){typeof s=="object"&&(t=s,s=void 0),t=t||{};const e=oy(s,t.path||"/socket.io"),i=e.source,n=e.id,r=e.path,o=ei[n]&&r in ei[n].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let a;return l?a=new to(i,t):(ei[n]||(ei[n]=new to(i,t)),a=ei[n]),e.query&&!t.query&&(t.query=e.queryKey),a.socket(e.path,t)}Object.assign(un,{Manager:to,Socket:Uh,io:un,connect:un});let ps=null;function yy(){const s=us(),t=vt(()=>s.token.value);function e(){t.value&&(ps&&ps.connected||(ps=un("/saas",{transports:["websocket","polling"],auth:{token:t.value}})))}function i(){ps&&(ps.disconnect(),ps=null)}return ns(t,n=>{if(!n)return i();i(),e()}),e(),js(i),{socket:()=>ps}}const _y={key:0,class:"card"},wy={key:1,class:"card"},Sy={class:"card-content"},xy={class:"input-with-button"},Cy=["disabled"],Ey={key:0,class:"form-error"},ky={key:1,class:"form-success"},Ty={key:2,class:"grid grid-2"},My={class:"card credit-summary-card",style:{"grid-column":"1 / -1"}},Ay={class:"card-content"},Oy={class:"credit-progress-section"},Ly={class:"credit-header"},Py={class:"credit-value"},Ry={class:"progress-bar"},Ny={class:"credit-meta"},$y={key:0},Dy={key:1,class:"text-warn"},Iy={key:0,class:"form-error",style:{"margin-top":"0.75rem"}},By={key:1,class:"form-error",style:{"margin-top":"0.75rem"}},Vy={class:"card"},Fy={class:"card-content"},Uy={class:"form-group"},zy=["disabled"],qy={class:"form-group"},Wy=["disabled"],Hy=["value"],Ky={class:"form-group"},jy=["disabled"],Gy={class:"form-group"},Jy={class:"input-with-button"},Xy={class:"text-muted",style:{display:"flex","align-items":"center",gap:"0.5rem"}},Yy=["disabled"],Qy={key:0,class:"form-group"},Zy=["disabled"],t_=["value"],e_={class:"input-with-button"},s_=["disabled"],i_=["disabled"],n_={key:1,class:"form-error"},r_={class:"card"},o_={class:"card-content"},l_={key:0,class:"grid grid-2",style:{gap:"0.75rem"}},a_={class:"stat-row"},u_={class:"stat-value"},h_={class:"stat-row"},c_={class:"stat-value"},d_={key:0,class:"stat-row"},f_={class:"stat-value"},p_={key:1,class:"stat-row"},m_={class:"stat-value"},v_={key:2,class:"stat-row"},g_={class:"stat-value"},b_={key:3,class:"stat-row"},y_={class:"stat-value"},__={key:1,class:"text-muted"},w_={key:2,class:"mt-16"},S_={class:"stat-row"},x_={class:"stat-value",style:{"text-align":"right","max-width":"70%"}},C_={key:3,class:"mt-16"},E_={class:"card",style:{"grid-column":"1 / -1"}},k_={class:"card",style:{"grid-column":"1 / -1"}},T_={class:"card-content"},M_={key:0,class:"grid grid-2"},A_={key:0},O_={key:1,style:{"grid-column":"1 / -1"}},L_={key:1,class:"text-muted"},P_={__name:"AIStrategyPage",setup(s){const t=["1m","5m","15m","30m","1h","4h","1d"],e=$(!0),i=$(""),n=$(!1),r=$(""),o=$(""),l=Vt({subscription:null,subscriptionActive:!1,credit:null,providers:{selectedId:null,items:[]}}),a=Vt({symbol:"BTCUSDT",timeframe:"1h",bars:200,enable4x:!1,auxTimeframe:""}),h=$(!1),c=$(null),d=$(""),f=$([]),p=$(""),m=$(null),g=Vt({base:null,aux:null,vlm:null}),y=vt(()=>l.providers.items.find(U=>U.id===l.providers.selectedId)||null),_=vt(()=>!!y.value&&!!y.value.hasKey),E=vt(()=>{const U=l.credit?.remainingCredits??0,P=l.credit?.allowanceCredits??0;return P<=0?0:Math.min(100,Math.max(0,U/P*100))});function F(U,P,ht){ht&&d.value&&ht!==d.value||f.value.push({type:U,data:P,timestamp:Date.now()})}function I(){return`sess_${Date.now()}_${Math.random().toString(36).slice(2,10)}`}function X(U){if(U==null||U===0)return"-";if(U==="market")return"";const P=Number(U);return Number.isFinite(P)?P.toFixed(6):"-"}function rt(U){if(!U)return"-";try{return new Date(U).toISOString().slice(0,10)}catch{return String(U)}}function tt(U){return{long:"",short:"",buy:"",sell:""}[String(U).toLowerCase()]||U}async function B(){const U=await nt.request("/api/saas/ai/state");l.subscription=U.subscription||null,l.subscriptionActive=!!U.subscriptionActive,l.credit=U.credit||null,l.providers=U.providers||{selectedId:null,items:[]}}async function T(){r.value="",o.value="",n.value=!0;try{const U=await nt.request("/api/billing/redeem-activation-code",{method:"POST",body:{code:i.value}});l.subscription=U.subscription||null,l.subscriptionActive=!0,o.value="",i.value="",await B()}catch(U){r.value=U?.message||""}finally{n.value=!1}}async function w(){p.value="",f.value=[],m.value=null,g.base=null,g.aux=null,g.vlm=null,d.value=I(),h.value=!0;const U=["--symbol",a.symbol,"--timeframe",a.timeframe,"--bars",String(a.bars),"--wait","1000","--session-id",d.value];a.enable4x&&(U.push("--enable-4x-chart"),a.auxTimeframe&&U.push("--aux-timeframe",a.auxTimeframe));try{const P=await nt.request("/api/saas/run-script",{method:"POST",body:{script:"main",args:U,sessionId:d.value}});if(c.value=P.pid||null,!c.value)throw new Error("");P.charged?.remainingCredits!==void 0&&l.credit&&(l.credit.remainingCredits=Number(P.charged.remainingCredits),l.credit.periodEnd=P.charged.nextResetAt||l.credit.periodEnd)}catch(P){p.value=P?.message||"",h.value=!1}}function H(){c.value&&Tt().emit("kill-process",c.value)}async function At(){if(!d.value)return;const U=await nt.request(`/api/saas/chart-data/${encodeURIComponent(d.value)}`);g.base=U.base||null,g.aux=U.aux||null,g.vlm=U.vlm||null,m.value=U.decision||null}const{socket:Tt}=yy();function Qt(U){F(U.type,U.data,U.sessionId)}async function Wt(U){if(!(U.sessionId&&U.sessionId!==d.value)&&(F("stdout",`Process exited with code ${U.code}`,U.sessionId),h.value=!1,c.value=null,U.code===0))try{await At()}catch(P){F("error",`: ${P?.message||String(P)}`,U.sessionId)}}function gt(U){U===c.value&&(F("stderr","Process terminated.",d.value),h.value=!1,c.value=null)}return re(async()=>{try{await B()}finally{e.value=!1}Tt().on("log",Qt),Tt().on("process-exit",Wt),Tt().on("process-killed",gt)}),js(()=>{Tt()?.off?.("log",Qt),Tt()?.off?.("process-exit",Wt),Tt()?.off?.("process-killed",gt)}),(U,P)=>(C(),qt(Pn,{title:"AI ",subtitle:""},{default:it(()=>[e.value?(C(),M("div",_y,[...P[6]||(P[6]=[u("p",{class:"text-muted"},"...",-1)])])):l.subscriptionActive?(C(),M("div",Ty,[u("div",My,[u("div",Ay,[u("div",Oy,[u("div",Ly,[P[10]||(P[10]=u("span",{class:"credit-label"},"",-1)),u("span",Py,[ut(x((l.credit?.remainingCredits??0).toFixed(0))+" ",1),P[9]||(P[9]=u("span",{class:"credit-unit"},"",-1))])]),u("div",Ry,[u("div",{class:"progress-fill",style:Mi({width:E.value+"%"})},null,4)]),u("div",Ny,[u("span",null,""+x(rt(l.credit?.periodEnd)),1),y.value?(C(),M("span",$y,""+x(y.value.display_name),1)):(C(),M("span",Dy,""))])]),y.value?y.value.hasKey?j("",!0):(C(),M("p",By,"")):(C(),M("p",Iy,""))])]),u("div",Vy,[P[18]||(P[18]=u("h2",{class:"card-title"},"",-1)),u("div",Fy,[u("div",Uy,[P[11]||(P[11]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":P[1]||(P[1]=ht=>a.symbol=ht),class:"form-input",placeholder:"BTCUSDT",disabled:h.value},null,8,zy),[[dt,a.symbol]])]),u("div",qy,[P[12]||(P[12]=u("label",{class:"form-label"},"",-1)),st(u("select",{"onUpdate:modelValue":P[2]||(P[2]=ht=>a.timeframe=ht),class:"form-input",disabled:h.value},[(C(),M(mt,null,Xt(t,ht=>u("option",{key:ht,value:ht},x(ht),9,Hy)),64))],8,Wy),[[Pe,a.timeframe]])]),u("div",Ky,[P[13]||(P[13]=u("label",{class:"form-label"},"K",-1)),st(u("input",{"onUpdate:modelValue":P[3]||(P[3]=ht=>a.bars=ht),class:"form-input",type:"number",min:"50",max:"2000",disabled:h.value},null,8,jy),[[dt,a.bars,void 0,{number:!0}]])]),u("div",Gy,[P[15]||(P[15]=u("label",{class:"form-label"},"4x ",-1)),u("div",Jy,[u("label",Xy,[st(u("input",{"onUpdate:modelValue":P[4]||(P[4]=ht=>a.enable4x=ht),type:"checkbox",disabled:h.value},null,8,Yy),[[ef,a.enable4x]]),P[14]||(P[14]=ut("  ",-1))])])]),a.enable4x?(C(),M("div",Qy,[P[17]||(P[17]=u("label",{class:"form-label"},"",-1)),st(u("select",{"onUpdate:modelValue":P[5]||(P[5]=ht=>a.auxTimeframe=ht),class:"form-input",disabled:h.value},[P[16]||(P[16]=u("option",{value:""},"",-1)),(C(),M(mt,null,Xt(t,ht=>u("option",{key:ht,value:ht},x(ht),9,t_)),64))],8,Zy),[[Pe,a.auxTimeframe]])])):j("",!0),u("div",e_,[u("button",{class:"btn btn-primary",type:"button",disabled:h.value||!_.value,onClick:w},x(h.value?"...":""),9,s_),u("button",{class:"btn btn-danger",type:"button",disabled:!c.value,onClick:H},"",8,i_)]),p.value?(C(),M("p",n_,x(p.value),1)):j("",!0)])]),u("div",r_,[P[26]||(P[26]=u("h2",{class:"card-title"},"",-1)),u("div",o_,[m.value?(C(),M("div",l_,[u("div",a_,[P[19]||(P[19]=u("span",{class:"stat-label"},"",-1)),u("span",u_,x(m.value.enter?"":""),1)]),u("div",h_,[P[20]||(P[20]=u("span",{class:"stat-label"},"",-1)),u("span",c_,x(Math.round((m.value.confidence||0)*100))+"%",1)]),m.value.enter?(C(),M("div",d_,[P[21]||(P[21]=u("span",{class:"stat-label"},"",-1)),u("span",f_,x(tt(m.value.direction)),1)])):j("",!0),m.value.enter?(C(),M("div",p_,[P[22]||(P[22]=u("span",{class:"stat-label"},"",-1)),u("span",m_,x(X(m.value.entry_price)),1)])):j("",!0),m.value.enter?(C(),M("div",v_,[P[23]||(P[23]=u("span",{class:"stat-label"},"",-1)),u("span",g_,x(X(m.value.stop_loss_price)),1)])):j("",!0),m.value.enter?(C(),M("div",b_,[P[24]||(P[24]=u("span",{class:"stat-label"},"",-1)),u("span",y_,x(X(m.value.take_profit_price)),1)])):j("",!0)])):(C(),M("p",__,"")),m.value?.reason?(C(),M("div",w_,[u("div",S_,[P[25]||(P[25]=u("span",{class:"stat-label"},"",-1)),u("span",x_,x(m.value.reason),1)])])):j("",!0),m.value?.indicator_views?(C(),M("div",C_,[Y(E0,{views:m.value.indicator_views},null,8,["views"])])):j("",!0)])]),u("div",E_,[P[27]||(P[27]=u("h2",{class:"card-title"},"",-1)),Y(m0,{logs:f.value},null,8,["logs"])]),u("div",k_,[P[31]||(P[31]=u("h2",{class:"card-title"},"",-1)),u("div",T_,[g.base?(C(),M("div",M_,[u("div",null,[P[28]||(P[28]=u("p",{class:"text-muted",style:{"margin-bottom":"0.5rem"}},"Base",-1)),Y(_r,{data:g.base,title:`${g.base.symbol} ${g.base.timeframe}`,height:420},null,8,["data","title"])]),g.aux?(C(),M("div",A_,[P[29]||(P[29]=u("p",{class:"text-muted",style:{"margin-bottom":"0.5rem"}},"Aux",-1)),Y(_r,{data:g.aux,title:`${g.aux.symbol} ${g.aux.timeframe}`,height:420},null,8,["data","title"])])):j("",!0),g.vlm?(C(),M("div",O_,[P[30]||(P[30]=u("p",{class:"text-muted",style:{"margin-bottom":"0.5rem"}},"VLM Overlays",-1)),Y(_r,{data:g.vlm,title:`VLM ${g.vlm.symbol} ${g.vlm.timeframe}`,height:460},null,8,["data","title"])])):j("",!0)])):(C(),M("p",L_,""))])])])):(C(),M("div",wy,[P[8]||(P[8]=u("h2",{class:"card-title"},"",-1)),u("div",Sy,[P[7]||(P[7]=u("p",{class:"text-muted"},"",-1)),u("div",xy,[st(u("input",{"onUpdate:modelValue":P[0]||(P[0]=ht=>i.value=ht),class:"form-input",placeholder:""},null,512),[[dt,i.value]]),u("button",{class:"btn btn-primary",type:"button",disabled:n.value,onClick:T},x(n.value?"...":""),9,Cy)]),r.value?(C(),M("p",Ey,x(r.value),1)):j("",!0),o.value?(C(),M("p",ky,x(o.value),1)):j("",!0)])]))]),_:1}))}},R_=hs(P_,[["__scopeId","data-v-2ab2958d"]]),N_={key:0,class:"card"},$_={key:1,class:"grid grid-2"},D_={class:"card"},I_={class:"card-content"},B_={class:"stat-row"},V_={class:"stat-value"},F_={key:0,class:"stat-row"},U_={class:"stat-value"},z_={key:1,class:"stat-row"},q_={class:"stat-value"},W_={key:2,class:"stat-row"},H_={class:"stat-value"},K_={key:3,class:"text-muted"},j_={class:"card"},G_={class:"card-content"},J_={key:0,class:"text-muted"},X_={key:1},Y_={class:"stat-row"},Q_={class:"stat-value"},Z_={class:"stat-row"},t1={class:"stat-value"},e1={class:"stat-row"},s1={class:"stat-value"},i1={key:0,class:"stat-row"},n1={class:"stat-value"},r1={key:1,class:"text-muted"},o1={class:"card",style:{"grid-column":"1 / -1"}},l1={class:"card-content"},a1={key:0,class:"form-error"},u1={key:1,class:"text-muted"},h1={key:2,class:"model-grid"},c1=["onClick"],d1={class:"model-name-row"},f1={class:"model-name"},p1={class:"model-status"},m1={key:0,class:"status-selected"},v1={key:1,class:"status-available"},g1=["title"],b1={class:"model-meta"},y1={__name:"AIProvidersPage",setup(s){const t=$(!0),e=$(""),i=Vt({subscription:null,subscriptionActive:!1,credit:null,providers:{selectedId:null,items:[]}}),n=$(""),r=vt(()=>i.providers.items.find(d=>d.id===i.providers.selectedId)||null),o=vt(()=>(i.providers.items||[]).filter(d=>!!d.hasKey));function l(d){if(!d)return"-";try{return new Date(d).toISOString().slice(0,10)}catch{return String(d)}}function a(d){return{monthly:"",quarterly:"",yearly:"",free:""}[d]||d}async function h(){e.value="";const d=await nt.request("/api/saas/ai/state");i.subscription=d.subscription||null,i.subscriptionActive=!!d.subscriptionActive,i.credit=d.credit||null,i.providers=d.providers||{selectedId:null,items:[]}}async function c(d){if(!(!d||n.value)&&i.providers.selectedId!==d){n.value=d;try{await nt.request("/api/saas/ai/providers/select",{method:"POST",body:{providerId:d}}),await h()}catch(f){e.value=f?.message||""}finally{n.value=""}}}return re(async()=>{try{await h()}catch(d){e.value=d?.message||""}finally{t.value=!1}}),(d,f)=>(C(),qt(Pn,{title:"",subtitle:" AI "},{default:it(()=>[t.value?(C(),M("div",N_,[...f[0]||(f[0]=[u("p",{class:"text-muted"},"...",-1)])])):(C(),M("div",$_,[u("div",D_,[f[5]||(f[5]=u("h2",{class:"card-title"},"",-1)),u("div",I_,[u("div",B_,[f[1]||(f[1]=u("span",{class:"stat-label"},"",-1)),u("span",V_,x(i.subscriptionActive?"":""),1)]),i.subscription?(C(),M("div",F_,[f[2]||(f[2]=u("span",{class:"stat-label"},"",-1)),u("span",U_,x(a(i.subscription.plan_code)),1)])):j("",!0),i.credit?(C(),M("div",z_,[f[3]||(f[3]=u("span",{class:"stat-label"},"",-1)),u("span",q_,x(i.credit.remainingCredits.toFixed(0))+" ",1)])):j("",!0),i.credit?(C(),M("div",W_,[f[4]||(f[4]=u("span",{class:"stat-label"},"",-1)),u("span",H_,x(l(i.credit.periodEnd)),1)])):j("",!0),i.subscriptionActive?j("",!0):(C(),M("p",K_,"  "))])]),u("div",j_,[f[10]||(f[10]=u("h2",{class:"card-title"},"",-1)),u("div",G_,[r.value?(C(),M("div",X_,[u("div",Y_,[f[6]||(f[6]=u("span",{class:"stat-label"},"",-1)),u("span",Q_,x(r.value.display_name),1)]),u("div",Z_,[f[7]||(f[7]=u("span",{class:"stat-label"},"",-1)),u("span",t1,x(r.value.model_name),1)]),u("div",e1,[f[8]||(f[8]=u("span",{class:"stat-label"},"",-1)),u("span",s1,x((r.value.multiplier_x100/100).toFixed(2))+"x",1)]),r.value.remark?(C(),M("div",i1,[f[9]||(f[9]=u("span",{class:"stat-label"},"",-1)),u("span",n1,x(r.value.remark),1)])):j("",!0),r.value.hasKey?j("",!0):(C(),M("p",r1,""))])):(C(),M("p",J_,""))])]),u("div",o1,[f[11]||(f[11]=u("h2",{class:"card-title"},"",-1)),u("div",l1,[e.value?(C(),M("p",a1,x(e.value),1)):j("",!0),o.value.length===0?(C(),M("p",u1,"")):(C(),M("div",h1,[(C(!0),M(mt,null,Xt(o.value,p=>(C(),M("div",{key:p.id,class:ue(["model-card",{selected:i.providers.selectedId===p.id}]),onClick:m=>c(p.id)},[u("div",d1,[u("div",f1,x(p.display_name),1),u("div",p1,[i.providers.selectedId===p.id?(C(),M("span",m1,"")):(C(),M("span",v1,""))])]),u("div",{class:"model-meta",title:p.model_name},x(p.remark||p.model_name),9,g1),u("div",b1," "+x((p.multiplier_x100/100).toFixed(2))+"x",1)],10,c1))),128))]))])])]))]),_:1}))}},_1=hs(y1,[["__scopeId","data-v-b4ff6b09"]]),w1={class:"app-layout"},S1={class:"floating-navbar"},x1={class:"nav-container"},C1={class:"nav-links"},E1={class:"nav-user"},k1={class:"user-name"},T1={class:"drawer-header"},M1={class:"drawer-nav"},A1={class:"drawer-footer"},O1={class:"drawer-user"},L1={class:"main-content"},P1={class:"topbar"},R1={class:"topbar-title"},N1={key:0},$1={class:"content-wrapper"},D1={key:0,class:"card card-warn"},I1={class:"card-content banner-row"},B1={key:0,class:"banner-msg"},V1=["disabled"],F1={key:0,class:"card-content"},U1=["href"],z1={__name:"AdminShell",props:{title:{type:String,required:!0},subtitle:{type:String,default:""}},setup(s){const t=us(),e=ks(),i=vt(()=>t.user.value?.display_name||t.user.value?.email||""),n=vt(()=>!!t.user.value&&!t.user.value?.email_verified_at),r=$(!1),o=$(""),l=$(""),a=$(!1);function h(){a.value=!a.value}function c(){a.value=!1}async function d(){c(),await t.logout(),await e.push("/login")}async function f(){o.value="",l.value="",r.value=!0;try{const p=await nt.request("/api/auth/email-verifications/send",{method:"POST"});o.value=p?.alreadyVerified?"":"",l.value=p?.debugLink||"",await t.refreshUser().catch(()=>null)}catch(p){o.value=p?.message||""}finally{r.value=!1}}return(p,m)=>(C(),M("div",w1,[u("nav",S1,[u("div",x1,[u("button",{class:"menu-toggle",type:"button",onClick:h},[...m[0]||(m[0]=[u("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[u("path",{d:"M3 12h18M3 6h18M3 18h18"})],-1)])]),Y(lt(ct),{to:"/admin",class:"logo"},{default:it(()=>[...m[1]||(m[1]=[u("img",{src:Ss,alt:"Arkilo"},null,-1),u("span",null,"Admin",-1)])]),_:1}),u("div",C1,[Y(lt(ct),{class:"nav-link",to:"/admin/overview"},{default:it(()=>[...m[2]||(m[2]=[ut("",-1)])]),_:1}),Y(lt(ct),{class:"nav-link",to:"/admin/users"},{default:it(()=>[...m[3]||(m[3]=[ut("",-1)])]),_:1}),Y(lt(ct),{class:"nav-link",to:"/admin/subscriptions"},{default:it(()=>[...m[4]||(m[4]=[ut("",-1)])]),_:1}),Y(lt(ct),{class:"nav-link",to:"/admin/activation-codes"},{default:it(()=>[...m[5]||(m[5]=[ut("",-1)])]),_:1}),Y(lt(ct),{class:"nav-link",to:"/admin/providers"},{default:it(()=>[...m[6]||(m[6]=[ut("",-1)])]),_:1}),Y(lt(ct),{class:"nav-link",to:"/app"},{default:it(()=>[...m[7]||(m[7]=[ut("",-1)])]),_:1})]),u("div",E1,[u("span",k1,x(i.value),1),u("button",{class:"btn btn-sm btn-secondary",type:"button",onClick:d},"")])])]),u("div",{class:ue(["drawer-overlay",{active:a.value}]),onClick:c},null,2),u("aside",{class:ue(["drawer",{open:a.value}])},[u("div",T1,[Y(lt(ct),{to:"/admin",class:"logo",onClick:c},{default:it(()=>[...m[8]||(m[8]=[u("img",{src:Ss,alt:"Arkilo"},null,-1),u("span",null,"Admin",-1)])]),_:1}),u("button",{class:"drawer-close",type:"button",onClick:c},[...m[9]||(m[9]=[u("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[u("path",{d:"M18 6L6 18M6 6l12 12"})],-1)])])]),u("nav",M1,[Y(lt(ct),{class:"drawer-link",to:"/admin/overview",onClick:c},{default:it(()=>[...m[10]||(m[10]=[ut("",-1)])]),_:1}),Y(lt(ct),{class:"drawer-link",to:"/admin/users",onClick:c},{default:it(()=>[...m[11]||(m[11]=[ut("",-1)])]),_:1}),Y(lt(ct),{class:"drawer-link",to:"/admin/subscriptions",onClick:c},{default:it(()=>[...m[12]||(m[12]=[ut("",-1)])]),_:1}),Y(lt(ct),{class:"drawer-link",to:"/admin/activation-codes",onClick:c},{default:it(()=>[...m[13]||(m[13]=[ut("",-1)])]),_:1}),Y(lt(ct),{class:"drawer-link",to:"/admin/providers",onClick:c},{default:it(()=>[...m[14]||(m[14]=[ut("",-1)])]),_:1}),m[16]||(m[16]=u("div",{class:"drawer-divider"},null,-1)),Y(lt(ct),{class:"drawer-link",to:"/app",onClick:c},{default:it(()=>[...m[15]||(m[15]=[ut("",-1)])]),_:1})]),u("div",A1,[u("div",O1,x(i.value),1),u("button",{class:"btn btn-secondary btn-full",type:"button",onClick:d},"")])],2),u("main",L1,[u("header",P1,[u("div",R1,[u("h1",null,x(s.title),1),s.subtitle?(C(),M("p",N1,x(s.subtitle),1)):j("",!0)])]),u("div",$1,[n.value?(C(),M("div",D1,[u("div",I1,[u("div",null,[m[17]||(m[17]=u("div",{class:"banner-title"},"",-1)),m[18]||(m[18]=u("div",{class:"text-muted"},"",-1)),o.value?(C(),M("div",B1,x(o.value),1)):j("",!0)]),u("button",{class:"btn btn-primary",type:"button",disabled:r.value,onClick:f},x(r.value?"...":""),9,V1)]),l.value?(C(),M("div",F1,[m[19]||(m[19]=u("div",{class:"text-muted"}," SMTP",-1)),u("a",{class:"link",href:l.value},x(l.value),9,U1)])):j("",!0)])):j("",!0),bu(p.$slots,"default",{},void 0)])])]))}},Js=hs(z1,[["__scopeId","data-v-8c531746"]]),q1={class:"grid grid-3"},W1={class:"card"},H1={class:"card-content"},K1={class:"metric"},j1={class:"card"},G1={class:"card-content"},J1={class:"metric"},X1={class:"card"},Y1={class:"card-content"},Q1={class:"metric"},Z1={class:"card"},tw={class:"card-content banner-row"},ew={class:"input-with-button"},sw=["disabled"],iw={class:"card-content"},nw={class:"grid grid-2"},rw={key:0,class:"form-error mt-16"},ow={class:"card"},lw={class:"card-content"},aw={class:"mt-16"},uw={class:"data-table"},hw={key:0},cw={__name:"AdminDashboardPage",setup(s){const t=$(null),e=$(null),i=$(30),n=$(!1),r=$(""),o=$({users:0,organizations:0,activeSubscriptions:0}),l=$([]);let a=null,h=null,c=null,d=null;function f(g){return Array.isArray(g)?g.map(y=>({time:y.day,value:Number(y.count||0)})).filter(y=>typeof y.time=="string"&&Number.isFinite(y.value)):[]}function p(){!t.value||!e.value||(a||(a=Gr(t.value,{height:220,layout:{background:{color:"transparent"}}}),c=a.addLineSeries()),h||(h=Gr(e.value,{height:220,layout:{background:{color:"transparent"}}}),d=h.addLineSeries()))}async function m(){r.value="",n.value=!0;try{const g=await nt.request(`/api/admin/stats/overview?days=${encodeURIComponent(i.value)}`);o.value=g.totals||o.value,l.value=g.byPlan||[],p(),c?.setData(f(g.series?.users||[])),d?.setData(f(g.series?.subscriptions||[])),a?.timeScale().fitContent(),h?.timeScale().fitContent()}catch(g){r.value=g?.message||""}finally{n.value=!1}}return re(()=>{p(),m()}),gu(()=>{a?.remove(),h?.remove(),a=null,h=null,c=null,d=null}),(g,y)=>(C(),qt(Js,{title:"",subtitle:""},{default:it(()=>[u("div",q1,[u("div",W1,[u("div",H1,[y[1]||(y[1]=u("div",{class:"text-muted"},"",-1)),u("div",K1,x(o.value.users),1)])]),u("div",j1,[u("div",G1,[y[2]||(y[2]=u("div",{class:"text-muted"},"",-1)),u("div",J1,x(o.value.organizations),1)])]),u("div",X1,[u("div",Y1,[y[3]||(y[3]=u("div",{class:"text-muted"},"",-1)),u("div",Q1,x(o.value.activeSubscriptions),1)])])]),u("div",Z1,[u("div",tw,[y[5]||(y[5]=u("div",null,[u("div",{class:"card-title"},""),u("div",{class:"text-muted"}," Stripe/")],-1)),u("div",ew,[st(u("select",{"onUpdate:modelValue":y[0]||(y[0]=_=>i.value=_),class:"form-input"},[...y[4]||(y[4]=[u("option",{value:7}," 7 ",-1),u("option",{value:30}," 30 ",-1),u("option",{value:90}," 90 ",-1)])],512),[[Pe,i.value,void 0,{number:!0}]]),u("button",{class:"btn btn-secondary",type:"button",disabled:n.value,onClick:m},x(n.value?"...":""),9,sw)])]),u("div",iw,[u("div",nw,[u("div",null,[y[6]||(y[6]=u("div",{class:"text-muted"},"",-1)),u("div",{ref_key:"usersChartEl",ref:t,class:"chart-box"},null,512)]),u("div",null,[y[7]||(y[7]=u("div",{class:"text-muted"},"",-1)),u("div",{ref_key:"subsChartEl",ref:e,class:"chart-box"},null,512)])]),r.value?(C(),M("p",rw,x(r.value),1)):j("",!0)])]),u("div",ow,[u("div",lw,[y[10]||(y[10]=u("div",{class:"card-title"},"",-1)),y[11]||(y[11]=u("div",{class:"text-muted"},"",-1)),u("div",aw,[u("table",uw,[y[9]||(y[9]=u("thead",null,[u("tr",null,[u("th",null,""),u("th",null,""),u("th",null,""),u("th",null,""),u("th",null,"")])],-1)),u("tbody",null,[(C(!0),M(mt,null,Xt(l.value,_=>(C(),M("tr",{key:_.planCode},[u("td",null,x(_.planCode),1),u("td",null,x(_.activeOrganizations),1),u("td",null,x(_.activeSubscriptions),1),u("td",null,x(_.totalSubscriptions),1),u("td",null,x(_.totalOrganizations),1)]))),128)),l.value.length?j("",!0):(C(),M("tr",hw,[...y[8]||(y[8]=[u("td",{colspan:"5",class:"text-muted"},"",-1)])]))])])])])])]),_:1}))}},dw=hs(cw,[["__scopeId","data-v-3c840957"]]),fw={class:"card"},pw={class:"card-content banner-row"},mw={class:"input-with-button",style:{width:"100%"}},vw=["disabled"],gw={class:"card-content"},bw={key:0,class:"form-error"},yw={class:"data-table"},_w={class:"input-with-button"},ww=["disabled","onClick"],Sw=["disabled","onClick"],xw=["disabled","onClick"],Cw=["onClick"],Ew=["disabled","onClick"],kw={key:0},Tw={class:"mt-16 input-with-button"},Mw=["disabled"],Aw={class:"text-muted"},Ow=["disabled"],Lw={key:0,class:"card"},Pw={class:"card-content"},Rw={class:"grid grid-3 mt-16"},Nw={class:"form-group"},$w={class:"form-group"},Dw={class:"form-group"},Iw={class:"input-with-button mt-16"},Bw=["disabled"],Vw=["disabled"],Fw={key:0,class:"form-error mt-16"},Xi=50,Uw={__name:"AdminUsersPage",setup(s){const t=$(""),e=$([]),i=$(0),n=$(!1),r=$(""),o=$(""),l=$(0),a=$(null),h=$({id:"",email:"",displayName:"",status:"active"}),c=$(!1),d=$("");function f(B){if(!B)return"-";try{return new Date(B).toISOString().replace("T"," ").slice(0,19)}catch{return String(B)}}async function p(){r.value="",n.value=!0;try{const B=new URLSearchParams({limit:String(Xi),offset:String(l.value),q:t.value.trim()}),T=await nt.request(`/api/admin/users?${B.toString()}`);e.value=T.items||[],i.value=Number(T.total||0)}catch(B){r.value=B?.message||""}finally{n.value=!1}}async function m(){l.value=0,await p()}async function g(B){const T=B.status==="disabled"?"active":"disabled",w=T==="disabled"?"":"";if(window.confirm(`${w}${B.email}`)){o.value=B.id;try{await nt.request(`/api/admin/users/${encodeURIComponent(B.id)}`,{method:"PATCH",body:{status:T}}),await p()}catch(H){r.value=H?.message||""}finally{o.value=""}}}async function y(B){if(window.confirm(`${B.email}`)){o.value=B.id;try{await nt.request(`/api/admin/users/${encodeURIComponent(B.id)}/revoke-sessions`,{method:"POST"})}catch(T){r.value=T?.message||""}finally{o.value=""}}}function _(B){a.value=B,h.value={id:B.id,email:B.email,displayName:B.display_name||"",status:B.status||"active"},d.value=""}function E(){a.value=null}async function F(){d.value="",c.value=!0;try{const B={email:h.value.email.trim(),displayName:h.value.displayName.trim()||null,status:h.value.status};await nt.request(`/api/admin/users/${encodeURIComponent(h.value.id)}`,{method:"PATCH",body:B}),a.value=null,await p()}catch(B){d.value=B?.message||""}finally{c.value=!1}}async function I(B){const T=window.prompt(" IDUUIDID","");if(T===null)return;if(T.trim()!==B.id)return r.value="ID  UUID/";const w=window.prompt("","");if(w===null)return;if(w.trim().toLowerCase()!==String(B.email||"").toLowerCase())return r.value="";const H=window.prompt(" DELETE","");if(H===null)return;if(H.trim()!=="DELETE")return r.value=" DELETE";const At=window.prompt("","")??"";o.value=B.id;try{await nt.request(`/api/admin/users/${encodeURIComponent(B.id)}/delete`,{method:"POST",body:{confirmUserId:B.id,confirmEmail:B.email,confirmText:"DELETE",note:At.trim()||void 0}}),a.value=null,await p()}catch(Tt){r.value=Tt?.message||""}finally{o.value=""}}async function X(B){const T=String(B||"").trim();if(T)try{await navigator.clipboard.writeText(T)}catch{window.prompt("",T)}}function rt(){l.value=Math.max(0,l.value-Xi),p()}function tt(){l.value+=Xi,p()}return re(p),(B,T)=>(C(),qt(Js,{title:"",subtitle:"/"},{default:it(()=>[u("div",fw,[u("div",pw,[u("div",mw,[st(u("input",{"onUpdate:modelValue":T[0]||(T[0]=w=>t.value=w),class:"form-input",placeholder:" / ",onKeydown:_o(m,["enter"])},null,544),[[dt,t.value]]),u("button",{class:"btn btn-secondary",type:"button",disabled:n.value,onClick:m},x(n.value?"...":""),9,vw)])]),u("div",gw,[r.value?(C(),M("p",bw,x(r.value),1)):j("",!0),u("table",yw,[T[5]||(T[5]=u("thead",null,[u("tr",null,[u("th",null,"ID"),u("th",null,""),u("th",null,""),u("th",null,""),u("th",null,""),u("th",null,"/"),u("th",null,""),u("th",null,"")])],-1)),u("tbody",null,[(C(!0),M(mt,null,Xt(e.value,w=>(C(),M("tr",{key:w.id},[u("td",null,[u("code",null,x(w.id),1)]),u("td",null,x(w.email),1),u("td",null,x(w.display_name||"-"),1),u("td",null,x(w.status),1),u("td",null,x(w.email_verified_at?"":"-"),1),u("td",null,x(w.deleted_at?f(w.deleted_at):"-"),1),u("td",null,x(f(w.created_at)),1),u("td",null,[u("div",_w,[u("button",{class:"btn btn-secondary btn-sm",type:"button",disabled:o.value===w.id||!!w.deleted_at,onClick:H=>g(w)},x(w.status==="disabled"?"":""),9,ww),u("button",{class:"btn btn-danger btn-sm",type:"button",disabled:o.value===w.id||!!w.deleted_at,onClick:H=>y(w)},"  ",8,Sw),u("button",{class:"btn btn-secondary btn-sm",type:"button",disabled:o.value===w.id||!!w.deleted_at,onClick:H=>_(w)},"  ",8,xw),u("button",{class:"btn btn-secondary btn-sm",type:"button",onClick:H=>X(w.id)}," ID ",8,Cw),u("button",{class:"btn btn-danger btn-sm",type:"button",disabled:o.value===w.id||!!w.deleted_at,onClick:H=>I(w)},"  ",8,Ew)])])]))),128)),!e.value.length&&!n.value?(C(),M("tr",kw,[...T[4]||(T[4]=[u("td",{colspan:"8",class:"text-muted"},"",-1)])])):j("",!0)])]),u("div",Tw,[u("button",{class:"btn btn-secondary",type:"button",disabled:n.value||l.value===0,onClick:rt},"  ",8,Mw),u("div",Aw," "+x(i.value)+" ",1),u("button",{class:"btn btn-secondary",type:"button",disabled:n.value||l.value+Xi>=i.value,onClick:tt},"  ",8,Ow)])])]),a.value?(C(),M("div",Lw,[u("div",Pw,[T[10]||(T[10]=u("div",{class:"card-title"},"",-1)),u("div",Rw,[u("div",Nw,[T[6]||(T[6]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":T[1]||(T[1]=w=>h.value.email=w),class:"form-input"},null,512),[[dt,h.value.email]])]),u("div",$w,[T[7]||(T[7]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":T[2]||(T[2]=w=>h.value.displayName=w),class:"form-input"},null,512),[[dt,h.value.displayName]])]),u("div",Dw,[T[9]||(T[9]=u("label",{class:"form-label"},"",-1)),st(u("select",{"onUpdate:modelValue":T[3]||(T[3]=w=>h.value.status=w),class:"form-input"},[...T[8]||(T[8]=[u("option",{value:"active"},"active",-1),u("option",{value:"disabled"},"disabled",-1)])],512),[[Pe,h.value.status]])])]),u("div",Iw,[u("button",{class:"btn btn-primary",type:"button",disabled:c.value,onClick:F},x(c.value?"...":""),9,Bw),u("button",{class:"btn btn-secondary",type:"button",disabled:c.value,onClick:E},"",8,Vw)]),d.value?(C(),M("p",Fw,x(d.value),1)):j("",!0)])])):j("",!0)]),_:1}))}},zw={class:"card"},qw={class:"card-content banner-row"},Ww={class:"input-with-button",style:{width:"100%"}},Hw=["disabled"],Kw={class:"card-content"},jw={key:0,class:"form-error"},Gw={class:"data-table"},Jw={key:0},Xw={class:"mt-16 input-with-button"},Yw=["disabled"],Qw={class:"text-muted"},Zw=["disabled"],Yi=50,tS={__name:"AdminOrganizationsPage",setup(s){const t=$(""),e=$([]),i=$(0),n=$(!1),r=$(""),o=$(0);function l(f){if(!f)return"-";try{return new Date(f).toISOString().slice(0,10)}catch{return String(f)}}async function a(){r.value="",n.value=!0;try{const f=new URLSearchParams({limit:String(Yi),offset:String(o.value),q:t.value.trim()}),p=await nt.request(`/api/admin/organizations?${f.toString()}`);e.value=p.items||[],i.value=Number(p.total||0)}catch(f){r.value=f?.message||""}finally{n.value=!1}}async function h(){o.value=0,await a()}function c(){o.value=Math.max(0,o.value-Yi),a()}function d(){o.value+=Yi,a()}return re(a),(f,p)=>(C(),qt(Js,{title:"",subtitle:""},{default:it(()=>[u("div",zw,[u("div",qw,[u("div",Ww,[st(u("input",{"onUpdate:modelValue":p[0]||(p[0]=m=>t.value=m),class:"form-input",placeholder:" / slug",onKeydown:_o(h,["enter"])},null,544),[[dt,t.value]]),u("button",{class:"btn btn-secondary",type:"button",disabled:n.value,onClick:h},x(n.value?"...":""),9,Hw)])]),u("div",Kw,[r.value?(C(),M("p",jw,x(r.value),1)):j("",!0),u("table",Gw,[p[2]||(p[2]=u("thead",null,[u("tr",null,[u("th",null,""),u("th",null,"Slug"),u("th",null,""),u("th",null,""),u("th",null,""),u("th",null,""),u("th",null,"")])],-1)),u("tbody",null,[(C(!0),M(mt,null,Xt(e.value,m=>(C(),M("tr",{key:m.id},[u("td",null,x(m.name),1),u("td",null,[u("code",null,x(m.slug),1)]),u("td",null,x(m.member_count),1),u("td",null,x(m.subscription_plan_code||"-"),1),u("td",null,x(m.subscription_status||"-"),1),u("td",null,x(l(m.subscription_current_period_end)),1),u("td",null,x(l(m.created_at)),1)]))),128)),!e.value.length&&!n.value?(C(),M("tr",Jw,[...p[1]||(p[1]=[u("td",{colspan:"7",class:"text-muted"},"",-1)])])):j("",!0)])]),u("div",Xw,[u("button",{class:"btn btn-secondary",type:"button",disabled:n.value||o.value===0,onClick:c},"  ",8,Yw),u("div",Qw," "+x(i.value)+" ",1),u("button",{class:"btn btn-secondary",type:"button",disabled:n.value||o.value+Yi>=i.value,onClick:d},"  ",8,Zw)])])])]),_:1}))}},eS={class:"card"},sS={class:"card-content"},iS={class:"grid grid-3"},nS={class:"form-group"},rS={class:"form-group"},oS={class:"form-group"},lS={class:"input-with-button"},aS=["disabled"],uS={key:0,class:"form-error mt-16"},hS={class:"mt-16"},cS={class:"data-table"},dS={class:"text-muted"},fS={class:"input-with-button"},pS=["disabled","onClick"],mS=["disabled","onClick"],vS={key:0},gS={class:"mt-16 input-with-button"},bS=["disabled"],yS={class:"text-muted"},_S=["disabled"],wS={key:0,class:"card"},SS={class:"card-content"},xS={class:"grid grid-3 mt-16"},CS={class:"form-group"},ES={class:"form-group"},kS={class:"form-group"},TS={class:"grid grid-3 mt-16"},MS={class:"form-group"},AS={class:"form-group"},OS={class:"input-with-button mt-16"},LS=["disabled"],PS=["disabled"],RS={key:0,class:"form-error mt-16"},Qi=50,NS={__name:"AdminSubscriptionsPage",setup(s){const t=$(""),e=$(""),i=$(""),n=$([]),r=$(0),o=$(!1),l=$(""),a=$(null),h=$({planCode:"",status:"",currentPeriodEndLocal:"",extendDays:null,cancelAtPeriodEnd:null}),c=$(""),d=$(""),f=$(0);function p(B){if(!B)return"-";try{return new Date(B).toISOString().replace("T"," ").slice(0,19)}catch{return String(B)}}function m(B){if(!B)return"";try{const T=new Date(B),w=H=>String(H).padStart(2,"0");return`${T.getFullYear()}-${w(T.getMonth()+1)}-${w(T.getDate())}T${w(T.getHours())}:${w(T.getMinutes())}`}catch{return""}}function g(B){const T=String(B||"").trim();if(!T)return"";const w=new Date(T);return Number.isFinite(w.getTime())?w.toISOString():""}async function y(){l.value="",o.value=!0;try{const B=new URLSearchParams({limit:String(Qi),offset:String(f.value),q:t.value.trim(),provider:e.value,status:i.value}),T=await nt.request(`/api/admin/subscriptions?${B.toString()}`);n.value=T.items||[],r.value=Number(T.total||0)}catch(B){l.value=B?.message||""}finally{o.value=!1}}function _(B){a.value=B,h.value={planCode:B.plan_code||"",status:B.status||"",currentPeriodEndLocal:m(B.current_period_end),extendDays:null,cancelAtPeriodEnd:null},d.value=""}function E(){a.value=null}async function F(){if(a.value){d.value="",c.value=a.value.id;try{const B={planCode:h.value.planCode.trim()||void 0,status:h.value.status.trim()||void 0,currentPeriodEnd:g(h.value.currentPeriodEndLocal)||void 0,extendDays:h.value.extendDays?Number(h.value.extendDays):void 0,cancelAtPeriodEnd:h.value.cancelAtPeriodEnd===null?void 0:!!h.value.cancelAtPeriodEnd};if(B.currentPeriodEnd&&B.extendDays)return d.value="";await nt.request(`/api/admin/subscriptions/${encodeURIComponent(a.value.id)}`,{method:"PATCH",body:B}),a.value=null,await y()}catch(B){d.value=B?.message||""}finally{c.value=""}}}async function I(B){c.value=B.id;try{await nt.request("/api/admin/stripe/subscriptions/sync",{method:"POST",body:{organizationId:B.organization_id}}),await y()}catch(T){l.value=T?.message||""}finally{c.value=""}}async function X(){f.value=0,await y()}function rt(){f.value=Math.max(0,f.value-Qi),y()}function tt(){f.value+=Qi,y()}return re(y),(B,T)=>(C(),qt(Js,{title:"",subtitle:""},{default:it(()=>[u("div",eS,[u("div",sS,[u("div",iS,[u("div",nS,[T[8]||(T[8]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":T[0]||(T[0]=w=>t.value=w),class:"form-input",placeholder:" / slug",onKeydown:_o(X,["enter"])},null,544),[[dt,t.value]])]),u("div",rS,[T[10]||(T[10]=u("label",{class:"form-label"},"Provider",-1)),st(u("select",{"onUpdate:modelValue":T[1]||(T[1]=w=>e.value=w),class:"form-input"},[...T[9]||(T[9]=[u("option",{value:""},"",-1),u("option",{value:"stripe"},"stripe",-1),u("option",{value:"activation_code"},"activation_code",-1)])],512),[[Pe,e.value]])]),u("div",oS,[T[12]||(T[12]=u("label",{class:"form-label"},"",-1)),st(u("select",{"onUpdate:modelValue":T[2]||(T[2]=w=>i.value=w),class:"form-input"},[...T[11]||(T[11]=[u("option",{value:""},"",-1),u("option",{value:"active"},"active",-1),u("option",{value:"canceled"},"canceled",-1),u("option",{value:"incomplete"},"incomplete",-1),u("option",{value:"incomplete_expired"},"incomplete_expired",-1),u("option",{value:"past_due"},"past_due",-1),u("option",{value:"unpaid"},"unpaid",-1)])],512),[[Pe,i.value]])])]),u("div",lS,[u("button",{class:"btn btn-secondary",type:"button",disabled:o.value,onClick:X},x(o.value?"...":""),9,aS)]),l.value?(C(),M("p",uS,x(l.value),1)):j("",!0),u("div",hS,[u("table",cS,[T[14]||(T[14]=u("thead",null,[u("tr",null,[u("th",null,""),u("th",null,""),u("th",null,"Provider"),u("th",null,""),u("th",null,""),u("th",null,""),u("th",null,"")])],-1)),u("tbody",null,[(C(!0),M(mt,null,Xt(n.value,w=>(C(),M("tr",{key:w.id},[u("td",null,[ut(x(w.organization_name)+" ",1),u("span",dS,"("+x(w.organization_slug)+")",1)]),u("td",null,x(w.plan_code),1),u("td",null,x(w.provider),1),u("td",null,x(w.status),1),u("td",null,x(p(w.current_period_end)),1),u("td",null,x(p(w.created_at)),1),u("td",null,[u("div",fS,[u("button",{class:"btn btn-secondary btn-sm",type:"button",disabled:c.value===w.id||w.provider!=="activation_code",onClick:H=>_(w)},"  ",8,pS),u("button",{class:"btn btn-secondary btn-sm",type:"button",disabled:c.value===w.id||w.provider!=="stripe",onClick:H=>I(w)},"  ",8,mS)])])]))),128)),!n.value.length&&!o.value?(C(),M("tr",vS,[...T[13]||(T[13]=[u("td",{colspan:"7",class:"text-muted"},"",-1)])])):j("",!0)])])]),u("div",gS,[u("button",{class:"btn btn-secondary",type:"button",disabled:o.value||f.value===0,onClick:rt},"  ",8,bS),u("div",yS," "+x(r.value)+" ",1),u("button",{class:"btn btn-secondary",type:"button",disabled:o.value||f.value+Qi>=r.value,onClick:tt},"  ",8,_S)])])]),a.value?(C(),M("div",wS,[u("div",SS,[T[21]||(T[21]=u("div",{class:"card-title"},"",-1)),T[22]||(T[22]=u("div",{class:"text-muted mt-16"},"Stripe  Stripe ",-1)),u("div",xS,[u("div",CS,[T[15]||(T[15]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":T[3]||(T[3]=w=>h.value.planCode=w),class:"form-input"},null,512),[[dt,h.value.planCode]])]),u("div",ES,[T[16]||(T[16]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":T[4]||(T[4]=w=>h.value.status=w),class:"form-input"},null,512),[[dt,h.value.status]])]),u("div",kS,[T[17]||(T[17]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":T[5]||(T[5]=w=>h.value.currentPeriodEndLocal=w),class:"form-input",type:"datetime-local"},null,512),[[dt,h.value.currentPeriodEndLocal]])])]),u("div",TS,[u("div",MS,[T[18]||(T[18]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":T[6]||(T[6]=w=>h.value.extendDays=w),class:"form-input",type:"number",min:"1",max:"3650"},null,512),[[dt,h.value.extendDays,void 0,{number:!0}]])]),u("div",AS,[T[20]||(T[20]=u("label",{class:"form-label"},"",-1)),st(u("select",{"onUpdate:modelValue":T[7]||(T[7]=w=>h.value.cancelAtPeriodEnd=w),class:"form-input"},[...T[19]||(T[19]=[u("option",{value:null},"",-1),u("option",{value:!0},"true",-1),u("option",{value:!1},"false",-1)])],512),[[Pe,h.value.cancelAtPeriodEnd]])])]),u("div",OS,[u("button",{class:"btn btn-primary",type:"button",disabled:c.value===a.value.id,onClick:F},x(c.value===a.value.id?"...":""),9,LS),u("button",{class:"btn btn-secondary",type:"button",disabled:c.value===a.value.id,onClick:E},"",8,PS)]),d.value?(C(),M("p",RS,x(d.value),1)):j("",!0)])])):j("",!0)]),_:1}))}},$S={class:"card"},DS={class:"grid grid-3"},IS={class:"form-group"},BS={class:"form-group"},VS={class:"form-group"},FS={class:"grid grid-3"},US={class:"form-group"},zS={class:"form-group"},qS={class:"form-group"},WS=["disabled"],HS={key:0,class:"form-error"},KS={key:1,class:"form-success"},jS={key:2,class:"mt-16"},GS={class:"data-table"},JS={class:"card"},XS={class:"card-content"},YS=["disabled"],QS={key:0,class:"form-error"},ZS={class:"mt-16"},tx={class:"data-table"},ex=["disabled","onClick"],sx={__name:"AdminActivationCodesPage",setup(s){const t=ks(),e=Vt({planCode:"monthly",durationDays:30,count:1,maxRedemptions:1,expiresAt:"",note:""}),i=$([]),n=$([]),r=$(!1),o=$(""),l=$(!1),a=$(""),h=$("");function c(m){if(!m)return"-";try{return new Date(m).toISOString().slice(0,10)}catch{return String(m)}}async function d(){a.value="",l.value=!0;try{const m=await nt.request("/api/admin/activation-codes?limit=50&offset=0");i.value=m.items||[]}catch(m){if(m?.status===403)return t.push("/app");a.value=m?.message||""}finally{l.value=!1}}async function f(){o.value="",n.value=[],r.value=!0;try{const m={planCode:e.planCode.trim(),durationDays:Number(e.durationDays),count:Number(e.count||1),maxRedemptions:Number(e.maxRedemptions||1),note:e.note.trim()||void 0};e.expiresAt.trim()&&(m.expiresAt=e.expiresAt.trim());const g=await nt.request("/api/admin/activation-codes",{method:"POST",body:m});n.value=g.codes||[],await d()}catch(m){if(m?.status===403)return t.push("/app");o.value=m?.message||""}finally{r.value=!1}}async function p(m){h.value=m;try{await nt.request(`/api/admin/activation-codes/${encodeURIComponent(m)}/revoke`,{method:"POST"}),await d()}catch(g){a.value=g?.message||""}finally{h.value=""}}return re(d),(m,g)=>(C(),qt(Js,{title:"",subtitle:""},{default:it(()=>[u("div",$S,[g[13]||(g[13]=u("h2",{class:"card-title"},"",-1)),u("form",{class:"card-content",onSubmit:ws(f,["prevent"])},[u("div",DS,[u("div",IS,[g[6]||(g[6]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":g[0]||(g[0]=y=>e.planCode=y),class:"form-input",placeholder:"monthly / yearly",required:""},null,512),[[dt,e.planCode]])]),u("div",BS,[g[7]||(g[7]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":g[1]||(g[1]=y=>e.durationDays=y),class:"form-input",type:"number",min:"1",required:""},null,512),[[dt,e.durationDays,void 0,{number:!0}]])]),u("div",VS,[g[8]||(g[8]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":g[2]||(g[2]=y=>e.count=y),class:"form-input",type:"number",min:"1",max:"100"},null,512),[[dt,e.count,void 0,{number:!0}]])])]),u("div",FS,[u("div",US,[g[9]||(g[9]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":g[3]||(g[3]=y=>e.maxRedemptions=y),class:"form-input",type:"number",min:"1",max:"1000"},null,512),[[dt,e.maxRedemptions,void 0,{number:!0}]])]),u("div",zS,[g[10]||(g[10]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":g[4]||(g[4]=y=>e.expiresAt=y),class:"form-input",placeholder:"2026-01-01T00:00:00.000Z"},null,512),[[dt,e.expiresAt]])]),u("div",qS,[g[11]||(g[11]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":g[5]||(g[5]=y=>e.note=y),class:"form-input",maxlength:"2000"},null,512),[[dt,e.note]])])]),u("button",{class:"btn btn-primary",type:"submit",disabled:r.value},x(r.value?"...":""),9,WS),o.value?(C(),M("p",HS,x(o.value),1)):j("",!0),n.value.length?(C(),M("p",KS," "+x(n.value.length)+" ",1)):j("",!0),n.value.length?(C(),M("div",jS,[u("table",GS,[g[12]||(g[12]=u("thead",null,[u("tr",null,[u("th",null,""),u("th",null,""),u("th",null,""),u("th",null,""),u("th",null,"")])],-1)),u("tbody",null,[(C(!0),M(mt,null,Xt(n.value,y=>(C(),M("tr",{key:y.id},[u("td",null,[u("code",null,x(y.plaintext),1)]),u("td",null,x(y.plan_code),1),u("td",null,x(y.duration_days),1),u("td",null,x(y.max_redemptions),1),u("td",null,x(c(y.expires_at)),1)]))),128))])])])):j("",!0)],32)]),u("div",JS,[g[15]||(g[15]=u("h2",{class:"card-title"},"",-1)),u("div",XS,[u("button",{class:"btn btn-secondary",type:"button",onClick:d,disabled:l.value},x(l.value?"...":""),9,YS),a.value?(C(),M("p",QS,x(a.value),1)):j("",!0),u("div",ZS,[u("table",tx,[g[14]||(g[14]=u("thead",null,[u("tr",null,[u("th",null,"ID"),u("th",null,""),u("th",null,""),u("th",null,""),u("th",null,""),u("th",null,""),u("th",null,""),u("th",null,""),u("th",null,"")])],-1)),u("tbody",null,[(C(!0),M(mt,null,Xt(i.value,y=>(C(),M("tr",{key:y.id},[u("td",null,[u("code",null,x(y.id),1)]),u("td",null,x(y.plan_code),1),u("td",null,x(y.duration_days),1),u("td",null,x(y.redeemed_count),1),u("td",null,x(y.max_redemptions),1),u("td",null,x(c(y.expires_at)),1),u("td",null,x(y.revoked_at?"":"-"),1),u("td",null,x(c(y.created_at)),1),u("td",null,[u("button",{class:"btn btn-danger btn-sm",type:"button",disabled:!!y.revoked_at||h.value===y.id,onClick:_=>p(y.id)},x(h.value===y.id?"...":""),9,ex)])]))),128))])])])])])]),_:1}))}},ix={class:"card"},nx={class:"grid grid-3"},rx={class:"form-group"},ox={class:"form-group"},lx={class:"form-group"},ax={class:"grid grid-3"},ux={class:"form-group"},hx={class:"form-group"},cx={class:"form-group"},dx={class:"form-group"},fx=["disabled"],px={key:0,class:"form-error"},mx={class:"card"},vx={class:"card-content"},gx={class:"grid grid-2"},bx={class:"form-group"},yx=["value"],_x={class:"form-group"},wx={key:0,class:"form-error"},Sx={key:1,class:"form-success"},xx=["disabled"],Cx={class:"card"},Ex={class:"card-content"},kx=["disabled"],Tx={key:0,class:"form-error"},Mx={class:"mt-16"},Ax={class:"data-table"},Ox={key:0,class:"text-muted"},Lx={key:1,class:"form-success"},Px={key:2,class:"text-muted"},Rx=["onClick"],Nx={class:"grid grid-3"},$x={class:"form-group"},Dx={class:"form-group"},Ix={class:"form-group"},Bx={class:"form-group"},Vx={class:"grid grid-3"},Fx={class:"form-group"},Ux={class:"form-group"},zx={class:"input-with-button"},qx=["disabled"],Wx={key:0,class:"form-error"},Hx={__name:"AdminAIProvidersPage",setup(s){const t=ks(),e=$([]),i=$(!1),n=$(""),r=Vt({code:"",displayName:"",modelName:"",baseUrl:"",multiplier:1,isActive:!0,remark:""}),o=$(!1),l=$(""),a=$(null),h=Vt({id:"",displayName:"",modelName:"",baseUrl:"",multiplier:1,isActive:!0,remark:""}),c=$(!1),d=$(""),f=$(null),p=Vt({}),m=Vt({providerId:"",apiKey:""}),g=$(!1),y=$(""),_=$(""),E=$([]);async function F(){n.value="",i.value=!0;try{const[T,w]=await Promise.all([nt.request("/api/admin/ai-providers?limit=200&offset=0"),nt.request("/api/saas/ai/state")]);e.value=T.items||[],E.value=(e.value||[]).filter(At=>!!At.is_active),Object.keys(p).forEach(At=>delete p[At]);const H=w?.providers?.items||[];for(const At of H)p[At.id]=!!At.hasKey}catch(T){if(T?.status===403)return t.push("/app");n.value=T?.message||""}finally{i.value=!1}}async function I(){l.value="",o.value=!0;try{const T={code:r.code.trim(),displayName:r.displayName.trim(),modelName:r.modelName.trim(),baseUrl:r.baseUrl.trim()||void 0,remark:r.remark.trim()||void 0,multiplier:Number(r.multiplier||1),isActive:!!r.isActive};await nt.request("/api/admin/ai-providers",{method:"POST",body:T}),r.code="",r.displayName="",r.modelName="",r.baseUrl="",r.remark="",r.multiplier=1,r.isActive=!0,await F()}catch(T){if(T?.status===403)return t.push("/app");l.value=T?.message||""}finally{o.value=!1}}function X(T){a.value=T,h.id=T.id,h.displayName=T.display_name,h.modelName=T.model_name,h.baseUrl=T.base_url||"",h.remark=T.remark||"",h.multiplier=Number(T.multiplier_x100||100)/100,h.isActive=!!T.is_active,d.value="",_s(()=>{f.value?.scrollIntoView?.({behavior:"smooth",block:"start"})})}function rt(){a.value=null}async function tt(){d.value="",c.value=!0;try{const T={displayName:h.displayName.trim(),modelName:h.modelName.trim(),baseUrl:h.baseUrl.trim()||null,remark:h.remark.trim()||null,multiplier:Number(h.multiplier||1),isActive:!!h.isActive};await nt.request(`/api/admin/ai-providers/${encodeURIComponent(h.id)}`,{method:"PUT",body:T}),a.value=null,await F()}catch(T){if(T?.status===403)return t.push("/app");d.value=T?.message||""}finally{c.value=!1}}async function B(){y.value="",_.value="",g.value=!0;try{if(!m.providerId)throw new Error("");if(!m.apiKey.trim())throw new Error("");await nt.request("/api/saas/ai/providers/set-key",{method:"POST",body:{providerId:m.providerId,apiKey:m.apiKey.trim()}}),_.value="",m.apiKey="",await F()}catch(T){y.value=T?.message||""}finally{g.value=!1}}return re(F),(T,w)=>(C(),qt(Js,{title:"",subtitle:""},{default:it(()=>[u("div",ix,[w[23]||(w[23]=u("h2",{class:"card-title"},"",-1)),u("form",{class:"card-content",onSubmit:ws(I,["prevent"])},[u("div",nx,[u("div",rx,[w[15]||(w[15]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":w[0]||(w[0]=H=>r.code=H),class:"form-input",placeholder:"openai_gpt4o",required:""},null,512),[[dt,r.code]])]),u("div",ox,[w[16]||(w[16]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":w[1]||(w[1]=H=>r.displayName=H),class:"form-input",placeholder:"OpenAI GPT-4o",required:""},null,512),[[dt,r.displayName]])]),u("div",lx,[w[17]||(w[17]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":w[2]||(w[2]=H=>r.modelName=H),class:"form-input",placeholder:"gpt-4o-mini",required:""},null,512),[[dt,r.modelName]])])]),u("div",ax,[u("div",ux,[w[18]||(w[18]=u("label",{class:"form-label"},"API ",-1)),st(u("input",{"onUpdate:modelValue":w[3]||(w[3]=H=>r.baseUrl=H),class:"form-input",placeholder:"https://api.openai.com/v1"},null,512),[[dt,r.baseUrl]])]),u("div",hx,[w[19]||(w[19]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":w[4]||(w[4]=H=>r.multiplier=H),class:"form-input",type:"number",min:"0.01",step:"0.01"},null,512),[[dt,r.multiplier,void 0,{number:!0}]])]),u("div",cx,[w[21]||(w[21]=u("label",{class:"form-label"},"",-1)),st(u("select",{"onUpdate:modelValue":w[5]||(w[5]=H=>r.isActive=H),class:"form-input"},[...w[20]||(w[20]=[u("option",{value:!0},"",-1),u("option",{value:!1},"",-1)])],512),[[Pe,r.isActive]])])]),u("div",dx,[w[22]||(w[22]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":w[6]||(w[6]=H=>r.remark=H),class:"form-input",placeholder:"Anthropic "},null,512),[[dt,r.remark]])]),u("button",{class:"btn btn-primary",type:"submit",disabled:o.value},x(o.value?"...":""),9,fx),l.value?(C(),M("p",px,x(l.value),1)):j("",!0)],32)]),u("div",mx,[w[28]||(w[28]=u("h2",{class:"card-title"},"",-1)),u("div",vx,[w[27]||(w[27]=u("p",{class:"text-muted"},"",-1)),u("div",gx,[u("div",bx,[w[25]||(w[25]=u("label",{class:"form-label"},"",-1)),st(u("select",{"onUpdate:modelValue":w[7]||(w[7]=H=>m.providerId=H),class:"form-input"},[w[24]||(w[24]=u("option",{value:""},"",-1)),(C(!0),M(mt,null,Xt(E.value,H=>(C(),M("option",{key:H.id,value:H.id},x(H.display_name)+" ("+x(H.model_name)+") "+x(p[H.id]?"":""),9,yx))),128))],512),[[Pe,m.providerId]])]),u("div",_x,[w[26]||(w[26]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":w[8]||(w[8]=H=>m.apiKey=H),class:"form-input",placeholder:"sk-..."},null,512),[[dt,m.apiKey]]),y.value?(C(),M("p",wx,x(y.value),1)):j("",!0),_.value?(C(),M("p",Sx,x(_.value),1)):j("",!0)])]),u("button",{class:"btn btn-primary",type:"button",disabled:g.value,onClick:B},x(g.value?"...":""),9,xx)])]),u("div",Cx,[w[30]||(w[30]=u("h2",{class:"card-title"},"",-1)),u("div",Ex,[u("button",{class:"btn btn-secondary",type:"button",onClick:F,disabled:i.value},x(i.value?"...":""),9,kx),n.value?(C(),M("p",Tx,x(n.value),1)):j("",!0),u("div",Mx,[u("table",Ax,[w[29]||(w[29]=u("thead",null,[u("tr",null,[u("th",null,""),u("th",null,""),u("th",null,""),u("th",null,""),u("th",null,""),u("th",null,""),u("th",null,""),u("th",null,"")])],-1)),u("tbody",null,[(C(!0),M(mt,null,Xt(e.value,H=>(C(),M("tr",{key:H.id},[u("td",null,x(H.code),1),u("td",null,x(H.display_name),1),u("td",null,x(H.model_name),1),u("td",null,x(H.remark||"-"),1),u("td",null,x((H.multiplier_x100/100).toFixed(2))+"x",1),u("td",null,x(H.is_active?"":""),1),u("td",null,[H.is_active?p[H.id]?(C(),M("span",Lx,"")):(C(),M("span",Px,"")):(C(),M("span",Ox,"-"))]),u("td",null,[u("button",{class:"btn btn-secondary btn-sm",type:"button",onClick:At=>X(H)},"",8,Rx)])]))),128))])])])])]),a.value?(C(),M("div",{key:0,ref_key:"editCardEl",ref:f,class:"card"},[w[38]||(w[38]=u("h2",{class:"card-title"},"",-1)),u("form",{class:"card-content",onSubmit:ws(tt,["prevent"])},[u("div",Nx,[u("div",$x,[w[31]||(w[31]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":w[9]||(w[9]=H=>h.displayName=H),class:"form-input",required:""},null,512),[[dt,h.displayName]])]),u("div",Dx,[w[32]||(w[32]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":w[10]||(w[10]=H=>h.modelName=H),class:"form-input",required:""},null,512),[[dt,h.modelName]])]),u("div",Ix,[w[33]||(w[33]=u("label",{class:"form-label"},"API ",-1)),st(u("input",{"onUpdate:modelValue":w[11]||(w[11]=H=>h.baseUrl=H),class:"form-input"},null,512),[[dt,h.baseUrl]])])]),u("div",Bx,[w[34]||(w[34]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":w[12]||(w[12]=H=>h.remark=H),class:"form-input"},null,512),[[dt,h.remark]])]),u("div",Vx,[u("div",Fx,[w[35]||(w[35]=u("label",{class:"form-label"},"",-1)),st(u("input",{"onUpdate:modelValue":w[13]||(w[13]=H=>h.multiplier=H),class:"form-input",type:"number",min:"0.01",step:"0.01"},null,512),[[dt,h.multiplier,void 0,{number:!0}]])]),u("div",Ux,[w[37]||(w[37]=u("label",{class:"form-label"},"",-1)),st(u("select",{"onUpdate:modelValue":w[14]||(w[14]=H=>h.isActive=H),class:"form-input"},[...w[36]||(w[36]=[u("option",{value:!0},"",-1),u("option",{value:!1},"",-1)])],512),[[Pe,h.isActive]])])]),u("div",zx,[u("button",{class:"btn btn-primary",type:"submit",disabled:c.value},x(c.value?"...":""),9,qx),u("button",{class:"btn btn-secondary",type:"button",onClick:rt},"")]),d.value?(C(),M("p",Wx,x(d.value),1)):j("",!0)],32)],512)):j("",!0)]),_:1}))}},Kx=[{path:"/",redirect:"/app"},{path:"/login",component:Lp,meta:{guestOnly:!0}},{path:"/register",component:Up,meta:{guestOnly:!0}},{path:"/verify-email",component:Qp},{path:"/app",component:Xm,meta:{requiresAuth:!0}},{path:"/app/ai",component:R_,meta:{requiresAuth:!0}},{path:"/app/providers",component:_1,meta:{requiresAuth:!0}},{path:"/app/subscription",component:Bv,meta:{requiresAuth:!0}},{path:"/app/admin/codes",redirect:"/admin/activation-codes"},{path:"/app/admin/providers",redirect:"/admin/providers"},{path:"/admin",redirect:"/admin/overview"},{path:"/admin/overview",component:dw,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/users",component:Uw,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/organizations",component:tS,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/subscriptions",component:NS,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/activation-codes",component:sx,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/providers",component:Hx,meta:{requiresAuth:!0,requiresAdmin:!0}}],zh=pp({history:Gf(),routes:Kx});zh.beforeEach(async s=>{const t=us();return t.initialized.value||await t.init(),s.meta.requiresAuth&&!t.user.value?"/login":s.meta.requiresAdmin&&!t.isAdmin.value||s.meta.guestOnly&&t.user.value?"/app":!0});const qh=af(mp),jx=us();await jx.init();qh.use(zh);qh.mount("#app");
